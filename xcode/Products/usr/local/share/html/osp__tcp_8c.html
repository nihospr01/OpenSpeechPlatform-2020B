<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open Speech Platform: libosp/osp_tcp/osp_tcp.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open Speech Platform
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('osp__tcp_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">osp_tcp.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="osp__tcp_8h_source.html">osp_tcp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tcplib_8h_source.html">tcplib.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="jsmn_8h_source.html">jsmn.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for osp_tcp.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="osp__tcp_8c__incl.svg" width="627" height="270"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosp__tcp__t.html">osp_tcp_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data structure containing OSP TCP layer internal variables.  <a href="structosp__tcp__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a66a4118cf6fedab06aa795581935fd03"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#a66a4118cf6fedab06aa795581935fd03">jsoneq</a> (const char *json, <a class="el" href="structjsmntok__t.html">jsmntok_t</a> *tok, const char *s)</td></tr>
<tr class="separator:a66a4118cf6fedab06aa795581935fd03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a192f28ce7cdcc8d994e79140b3ea4fcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#a192f28ce7cdcc8d994e79140b3ea4fcd">get_int_from_SubString</a> (const char *input, int offset, int len)</td></tr>
<tr class="separator:a192f28ce7cdcc8d994e79140b3ea4fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5fada0136f276b505ab711c7e1c7bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#a4a5fada0136f276b505ab711c7e1c7bf">get_float_from_SubString</a> (const char *input, int offset, int len)</td></tr>
<tr class="separator:a4a5fada0136f276b505ab711c7e1c7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c126a45386214aac909bc2b819a6d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#ae6c126a45386214aac909bc2b819a6d3">osp_tcp_init</a> (int port)</td></tr>
<tr class="memdesc:ae6c126a45386214aac909bc2b819a6d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization function for the OSP TCP layer.  <a href="#ae6c126a45386214aac909bc2b819a6d3">More...</a><br /></td></tr>
<tr class="separator:ae6c126a45386214aac909bc2b819a6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab649aa1c24117770ecca7de43f94a3e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#ab649aa1c24117770ecca7de43f94a3e8">osp_tcp_connect</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp)</td></tr>
<tr class="memdesc:ab649aa1c24117770ecca7de43f94a3e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocking call that sets up server socket and waits for client connection In order to start a socket for a client (Android tablet, for instance), this must be called. It will block until a client establishes a connection, at which point it will return 0.  <a href="#ab649aa1c24117770ecca7de43f94a3e8">More...</a><br /></td></tr>
<tr class="separator:ab649aa1c24117770ecca7de43f94a3e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55d011dc599c183aa80780931d5fafe0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#a55d011dc599c183aa80780931d5fafe0">osp_tcp_read_req</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp)</td></tr>
<tr class="memdesc:a55d011dc599c183aa80780931d5fafe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocking call that returns the request sent by the connected client. The client can make a number of requests including updating the values running in the OSP real-time code (knee points, attack, release, gains, etc). The client can also request the number of underruns that have been counted from the audio driver, the number of bands that have been initially set up, etc.  <a href="#a55d011dc599c183aa80780931d5fafe0">More...</a><br /></td></tr>
<tr class="separator:a55d011dc599c183aa80780931d5fafe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b8a5a6a4fa9249a163f47c206f7e8d"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#aa4b8a5a6a4fa9249a163f47c206f7e8d">osp_tcp_read_values</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp, <a class="el" href="constants_8h.html#a2d1d78531fe12807c3852488556d5a4b">osp_user_data</a> *data, unsigned int size)</td></tr>
<tr class="memdesc:aa4b8a5a6a4fa9249a163f47c206f7e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from the TCP stream into the osp_user_data structure.  <a href="#aa4b8a5a6a4fa9249a163f47c206f7e8d">More...</a><br /></td></tr>
<tr class="separator:aa4b8a5a6a4fa9249a163f47c206f7e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fe974658327f3586a54e6c2d57740b"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#aa2fe974658327f3586a54e6c2d57740b">osp_tcp_read_user_packet</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp, char *message, unsigned int size)</td></tr>
<tr class="separator:aa2fe974658327f3586a54e6c2d57740b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31da083ff61e714c57e6ac37100e8e15"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#a31da083ff61e714c57e6ac37100e8e15">osp_4afc_read_values</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp, char *file_path, unsigned int size)</td></tr>
<tr class="separator:a31da083ff61e714c57e6ac37100e8e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af443391eb190ffb7bb8b13c19d5bbe67"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#af443391eb190ffb7bb8b13c19d5bbe67">osp_tcp_send_underruns</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp, unsigned int underruns)</td></tr>
<tr class="memdesc:af443391eb190ffb7bb8b13c19d5bbe67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the number of underruns to client.  <a href="#af443391eb190ffb7bb8b13c19d5bbe67">More...</a><br /></td></tr>
<tr class="separator:af443391eb190ffb7bb8b13c19d5bbe67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab96e1d96e5f30b40bfed4b88cda820c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#aab96e1d96e5f30b40bfed4b88cda820c">osp_tcp_send_num_bands</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp, unsigned char bands)</td></tr>
<tr class="memdesc:aab96e1d96e5f30b40bfed4b88cda820c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the number of bands to client.  <a href="#aab96e1d96e5f30b40bfed4b88cda820c">More...</a><br /></td></tr>
<tr class="separator:aab96e1d96e5f30b40bfed4b88cda820c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab998766bad97b04e79d93b25c2d54c14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__tcp_8c.html#ab998766bad97b04e79d93b25c2d54c14">osp_tcp_close</a> (<a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp)</td></tr>
<tr class="memdesc:ab998766bad97b04e79d93b25c2d54c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the TCP stream and frees the Osp_tcp instance.  <a href="#ab998766bad97b04e79d93b25c2d54c14">More...</a><br /></td></tr>
<tr class="separator:ab998766bad97b04e79d93b25c2d54c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4a5fada0136f276b505ab711c7e1c7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a5fada0136f276b505ab711c7e1c7bf">&#9670;&nbsp;</a></span>get_float_from_SubString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_float_from_SubString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a192f28ce7cdcc8d994e79140b3ea4fcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a192f28ce7cdcc8d994e79140b3ea4fcd">&#9670;&nbsp;</a></span>get_int_from_SubString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_int_from_SubString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a66a4118cf6fedab06aa795581935fd03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a4118cf6fedab06aa795581935fd03">&#9670;&nbsp;</a></span>jsoneq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int jsoneq </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjsmntok__t.html">jsmntok_t</a> *&#160;</td>
          <td class="paramname"><em>tok</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a31da083ff61e714c57e6ac37100e8e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31da083ff61e714c57e6ac37100e8e15">&#9670;&nbsp;</a></span>osp_4afc_read_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t osp_4afc_read_values </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab998766bad97b04e79d93b25c2d54c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab998766bad97b04e79d93b25c2d54c14">&#9670;&nbsp;</a></span>osp_tcp_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osp_tcp_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the TCP stream and frees the Osp_tcp instance. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab649aa1c24117770ecca7de43f94a3e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab649aa1c24117770ecca7de43f94a3e8">&#9670;&nbsp;</a></span>osp_tcp_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_tcp_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocking call that sets up server socket and waits for client connection In order to start a socket for a client (Android tablet, for instance), this must be called. It will block until a client establishes a connection, at which point it will return 0. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, or -1 if there's an error setting up the socket </dd></dl>

</div>
</div>
<a id="ae6c126a45386214aac909bc2b819a6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c126a45386214aac909bc2b819a6d3">&#9670;&nbsp;</a></span>osp_tcp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a> osp_tcp_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization function for the OSP TCP layer. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The port in which to listen on for a client connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the allocated instance of the OSP TCP layer data structure ("object") </dd></dl>

</div>
</div>
<a id="a55d011dc599c183aa80780931d5fafe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d011dc599c183aa80780931d5fafe0">&#9670;&nbsp;</a></span>osp_tcp_read_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_tcp_read_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocking call that returns the request sent by the connected client. The client can make a number of requests including updating the values running in the OSP real-time code (knee points, attack, release, gains, etc). The client can also request the number of underruns that have been counted from the audio driver, the number of bands that have been initially set up, etc. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd>
<dd>
e_osp_tcp_req_t </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the request sent by the client </dd></dl>

</div>
</div>
<a id="aa2fe974658327f3586a54e6c2d57740b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fe974658327f3586a54e6c2d57740b">&#9670;&nbsp;</a></span>osp_tcp_read_user_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t osp_tcp_read_user_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4b8a5a6a4fa9249a163f47c206f7e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b8a5a6a4fa9249a163f47c206f7e8d">&#9670;&nbsp;</a></span>osp_tcp_read_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t osp_tcp_read_values </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="constants_8h.html#a2d1d78531fe12807c3852488556d5a4b">osp_user_data</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from the TCP stream into the osp_user_data structure. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="constants_8h.html#a2d1d78531fe12807c3852488556d5a4b" title="general data structure shared between client and C application ">osp_user_data</a> </dd>
<dd>
<a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
    <tr><td class="paramname">data</td><td>The osp_user_data structure that will be filled with data from the stream </td></tr>
    <tr><td class="paramname">size</td><td>The size of the data, in bytes, that are to be read from the stream since we're reading into a struct of known size, passing a size variable might be redundant </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if the stream is no longer present (disconnect from client side, not error), -1 if there is an error reading from the server stream. Otherwise, the number of bytes read from the stream is returned </dd></dl>

</div>
</div>
<a id="aab96e1d96e5f30b40bfed4b88cda820c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab96e1d96e5f30b40bfed4b88cda820c">&#9670;&nbsp;</a></span>osp_tcp_send_num_bands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_tcp_send_num_bands </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bands</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the number of bands to client. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
    <tr><td class="paramname">bands</td><td>Number of bands to report </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if success, -1 if there was an error writing to the stream </dd></dl>

</div>
</div>
<a id="af443391eb190ffb7bb8b13c19d5bbe67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af443391eb190ffb7bb8b13c19d5bbe67">&#9670;&nbsp;</a></span>osp_tcp_send_underruns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_tcp_send_underruns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="osp__tcp_8h.html#ac73f074c55d4549265c975cc8cffd349">Osp_tcp</a>&#160;</td>
          <td class="paramname"><em>osp_tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>underruns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the number of underruns to client. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structosp__tcp__t.html" title="Data structure containing OSP TCP layer internal variables. ">osp_tcp_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osp_tcp</td><td>The instance of the Osp_tcp variable that was returned from osp_tcp_init </td></tr>
    <tr><td class="paramname">underruns</td><td>Number of underruns to report </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if success, -1 if there was an error writing to the stream </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_344a92ffc85f32daed969785c1237399.html">libosp</a></li><li class="navelem"><a class="el" href="dir_13cda17aba8e814f4afb5662c5c96c8d.html">osp_tcp</a></li><li class="navelem"><a class="el" href="osp__tcp_8c.html">osp_tcp.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
