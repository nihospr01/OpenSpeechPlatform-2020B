{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport ContainerRender from 'rc-util/es/ContainerRender';\nimport Portal from 'rc-util/es/Portal';\nimport classNames from 'classnames';\nimport { getAlignFromPlacement, getAlignPopupClassName } from './utils';\nimport Popup from './Popup';\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\nvar IS_REACT_16 = !!createPortal;\nvar contextTypes = {\n  rcTrigger: PropTypes.shape({\n    onPopupMouseDown: PropTypes.func\n  })\n};\n\nvar Trigger = function (_React$Component) {\n  _inherits(Trigger, _React$Component);\n\n  function Trigger(props) {\n    _classCallCheck(this, Trigger);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var popupVisible = void 0;\n\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    _this.state = {\n      prevPopupVisible: popupVisible,\n      popupVisible: popupVisible\n    };\n    ALL_HANDLERS.forEach(function (h) {\n      _this['fire' + h] = function (e) {\n        _this.fireEvents(h, e);\n      };\n    });\n    return _this;\n  }\n\n  Trigger.prototype.getChildContext = function getChildContext() {\n    return {\n      rcTrigger: {\n        onPopupMouseDown: this.onPopupMouseDown\n      }\n    };\n  };\n\n  Trigger.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible\n    });\n  };\n\n  Trigger.prototype.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    var props = this.props;\n    var state = this.state;\n\n    var triggerAfterPopupVisibleChange = function triggerAfterPopupVisibleChange() {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    } // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/ant-design/ant-design/issues/5804\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n\n\n    if (state.popupVisible) {\n      var currentDocument = void 0;\n\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument, 'mousedown', this.onDocumentClick);\n      } // always hide on mobile\n\n\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument, 'touchstart', this.onDocumentClick);\n      } // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n\n\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument, 'scroll', this.onContextMenuClose);\n      } // close popup when trigger type contains 'onContextMenu' and window is blur.\n\n\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window, 'blur', this.onContextMenuClose);\n      }\n\n      return;\n    }\n\n    this.clearOutsideHandler();\n  };\n\n  Trigger.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n    clearTimeout(this.mouseDownTimeout);\n  };\n\n  Trigger.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, prevState) {\n    var popupVisible = _ref.popupVisible;\n    var newState = {};\n\n    if (popupVisible !== undefined && prevState.popupVisible !== popupVisible) {\n      newState.popupVisible = popupVisible;\n      newState.prevPopupVisible = prevState.popupVisible;\n    }\n\n    return newState;\n  };\n\n  Trigger.prototype.getPopupDomNode = function getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n\n    return null;\n  };\n\n  Trigger.prototype.getPopupAlign = function getPopupAlign() {\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        popupAlign = props.popupAlign,\n        builtinPlacements = props.builtinPlacements;\n\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n\n    return popupAlign;\n  };\n  /**\n   * @param popupVisible    Show or not the popup element\n   * @param event           SyntheticEvent, used for `pointAlign`\n   */\n\n\n  Trigger.prototype.setPopupVisible = function setPopupVisible(popupVisible, event) {\n    var alignPoint = this.props.alignPoint;\n    var prevPopupVisible = this.state.popupVisible;\n    this.clearDelayTimer();\n\n    if (prevPopupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({\n          popupVisible: popupVisible,\n          prevPopupVisible: prevPopupVisible\n        });\n      }\n\n      this.props.onPopupVisibleChange(popupVisible);\n    } // Always record the point position since mouseEnterDelay will delay the show\n\n\n    if (alignPoint && event) {\n      this.setPoint(event);\n    }\n  };\n\n  Trigger.prototype.delaySetPopupVisible = function delaySetPopupVisible(visible, delayS, event) {\n    var _this2 = this;\n\n    var delay = delayS * 1000;\n    this.clearDelayTimer();\n\n    if (delay) {\n      var point = event ? {\n        pageX: event.pageX,\n        pageY: event.pageY\n      } : null;\n      this.delayTimer = setTimeout(function () {\n        _this2.setPopupVisible(visible, point);\n\n        _this2.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible, event);\n    }\n  };\n\n  Trigger.prototype.clearDelayTimer = function clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  };\n\n  Trigger.prototype.clearOutsideHandler = function clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  };\n\n  Trigger.prototype.createTwoChains = function createTwoChains(event) {\n    var childPros = this.props.children.props;\n    var props = this.props;\n\n    if (childPros[event] && props[event]) {\n      return this['fire' + event];\n    }\n\n    return childPros[event] || props[event];\n  };\n\n  Trigger.prototype.isClickToShow = function isClickToShow() {\n    var _props = this.props,\n        action = _props.action,\n        showAction = _props.showAction;\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isContextMenuToShow = function isContextMenuToShow() {\n    var _props2 = this.props,\n        action = _props2.action,\n        showAction = _props2.showAction;\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  };\n\n  Trigger.prototype.isClickToHide = function isClickToHide() {\n    var _props3 = this.props,\n        action = _props3.action,\n        hideAction = _props3.hideAction;\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isMouseEnterToShow = function isMouseEnterToShow() {\n    var _props4 = this.props,\n        action = _props4.action,\n        showAction = _props4.showAction;\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  };\n\n  Trigger.prototype.isMouseLeaveToHide = function isMouseLeaveToHide() {\n    var _props5 = this.props,\n        action = _props5.action,\n        hideAction = _props5.hideAction;\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  };\n\n  Trigger.prototype.isFocusToShow = function isFocusToShow() {\n    var _props6 = this.props,\n        action = _props6.action,\n        showAction = _props6.showAction;\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  };\n\n  Trigger.prototype.isBlurToHide = function isBlurToHide() {\n    var _props7 = this.props,\n        action = _props7.action,\n        hideAction = _props7.hideAction;\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  };\n\n  Trigger.prototype.forcePopupAlign = function forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  };\n\n  Trigger.prototype.fireEvents = function fireEvents(type, e) {\n    var childCallback = this.props.children.props[type];\n\n    if (childCallback) {\n      childCallback(e);\n    }\n\n    var callback = this.props[type];\n\n    if (callback) {\n      callback(e);\n    }\n  };\n\n  Trigger.prototype.close = function close() {\n    this.setPopupVisible(false);\n  };\n\n  Trigger.prototype.render = function render() {\n    var _this3 = this;\n\n    var popupVisible = this.state.popupVisible;\n    var _props8 = this.props,\n        children = _props8.children,\n        forceRender = _props8.forceRender,\n        alignPoint = _props8.alignPoint,\n        className = _props8.className;\n    var child = React.Children.only(children);\n    var newChildProps = {\n      key: 'trigger'\n    };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n\n      if (alignPoint) {\n        newChildProps.onMouseMove = this.onMouseMove;\n      }\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    var childrenClassName = classNames(child && child.props && child.props.className, className);\n\n    if (childrenClassName) {\n      newChildProps.className = childrenClassName;\n    }\n\n    var trigger = React.cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return React.createElement(ContainerRender, {\n        parent: this,\n        visible: popupVisible,\n        autoMount: false,\n        forceRender: forceRender,\n        getComponent: this.getComponent,\n        getContainer: this.getContainer\n      }, function (_ref2) {\n        var renderComponent = _ref2.renderComponent;\n        _this3.renderComponent = renderComponent;\n        return trigger;\n      });\n    }\n\n    var portal = void 0; // prevent unmounting after it's rendered\n\n    if (popupVisible || this._component || forceRender) {\n      portal = React.createElement(Portal, {\n        key: 'portal',\n        getContainer: this.getContainer,\n        didUpdate: this.handlePortalUpdate\n      }, this.getComponent());\n    }\n\n    return [trigger, portal];\n  };\n\n  return Trigger;\n}(React.Component);\n\nTrigger.propTypes = {\n  children: PropTypes.any,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  showAction: PropTypes.any,\n  hideAction: PropTypes.any,\n  getPopupClassNameFromAlign: PropTypes.any,\n  onPopupVisibleChange: PropTypes.func,\n  afterPopupVisibleChange: PropTypes.func,\n  popup: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  popupStyle: PropTypes.object,\n  prefixCls: PropTypes.string,\n  popupClassName: PropTypes.string,\n  className: PropTypes.string,\n  popupPlacement: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  popupTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  popupAnimation: PropTypes.any,\n  mouseEnterDelay: PropTypes.number,\n  mouseLeaveDelay: PropTypes.number,\n  zIndex: PropTypes.number,\n  focusDelay: PropTypes.number,\n  blurDelay: PropTypes.number,\n  getPopupContainer: PropTypes.func,\n  getDocument: PropTypes.func,\n  forceRender: PropTypes.bool,\n  destroyPopupOnHide: PropTypes.bool,\n  mask: PropTypes.bool,\n  maskClosable: PropTypes.bool,\n  onPopupAlign: PropTypes.func,\n  popupAlign: PropTypes.object,\n  popupVisible: PropTypes.bool,\n  defaultPopupVisible: PropTypes.bool,\n  maskTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  maskAnimation: PropTypes.string,\n  stretch: PropTypes.string,\n  alignPoint: PropTypes.bool // Maybe we can support user pass position in the future\n\n};\nTrigger.contextTypes = contextTypes;\nTrigger.childContextTypes = contextTypes;\nTrigger.defaultProps = {\n  prefixCls: 'rc-trigger-popup',\n  getPopupClassNameFromAlign: returnEmptyString,\n  getDocument: returnDocument,\n  onPopupVisibleChange: noop,\n  afterPopupVisibleChange: noop,\n  onPopupAlign: noop,\n  popupClassName: '',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0.1,\n  focusDelay: 0,\n  blurDelay: 0.15,\n  popupStyle: {},\n  destroyPopupOnHide: false,\n  popupAlign: {},\n  defaultPopupVisible: false,\n  mask: false,\n  maskClosable: true,\n  action: [],\n  showAction: [],\n  hideAction: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onMouseEnter = function (e) {\n    var mouseEnterDelay = _this4.props.mouseEnterDelay;\n\n    _this4.fireEvents('onMouseEnter', e);\n\n    _this4.delaySetPopupVisible(true, mouseEnterDelay, mouseEnterDelay ? null : e);\n  };\n\n  this.onMouseMove = function (e) {\n    _this4.fireEvents('onMouseMove', e);\n\n    _this4.setPoint(e);\n  };\n\n  this.onMouseLeave = function (e) {\n    _this4.fireEvents('onMouseLeave', e);\n\n    _this4.delaySetPopupVisible(false, _this4.props.mouseLeaveDelay);\n  };\n\n  this.onPopupMouseEnter = function () {\n    _this4.clearDelayTimer();\n  };\n\n  this.onPopupMouseLeave = function (e) {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout && _this4._component && _this4._component.getPopupDomNode && contains(_this4._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n\n    _this4.delaySetPopupVisible(false, _this4.props.mouseLeaveDelay);\n  };\n\n  this.onFocus = function (e) {\n    _this4.fireEvents('onFocus', e); // incase focusin and focusout\n\n\n    _this4.clearDelayTimer();\n\n    if (_this4.isFocusToShow()) {\n      _this4.focusTime = Date.now();\n\n      _this4.delaySetPopupVisible(true, _this4.props.focusDelay);\n    }\n  };\n\n  this.onMouseDown = function (e) {\n    _this4.fireEvents('onMouseDown', e);\n\n    _this4.preClickTime = Date.now();\n  };\n\n  this.onTouchStart = function (e) {\n    _this4.fireEvents('onTouchStart', e);\n\n    _this4.preTouchTime = Date.now();\n  };\n\n  this.onBlur = function (e) {\n    _this4.fireEvents('onBlur', e);\n\n    _this4.clearDelayTimer();\n\n    if (_this4.isBlurToHide()) {\n      _this4.delaySetPopupVisible(false, _this4.props.blurDelay);\n    }\n  };\n\n  this.onContextMenu = function (e) {\n    e.preventDefault();\n\n    _this4.fireEvents('onContextMenu', e);\n\n    _this4.setPopupVisible(true, e);\n  };\n\n  this.onContextMenuClose = function () {\n    if (_this4.isContextMenuToShow()) {\n      _this4.close();\n    }\n  };\n\n  this.onClick = function (event) {\n    _this4.fireEvents('onClick', event); // focus will trigger click\n\n\n    if (_this4.focusTime) {\n      var preTime = void 0;\n\n      if (_this4.preClickTime && _this4.preTouchTime) {\n        preTime = Math.min(_this4.preClickTime, _this4.preTouchTime);\n      } else if (_this4.preClickTime) {\n        preTime = _this4.preClickTime;\n      } else if (_this4.preTouchTime) {\n        preTime = _this4.preTouchTime;\n      }\n\n      if (Math.abs(preTime - _this4.focusTime) < 20) {\n        return;\n      }\n\n      _this4.focusTime = 0;\n    }\n\n    _this4.preClickTime = 0;\n    _this4.preTouchTime = 0; // Only prevent default when all the action is click.\n    // https://github.com/ant-design/ant-design/issues/17043\n    // https://github.com/ant-design/ant-design/issues/17291\n\n    if (_this4.isClickToShow() && (_this4.isClickToHide() || _this4.isBlurToHide()) && event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    var nextVisible = !_this4.state.popupVisible;\n\n    if (_this4.isClickToHide() && !nextVisible || nextVisible && _this4.isClickToShow()) {\n      _this4.setPopupVisible(!_this4.state.popupVisible, event);\n    }\n  };\n\n  this.onPopupMouseDown = function () {\n    var _context$rcTrigger = _this4.context.rcTrigger,\n        rcTrigger = _context$rcTrigger === undefined ? {} : _context$rcTrigger;\n    _this4.hasPopupMouseDown = true;\n    clearTimeout(_this4.mouseDownTimeout);\n    _this4.mouseDownTimeout = setTimeout(function () {\n      _this4.hasPopupMouseDown = false;\n    }, 0);\n\n    if (rcTrigger.onPopupMouseDown) {\n      rcTrigger.onPopupMouseDown.apply(rcTrigger, arguments);\n    }\n  };\n\n  this.onDocumentClick = function (event) {\n    if (_this4.props.mask && !_this4.props.maskClosable) {\n      return;\n    }\n\n    var target = event.target;\n    var root = findDOMNode(_this4);\n\n    if (!contains(root, target) && !_this4.hasPopupMouseDown) {\n      _this4.close();\n    }\n  };\n\n  this.getRootDomNode = function () {\n    return findDOMNode(_this4);\n  };\n\n  this.getPopupClassNameFromAlign = function (align) {\n    var className = [];\n    var _props9 = _this4.props,\n        popupPlacement = _props9.popupPlacement,\n        builtinPlacements = _props9.builtinPlacements,\n        prefixCls = _props9.prefixCls,\n        alignPoint = _props9.alignPoint,\n        getPopupClassNameFromAlign = _props9.getPopupClassNameFromAlign;\n\n    if (popupPlacement && builtinPlacements) {\n      className.push(getAlignPopupClassName(builtinPlacements, prefixCls, align, alignPoint));\n    }\n\n    if (getPopupClassNameFromAlign) {\n      className.push(getPopupClassNameFromAlign(align));\n    }\n\n    return className.join(' ');\n  };\n\n  this.getComponent = function () {\n    var _props10 = _this4.props,\n        prefixCls = _props10.prefixCls,\n        destroyPopupOnHide = _props10.destroyPopupOnHide,\n        popupClassName = _props10.popupClassName,\n        action = _props10.action,\n        onPopupAlign = _props10.onPopupAlign,\n        popupAnimation = _props10.popupAnimation,\n        popupTransitionName = _props10.popupTransitionName,\n        popupStyle = _props10.popupStyle,\n        mask = _props10.mask,\n        maskAnimation = _props10.maskAnimation,\n        maskTransitionName = _props10.maskTransitionName,\n        zIndex = _props10.zIndex,\n        popup = _props10.popup,\n        stretch = _props10.stretch,\n        alignPoint = _props10.alignPoint;\n    var _state = _this4.state,\n        popupVisible = _state.popupVisible,\n        point = _state.point;\n\n    var align = _this4.getPopupAlign();\n\n    var mouseProps = {};\n\n    if (_this4.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = _this4.onPopupMouseEnter;\n    }\n\n    if (_this4.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = _this4.onPopupMouseLeave;\n    }\n\n    mouseProps.onMouseDown = _this4.onPopupMouseDown;\n    mouseProps.onTouchStart = _this4.onPopupMouseDown;\n    return React.createElement(Popup, _extends({\n      prefixCls: prefixCls,\n      destroyPopupOnHide: destroyPopupOnHide,\n      visible: popupVisible,\n      point: alignPoint && point,\n      className: popupClassName,\n      action: action,\n      align: align,\n      onAlign: onPopupAlign,\n      animation: popupAnimation,\n      getClassNameFromAlign: _this4.getPopupClassNameFromAlign\n    }, mouseProps, {\n      stretch: stretch,\n      getRootDomNode: _this4.getRootDomNode,\n      style: popupStyle,\n      mask: mask,\n      zIndex: zIndex,\n      transitionName: popupTransitionName,\n      maskAnimation: maskAnimation,\n      maskTransitionName: maskTransitionName,\n      ref: _this4.savePopup\n    }), typeof popup === 'function' ? popup() : popup);\n  };\n\n  this.getContainer = function () {\n    var props = _this4.props;\n    var popupContainer = document.createElement('div'); // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(_this4)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  this.setPoint = function (point) {\n    var alignPoint = _this4.props.alignPoint;\n    if (!alignPoint || !point) return;\n\n    _this4.setState({\n      point: {\n        pageX: point.pageX,\n        pageY: point.pageY\n      }\n    });\n  };\n\n  this.handlePortalUpdate = function () {\n    if (_this4.state.prevPopupVisible !== _this4.state.popupVisible) {\n      _this4.props.afterPopupVisibleChange(_this4.state.popupVisible);\n    }\n  };\n\n  this.savePopup = function (node) {\n    _this4._component = node;\n  };\n};\n\npolyfill(Trigger);\nexport default Trigger;","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/rc-trigger/es/index.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","findDOMNode","createPortal","polyfill","contains","addEventListener","ContainerRender","Portal","classNames","getAlignFromPlacement","getAlignPopupClassName","Popup","noop","returnEmptyString","returnDocument","window","document","ALL_HANDLERS","IS_REACT_16","contextTypes","rcTrigger","shape","onPopupMouseDown","func","Trigger","_React$Component","props","_this","call","_initialiseProps","popupVisible","defaultPopupVisible","state","prevPopupVisible","forEach","h","e","fireEvents","prototype","getChildContext","componentDidMount","componentDidUpdate","_","prevState","triggerAfterPopupVisibleChange","afterPopupVisibleChange","renderComponent","currentDocument","clickOutsideHandler","isClickToHide","isContextMenuToShow","getDocument","onDocumentClick","touchOutsideHandler","contextMenuOutsideHandler1","onContextMenuClose","contextMenuOutsideHandler2","clearOutsideHandler","componentWillUnmount","clearDelayTimer","clearTimeout","mouseDownTimeout","getDerivedStateFromProps","_ref","newState","undefined","getPopupDomNode","_component","getPopupAlign","popupPlacement","popupAlign","builtinPlacements","setPopupVisible","event","alignPoint","setState","onPopupVisibleChange","setPoint","delaySetPopupVisible","visible","delayS","_this2","delay","point","pageX","pageY","delayTimer","setTimeout","remove","createTwoChains","childPros","children","isClickToShow","_props","action","showAction","indexOf","_props2","_props3","hideAction","isMouseEnterToShow","_props4","isMouseLeaveToHide","_props5","isFocusToShow","_props6","isBlurToHide","_props7","forcePopupAlign","alignInstance","forceAlign","type","childCallback","callback","close","render","_this3","_props8","forceRender","className","child","Children","only","newChildProps","key","onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseMove","onMouseLeave","onFocus","onBlur","childrenClassName","trigger","cloneElement","createElement","parent","autoMount","getComponent","getContainer","_ref2","portal","didUpdate","handlePortalUpdate","Component","propTypes","any","oneOfType","string","arrayOf","getPopupClassNameFromAlign","popup","node","isRequired","popupStyle","object","prefixCls","popupClassName","popupTransitionName","popupAnimation","mouseEnterDelay","number","mouseLeaveDelay","zIndex","focusDelay","blurDelay","getPopupContainer","bool","destroyPopupOnHide","mask","maskClosable","onPopupAlign","maskTransitionName","maskAnimation","stretch","childContextTypes","defaultProps","_this4","onPopupMouseEnter","onPopupMouseLeave","relatedTarget","focusTime","Date","now","preClickTime","preTouchTime","preventDefault","preTime","Math","min","abs","nextVisible","_context$rcTrigger","context","hasPopupMouseDown","apply","arguments","target","root","getRootDomNode","align","_props9","push","join","_props10","_state","mouseProps","onAlign","animation","getClassNameFromAlign","style","transitionName","ref","savePopup","popupContainer","position","top","left","width","mountNode","body","appendChild"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport ContainerRender from 'rc-util/es/ContainerRender';\nimport Portal from 'rc-util/es/Portal';\nimport classNames from 'classnames';\n\nimport { getAlignFromPlacement, getAlignPopupClassName } from './utils';\nimport Popup from './Popup';\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\n\nvar IS_REACT_16 = !!createPortal;\n\nvar contextTypes = {\n  rcTrigger: PropTypes.shape({\n    onPopupMouseDown: PropTypes.func\n  })\n};\n\nvar Trigger = function (_React$Component) {\n  _inherits(Trigger, _React$Component);\n\n  function Trigger(props) {\n    _classCallCheck(this, Trigger);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var popupVisible = void 0;\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    _this.state = {\n      prevPopupVisible: popupVisible,\n      popupVisible: popupVisible\n    };\n\n    ALL_HANDLERS.forEach(function (h) {\n      _this['fire' + h] = function (e) {\n        _this.fireEvents(h, e);\n      };\n    });\n    return _this;\n  }\n\n  Trigger.prototype.getChildContext = function getChildContext() {\n    return {\n      rcTrigger: {\n        onPopupMouseDown: this.onPopupMouseDown\n      }\n    };\n  };\n\n  Trigger.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible\n    });\n  };\n\n  Trigger.prototype.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    var props = this.props;\n    var state = this.state;\n    var triggerAfterPopupVisibleChange = function triggerAfterPopupVisibleChange() {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    }\n\n    // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/ant-design/ant-design/issues/5804\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n    if (state.popupVisible) {\n      var currentDocument = void 0;\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument, 'mousedown', this.onDocumentClick);\n      }\n      // always hide on mobile\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument, 'touchstart', this.onDocumentClick);\n      }\n      // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument, 'scroll', this.onContextMenuClose);\n      }\n      // close popup when trigger type contains 'onContextMenu' and window is blur.\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window, 'blur', this.onContextMenuClose);\n      }\n      return;\n    }\n\n    this.clearOutsideHandler();\n  };\n\n  Trigger.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n    clearTimeout(this.mouseDownTimeout);\n  };\n\n  Trigger.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, prevState) {\n    var popupVisible = _ref.popupVisible;\n\n    var newState = {};\n\n    if (popupVisible !== undefined && prevState.popupVisible !== popupVisible) {\n      newState.popupVisible = popupVisible;\n      newState.prevPopupVisible = prevState.popupVisible;\n    }\n\n    return newState;\n  };\n\n  Trigger.prototype.getPopupDomNode = function getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n    return null;\n  };\n\n  Trigger.prototype.getPopupAlign = function getPopupAlign() {\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        popupAlign = props.popupAlign,\n        builtinPlacements = props.builtinPlacements;\n\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n    return popupAlign;\n  };\n\n  /**\n   * @param popupVisible    Show or not the popup element\n   * @param event           SyntheticEvent, used for `pointAlign`\n   */\n  Trigger.prototype.setPopupVisible = function setPopupVisible(popupVisible, event) {\n    var alignPoint = this.props.alignPoint;\n    var prevPopupVisible = this.state.popupVisible;\n\n\n    this.clearDelayTimer();\n\n    if (prevPopupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({ popupVisible: popupVisible, prevPopupVisible: prevPopupVisible });\n      }\n      this.props.onPopupVisibleChange(popupVisible);\n    }\n\n    // Always record the point position since mouseEnterDelay will delay the show\n    if (alignPoint && event) {\n      this.setPoint(event);\n    }\n  };\n\n  Trigger.prototype.delaySetPopupVisible = function delaySetPopupVisible(visible, delayS, event) {\n    var _this2 = this;\n\n    var delay = delayS * 1000;\n    this.clearDelayTimer();\n    if (delay) {\n      var point = event ? { pageX: event.pageX, pageY: event.pageY } : null;\n      this.delayTimer = setTimeout(function () {\n        _this2.setPopupVisible(visible, point);\n        _this2.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible, event);\n    }\n  };\n\n  Trigger.prototype.clearDelayTimer = function clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  };\n\n  Trigger.prototype.clearOutsideHandler = function clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  };\n\n  Trigger.prototype.createTwoChains = function createTwoChains(event) {\n    var childPros = this.props.children.props;\n    var props = this.props;\n    if (childPros[event] && props[event]) {\n      return this['fire' + event];\n    }\n    return childPros[event] || props[event];\n  };\n\n  Trigger.prototype.isClickToShow = function isClickToShow() {\n    var _props = this.props,\n        action = _props.action,\n        showAction = _props.showAction;\n\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isContextMenuToShow = function isContextMenuToShow() {\n    var _props2 = this.props,\n        action = _props2.action,\n        showAction = _props2.showAction;\n\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  };\n\n  Trigger.prototype.isClickToHide = function isClickToHide() {\n    var _props3 = this.props,\n        action = _props3.action,\n        hideAction = _props3.hideAction;\n\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isMouseEnterToShow = function isMouseEnterToShow() {\n    var _props4 = this.props,\n        action = _props4.action,\n        showAction = _props4.showAction;\n\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  };\n\n  Trigger.prototype.isMouseLeaveToHide = function isMouseLeaveToHide() {\n    var _props5 = this.props,\n        action = _props5.action,\n        hideAction = _props5.hideAction;\n\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  };\n\n  Trigger.prototype.isFocusToShow = function isFocusToShow() {\n    var _props6 = this.props,\n        action = _props6.action,\n        showAction = _props6.showAction;\n\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  };\n\n  Trigger.prototype.isBlurToHide = function isBlurToHide() {\n    var _props7 = this.props,\n        action = _props7.action,\n        hideAction = _props7.hideAction;\n\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  };\n\n  Trigger.prototype.forcePopupAlign = function forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  };\n\n  Trigger.prototype.fireEvents = function fireEvents(type, e) {\n    var childCallback = this.props.children.props[type];\n    if (childCallback) {\n      childCallback(e);\n    }\n    var callback = this.props[type];\n    if (callback) {\n      callback(e);\n    }\n  };\n\n  Trigger.prototype.close = function close() {\n    this.setPopupVisible(false);\n  };\n\n  Trigger.prototype.render = function render() {\n    var _this3 = this;\n\n    var popupVisible = this.state.popupVisible;\n    var _props8 = this.props,\n        children = _props8.children,\n        forceRender = _props8.forceRender,\n        alignPoint = _props8.alignPoint,\n        className = _props8.className;\n\n    var child = React.Children.only(children);\n    var newChildProps = { key: 'trigger' };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n      if (alignPoint) {\n        newChildProps.onMouseMove = this.onMouseMove;\n      }\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    var childrenClassName = classNames(child && child.props && child.props.className, className);\n    if (childrenClassName) {\n      newChildProps.className = childrenClassName;\n    }\n    var trigger = React.cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return React.createElement(\n        ContainerRender,\n        {\n          parent: this,\n          visible: popupVisible,\n          autoMount: false,\n          forceRender: forceRender,\n          getComponent: this.getComponent,\n          getContainer: this.getContainer\n        },\n        function (_ref2) {\n          var renderComponent = _ref2.renderComponent;\n\n          _this3.renderComponent = renderComponent;\n          return trigger;\n        }\n      );\n    }\n\n    var portal = void 0;\n    // prevent unmounting after it's rendered\n    if (popupVisible || this._component || forceRender) {\n      portal = React.createElement(\n        Portal,\n        { key: 'portal', getContainer: this.getContainer, didUpdate: this.handlePortalUpdate },\n        this.getComponent()\n      );\n    }\n\n    return [trigger, portal];\n  };\n\n  return Trigger;\n}(React.Component);\n\nTrigger.propTypes = {\n  children: PropTypes.any,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  showAction: PropTypes.any,\n  hideAction: PropTypes.any,\n  getPopupClassNameFromAlign: PropTypes.any,\n  onPopupVisibleChange: PropTypes.func,\n  afterPopupVisibleChange: PropTypes.func,\n  popup: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  popupStyle: PropTypes.object,\n  prefixCls: PropTypes.string,\n  popupClassName: PropTypes.string,\n  className: PropTypes.string,\n  popupPlacement: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  popupTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  popupAnimation: PropTypes.any,\n  mouseEnterDelay: PropTypes.number,\n  mouseLeaveDelay: PropTypes.number,\n  zIndex: PropTypes.number,\n  focusDelay: PropTypes.number,\n  blurDelay: PropTypes.number,\n  getPopupContainer: PropTypes.func,\n  getDocument: PropTypes.func,\n  forceRender: PropTypes.bool,\n  destroyPopupOnHide: PropTypes.bool,\n  mask: PropTypes.bool,\n  maskClosable: PropTypes.bool,\n  onPopupAlign: PropTypes.func,\n  popupAlign: PropTypes.object,\n  popupVisible: PropTypes.bool,\n  defaultPopupVisible: PropTypes.bool,\n  maskTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  maskAnimation: PropTypes.string,\n  stretch: PropTypes.string,\n  alignPoint: PropTypes.bool // Maybe we can support user pass position in the future\n};\nTrigger.contextTypes = contextTypes;\nTrigger.childContextTypes = contextTypes;\nTrigger.defaultProps = {\n  prefixCls: 'rc-trigger-popup',\n  getPopupClassNameFromAlign: returnEmptyString,\n  getDocument: returnDocument,\n  onPopupVisibleChange: noop,\n  afterPopupVisibleChange: noop,\n  onPopupAlign: noop,\n  popupClassName: '',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0.1,\n  focusDelay: 0,\n  blurDelay: 0.15,\n  popupStyle: {},\n  destroyPopupOnHide: false,\n  popupAlign: {},\n  defaultPopupVisible: false,\n  mask: false,\n  maskClosable: true,\n  action: [],\n  showAction: [],\n  hideAction: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onMouseEnter = function (e) {\n    var mouseEnterDelay = _this4.props.mouseEnterDelay;\n\n    _this4.fireEvents('onMouseEnter', e);\n    _this4.delaySetPopupVisible(true, mouseEnterDelay, mouseEnterDelay ? null : e);\n  };\n\n  this.onMouseMove = function (e) {\n    _this4.fireEvents('onMouseMove', e);\n    _this4.setPoint(e);\n  };\n\n  this.onMouseLeave = function (e) {\n    _this4.fireEvents('onMouseLeave', e);\n    _this4.delaySetPopupVisible(false, _this4.props.mouseLeaveDelay);\n  };\n\n  this.onPopupMouseEnter = function () {\n    _this4.clearDelayTimer();\n  };\n\n  this.onPopupMouseLeave = function (e) {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout && _this4._component && _this4._component.getPopupDomNode && contains(_this4._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n    _this4.delaySetPopupVisible(false, _this4.props.mouseLeaveDelay);\n  };\n\n  this.onFocus = function (e) {\n    _this4.fireEvents('onFocus', e);\n    // incase focusin and focusout\n    _this4.clearDelayTimer();\n    if (_this4.isFocusToShow()) {\n      _this4.focusTime = Date.now();\n      _this4.delaySetPopupVisible(true, _this4.props.focusDelay);\n    }\n  };\n\n  this.onMouseDown = function (e) {\n    _this4.fireEvents('onMouseDown', e);\n    _this4.preClickTime = Date.now();\n  };\n\n  this.onTouchStart = function (e) {\n    _this4.fireEvents('onTouchStart', e);\n    _this4.preTouchTime = Date.now();\n  };\n\n  this.onBlur = function (e) {\n    _this4.fireEvents('onBlur', e);\n    _this4.clearDelayTimer();\n    if (_this4.isBlurToHide()) {\n      _this4.delaySetPopupVisible(false, _this4.props.blurDelay);\n    }\n  };\n\n  this.onContextMenu = function (e) {\n    e.preventDefault();\n    _this4.fireEvents('onContextMenu', e);\n    _this4.setPopupVisible(true, e);\n  };\n\n  this.onContextMenuClose = function () {\n    if (_this4.isContextMenuToShow()) {\n      _this4.close();\n    }\n  };\n\n  this.onClick = function (event) {\n    _this4.fireEvents('onClick', event);\n    // focus will trigger click\n    if (_this4.focusTime) {\n      var preTime = void 0;\n      if (_this4.preClickTime && _this4.preTouchTime) {\n        preTime = Math.min(_this4.preClickTime, _this4.preTouchTime);\n      } else if (_this4.preClickTime) {\n        preTime = _this4.preClickTime;\n      } else if (_this4.preTouchTime) {\n        preTime = _this4.preTouchTime;\n      }\n      if (Math.abs(preTime - _this4.focusTime) < 20) {\n        return;\n      }\n      _this4.focusTime = 0;\n    }\n    _this4.preClickTime = 0;\n    _this4.preTouchTime = 0;\n\n    // Only prevent default when all the action is click.\n    // https://github.com/ant-design/ant-design/issues/17043\n    // https://github.com/ant-design/ant-design/issues/17291\n    if (_this4.isClickToShow() && (_this4.isClickToHide() || _this4.isBlurToHide()) && event && event.preventDefault) {\n      event.preventDefault();\n    }\n    var nextVisible = !_this4.state.popupVisible;\n    if (_this4.isClickToHide() && !nextVisible || nextVisible && _this4.isClickToShow()) {\n      _this4.setPopupVisible(!_this4.state.popupVisible, event);\n    }\n  };\n\n  this.onPopupMouseDown = function () {\n    var _context$rcTrigger = _this4.context.rcTrigger,\n        rcTrigger = _context$rcTrigger === undefined ? {} : _context$rcTrigger;\n\n    _this4.hasPopupMouseDown = true;\n\n    clearTimeout(_this4.mouseDownTimeout);\n    _this4.mouseDownTimeout = setTimeout(function () {\n      _this4.hasPopupMouseDown = false;\n    }, 0);\n\n    if (rcTrigger.onPopupMouseDown) {\n      rcTrigger.onPopupMouseDown.apply(rcTrigger, arguments);\n    }\n  };\n\n  this.onDocumentClick = function (event) {\n    if (_this4.props.mask && !_this4.props.maskClosable) {\n      return;\n    }\n\n    var target = event.target;\n    var root = findDOMNode(_this4);\n    if (!contains(root, target) && !_this4.hasPopupMouseDown) {\n      _this4.close();\n    }\n  };\n\n  this.getRootDomNode = function () {\n    return findDOMNode(_this4);\n  };\n\n  this.getPopupClassNameFromAlign = function (align) {\n    var className = [];\n    var _props9 = _this4.props,\n        popupPlacement = _props9.popupPlacement,\n        builtinPlacements = _props9.builtinPlacements,\n        prefixCls = _props9.prefixCls,\n        alignPoint = _props9.alignPoint,\n        getPopupClassNameFromAlign = _props9.getPopupClassNameFromAlign;\n\n    if (popupPlacement && builtinPlacements) {\n      className.push(getAlignPopupClassName(builtinPlacements, prefixCls, align, alignPoint));\n    }\n    if (getPopupClassNameFromAlign) {\n      className.push(getPopupClassNameFromAlign(align));\n    }\n    return className.join(' ');\n  };\n\n  this.getComponent = function () {\n    var _props10 = _this4.props,\n        prefixCls = _props10.prefixCls,\n        destroyPopupOnHide = _props10.destroyPopupOnHide,\n        popupClassName = _props10.popupClassName,\n        action = _props10.action,\n        onPopupAlign = _props10.onPopupAlign,\n        popupAnimation = _props10.popupAnimation,\n        popupTransitionName = _props10.popupTransitionName,\n        popupStyle = _props10.popupStyle,\n        mask = _props10.mask,\n        maskAnimation = _props10.maskAnimation,\n        maskTransitionName = _props10.maskTransitionName,\n        zIndex = _props10.zIndex,\n        popup = _props10.popup,\n        stretch = _props10.stretch,\n        alignPoint = _props10.alignPoint;\n    var _state = _this4.state,\n        popupVisible = _state.popupVisible,\n        point = _state.point;\n\n\n    var align = _this4.getPopupAlign();\n\n    var mouseProps = {};\n    if (_this4.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = _this4.onPopupMouseEnter;\n    }\n    if (_this4.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = _this4.onPopupMouseLeave;\n    }\n\n    mouseProps.onMouseDown = _this4.onPopupMouseDown;\n    mouseProps.onTouchStart = _this4.onPopupMouseDown;\n\n    return React.createElement(\n      Popup,\n      _extends({\n        prefixCls: prefixCls,\n        destroyPopupOnHide: destroyPopupOnHide,\n        visible: popupVisible,\n        point: alignPoint && point,\n        className: popupClassName,\n        action: action,\n        align: align,\n        onAlign: onPopupAlign,\n        animation: popupAnimation,\n        getClassNameFromAlign: _this4.getPopupClassNameFromAlign\n      }, mouseProps, {\n        stretch: stretch,\n        getRootDomNode: _this4.getRootDomNode,\n        style: popupStyle,\n        mask: mask,\n        zIndex: zIndex,\n        transitionName: popupTransitionName,\n        maskAnimation: maskAnimation,\n        maskTransitionName: maskTransitionName,\n        ref: _this4.savePopup\n      }),\n      typeof popup === 'function' ? popup() : popup\n    );\n  };\n\n  this.getContainer = function () {\n    var props = _this4.props;\n\n    var popupContainer = document.createElement('div');\n    // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(_this4)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  this.setPoint = function (point) {\n    var alignPoint = _this4.props.alignPoint;\n\n    if (!alignPoint || !point) return;\n\n    _this4.setState({\n      point: {\n        pageX: point.pageX,\n        pageY: point.pageY\n      }\n    });\n  };\n\n  this.handlePortalUpdate = function () {\n    if (_this4.state.prevPopupVisible !== _this4.state.popupVisible) {\n      _this4.props.afterPopupVisibleChange(_this4.state.popupVisible);\n    }\n  };\n\n  this.savePopup = function (node) {\n    _this4._component = node;\n  };\n};\n\npolyfill(Trigger);\n\nexport default Trigger;"]},"metadata":{},"sourceType":"module"}