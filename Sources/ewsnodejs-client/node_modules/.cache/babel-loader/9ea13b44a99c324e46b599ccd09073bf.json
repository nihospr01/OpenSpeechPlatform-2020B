{"ast":null,"code":"import { cells, edges, epsilon } from \"./Diagram\";\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n} // Liang–Barsky line clipping.\n\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1) || !clipEdge(edge, x0, y0, x1, y1) || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/d3-voronoi/src/Edge.js"],"names":["cells","edges","epsilon","createEdge","left","right","v0","v1","edge","index","push","setEdgeEnd","halfedges","createBorderEdge","vertex","clipEdge","x0","y0","x1","y1","a","b","ax","ay","bx","by","t0","t1","dx","dy","r","connectEdge","lx","ly","rx","ry","fx","fy","fm","fb","clipEdges","i","length","Math","abs"],"mappings":"AAAA,SAAQA,KAAR,EAAeC,KAAf,EAAsBC,OAAtB,QAAoC,WAApC;AAEA,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,KAA1B,EAAiCC,EAAjC,EAAqCC,EAArC,EAAyC;AAC9C,MAAIC,IAAI,GAAG,CAAC,IAAD,EAAO,IAAP,CAAX;AAAA,MACIC,KAAK,GAAGR,KAAK,CAACS,IAAN,CAAWF,IAAX,IAAmB,CAD/B;AAEAA,EAAAA,IAAI,CAACJ,IAAL,GAAYA,IAAZ;AACAI,EAAAA,IAAI,CAACH,KAAL,GAAaA,KAAb;AACA,MAAIC,EAAJ,EAAQK,UAAU,CAACH,IAAD,EAAOJ,IAAP,EAAaC,KAAb,EAAoBC,EAApB,CAAV;AACR,MAAIC,EAAJ,EAAQI,UAAU,CAACH,IAAD,EAAOH,KAAP,EAAcD,IAAd,EAAoBG,EAApB,CAAV;AACRP,EAAAA,KAAK,CAACI,IAAI,CAACK,KAAN,CAAL,CAAkBG,SAAlB,CAA4BF,IAA5B,CAAiCD,KAAjC;AACAT,EAAAA,KAAK,CAACK,KAAK,CAACI,KAAP,CAAL,CAAmBG,SAAnB,CAA6BF,IAA7B,CAAkCD,KAAlC;AACA,SAAOD,IAAP;AACD;AAED,OAAO,SAASK,gBAAT,CAA0BT,IAA1B,EAAgCE,EAAhC,EAAoCC,EAApC,EAAwC;AAC7C,MAAIC,IAAI,GAAG,CAACF,EAAD,EAAKC,EAAL,CAAX;AACAC,EAAAA,IAAI,CAACJ,IAAL,GAAYA,IAAZ;AACA,SAAOI,IAAP;AACD;AAED,OAAO,SAASG,UAAT,CAAoBH,IAApB,EAA0BJ,IAA1B,EAAgCC,KAAhC,EAAuCS,MAAvC,EAA+C;AACpD,MAAI,CAACN,IAAI,CAAC,CAAD,CAAL,IAAY,CAACA,IAAI,CAAC,CAAD,CAArB,EAA0B;AACxBA,IAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUM,MAAV;AACAN,IAAAA,IAAI,CAACJ,IAAL,GAAYA,IAAZ;AACAI,IAAAA,IAAI,CAACH,KAAL,GAAaA,KAAb;AACD,GAJD,MAIO,IAAIG,IAAI,CAACJ,IAAL,KAAcC,KAAlB,EAAyB;AAC9BG,IAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUM,MAAV;AACD,GAFM,MAEA;AACLN,IAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUM,MAAV;AACD;AACF,C,CAED;;AACA,SAASC,QAAT,CAAkBP,IAAlB,EAAwBQ,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwC;AACtC,MAAIC,CAAC,GAAGZ,IAAI,CAAC,CAAD,CAAZ;AAAA,MACIa,CAAC,GAAGb,IAAI,CAAC,CAAD,CADZ;AAAA,MAEIc,EAAE,GAAGF,CAAC,CAAC,CAAD,CAFV;AAAA,MAGIG,EAAE,GAAGH,CAAC,CAAC,CAAD,CAHV;AAAA,MAIII,EAAE,GAAGH,CAAC,CAAC,CAAD,CAJV;AAAA,MAKII,EAAE,GAAGJ,CAAC,CAAC,CAAD,CALV;AAAA,MAMIK,EAAE,GAAG,CANT;AAAA,MAOIC,EAAE,GAAG,CAPT;AAAA,MAQIC,EAAE,GAAGJ,EAAE,GAAGF,EARd;AAAA,MASIO,EAAE,GAAGJ,EAAE,GAAGF,EATd;AAAA,MAUIO,CAVJ;AAYAA,EAAAA,CAAC,GAAGd,EAAE,GAAGM,EAAT;AACA,MAAI,CAACM,EAAD,IAAOE,CAAC,GAAG,CAAf,EAAkB;AAClBA,EAAAA,CAAC,IAAIF,EAAL;;AACA,MAAIA,EAAE,GAAG,CAAT,EAAY;AACV,QAAIE,CAAC,GAAGJ,EAAR,EAAY;AACZ,QAAII,CAAC,GAAGH,EAAR,EAAYA,EAAE,GAAGG,CAAL;AACb,GAHD,MAGO,IAAIF,EAAE,GAAG,CAAT,EAAY;AACjB,QAAIE,CAAC,GAAGH,EAAR,EAAY;AACZ,QAAIG,CAAC,GAAGJ,EAAR,EAAYA,EAAE,GAAGI,CAAL;AACb;;AAEDA,EAAAA,CAAC,GAAGZ,EAAE,GAAGI,EAAT;AACA,MAAI,CAACM,EAAD,IAAOE,CAAC,GAAG,CAAf,EAAkB;AAClBA,EAAAA,CAAC,IAAIF,EAAL;;AACA,MAAIA,EAAE,GAAG,CAAT,EAAY;AACV,QAAIE,CAAC,GAAGH,EAAR,EAAY;AACZ,QAAIG,CAAC,GAAGJ,EAAR,EAAYA,EAAE,GAAGI,CAAL;AACb,GAHD,MAGO,IAAIF,EAAE,GAAG,CAAT,EAAY;AACjB,QAAIE,CAAC,GAAGJ,EAAR,EAAY;AACZ,QAAII,CAAC,GAAGH,EAAR,EAAYA,EAAE,GAAGG,CAAL;AACb;;AAEDA,EAAAA,CAAC,GAAGb,EAAE,GAAGM,EAAT;AACA,MAAI,CAACM,EAAD,IAAOC,CAAC,GAAG,CAAf,EAAkB;AAClBA,EAAAA,CAAC,IAAID,EAAL;;AACA,MAAIA,EAAE,GAAG,CAAT,EAAY;AACV,QAAIC,CAAC,GAAGJ,EAAR,EAAY;AACZ,QAAII,CAAC,GAAGH,EAAR,EAAYA,EAAE,GAAGG,CAAL;AACb,GAHD,MAGO,IAAID,EAAE,GAAG,CAAT,EAAY;AACjB,QAAIC,CAAC,GAAGH,EAAR,EAAY;AACZ,QAAIG,CAAC,GAAGJ,EAAR,EAAYA,EAAE,GAAGI,CAAL;AACb;;AAEDA,EAAAA,CAAC,GAAGX,EAAE,GAAGI,EAAT;AACA,MAAI,CAACM,EAAD,IAAOC,CAAC,GAAG,CAAf,EAAkB;AAClBA,EAAAA,CAAC,IAAID,EAAL;;AACA,MAAIA,EAAE,GAAG,CAAT,EAAY;AACV,QAAIC,CAAC,GAAGH,EAAR,EAAY;AACZ,QAAIG,CAAC,GAAGJ,EAAR,EAAYA,EAAE,GAAGI,CAAL;AACb,GAHD,MAGO,IAAID,EAAE,GAAG,CAAT,EAAY;AACjB,QAAIC,CAAC,GAAGJ,EAAR,EAAY;AACZ,QAAII,CAAC,GAAGH,EAAR,EAAYA,EAAE,GAAGG,CAAL;AACb;;AAED,MAAI,EAAEJ,EAAE,GAAG,CAAP,KAAa,EAAEC,EAAE,GAAG,CAAP,CAAjB,EAA4B,OAAO,IAAP,CAzDU,CAyDG;;AAEzC,MAAID,EAAE,GAAG,CAAT,EAAYlB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACc,EAAE,GAAGI,EAAE,GAAGE,EAAX,EAAeL,EAAE,GAAGG,EAAE,GAAGG,EAAzB,CAAV;AACZ,MAAIF,EAAE,GAAG,CAAT,EAAYnB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACc,EAAE,GAAGK,EAAE,GAAGC,EAAX,EAAeL,EAAE,GAAGI,EAAE,GAAGE,EAAzB,CAAV;AACZ,SAAO,IAAP;AACD;;AAED,SAASE,WAAT,CAAqBvB,IAArB,EAA2BQ,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2C;AACzC,MAAIZ,EAAE,GAAGC,IAAI,CAAC,CAAD,CAAb;AACA,MAAID,EAAJ,EAAQ,OAAO,IAAP;AAER,MAAID,EAAE,GAAGE,IAAI,CAAC,CAAD,CAAb;AAAA,MACIJ,IAAI,GAAGI,IAAI,CAACJ,IADhB;AAAA,MAEIC,KAAK,GAAGG,IAAI,CAACH,KAFjB;AAAA,MAGI2B,EAAE,GAAG5B,IAAI,CAAC,CAAD,CAHb;AAAA,MAII6B,EAAE,GAAG7B,IAAI,CAAC,CAAD,CAJb;AAAA,MAKI8B,EAAE,GAAG7B,KAAK,CAAC,CAAD,CALd;AAAA,MAMI8B,EAAE,GAAG9B,KAAK,CAAC,CAAD,CANd;AAAA,MAOI+B,EAAE,GAAG,CAACJ,EAAE,GAAGE,EAAN,IAAY,CAPrB;AAAA,MAQIG,EAAE,GAAG,CAACJ,EAAE,GAAGE,EAAN,IAAY,CARrB;AAAA,MASIG,EATJ;AAAA,MAUIC,EAVJ;;AAYA,MAAIJ,EAAE,KAAKF,EAAX,EAAe;AACb,QAAIG,EAAE,GAAGpB,EAAL,IAAWoB,EAAE,IAAIlB,EAArB,EAAyB;;AACzB,QAAIc,EAAE,GAAGE,EAAT,EAAa;AACX,UAAI,CAAC5B,EAAL,EAASA,EAAE,GAAG,CAAC8B,EAAD,EAAKnB,EAAL,CAAL,CAAT,KACK,IAAIX,EAAE,CAAC,CAAD,CAAF,IAASa,EAAb,EAAiB;AACtBZ,MAAAA,EAAE,GAAG,CAAC6B,EAAD,EAAKjB,EAAL,CAAL;AACD,KAJD,MAIO;AACL,UAAI,CAACb,EAAL,EAASA,EAAE,GAAG,CAAC8B,EAAD,EAAKjB,EAAL,CAAL,CAAT,KACK,IAAIb,EAAE,CAAC,CAAD,CAAF,GAAQW,EAAZ,EAAgB;AACrBV,MAAAA,EAAE,GAAG,CAAC6B,EAAD,EAAKnB,EAAL,CAAL;AACD;AACF,GAXD,MAWO;AACLqB,IAAAA,EAAE,GAAG,CAACN,EAAE,GAAGE,EAAN,KAAaC,EAAE,GAAGF,EAAlB,CAAL;AACAM,IAAAA,EAAE,GAAGF,EAAE,GAAGC,EAAE,GAAGF,EAAf;;AACA,QAAIE,EAAE,GAAG,CAAC,CAAN,IAAWA,EAAE,GAAG,CAApB,EAAuB;AACrB,UAAIN,EAAE,GAAGE,EAAT,EAAa;AACX,YAAI,CAAC5B,EAAL,EAASA,EAAE,GAAG,CAAC,CAACW,EAAE,GAAGsB,EAAN,IAAYD,EAAb,EAAiBrB,EAAjB,CAAL,CAAT,KACK,IAAIX,EAAE,CAAC,CAAD,CAAF,IAASa,EAAb,EAAiB;AACtBZ,QAAAA,EAAE,GAAG,CAAC,CAACY,EAAE,GAAGoB,EAAN,IAAYD,EAAb,EAAiBnB,EAAjB,CAAL;AACD,OAJD,MAIO;AACL,YAAI,CAACb,EAAL,EAASA,EAAE,GAAG,CAAC,CAACa,EAAE,GAAGoB,EAAN,IAAYD,EAAb,EAAiBnB,EAAjB,CAAL,CAAT,KACK,IAAIb,EAAE,CAAC,CAAD,CAAF,GAAQW,EAAZ,EAAgB;AACrBV,QAAAA,EAAE,GAAG,CAAC,CAACU,EAAE,GAAGsB,EAAN,IAAYD,EAAb,EAAiBrB,EAAjB,CAAL;AACD;AACF,KAVD,MAUO;AACL,UAAIgB,EAAE,GAAGE,EAAT,EAAa;AACX,YAAI,CAAC7B,EAAL,EAASA,EAAE,GAAG,CAACU,EAAD,EAAKsB,EAAE,GAAGtB,EAAL,GAAUuB,EAAf,CAAL,CAAT,KACK,IAAIjC,EAAE,CAAC,CAAD,CAAF,IAASY,EAAb,EAAiB;AACtBX,QAAAA,EAAE,GAAG,CAACW,EAAD,EAAKoB,EAAE,GAAGpB,EAAL,GAAUqB,EAAf,CAAL;AACD,OAJD,MAIO;AACL,YAAI,CAACjC,EAAL,EAASA,EAAE,GAAG,CAACY,EAAD,EAAKoB,EAAE,GAAGpB,EAAL,GAAUqB,EAAf,CAAL,CAAT,KACK,IAAIjC,EAAE,CAAC,CAAD,CAAF,GAAQU,EAAZ,EAAgB;AACrBT,QAAAA,EAAE,GAAG,CAACS,EAAD,EAAKsB,EAAE,GAAGtB,EAAL,GAAUuB,EAAf,CAAL;AACD;AACF;AACF;;AAED/B,EAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUF,EAAV;AACAE,EAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUD,EAAV;AACA,SAAO,IAAP;AACD;;AAED,OAAO,SAASiC,SAAT,CAAmBxB,EAAnB,EAAuBC,EAAvB,EAA2BC,EAA3B,EAA+BC,EAA/B,EAAmC;AACxC,MAAIsB,CAAC,GAAGxC,KAAK,CAACyC,MAAd;AAAA,MACIlC,IADJ;;AAGA,SAAOiC,CAAC,EAAR,EAAY;AACV,QAAI,CAACV,WAAW,CAACvB,IAAI,GAAGP,KAAK,CAACwC,CAAD,CAAb,EAAkBzB,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,CAAZ,IACG,CAACJ,QAAQ,CAACP,IAAD,EAAOQ,EAAP,EAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,CADZ,IAEG,EAAEwB,IAAI,CAACC,GAAL,CAASpC,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAaA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAtB,IAAoCN,OAApC,IACEyC,IAAI,CAACC,GAAL,CAASpC,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAaA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAtB,IAAoCN,OADxC,CAFP,EAGyD;AACvD,aAAOD,KAAK,CAACwC,CAAD,CAAZ;AACD;AACF;AACF","sourcesContent":["import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// Liang–Barsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}