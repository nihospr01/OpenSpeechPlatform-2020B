{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ContentState\n * @format\n * \n */\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar BlockMapBuilder = require('./BlockMapBuilder');\n\nvar CharacterMetadata = require('./CharacterMetadata');\n\nvar ContentBlock = require('./ContentBlock');\n\nvar ContentBlockNode = require('./ContentBlockNode');\n\nvar DraftEntity = require('./DraftEntity');\n\nvar DraftFeatureFlags = require('./DraftFeatureFlags');\n\nvar Immutable = require('immutable');\n\nvar SelectionState = require('./SelectionState');\n\nvar generateRandomKey = require('./generateRandomKey');\n\nvar sanitizeDraftText = require('./sanitizeDraftText');\n\nvar List = Immutable.List,\n    Record = Immutable.Record,\n    Repeat = Immutable.Repeat;\nvar experimentalTreeDataSupport = DraftFeatureFlags.draft_tree_data_support;\nvar defaultRecord = {\n  entityMap: null,\n  blockMap: null,\n  selectionBefore: null,\n  selectionAfter: null\n};\nvar ContentBlockNodeRecord = experimentalTreeDataSupport ? ContentBlockNode : ContentBlock;\nvar ContentStateRecord = Record(defaultRecord);\n\nvar ContentState = function (_ContentStateRecord) {\n  _inherits(ContentState, _ContentStateRecord);\n\n  function ContentState() {\n    _classCallCheck(this, ContentState);\n\n    return _possibleConstructorReturn(this, _ContentStateRecord.apply(this, arguments));\n  }\n\n  ContentState.prototype.getEntityMap = function getEntityMap() {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity;\n  };\n\n  ContentState.prototype.getBlockMap = function getBlockMap() {\n    return this.get('blockMap');\n  };\n\n  ContentState.prototype.getSelectionBefore = function getSelectionBefore() {\n    return this.get('selectionBefore');\n  };\n\n  ContentState.prototype.getSelectionAfter = function getSelectionAfter() {\n    return this.get('selectionAfter');\n  };\n\n  ContentState.prototype.getBlockForKey = function getBlockForKey(key) {\n    var block = this.getBlockMap().get(key);\n    return block;\n  };\n\n  ContentState.prototype.getKeyBefore = function getKeyBefore(key) {\n    return this.getBlockMap().reverse().keySeq().skipUntil(function (v) {\n      return v === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getKeyAfter = function getKeyAfter(key) {\n    return this.getBlockMap().keySeq().skipUntil(function (v) {\n      return v === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlockAfter = function getBlockAfter(key) {\n    return this.getBlockMap().skipUntil(function (_, k) {\n      return k === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlockBefore = function getBlockBefore(key) {\n    return this.getBlockMap().reverse().skipUntil(function (_, k) {\n      return k === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlocksAsArray = function getBlocksAsArray() {\n    return this.getBlockMap().toArray();\n  };\n\n  ContentState.prototype.getFirstBlock = function getFirstBlock() {\n    return this.getBlockMap().first();\n  };\n\n  ContentState.prototype.getLastBlock = function getLastBlock() {\n    return this.getBlockMap().last();\n  };\n\n  ContentState.prototype.getPlainText = function getPlainText(delimiter) {\n    return this.getBlockMap().map(function (block) {\n      return block ? block.getText() : '';\n    }).join(delimiter || '\\n');\n  };\n\n  ContentState.prototype.getLastCreatedEntityKey = function getLastCreatedEntityKey() {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity.__getLastCreatedEntityKey();\n  };\n\n  ContentState.prototype.hasText = function hasText() {\n    var blockMap = this.getBlockMap();\n    return blockMap.size > 1 || blockMap.first().getLength() > 0;\n  };\n\n  ContentState.prototype.createEntity = function createEntity(type, mutability, data) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__create(type, mutability, data);\n\n    return this;\n  };\n\n  ContentState.prototype.mergeEntityData = function mergeEntityData(key, toMerge) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__mergeData(key, toMerge);\n\n    return this;\n  };\n\n  ContentState.prototype.replaceEntityData = function replaceEntityData(key, newData) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__replaceData(key, newData);\n\n    return this;\n  };\n\n  ContentState.prototype.addEntity = function addEntity(instance) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__add(instance);\n\n    return this;\n  };\n\n  ContentState.prototype.getEntity = function getEntity(key) {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity.__get(key);\n  };\n\n  ContentState.createFromBlockArray = function createFromBlockArray( // TODO: update flow type when we completely deprecate the old entity API\n  blocks, entityMap) {\n    // TODO: remove this when we completely deprecate the old entity API\n    var theBlocks = Array.isArray(blocks) ? blocks : blocks.contentBlocks;\n    var blockMap = BlockMapBuilder.createFromArray(theBlocks);\n    var selectionState = blockMap.isEmpty() ? new SelectionState() : SelectionState.createEmpty(blockMap.first().getKey());\n    return new ContentState({\n      blockMap: blockMap,\n      entityMap: entityMap || DraftEntity,\n      selectionBefore: selectionState,\n      selectionAfter: selectionState\n    });\n  };\n\n  ContentState.createFromText = function createFromText(text) {\n    var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /\\r\\n?|\\n/g;\n    var strings = text.split(delimiter);\n    var blocks = strings.map(function (block) {\n      block = sanitizeDraftText(block);\n      return new ContentBlockNodeRecord({\n        key: generateRandomKey(),\n        text: block,\n        type: 'unstyled',\n        characterList: List(Repeat(CharacterMetadata.EMPTY, block.length))\n      });\n    });\n    return ContentState.createFromBlockArray(blocks);\n  };\n\n  return ContentState;\n}(ContentStateRecord);\n\nmodule.exports = ContentState;","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/draft-js/lib/ContentState.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","BlockMapBuilder","require","CharacterMetadata","ContentBlock","ContentBlockNode","DraftEntity","DraftFeatureFlags","Immutable","SelectionState","generateRandomKey","sanitizeDraftText","List","Record","Repeat","experimentalTreeDataSupport","draft_tree_data_support","defaultRecord","entityMap","blockMap","selectionBefore","selectionAfter","ContentBlockNodeRecord","ContentStateRecord","ContentState","_ContentStateRecord","apply","arguments","getEntityMap","getBlockMap","get","getSelectionBefore","getSelectionAfter","getBlockForKey","key","block","getKeyBefore","reverse","keySeq","skipUntil","v","skip","first","getKeyAfter","getBlockAfter","_","k","getBlockBefore","getBlocksAsArray","toArray","getFirstBlock","getLastBlock","last","getPlainText","delimiter","map","getText","join","getLastCreatedEntityKey","__getLastCreatedEntityKey","hasText","size","getLength","createEntity","type","mutability","data","__create","mergeEntityData","toMerge","__mergeData","replaceEntityData","newData","__replaceData","addEntity","__add","getEntity","__get","createFromBlockArray","blocks","theBlocks","Array","isArray","contentBlocks","createFromArray","selectionState","isEmpty","createEmpty","getKey","createFromText","text","length","undefined","strings","split","characterList","EMPTY","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ContentState\n * @format\n * \n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BlockMapBuilder = require('./BlockMapBuilder');\nvar CharacterMetadata = require('./CharacterMetadata');\nvar ContentBlock = require('./ContentBlock');\nvar ContentBlockNode = require('./ContentBlockNode');\nvar DraftEntity = require('./DraftEntity');\nvar DraftFeatureFlags = require('./DraftFeatureFlags');\nvar Immutable = require('immutable');\nvar SelectionState = require('./SelectionState');\n\nvar generateRandomKey = require('./generateRandomKey');\nvar sanitizeDraftText = require('./sanitizeDraftText');\n\nvar List = Immutable.List,\n    Record = Immutable.Record,\n    Repeat = Immutable.Repeat;\n\n\nvar experimentalTreeDataSupport = DraftFeatureFlags.draft_tree_data_support;\n\nvar defaultRecord = {\n  entityMap: null,\n  blockMap: null,\n  selectionBefore: null,\n  selectionAfter: null\n};\n\nvar ContentBlockNodeRecord = experimentalTreeDataSupport ? ContentBlockNode : ContentBlock;\n\nvar ContentStateRecord = Record(defaultRecord);\n\nvar ContentState = function (_ContentStateRecord) {\n  _inherits(ContentState, _ContentStateRecord);\n\n  function ContentState() {\n    _classCallCheck(this, ContentState);\n\n    return _possibleConstructorReturn(this, _ContentStateRecord.apply(this, arguments));\n  }\n\n  ContentState.prototype.getEntityMap = function getEntityMap() {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity;\n  };\n\n  ContentState.prototype.getBlockMap = function getBlockMap() {\n    return this.get('blockMap');\n  };\n\n  ContentState.prototype.getSelectionBefore = function getSelectionBefore() {\n    return this.get('selectionBefore');\n  };\n\n  ContentState.prototype.getSelectionAfter = function getSelectionAfter() {\n    return this.get('selectionAfter');\n  };\n\n  ContentState.prototype.getBlockForKey = function getBlockForKey(key) {\n    var block = this.getBlockMap().get(key);\n    return block;\n  };\n\n  ContentState.prototype.getKeyBefore = function getKeyBefore(key) {\n    return this.getBlockMap().reverse().keySeq().skipUntil(function (v) {\n      return v === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getKeyAfter = function getKeyAfter(key) {\n    return this.getBlockMap().keySeq().skipUntil(function (v) {\n      return v === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlockAfter = function getBlockAfter(key) {\n    return this.getBlockMap().skipUntil(function (_, k) {\n      return k === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlockBefore = function getBlockBefore(key) {\n    return this.getBlockMap().reverse().skipUntil(function (_, k) {\n      return k === key;\n    }).skip(1).first();\n  };\n\n  ContentState.prototype.getBlocksAsArray = function getBlocksAsArray() {\n    return this.getBlockMap().toArray();\n  };\n\n  ContentState.prototype.getFirstBlock = function getFirstBlock() {\n    return this.getBlockMap().first();\n  };\n\n  ContentState.prototype.getLastBlock = function getLastBlock() {\n    return this.getBlockMap().last();\n  };\n\n  ContentState.prototype.getPlainText = function getPlainText(delimiter) {\n    return this.getBlockMap().map(function (block) {\n      return block ? block.getText() : '';\n    }).join(delimiter || '\\n');\n  };\n\n  ContentState.prototype.getLastCreatedEntityKey = function getLastCreatedEntityKey() {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity.__getLastCreatedEntityKey();\n  };\n\n  ContentState.prototype.hasText = function hasText() {\n    var blockMap = this.getBlockMap();\n    return blockMap.size > 1 || blockMap.first().getLength() > 0;\n  };\n\n  ContentState.prototype.createEntity = function createEntity(type, mutability, data) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__create(type, mutability, data);\n    return this;\n  };\n\n  ContentState.prototype.mergeEntityData = function mergeEntityData(key, toMerge) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__mergeData(key, toMerge);\n    return this;\n  };\n\n  ContentState.prototype.replaceEntityData = function replaceEntityData(key, newData) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__replaceData(key, newData);\n    return this;\n  };\n\n  ContentState.prototype.addEntity = function addEntity(instance) {\n    // TODO: update this when we fully remove DraftEntity\n    DraftEntity.__add(instance);\n    return this;\n  };\n\n  ContentState.prototype.getEntity = function getEntity(key) {\n    // TODO: update this when we fully remove DraftEntity\n    return DraftEntity.__get(key);\n  };\n\n  ContentState.createFromBlockArray = function createFromBlockArray(\n  // TODO: update flow type when we completely deprecate the old entity API\n  blocks, entityMap) {\n    // TODO: remove this when we completely deprecate the old entity API\n    var theBlocks = Array.isArray(blocks) ? blocks : blocks.contentBlocks;\n    var blockMap = BlockMapBuilder.createFromArray(theBlocks);\n    var selectionState = blockMap.isEmpty() ? new SelectionState() : SelectionState.createEmpty(blockMap.first().getKey());\n    return new ContentState({\n      blockMap: blockMap,\n      entityMap: entityMap || DraftEntity,\n      selectionBefore: selectionState,\n      selectionAfter: selectionState\n    });\n  };\n\n  ContentState.createFromText = function createFromText(text) {\n    var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /\\r\\n?|\\n/g;\n\n    var strings = text.split(delimiter);\n    var blocks = strings.map(function (block) {\n      block = sanitizeDraftText(block);\n      return new ContentBlockNodeRecord({\n        key: generateRandomKey(),\n        text: block,\n        type: 'unstyled',\n        characterList: List(Repeat(CharacterMetadata.EMPTY, block.length))\n      });\n    });\n    return ContentState.createFromBlockArray(blocks);\n  };\n\n  return ContentState;\n}(ContentStateRecord);\n\nmodule.exports = ContentState;"]},"metadata":{},"sourceType":"script"}