{"ast":null,"code":"import _regeneratorRuntime from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{axios}from'utils/utils';import{withStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import Paper from'@material-ui/core/Paper';import Hidden from'@material-ui/core/Hidden';import Select from'@material-ui/core/Select';import CircularProgress from'@material-ui/core/CircularProgress';import{MenuItem,InputLabel,FormControl}from'@material-ui/core';import{Link,withRouter}from'react-router-dom';import{compose}from'recompose';var styles=function styles(theme){return{root:{padding:20},content:{display:'flex',flexDirection:'column',alignItems:'center'},topBar:{display:'flex',justifyContent:'space-between',marginBottom:30},topBarTitle:{marginLeft:50},topBarButton:{marginRight:50,justifySelf:'flex-end'},title:{marginBottom:30,textAlign:'center'},formPaper:{width:'90%',maxWidth:500}};};var formStyles={formContent:{paddingTop:30,paddingBottom:20,display:'flex',flexDirection:'column',alignItems:'center'},textField:{width:'90%',maxWidth:400,marginBottom:20},button:{width:'90%',maxWidth:300,marginTop:10,marginBottom:10}};var ResearcherSignup=/*#__PURE__*/function(_Component){_inherits(ResearcherSignup,_Component);var _super=_createSuper(ResearcherSignup);function ResearcherSignup(){var _this;_classCallCheck(this,ResearcherSignup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={researcherID:\"\",password:\"\",isLoading:false};_this.handleInputChange=function(event){_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var history;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({isLoading:true});history=_this.props.history;_context.prev=3;_context.next=6;return axios.post(\"/api/researcher/signup\",{researcherID:_this.state.researcherID,institution:_this.state.institution,password:_this.state.password});case 6:history.push('/login');_this.setState({isLoading:false});_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);_this.setState({isLoading:false});alert(_context.t0.message);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ResearcherSignup,[{key:\"render\",value:function render(){var classes=this.props.classes;var _this$state=this.state,researcherID=_this$state.researcherID,password=_this$state.password,isLoading=_this$state.isLoading;var submitDisabled=researcherID===\"\"||password===\"\"||isLoading;return/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",noValidate:true,className:classes.formContent},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,label:\"Researcher ID\",id:\"researcherID\",onChange:this.handleInputChange,className:classes.textField}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,type:\"password\",label:\"Password\",id:\"password\",onChange:this.handleInputChange,className:classes.textField}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.button,color:\"primary\",disabled:submitDisabled,onClick:this.handleSubmit},\"Submit\"),isLoading&&/*#__PURE__*/React.createElement(CircularProgress,null));}}]);return ResearcherSignup;}(Component);var ResearcherSignupForm=compose(withRouter,withStyles(formStyles))(ResearcherSignup);var SignUp=/*#__PURE__*/function(_Component2){_inherits(SignUp,_Component2);var _super2=_createSuper(SignUp);function SignUp(){var _this2;_classCallCheck(this,SignUp);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.handleChangeSignupMode=function(event,value){_this2.setState({signupMode:value});};_this2.topBar=function(){var classes=_this2.props.classes;return/*#__PURE__*/React.createElement(\"div\",{className:classes.topBar},/*#__PURE__*/React.createElement(Hidden,{xsDown:true},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"textSecondary\",className:classes.topBarTitle},\"Researcher Sign Up\")),/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"secondary\",className:classes.topBarButton,component:Link,to:\"/login\"},\"Log in\"));};return _this2;}_createClass(SignUp,[{key:\"render\",value:function render(){var classes=this.props.classes;return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},this.topBar(),/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{className:classes.title},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",gutterBottom:true},\"Welcom to Open Speech Platform\"),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",gutterBottom:true,color:\"textSecondary\"},\"WebApps for hearing-aid research\")),/*#__PURE__*/React.createElement(Paper,{className:classes.formPaper},/*#__PURE__*/React.createElement(ResearcherSignupForm,null))));}}]);return SignUp;}(Component);export default withStyles(styles)(SignUp);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/src/pages/general/signup.jsx"],"names":["React","Component","axios","withStyles","Typography","Button","TextField","Paper","Hidden","Select","CircularProgress","MenuItem","InputLabel","FormControl","Link","withRouter","compose","styles","theme","root","padding","content","display","flexDirection","alignItems","topBar","justifyContent","marginBottom","topBarTitle","marginLeft","topBarButton","marginRight","justifySelf","title","textAlign","formPaper","width","maxWidth","formStyles","formContent","paddingTop","paddingBottom","textField","button","marginTop","ResearcherSignup","state","researcherID","password","isLoading","handleInputChange","event","setState","target","id","value","handleSubmit","preventDefault","history","props","post","institution","push","alert","message","console","log","classes","submitDisabled","ResearcherSignupForm","SignUp","handleChangeSignupMode","signupMode"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { axios } from 'utils/utils';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Hidden from '@material-ui/core/Hidden';\nimport Select from '@material-ui/core/Select';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { MenuItem, InputLabel, FormControl } from '@material-ui/core';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\n\nconst styles = (theme) => ({\n    root: {\n        padding: 20\n    },\n    content: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    topBar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginBottom: 30\n    },\n    topBarTitle: {\n        marginLeft: 50,\n    },\n    topBarButton: {\n        marginRight: 50,\n        justifySelf: 'flex-end',\n    },\n    title: {\n        marginBottom: 30,\n        textAlign: 'center'\n    },\n    formPaper: {\n        width: '90%',\n        maxWidth: 500,\n    },\n});\n\nconst formStyles = {\n    formContent: {\n        paddingTop: 30,\n        paddingBottom: 20,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    textField: {\n        width: '90%',\n        maxWidth: 400,\n        marginBottom: 20\n    },\n    button: {\n        width: '90%',\n        maxWidth: 300,\n        marginTop: 10,\n        marginBottom: 10,\n    },\n};\n\nclass ResearcherSignup extends Component {\n    state = {\n        researcherID: \"\",\n        password: \"\",\n        isLoading: false,\n    };\n\n    handleInputChange = (event) => {\n        this.setState({\n            [event.target.id]: event.target.value,\n        });\n    }\n\n    handleSubmit = async event => {\n        event.preventDefault();\n        this.setState({\n            isLoading: true,\n        });\n        const { history } = this.props;\n\n        try {\n            await axios.post(\"/api/researcher/signup\", {\n                researcherID: this.state.researcherID,\n                institution: this.state.institution,\n                password: this.state.password\n            });\n            history.push('/login');\n            this.setState({\n                isLoading: false,\n            });\n        }\n        catch (error) {\n            this.setState({\n                isLoading: false,\n            });\n            alert(error.message);\n            console.log(error);\n        }\n    }\n\n    render() {\n        const { classes } = this.props;\n        const { researcherID, password, isLoading } = this.state;\n        const submitDisabled = researcherID === \"\"  || password === \"\" || isLoading;\n        return (\n            <form autoComplete=\"off\" noValidate className={classes.formContent} >\n                <TextField\n                    variant=\"outlined\"\n                    required\n                    label=\"Researcher ID\"\n                    id=\"researcherID\"\n                    onChange={this.handleInputChange}\n                    className={classes.textField}\n                />\n                <TextField\n                    variant=\"outlined\"\n                    required\n                    type=\"password\"\n                    label=\"Password\"\n                    id=\"password\"\n                    onChange={this.handleInputChange}\n                    className={classes.textField}\n                /> \n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color=\"primary\"\n                    disabled={submitDisabled}\n                    onClick={this.handleSubmit}\n                >\n                    Submit\n                </Button>\n                {isLoading && <CircularProgress />}\n            </form>\n        );\n    }\n}\n\nconst ResearcherSignupForm = compose(\n    withRouter,\n    withStyles(formStyles),\n)(ResearcherSignup);\n\nclass SignUp extends Component {\n\n    handleChangeSignupMode = (event, value) => {\n        this.setState({\n            signupMode: value\n        })\n    }\n\n    topBar = () => {\n        const { classes } = this.props;\n\n        return (\n            <div className={classes.topBar}>\n                <Hidden xsDown>\n                    <Typography variant=\"subtitle1\" color=\"textSecondary\" className={classes.topBarTitle}>\n                        Researcher Sign Up\n                    </Typography>\n                </Hidden>\n                <Button \n                    variant=\"outlined\"\n                    color=\"secondary\" \n                    className={classes.topBarButton} \n                    component={Link}\n                    to=\"/login\"\n                >\n                    Log in\n                </Button>\n            </div>\n        );\n    }\n\n    render() {\n        const { classes } = this.props; \n        return (\n            <div className={classes.root}>\n                {this.topBar()}\n                <div className={classes.content}>\n                    <div className={classes.title}>\n                        <Typography variant=\"h4\" gutterBottom>Welcom to Open Speech Platform</Typography>\n                        <Typography variant=\"h6\" gutterBottom color=\"textSecondary\">WebApps for hearing-aid research</Typography>\n                    </div>\n                    <Paper className={classes.formPaper}>\n                        <ResearcherSignupForm/>\n                    </Paper>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(SignUp);\n"]},"metadata":{},"sourceType":"module"}