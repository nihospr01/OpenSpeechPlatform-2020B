{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Align from 'rc-align';\nimport Animate from 'rc-animate';\nimport PopupInner from './PopupInner';\nimport LazyRenderBox from './LazyRenderBox';\nimport { saveRef } from './utils';\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      // Used for stretch\n      stretchChecked: false,\n      targetWidth: undefined,\n      targetHeight: undefined\n    };\n    _this.savePopupRef = saveRef.bind(_this, 'popupInstance');\n    _this.saveAlignRef = saveRef.bind(_this, 'alignInstance');\n    return _this;\n  }\n\n  Popup.prototype.componentDidMount = function componentDidMount() {\n    this.rootNode = this.getPopupDomNode();\n    this.setStretchSize();\n  };\n\n  Popup.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.setStretchSize();\n  }; // Record size if stretch needed\n\n\n  Popup.prototype.getPopupDomNode = function getPopupDomNode() {\n    return ReactDOM.findDOMNode(this.popupInstance);\n  }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n  // ref: https://www.npmjs.com/package/rc-align\n\n\n  Popup.prototype.getMaskTransitionName = function getMaskTransitionName() {\n    var props = this.props;\n    var transitionName = props.maskTransitionName;\n    var animation = props.maskAnimation;\n\n    if (!transitionName && animation) {\n      transitionName = props.prefixCls + '-' + animation;\n    }\n\n    return transitionName;\n  };\n\n  Popup.prototype.getTransitionName = function getTransitionName() {\n    var props = this.props;\n    var transitionName = props.transitionName;\n\n    if (!transitionName && props.animation) {\n      transitionName = props.prefixCls + '-' + props.animation;\n    }\n\n    return transitionName;\n  };\n\n  Popup.prototype.getClassName = function getClassName(currentAlignClassName) {\n    return this.props.prefixCls + ' ' + this.props.className + ' ' + currentAlignClassName;\n  };\n\n  Popup.prototype.getPopupElement = function getPopupElement() {\n    var _this2 = this;\n\n    var savePopupRef = this.savePopupRef;\n    var _state = this.state,\n        stretchChecked = _state.stretchChecked,\n        targetHeight = _state.targetHeight,\n        targetWidth = _state.targetWidth;\n    var _props = this.props,\n        align = _props.align,\n        visible = _props.visible,\n        prefixCls = _props.prefixCls,\n        style = _props.style,\n        getClassNameFromAlign = _props.getClassNameFromAlign,\n        destroyPopupOnHide = _props.destroyPopupOnHide,\n        stretch = _props.stretch,\n        children = _props.children,\n        onMouseEnter = _props.onMouseEnter,\n        onMouseLeave = _props.onMouseLeave,\n        onMouseDown = _props.onMouseDown,\n        onTouchStart = _props.onTouchStart;\n    var className = this.getClassName(this.currentAlignClassName || getClassNameFromAlign(align));\n    var hiddenClassName = prefixCls + '-hidden';\n\n    if (!visible) {\n      this.currentAlignClassName = null;\n    }\n\n    var sizeStyle = {};\n\n    if (stretch) {\n      // Stretch with target\n      if (stretch.indexOf('height') !== -1) {\n        sizeStyle.height = targetHeight;\n      } else if (stretch.indexOf('minHeight') !== -1) {\n        sizeStyle.minHeight = targetHeight;\n      }\n\n      if (stretch.indexOf('width') !== -1) {\n        sizeStyle.width = targetWidth;\n      } else if (stretch.indexOf('minWidth') !== -1) {\n        sizeStyle.minWidth = targetWidth;\n      } // Delay force align to makes ui smooth\n\n\n      if (!stretchChecked) {\n        sizeStyle.visibility = 'hidden';\n        setTimeout(function () {\n          if (_this2.alignInstance) {\n            _this2.alignInstance.forceAlign();\n          }\n        }, 0);\n      }\n    }\n\n    var newStyle = _extends({}, sizeStyle, style, this.getZIndexStyle());\n\n    var popupInnerProps = {\n      className: className,\n      prefixCls: prefixCls,\n      ref: savePopupRef,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseDown: onMouseDown,\n      onTouchStart: onTouchStart,\n      style: newStyle\n    };\n\n    if (destroyPopupOnHide) {\n      return React.createElement(Animate, {\n        component: '',\n        exclusive: true,\n        transitionAppear: true,\n        transitionName: this.getTransitionName()\n      }, visible ? React.createElement(Align, {\n        target: this.getAlignTarget(),\n        key: 'popup',\n        ref: this.saveAlignRef,\n        monitorWindowResize: true,\n        align: align,\n        onAlign: this.onAlign\n      }, React.createElement(PopupInner, _extends({\n        visible: true\n      }, popupInnerProps), children)) : null);\n    }\n\n    return React.createElement(Animate, {\n      component: '',\n      exclusive: true,\n      transitionAppear: true,\n      transitionName: this.getTransitionName(),\n      showProp: 'xVisible'\n    }, React.createElement(Align, {\n      target: this.getAlignTarget(),\n      key: 'popup',\n      ref: this.saveAlignRef,\n      monitorWindowResize: true,\n      xVisible: visible,\n      childrenProps: {\n        visible: 'xVisible'\n      },\n      disabled: !visible,\n      align: align,\n      onAlign: this.onAlign\n    }, React.createElement(PopupInner, _extends({\n      hiddenClassName: hiddenClassName\n    }, popupInnerProps), children)));\n  };\n\n  Popup.prototype.getZIndexStyle = function getZIndexStyle() {\n    var style = {};\n    var props = this.props;\n\n    if (props.zIndex !== undefined) {\n      style.zIndex = props.zIndex;\n    }\n\n    return style;\n  };\n\n  Popup.prototype.getMaskElement = function getMaskElement() {\n    var props = this.props;\n    var maskElement = void 0;\n\n    if (props.mask) {\n      var maskTransition = this.getMaskTransitionName();\n      maskElement = React.createElement(LazyRenderBox, {\n        style: this.getZIndexStyle(),\n        key: 'mask',\n        className: props.prefixCls + '-mask',\n        hiddenClassName: props.prefixCls + '-mask-hidden',\n        visible: props.visible\n      });\n\n      if (maskTransition) {\n        maskElement = React.createElement(Animate, {\n          key: 'mask',\n          showProp: 'visible',\n          transitionAppear: true,\n          component: '',\n          transitionName: maskTransition\n        }, maskElement);\n      }\n    }\n\n    return maskElement;\n  };\n\n  Popup.prototype.render = function render() {\n    return React.createElement('div', null, this.getMaskElement(), this.getPopupElement());\n  };\n\n  return Popup;\n}(Component);\n\nPopup.propTypes = {\n  visible: PropTypes.bool,\n  style: PropTypes.object,\n  getClassNameFromAlign: PropTypes.func,\n  onAlign: PropTypes.func,\n  getRootDomNode: PropTypes.func,\n  align: PropTypes.any,\n  destroyPopupOnHide: PropTypes.bool,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onTouchStart: PropTypes.func,\n  stretch: PropTypes.string,\n  children: PropTypes.node,\n  point: PropTypes.shape({\n    pageX: PropTypes.number,\n    pageY: PropTypes.number\n  })\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onAlign = function (popupDomNode, align) {\n    var props = _this3.props;\n    var currentAlignClassName = props.getClassNameFromAlign(align); // FIX: https://github.com/react-component/trigger/issues/56\n    // FIX: https://github.com/react-component/tooltip/issues/79\n\n    if (_this3.currentAlignClassName !== currentAlignClassName) {\n      _this3.currentAlignClassName = currentAlignClassName;\n      popupDomNode.className = _this3.getClassName(currentAlignClassName);\n    }\n\n    props.onAlign(popupDomNode, align);\n  };\n\n  this.setStretchSize = function () {\n    var _props2 = _this3.props,\n        stretch = _props2.stretch,\n        getRootDomNode = _props2.getRootDomNode,\n        visible = _props2.visible;\n    var _state2 = _this3.state,\n        stretchChecked = _state2.stretchChecked,\n        targetHeight = _state2.targetHeight,\n        targetWidth = _state2.targetWidth;\n\n    if (!stretch || !visible) {\n      if (stretchChecked) {\n        _this3.setState({\n          stretchChecked: false\n        });\n      }\n\n      return;\n    }\n\n    var $ele = getRootDomNode();\n    if (!$ele) return;\n    var height = $ele.offsetHeight;\n    var width = $ele.offsetWidth;\n\n    if (targetHeight !== height || targetWidth !== width || !stretchChecked) {\n      _this3.setState({\n        stretchChecked: true,\n        targetHeight: height,\n        targetWidth: width\n      });\n    }\n  };\n\n  this.getTargetElement = function () {\n    return _this3.props.getRootDomNode();\n  };\n\n  this.getAlignTarget = function () {\n    var point = _this3.props.point;\n\n    if (point) {\n      return point;\n    }\n\n    return _this3.getTargetElement;\n  };\n};\n\nexport default Popup;","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/rc-trigger/es/Popup.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","Component","PropTypes","ReactDOM","Align","Animate","PopupInner","LazyRenderBox","saveRef","Popup","_Component","props","_this","call","_initialiseProps","state","stretchChecked","targetWidth","undefined","targetHeight","savePopupRef","bind","saveAlignRef","prototype","componentDidMount","rootNode","getPopupDomNode","setStretchSize","componentDidUpdate","findDOMNode","popupInstance","getMaskTransitionName","transitionName","maskTransitionName","animation","maskAnimation","prefixCls","getTransitionName","getClassName","currentAlignClassName","className","getPopupElement","_this2","_state","_props","align","visible","style","getClassNameFromAlign","destroyPopupOnHide","stretch","children","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","hiddenClassName","sizeStyle","indexOf","height","minHeight","width","minWidth","visibility","setTimeout","alignInstance","forceAlign","newStyle","getZIndexStyle","popupInnerProps","ref","createElement","component","exclusive","transitionAppear","target","getAlignTarget","key","monitorWindowResize","onAlign","showProp","xVisible","childrenProps","disabled","zIndex","getMaskElement","maskElement","mask","maskTransition","render","propTypes","bool","object","func","getRootDomNode","any","string","node","point","shape","pageX","number","pageY","_this3","popupDomNode","_props2","_state2","setState","$ele","offsetHeight","offsetWidth","getTargetElement"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Align from 'rc-align';\nimport Animate from 'rc-animate';\nimport PopupInner from './PopupInner';\nimport LazyRenderBox from './LazyRenderBox';\nimport { saveRef } from './utils';\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      // Used for stretch\n      stretchChecked: false,\n      targetWidth: undefined,\n      targetHeight: undefined\n    };\n\n    _this.savePopupRef = saveRef.bind(_this, 'popupInstance');\n    _this.saveAlignRef = saveRef.bind(_this, 'alignInstance');\n    return _this;\n  }\n\n  Popup.prototype.componentDidMount = function componentDidMount() {\n    this.rootNode = this.getPopupDomNode();\n    this.setStretchSize();\n  };\n\n  Popup.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.setStretchSize();\n  };\n\n  // Record size if stretch needed\n\n\n  Popup.prototype.getPopupDomNode = function getPopupDomNode() {\n    return ReactDOM.findDOMNode(this.popupInstance);\n  };\n\n  // `target` on `rc-align` can accept as a function to get the bind element or a point.\n  // ref: https://www.npmjs.com/package/rc-align\n\n\n  Popup.prototype.getMaskTransitionName = function getMaskTransitionName() {\n    var props = this.props;\n    var transitionName = props.maskTransitionName;\n    var animation = props.maskAnimation;\n    if (!transitionName && animation) {\n      transitionName = props.prefixCls + '-' + animation;\n    }\n    return transitionName;\n  };\n\n  Popup.prototype.getTransitionName = function getTransitionName() {\n    var props = this.props;\n    var transitionName = props.transitionName;\n    if (!transitionName && props.animation) {\n      transitionName = props.prefixCls + '-' + props.animation;\n    }\n    return transitionName;\n  };\n\n  Popup.prototype.getClassName = function getClassName(currentAlignClassName) {\n    return this.props.prefixCls + ' ' + this.props.className + ' ' + currentAlignClassName;\n  };\n\n  Popup.prototype.getPopupElement = function getPopupElement() {\n    var _this2 = this;\n\n    var savePopupRef = this.savePopupRef;\n    var _state = this.state,\n        stretchChecked = _state.stretchChecked,\n        targetHeight = _state.targetHeight,\n        targetWidth = _state.targetWidth;\n    var _props = this.props,\n        align = _props.align,\n        visible = _props.visible,\n        prefixCls = _props.prefixCls,\n        style = _props.style,\n        getClassNameFromAlign = _props.getClassNameFromAlign,\n        destroyPopupOnHide = _props.destroyPopupOnHide,\n        stretch = _props.stretch,\n        children = _props.children,\n        onMouseEnter = _props.onMouseEnter,\n        onMouseLeave = _props.onMouseLeave,\n        onMouseDown = _props.onMouseDown,\n        onTouchStart = _props.onTouchStart;\n\n    var className = this.getClassName(this.currentAlignClassName || getClassNameFromAlign(align));\n    var hiddenClassName = prefixCls + '-hidden';\n\n    if (!visible) {\n      this.currentAlignClassName = null;\n    }\n\n    var sizeStyle = {};\n    if (stretch) {\n      // Stretch with target\n      if (stretch.indexOf('height') !== -1) {\n        sizeStyle.height = targetHeight;\n      } else if (stretch.indexOf('minHeight') !== -1) {\n        sizeStyle.minHeight = targetHeight;\n      }\n      if (stretch.indexOf('width') !== -1) {\n        sizeStyle.width = targetWidth;\n      } else if (stretch.indexOf('minWidth') !== -1) {\n        sizeStyle.minWidth = targetWidth;\n      }\n\n      // Delay force align to makes ui smooth\n      if (!stretchChecked) {\n        sizeStyle.visibility = 'hidden';\n        setTimeout(function () {\n          if (_this2.alignInstance) {\n            _this2.alignInstance.forceAlign();\n          }\n        }, 0);\n      }\n    }\n\n    var newStyle = _extends({}, sizeStyle, style, this.getZIndexStyle());\n\n    var popupInnerProps = {\n      className: className,\n      prefixCls: prefixCls,\n      ref: savePopupRef,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseDown: onMouseDown,\n      onTouchStart: onTouchStart,\n      style: newStyle\n    };\n    if (destroyPopupOnHide) {\n      return React.createElement(\n        Animate,\n        {\n          component: '',\n          exclusive: true,\n          transitionAppear: true,\n          transitionName: this.getTransitionName()\n        },\n        visible ? React.createElement(\n          Align,\n          {\n            target: this.getAlignTarget(),\n            key: 'popup',\n            ref: this.saveAlignRef,\n            monitorWindowResize: true,\n            align: align,\n            onAlign: this.onAlign\n          },\n          React.createElement(\n            PopupInner,\n            _extends({\n              visible: true\n            }, popupInnerProps),\n            children\n          )\n        ) : null\n      );\n    }\n\n    return React.createElement(\n      Animate,\n      {\n        component: '',\n        exclusive: true,\n        transitionAppear: true,\n        transitionName: this.getTransitionName(),\n        showProp: 'xVisible'\n      },\n      React.createElement(\n        Align,\n        {\n          target: this.getAlignTarget(),\n          key: 'popup',\n          ref: this.saveAlignRef,\n          monitorWindowResize: true,\n          xVisible: visible,\n          childrenProps: { visible: 'xVisible' },\n          disabled: !visible,\n          align: align,\n          onAlign: this.onAlign\n        },\n        React.createElement(\n          PopupInner,\n          _extends({\n            hiddenClassName: hiddenClassName\n          }, popupInnerProps),\n          children\n        )\n      )\n    );\n  };\n\n  Popup.prototype.getZIndexStyle = function getZIndexStyle() {\n    var style = {};\n    var props = this.props;\n    if (props.zIndex !== undefined) {\n      style.zIndex = props.zIndex;\n    }\n    return style;\n  };\n\n  Popup.prototype.getMaskElement = function getMaskElement() {\n    var props = this.props;\n    var maskElement = void 0;\n    if (props.mask) {\n      var maskTransition = this.getMaskTransitionName();\n      maskElement = React.createElement(LazyRenderBox, {\n        style: this.getZIndexStyle(),\n        key: 'mask',\n        className: props.prefixCls + '-mask',\n        hiddenClassName: props.prefixCls + '-mask-hidden',\n        visible: props.visible\n      });\n      if (maskTransition) {\n        maskElement = React.createElement(\n          Animate,\n          {\n            key: 'mask',\n            showProp: 'visible',\n            transitionAppear: true,\n            component: '',\n            transitionName: maskTransition\n          },\n          maskElement\n        );\n      }\n    }\n    return maskElement;\n  };\n\n  Popup.prototype.render = function render() {\n    return React.createElement(\n      'div',\n      null,\n      this.getMaskElement(),\n      this.getPopupElement()\n    );\n  };\n\n  return Popup;\n}(Component);\n\nPopup.propTypes = {\n  visible: PropTypes.bool,\n  style: PropTypes.object,\n  getClassNameFromAlign: PropTypes.func,\n  onAlign: PropTypes.func,\n  getRootDomNode: PropTypes.func,\n  align: PropTypes.any,\n  destroyPopupOnHide: PropTypes.bool,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onTouchStart: PropTypes.func,\n  stretch: PropTypes.string,\n  children: PropTypes.node,\n  point: PropTypes.shape({\n    pageX: PropTypes.number,\n    pageY: PropTypes.number\n  })\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onAlign = function (popupDomNode, align) {\n    var props = _this3.props;\n    var currentAlignClassName = props.getClassNameFromAlign(align);\n    // FIX: https://github.com/react-component/trigger/issues/56\n    // FIX: https://github.com/react-component/tooltip/issues/79\n    if (_this3.currentAlignClassName !== currentAlignClassName) {\n      _this3.currentAlignClassName = currentAlignClassName;\n      popupDomNode.className = _this3.getClassName(currentAlignClassName);\n    }\n    props.onAlign(popupDomNode, align);\n  };\n\n  this.setStretchSize = function () {\n    var _props2 = _this3.props,\n        stretch = _props2.stretch,\n        getRootDomNode = _props2.getRootDomNode,\n        visible = _props2.visible;\n    var _state2 = _this3.state,\n        stretchChecked = _state2.stretchChecked,\n        targetHeight = _state2.targetHeight,\n        targetWidth = _state2.targetWidth;\n\n\n    if (!stretch || !visible) {\n      if (stretchChecked) {\n        _this3.setState({ stretchChecked: false });\n      }\n      return;\n    }\n\n    var $ele = getRootDomNode();\n    if (!$ele) return;\n\n    var height = $ele.offsetHeight;\n    var width = $ele.offsetWidth;\n\n    if (targetHeight !== height || targetWidth !== width || !stretchChecked) {\n      _this3.setState({\n        stretchChecked: true,\n        targetHeight: height,\n        targetWidth: width\n      });\n    }\n  };\n\n  this.getTargetElement = function () {\n    return _this3.props.getRootDomNode();\n  };\n\n  this.getAlignTarget = function () {\n    var point = _this3.props.point;\n\n    if (point) {\n      return point;\n    }\n    return _this3.getTargetElement;\n  };\n};\n\nexport default Popup;"]},"metadata":{},"sourceType":"module"}