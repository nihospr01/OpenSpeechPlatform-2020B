{"ast":null,"code":"import _toConsumableArray from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{axios}from\"utils/utils\";import{withStyles}from\"@material-ui/styles\";import Paper from\"@material-ui/core/Paper\";import Toolbar from\"@material-ui/core/Toolbar\";import Typography from\"@material-ui/core/Typography\";import Button from\"@material-ui/core/Button\";import Table from\"@material-ui/core/Table\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import TableSortLabel from\"@material-ui/core/TableSortLabel\";import{withRouter}from\"react-router-dom\";import{compose}from\"recompose\";import withUserAuth from\"context/withUserAuth\";import FileListRow from\"components/fileListRow\";var styles=function styles(theme){return{root:{flexGrow:1},content:{padding:theme.spacing(3)},listenerSection:{marginTop:30,width:\"90%\",maxWidth:1000},listenerSectionContent:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},topBarButton:{marginLeft:30},textField:{width:\"90%\",maxWidth:400,marginBottom:20}};};var FileManagement=/*#__PURE__*/function(_Component){_inherits(FileManagement,_Component);var _super=_createSuper(FileManagement);function FileManagement(){var _this;_classCallCheck(this,FileManagement);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fileList:[],fileOrder:\"asc\",uploadDialogOpen:false,selectedFiles:[]};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.getFileNames();case 1:case\"end\":return _context.stop();}}},_callee);}));_this.getFileNames=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,tmpList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/researcher/fileNames\");case 3:response=_context2.sent;tmpList=[];response.data.forEach(function(elem){tmpList.push(elem.value);if(elem.transcript!=null){tmpList.push(elem.transcript);}});_this.setState({fileList:tmpList});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);//alert(error.response.data);\nalert(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));_this.handleSortChange=function(){var fileOrder=_this.state.fileOrder;var newOrder=fileOrder===\"asc\"?\"desc\":\"asc\";_this.setState({fileOrder:newOrder});};_this.handleUploadDialogOpen=function(){_this.setState({uploadDialogOpen:true});};_this.handleUploadDialogClose=function(){_this.setState({uploadDialogOpen:false});};_this.handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(filename){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"/api/researcher/delete\",{filename:filename});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 8:_this.getFileNames();case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.uploadFiles=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var data,x,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(_this.state.selectedFiles);data=new FormData();for(x=0;x<_this.state.selectedFiles.length;x++){data.append(\"file\",_this.state.selectedFiles[x]);}_context4.prev=3;_context4.next=6;return axios.post(\"/api/researcher/upload\",data,{});case 6:response=_context4.sent;console.log(response.data);_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);alert(_context4.t0);case 13:_this.getFileNames();_this.handleUploadDialogClose();case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));_this.onChangeHandler=function(event){_this.setState({selectedFiles:event.target.files});};return _this;}_createClass(FileManagement,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;var _this$state=this.state,fileOrder=_this$state.fileOrder,fileList=_this$state.fileList,uploadDialogOpen=_this$state.uploadDialogOpen;console.log(fileList);var sortedFileList=_toConsumableArray(fileList).sort(function(a,b){if(a===\"4AFCConfig.json\"||a===\"UserAssessmentConfig.json\"){return-1;}if(b===\"4AFCConfig.json\"||b===\"UserAssessmentConfig.json\"){return 1;}if(fileOrder===\"asc\"){if(a>b){return 1;}else{return-1;}}else{if(a<b){return 1;}else{return-1;}}});return/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(Paper,{className:classes.listenerSection},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",gutterBottom:true},\"My Files\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"contained\",className:classes.topBarButton,onClick:this.handleUploadDialogOpen},\"Upload Files\")),/*#__PURE__*/React.createElement(\"div\",{className:classes.listenerSectionContent},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(TableSortLabel,{active:true,direction:fileOrder,onClick:this.handleSortChange},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"textSecondary\"},\"File Name\"))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"textSecondary\"},\"Actions\")))),/*#__PURE__*/React.createElement(TableBody,null,sortedFileList.map(function(filename,index){return/*#__PURE__*/React.createElement(FileListRow,{key:\"file_\".concat(index),filename:filename,handleDelete:_this2.handleDelete});})))),/*#__PURE__*/React.createElement(Dialog,{open:uploadDialogOpen,onClose:this.handleUploadDialogClose},/*#__PURE__*/React.createElement(DialogTitle,null,\"Upload File\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(\"input\",{type:\"file\",multiple:true,onChange:this.onChangeHandler})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:this.uploadFiles},\"Submit\")))));}}]);return FileManagement;}(Component);export default compose(withUserAuth,withRouter,withStyles(styles))(FileManagement);","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/src/pages/admin/fileManagement.jsx"],"names":["React","Component","axios","withStyles","Paper","Toolbar","Typography","Button","Table","TableHead","TableRow","TableBody","TableCell","Dialog","DialogTitle","DialogActions","DialogContent","TableSortLabel","withRouter","compose","withUserAuth","FileListRow","styles","theme","root","flexGrow","content","padding","spacing","listenerSection","marginTop","width","maxWidth","listenerSectionContent","display","flexDirection","alignItems","topBarButton","marginLeft","textField","marginBottom","FileManagement","state","fileList","fileOrder","uploadDialogOpen","selectedFiles","componentDidMount","getFileNames","get","response","tmpList","data","forEach","elem","push","value","transcript","setState","alert","handleSortChange","newOrder","handleUploadDialogOpen","handleUploadDialogClose","handleDelete","filename","post","uploadFiles","console","log","FormData","x","length","append","onChangeHandler","event","target","files","classes","props","sortedFileList","sort","a","b","map","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { axios } from \"utils/utils\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport withUserAuth from \"context/withUserAuth\";\nimport FileListRow from \"components/fileListRow\";\n\nconst styles = theme => ({\n    root: {\n        flexGrow: 1\n    },\n    content: {\n        padding: theme.spacing(3)\n    },\n    listenerSection: {\n        marginTop: 30,\n        width: \"90%\",\n        maxWidth: 1000\n    },\n    listenerSectionContent: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n    },\n    topBarButton: {\n        marginLeft: 30\n    },\n    textField: {\n        width: \"90%\",\n        maxWidth: 400,\n        marginBottom: 20\n    }\n});\n\nclass FileManagement extends Component {\n    state = {\n        fileList: [],\n        fileOrder: \"asc\",\n        uploadDialogOpen: false,\n        selectedFiles: []\n    };\n\n    componentDidMount = async () => {\n        this.getFileNames();\n    };\n\n    getFileNames = async () => {\n        try {\n            const response = await axios.get(\"/api/researcher/fileNames\");\n            let tmpList = [];\n            response.data.forEach((elem) => {\n                tmpList.push(elem.value); \n                if (elem.transcript != null) {\n                    tmpList.push(elem.transcript);\n                }\n            })\n            this.setState({ fileList: tmpList });\n        } catch (error) {\n            //alert(error.response.data);\n            alert(error);\n        }\n    };\n\n    handleSortChange = () => {\n        const { fileOrder } = this.state;\n        const newOrder = fileOrder === \"asc\" ? \"desc\" : \"asc\";\n        this.setState({\n            fileOrder: newOrder\n        });\n    };\n\n    handleUploadDialogOpen = () => {\n        this.setState({ uploadDialogOpen: true });\n    };\n\n    handleUploadDialogClose = () => {\n        this.setState({ uploadDialogOpen: false });\n    };\n\n    handleDelete = async filename => {\n        try {\n            await axios.post(\"/api/researcher/delete\", {\n                filename: filename\n            });\n        } catch (err) {\n            throw err;\n        }\n        this.getFileNames();\n    };\n\n    uploadFiles = async () => {\n        console.log(this.state.selectedFiles);\n        const data = new FormData();\n        for (var x = 0; x < this.state.selectedFiles.length; x++) {\n            data.append(\"file\", this.state.selectedFiles[x]);\n        }\n        try {\n            const response = await axios.post(\n                \"/api/researcher/upload\",\n                data,\n                {}\n            );\n            console.log(response.data);\n        } catch (error) {\n            alert(error);\n        }\n        this.getFileNames();\n        this.handleUploadDialogClose();\n    };\n\n    onChangeHandler = event => {\n        this.setState({\n            selectedFiles: event.target.files\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { fileOrder, fileList, uploadDialogOpen } = this.state;\n        console.log(fileList);\n        const sortedFileList = [...fileList].sort((a, b) => {\n            if (a === \"4AFCConfig.json\" || a === \"UserAssessmentConfig.json\") {\n                return -1;\n            }\n            if (b === \"4AFCConfig.json\" || b === \"UserAssessmentConfig.json\") {\n                return 1;\n            }\n            if (fileOrder === \"asc\") {\n                if (a > b) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            } else {\n                if (a < b) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            }\n        });\n\n        return (\n            <div className={classes.content}>\n                <Paper className={classes.listenerSection}>\n                    <Toolbar>\n                        <Typography color=\"textSecondary\" gutterBottom>\n                            My Files\n                        </Typography>\n                        <Button\n                            color=\"primary\"\n                            variant=\"contained\"\n                            className={classes.topBarButton}\n                            onClick={this.handleUploadDialogOpen}\n                        >\n                            Upload Files\n                        </Button>\n                    </Toolbar>\n                    <div className={classes.listenerSectionContent}>\n                        <Table>\n                            <TableHead>\n                                <TableRow>\n                                    <TableCell>\n                                        <TableSortLabel\n                                            active={true}\n                                            direction={fileOrder}\n                                            onClick={this.handleSortChange}\n                                        >\n                                            <Typography\n                                                variant=\"subtitle1\"\n                                                color=\"textSecondary\"\n                                            >\n                                                File Name\n                                            </Typography>\n                                        </TableSortLabel>\n                                    </TableCell>\n                                    <TableCell>\n                                        <Typography\n                                            variant=\"subtitle1\"\n                                            color=\"textSecondary\"\n                                        >\n                                            Actions\n                                        </Typography>\n                                    </TableCell>\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                {sortedFileList.map((filename, index) => (\n                                    <FileListRow\n                                        key={`file_${index}`}\n                                        filename={filename}\n                                        handleDelete={this.handleDelete}\n                                    />\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </div>\n                    <Dialog\n                        open={uploadDialogOpen}\n                        onClose={this.handleUploadDialogClose}\n                    >\n                        <DialogTitle>Upload File</DialogTitle>\n                        <DialogContent>\n                            <input\n                                type=\"file\"\n                                multiple\n                                onChange={this.onChangeHandler}\n                            />\n                        </DialogContent>\n                        <DialogActions>\n                            <Button color=\"primary\" onClick={this.uploadFiles}>\n                                Submit\n                            </Button>\n                        </DialogActions>\n                    </Dialog>\n                </Paper>\n            </div>\n        );\n    }\n}\n\nexport default compose(\n    withUserAuth,\n    withRouter,\n    withStyles(styles)\n)(FileManagement);\n"]},"metadata":{},"sourceType":"module"}