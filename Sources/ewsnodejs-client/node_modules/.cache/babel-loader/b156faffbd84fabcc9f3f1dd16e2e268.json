{"ast":null,"code":"import { default as polygonContains } from \"./polygonContains.js\";\nimport { default as distance } from \"./distance.js\";\nimport { epsilon2, radians } from \"./math.js\";\nvar containsObjectType = {\n  Feature: function Feature(object, point) {\n    return containsGeometry(object.geometry, point);\n  },\n  FeatureCollection: function FeatureCollection(object, point) {\n    var features = object.features,\n        i = -1,\n        n = features.length;\n\n    while (++i < n) {\n      if (containsGeometry(features[i].geometry, point)) return true;\n    }\n\n    return false;\n  }\n};\nvar containsGeometryType = {\n  Sphere: function Sphere() {\n    return true;\n  },\n  Point: function Point(object, point) {\n    return containsPoint(object.coordinates, point);\n  },\n  MultiPoint: function MultiPoint(object, point) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      if (containsPoint(coordinates[i], point)) return true;\n    }\n\n    return false;\n  },\n  LineString: function LineString(object, point) {\n    return containsLine(object.coordinates, point);\n  },\n  MultiLineString: function MultiLineString(object, point) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      if (containsLine(coordinates[i], point)) return true;\n    }\n\n    return false;\n  },\n  Polygon: function Polygon(object, point) {\n    return containsPolygon(object.coordinates, point);\n  },\n  MultiPolygon: function MultiPolygon(object, point) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      if (containsPolygon(coordinates[i], point)) return true;\n    }\n\n    return false;\n  },\n  GeometryCollection: function GeometryCollection(object, point) {\n    var geometries = object.geometries,\n        i = -1,\n        n = geometries.length;\n\n    while (++i < n) {\n      if (containsGeometry(geometries[i], point)) return true;\n    }\n\n    return false;\n  }\n};\n\nfunction containsGeometry(geometry, point) {\n  return geometry && containsGeometryType.hasOwnProperty(geometry.type) ? containsGeometryType[geometry.type](geometry, point) : false;\n}\n\nfunction containsPoint(coordinates, point) {\n  return distance(coordinates, point) === 0;\n}\n\nfunction containsLine(coordinates, point) {\n  var ao, bo, ab;\n\n  for (var i = 0, n = coordinates.length; i < n; i++) {\n    bo = distance(coordinates[i], point);\n    if (bo === 0) return true;\n\n    if (i > 0) {\n      ab = distance(coordinates[i], coordinates[i - 1]);\n      if (ab > 0 && ao <= ab && bo <= ab && (ao + bo - ab) * (1 - Math.pow((ao - bo) / ab, 2)) < epsilon2 * ab) return true;\n    }\n\n    ao = bo;\n  }\n\n  return false;\n}\n\nfunction containsPolygon(coordinates, point) {\n  return !!polygonContains(coordinates.map(ringRadians), pointRadians(point));\n}\n\nfunction ringRadians(ring) {\n  return ring = ring.map(pointRadians), ring.pop(), ring;\n}\n\nfunction pointRadians(point) {\n  return [point[0] * radians, point[1] * radians];\n}\n\nexport default function (object, point) {\n  return (object && containsObjectType.hasOwnProperty(object.type) ? containsObjectType[object.type] : containsGeometry)(object, point);\n}","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/d3-geo/src/contains.js"],"names":["default","polygonContains","distance","epsilon2","radians","containsObjectType","Feature","object","point","containsGeometry","geometry","FeatureCollection","features","i","n","length","containsGeometryType","Sphere","Point","containsPoint","coordinates","MultiPoint","LineString","containsLine","MultiLineString","Polygon","containsPolygon","MultiPolygon","GeometryCollection","geometries","hasOwnProperty","type","ao","bo","ab","Math","pow","map","ringRadians","pointRadians","ring","pop"],"mappings":"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","sourcesContent":["import {default as polygonContains} from \"./polygonContains.js\";\nimport {default as distance} from \"./distance.js\";\nimport {epsilon2, radians} from \"./math.js\";\n\nvar containsObjectType = {\n  Feature: function(object, point) {\n    return containsGeometry(object.geometry, point);\n  },\n  FeatureCollection: function(object, point) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) if (containsGeometry(features[i].geometry, point)) return true;\n    return false;\n  }\n};\n\nvar containsGeometryType = {\n  Sphere: function() {\n    return true;\n  },\n  Point: function(object, point) {\n    return containsPoint(object.coordinates, point);\n  },\n  MultiPoint: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPoint(coordinates[i], point)) return true;\n    return false;\n  },\n  LineString: function(object, point) {\n    return containsLine(object.coordinates, point);\n  },\n  MultiLineString: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsLine(coordinates[i], point)) return true;\n    return false;\n  },\n  Polygon: function(object, point) {\n    return containsPolygon(object.coordinates, point);\n  },\n  MultiPolygon: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPolygon(coordinates[i], point)) return true;\n    return false;\n  },\n  GeometryCollection: function(object, point) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) if (containsGeometry(geometries[i], point)) return true;\n    return false;\n  }\n};\n\nfunction containsGeometry(geometry, point) {\n  return geometry && containsGeometryType.hasOwnProperty(geometry.type)\n      ? containsGeometryType[geometry.type](geometry, point)\n      : false;\n}\n\nfunction containsPoint(coordinates, point) {\n  return distance(coordinates, point) === 0;\n}\n\nfunction containsLine(coordinates, point) {\n  var ao, bo, ab;\n  for (var i = 0, n = coordinates.length; i < n; i++) {\n    bo = distance(coordinates[i], point);\n    if (bo === 0) return true;\n    if (i > 0) {\n      ab = distance(coordinates[i], coordinates[i - 1]);\n      if (\n        ab > 0 &&\n        ao <= ab &&\n        bo <= ab &&\n        (ao + bo - ab) * (1 - Math.pow((ao - bo) / ab, 2)) < epsilon2 * ab\n      )\n        return true;\n    }\n    ao = bo;\n  }\n  return false;\n}\n\nfunction containsPolygon(coordinates, point) {\n  return !!polygonContains(coordinates.map(ringRadians), pointRadians(point));\n}\n\nfunction ringRadians(ring) {\n  return ring = ring.map(pointRadians), ring.pop(), ring;\n}\n\nfunction pointRadians(point) {\n  return [point[0] * radians, point[1] * radians];\n}\n\nexport default function(object, point) {\n  return (object && containsObjectType.hasOwnProperty(object.type)\n      ? containsObjectType[object.type]\n      : containsGeometry)(object, point);\n}\n"]},"metadata":{},"sourceType":"module"}