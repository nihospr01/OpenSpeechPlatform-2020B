{"ast":null,"code":"import { slice } from \"./array\";\nimport constant from \"./constant\";\nimport { cos, halfPi, sin } from \"./math\";\nimport { path } from \"d3-path\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nexport default function () {\n  var source = defaultSource,\n      target = defaultTarget,\n      radius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv),\n        sr = +radius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        sx0 = sr * cos(sa0),\n        sy0 = sr * sin(sa0),\n        tr = +radius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n    if (!context) context = buffer = path();\n    context.moveTo(sx0, sy0);\n    context.arc(0, 0, sr, sa0, sa1);\n\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      // TODO sr !== tr?\n      context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n      context.arc(0, 0, tr, ta0, ta1);\n    }\n\n    context.quadraticCurveTo(0, 0, sx0, sy0);\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  ribbon.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : radius;\n  };\n\n  ribbon.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.source = function (_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function (_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, ribbon) : context;\n  };\n\n  return ribbon;\n}","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/d3-chord/src/ribbon.js"],"names":["slice","constant","cos","halfPi","sin","path","defaultSource","d","source","defaultTarget","target","defaultRadius","radius","defaultStartAngle","startAngle","defaultEndAngle","endAngle","context","ribbon","buffer","argv","call","arguments","s","apply","t","sr","sa0","sa1","sx0","sy0","tr","ta0","ta1","moveTo","arc","quadraticCurveTo","closePath","_","length"],"mappings":"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","sourcesContent":["import {slice} from \"./array\";\nimport constant from \"./constant\";\nimport {cos, halfPi, sin} from \"./math\";\nimport {path} from \"d3-path\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nexport default function() {\n  var source = defaultSource,\n      target = defaultTarget,\n      radius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv),\n        sr = +radius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        sx0 = sr * cos(sa0),\n        sy0 = sr * sin(sa0),\n        tr = +radius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n\n    if (!context) context = buffer = path();\n\n    context.moveTo(sx0, sy0);\n    context.arc(0, 0, sr, sa0, sa1);\n    if (sa0 !== ta0 || sa1 !== ta1) { // TODO sr !== tr?\n      context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n      context.arc(0, 0, tr, ta0, ta1);\n    }\n    context.quadraticCurveTo(0, 0, sx0, sy0);\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  ribbon.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : radius;\n  };\n\n  ribbon.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.source = function(_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function(_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\n  };\n\n  return ribbon;\n}\n"]},"metadata":{},"sourceType":"module"}