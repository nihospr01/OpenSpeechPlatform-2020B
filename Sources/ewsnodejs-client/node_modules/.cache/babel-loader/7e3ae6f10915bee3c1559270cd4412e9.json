{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport PropTypes from 'prop-types';\nimport OriginCSSMotion, { MotionPropTypes } from './CSSMotion';\nimport { supportTransition } from './util/motion';\nimport { STATUS_ADD, STATUS_KEEP, STATUS_REMOVE, STATUS_REMOVED, diffKeys, parseKeys } from './util/diff';\nvar MOTION_PROP_NAMES = Object.keys(MotionPropTypes);\nexport function genCSSMotionList(transitionSupport) {\n  var CSSMotion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : OriginCSSMotion;\n\n  var CSSMotionList = function (_React$Component) {\n    _inherits(CSSMotionList, _React$Component);\n\n    function CSSMotionList() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, CSSMotionList);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = CSSMotionList.__proto__ || Object.getPrototypeOf(CSSMotionList)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        keyEntities: []\n      }, _this.removeKey = function (removeKey) {\n        _this.setState(function (_ref2) {\n          var keyEntities = _ref2.keyEntities;\n          return {\n            keyEntities: keyEntities.map(function (entity) {\n              if (entity.key !== removeKey) return entity;\n              return _extends({}, entity, {\n                status: STATUS_REMOVED\n              });\n            })\n          };\n        });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(CSSMotionList, [{\n      key: 'render',\n      value: function render() {\n        var _this2 = this;\n\n        var keyEntities = this.state.keyEntities;\n\n        var _props = this.props,\n            component = _props.component,\n            children = _props.children,\n            restProps = _objectWithoutProperties(_props, ['component', 'children']);\n\n        var Component = component || React.Fragment;\n        var motionProps = {};\n        MOTION_PROP_NAMES.forEach(function (prop) {\n          motionProps[prop] = restProps[prop];\n          delete restProps[prop];\n        });\n        delete restProps.keys;\n        return React.createElement(Component, restProps, keyEntities.map(function (_ref3) {\n          var status = _ref3.status,\n              eventProps = _objectWithoutProperties(_ref3, ['status']);\n\n          var visible = status === STATUS_ADD || status === STATUS_KEEP;\n          return React.createElement(CSSMotion, _extends({}, motionProps, {\n            key: eventProps.key,\n            visible: visible,\n            eventProps: eventProps,\n            onLeaveEnd: function onLeaveEnd() {\n              if (motionProps.onLeaveEnd) {\n                motionProps.onLeaveEnd.apply(motionProps, arguments);\n              }\n\n              _this2.removeKey(eventProps.key);\n            }\n          }), children);\n        }));\n      }\n    }], [{\n      key: 'getDerivedStateFromProps',\n      value: function getDerivedStateFromProps(_ref4, _ref5) {\n        var keys = _ref4.keys;\n        var keyEntities = _ref5.keyEntities;\n        var parsedKeyObjects = parseKeys(keys); // Always as keep when motion not support\n\n        if (!transitionSupport) {\n          return {\n            keyEntities: parsedKeyObjects.map(function (obj) {\n              return _extends({}, obj, {\n                status: STATUS_KEEP\n              });\n            })\n          };\n        }\n\n        var mixedKeyEntities = diffKeys(keyEntities, parsedKeyObjects);\n        var keyEntitiesLen = keyEntities.length;\n        return {\n          keyEntities: mixedKeyEntities.filter(function (entity) {\n            // IE 9 not support Array.prototype.find\n            var prevEntity = null;\n\n            for (var i = 0; i < keyEntitiesLen; i += 1) {\n              var currentEntity = keyEntities[i];\n\n              if (currentEntity.key === entity.key) {\n                prevEntity = currentEntity;\n                break;\n              }\n            } // Remove if already mark as removed\n\n\n            if (prevEntity && prevEntity.status === STATUS_REMOVED && entity.status === STATUS_REMOVE) {\n              return false;\n            }\n\n            return true;\n          })\n        };\n      }\n    }]);\n\n    return CSSMotionList;\n  }(React.Component);\n\n  CSSMotionList.propTypes = _extends({}, CSSMotion.propTypes, {\n    component: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    keys: PropTypes.array\n  });\n  CSSMotionList.defaultProps = {\n    component: 'div'\n  };\n  polyfill(CSSMotionList);\n  return CSSMotionList;\n}\nexport default genCSSMotionList(supportTransition);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/rc-animate/es/CSSMotionList.js"],"names":["_objectWithoutProperties","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","polyfill","PropTypes","OriginCSSMotion","MotionPropTypes","supportTransition","STATUS_ADD","STATUS_KEEP","STATUS_REMOVE","STATUS_REMOVED","diffKeys","parseKeys","MOTION_PROP_NAMES","Object","keys","genCSSMotionList","transitionSupport","CSSMotion","arguments","length","undefined","CSSMotionList","_React$Component","_ref","_temp","_this","_ret","_len","args","Array","_key","__proto__","getPrototypeOf","call","apply","concat","state","keyEntities","removeKey","setState","_ref2","map","entity","key","status","value","render","_this2","_props","props","component","children","restProps","Component","Fragment","motionProps","forEach","prop","createElement","_ref3","eventProps","visible","onLeaveEnd","getDerivedStateFromProps","_ref4","_ref5","parsedKeyObjects","obj","mixedKeyEntities","keyEntitiesLen","filter","prevEntity","i","currentEntity","propTypes","oneOfType","string","bool","array","defaultProps"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport PropTypes from 'prop-types';\nimport OriginCSSMotion, { MotionPropTypes } from './CSSMotion';\nimport { supportTransition } from './util/motion';\nimport { STATUS_ADD, STATUS_KEEP, STATUS_REMOVE, STATUS_REMOVED, diffKeys, parseKeys } from './util/diff';\n\nvar MOTION_PROP_NAMES = Object.keys(MotionPropTypes);\n\nexport function genCSSMotionList(transitionSupport) {\n  var CSSMotion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : OriginCSSMotion;\n\n  var CSSMotionList = function (_React$Component) {\n    _inherits(CSSMotionList, _React$Component);\n\n    function CSSMotionList() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, CSSMotionList);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = CSSMotionList.__proto__ || Object.getPrototypeOf(CSSMotionList)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        keyEntities: []\n      }, _this.removeKey = function (removeKey) {\n        _this.setState(function (_ref2) {\n          var keyEntities = _ref2.keyEntities;\n          return {\n            keyEntities: keyEntities.map(function (entity) {\n              if (entity.key !== removeKey) return entity;\n              return _extends({}, entity, {\n                status: STATUS_REMOVED\n              });\n            })\n          };\n        });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(CSSMotionList, [{\n      key: 'render',\n      value: function render() {\n        var _this2 = this;\n\n        var keyEntities = this.state.keyEntities;\n\n        var _props = this.props,\n            component = _props.component,\n            children = _props.children,\n            restProps = _objectWithoutProperties(_props, ['component', 'children']);\n\n        var Component = component || React.Fragment;\n\n        var motionProps = {};\n        MOTION_PROP_NAMES.forEach(function (prop) {\n          motionProps[prop] = restProps[prop];\n          delete restProps[prop];\n        });\n        delete restProps.keys;\n\n        return React.createElement(\n          Component,\n          restProps,\n          keyEntities.map(function (_ref3) {\n            var status = _ref3.status,\n                eventProps = _objectWithoutProperties(_ref3, ['status']);\n\n            var visible = status === STATUS_ADD || status === STATUS_KEEP;\n            return React.createElement(\n              CSSMotion,\n              _extends({}, motionProps, {\n                key: eventProps.key,\n                visible: visible,\n                eventProps: eventProps,\n                onLeaveEnd: function onLeaveEnd() {\n                  if (motionProps.onLeaveEnd) {\n                    motionProps.onLeaveEnd.apply(motionProps, arguments);\n                  }\n                  _this2.removeKey(eventProps.key);\n                }\n              }),\n              children\n            );\n          })\n        );\n      }\n    }], [{\n      key: 'getDerivedStateFromProps',\n      value: function getDerivedStateFromProps(_ref4, _ref5) {\n        var keys = _ref4.keys;\n        var keyEntities = _ref5.keyEntities;\n\n        var parsedKeyObjects = parseKeys(keys);\n\n        // Always as keep when motion not support\n        if (!transitionSupport) {\n          return {\n            keyEntities: parsedKeyObjects.map(function (obj) {\n              return _extends({}, obj, { status: STATUS_KEEP });\n            })\n          };\n        }\n\n        var mixedKeyEntities = diffKeys(keyEntities, parsedKeyObjects);\n\n        var keyEntitiesLen = keyEntities.length;\n        return {\n          keyEntities: mixedKeyEntities.filter(function (entity) {\n            // IE 9 not support Array.prototype.find\n            var prevEntity = null;\n            for (var i = 0; i < keyEntitiesLen; i += 1) {\n              var currentEntity = keyEntities[i];\n              if (currentEntity.key === entity.key) {\n                prevEntity = currentEntity;\n                break;\n              }\n            }\n\n            // Remove if already mark as removed\n            if (prevEntity && prevEntity.status === STATUS_REMOVED && entity.status === STATUS_REMOVE) {\n              return false;\n            }\n            return true;\n          })\n        };\n      }\n    }]);\n\n    return CSSMotionList;\n  }(React.Component);\n\n  CSSMotionList.propTypes = _extends({}, CSSMotion.propTypes, {\n    component: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    keys: PropTypes.array\n  });\n  CSSMotionList.defaultProps = {\n    component: 'div'\n  };\n\n\n  polyfill(CSSMotionList);\n\n  return CSSMotionList;\n}\n\nexport default genCSSMotionList(supportTransition);"]},"metadata":{},"sourceType":"module"}