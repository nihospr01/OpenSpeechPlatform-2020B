{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditorContents-core.react\n * @format\n * \n */\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DraftEditorBlock = require('./DraftEditorBlock.react');\n\nvar DraftOffsetKey = require('./DraftOffsetKey');\n\nvar EditorState = require('./EditorState');\n\nvar React = require('react');\n\nvar cx = require('fbjs/lib/cx');\n\nvar joinClasses = require('fbjs/lib/joinClasses');\n\nvar nullthrows = require('fbjs/lib/nullthrows');\n/**\n * Provide default styling for list items. This way, lists will be styled with\n * proper counters and indentation even if the caller does not specify\n * their own styling at all. If more than five levels of nesting are needed,\n * the necessary CSS classes can be provided via `blockStyleFn` configuration.\n */\n\n\nvar getListItemClasses = function getListItemClasses(type, depth, shouldResetCount, direction) {\n  return cx({\n    'public/DraftStyleDefault/unorderedListItem': type === 'unordered-list-item',\n    'public/DraftStyleDefault/orderedListItem': type === 'ordered-list-item',\n    'public/DraftStyleDefault/reset': shouldResetCount,\n    'public/DraftStyleDefault/depth0': depth === 0,\n    'public/DraftStyleDefault/depth1': depth === 1,\n    'public/DraftStyleDefault/depth2': depth === 2,\n    'public/DraftStyleDefault/depth3': depth === 3,\n    'public/DraftStyleDefault/depth4': depth === 4,\n    'public/DraftStyleDefault/listLTR': direction === 'LTR',\n    'public/DraftStyleDefault/listRTL': direction === 'RTL'\n  });\n};\n/**\n * `DraftEditorContents` is the container component for all block components\n * rendered for a `DraftEditor`. It is optimized to aggressively avoid\n * re-rendering blocks whenever possible.\n *\n * This component is separate from `DraftEditor` because certain props\n * (for instance, ARIA props) must be allowed to update without affecting\n * the contents of the editor.\n */\n\n\nvar DraftEditorContents = function (_React$Component) {\n  _inherits(DraftEditorContents, _React$Component);\n\n  function DraftEditorContents() {\n    _classCallCheck(this, DraftEditorContents);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DraftEditorContents.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var prevEditorState = this.props.editorState;\n    var nextEditorState = nextProps.editorState;\n    var prevDirectionMap = prevEditorState.getDirectionMap();\n    var nextDirectionMap = nextEditorState.getDirectionMap(); // Text direction has changed for one or more blocks. We must re-render.\n\n    if (prevDirectionMap !== nextDirectionMap) {\n      return true;\n    }\n\n    var didHaveFocus = prevEditorState.getSelection().getHasFocus();\n    var nowHasFocus = nextEditorState.getSelection().getHasFocus();\n\n    if (didHaveFocus !== nowHasFocus) {\n      return true;\n    }\n\n    var nextNativeContent = nextEditorState.getNativelyRenderedContent();\n    var wasComposing = prevEditorState.isInCompositionMode();\n    var nowComposing = nextEditorState.isInCompositionMode(); // If the state is unchanged or we're currently rendering a natively\n    // rendered state, there's nothing new to be done.\n\n    if (prevEditorState === nextEditorState || nextNativeContent !== null && nextEditorState.getCurrentContent() === nextNativeContent || wasComposing && nowComposing) {\n      return false;\n    }\n\n    var prevContent = prevEditorState.getCurrentContent();\n    var nextContent = nextEditorState.getCurrentContent();\n    var prevDecorator = prevEditorState.getDecorator();\n    var nextDecorator = nextEditorState.getDecorator();\n    return wasComposing !== nowComposing || prevContent !== nextContent || prevDecorator !== nextDecorator || nextEditorState.mustForceSelection();\n  };\n\n  DraftEditorContents.prototype.render = function render() {\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        blockStyleFn = _props.blockStyleFn,\n        customStyleMap = _props.customStyleMap,\n        customStyleFn = _props.customStyleFn,\n        editorState = _props.editorState,\n        editorKey = _props.editorKey,\n        textDirectionality = _props.textDirectionality;\n    var content = editorState.getCurrentContent();\n    var selection = editorState.getSelection();\n    var forceSelection = editorState.mustForceSelection();\n    var decorator = editorState.getDecorator();\n    var directionMap = nullthrows(editorState.getDirectionMap());\n    var blocksAsArray = content.getBlocksAsArray();\n    var processedBlocks = [];\n    var currentDepth = null;\n    var lastWrapperTemplate = null;\n\n    for (var ii = 0; ii < blocksAsArray.length; ii++) {\n      var _block = blocksAsArray[ii];\n\n      var key = _block.getKey();\n\n      var blockType = _block.getType();\n\n      var customRenderer = blockRendererFn(_block);\n      var CustomComponent = void 0,\n          customProps = void 0,\n          customEditable = void 0;\n\n      if (customRenderer) {\n        CustomComponent = customRenderer.component;\n        customProps = customRenderer.props;\n        customEditable = customRenderer.editable;\n      }\n\n      var direction = textDirectionality ? textDirectionality : directionMap.get(key);\n      var offsetKey = DraftOffsetKey.encode(key, 0, 0);\n      var componentProps = {\n        contentState: content,\n        block: _block,\n        blockProps: customProps,\n        blockStyleFn: blockStyleFn,\n        customStyleMap: customStyleMap,\n        customStyleFn: customStyleFn,\n        decorator: decorator,\n        direction: direction,\n        forceSelection: forceSelection,\n        key: key,\n        offsetKey: offsetKey,\n        selection: selection,\n        tree: editorState.getBlockTree(key)\n      };\n      var configForType = blockRenderMap.get(blockType) || blockRenderMap.get('unstyled');\n      var wrapperTemplate = configForType.wrapper;\n      var Element = configForType.element || blockRenderMap.get('unstyled').element;\n\n      var depth = _block.getDepth();\n\n      var className = '';\n\n      if (blockStyleFn) {\n        className = blockStyleFn(_block);\n      } // List items are special snowflakes, since we handle nesting and\n      // counters manually.\n\n\n      if (Element === 'li') {\n        var shouldResetCount = lastWrapperTemplate !== wrapperTemplate || currentDepth === null || depth > currentDepth;\n        className = joinClasses(className, getListItemClasses(blockType, depth, shouldResetCount, direction));\n      }\n\n      var Component = CustomComponent || DraftEditorBlock;\n      var childProps = {\n        className: className,\n        'data-block': true,\n        'data-editor': editorKey,\n        'data-offset-key': offsetKey,\n        key: key\n      };\n\n      if (customEditable !== undefined) {\n        childProps = _extends({}, childProps, {\n          contentEditable: customEditable,\n          suppressContentEditableWarning: true\n        });\n      }\n\n      var child = React.createElement(Element, childProps, React.createElement(Component, componentProps));\n      processedBlocks.push({\n        block: child,\n        wrapperTemplate: wrapperTemplate,\n        key: key,\n        offsetKey: offsetKey\n      });\n\n      if (wrapperTemplate) {\n        currentDepth = _block.getDepth();\n      } else {\n        currentDepth = null;\n      }\n\n      lastWrapperTemplate = wrapperTemplate;\n    } // Group contiguous runs of blocks that have the same wrapperTemplate\n\n\n    var outputBlocks = [];\n\n    for (var _ii = 0; _ii < processedBlocks.length;) {\n      var info = processedBlocks[_ii];\n\n      if (info.wrapperTemplate) {\n        var blocks = [];\n\n        do {\n          blocks.push(processedBlocks[_ii].block);\n          _ii++;\n        } while (_ii < processedBlocks.length && processedBlocks[_ii].wrapperTemplate === info.wrapperTemplate);\n\n        var wrapperElement = React.cloneElement(info.wrapperTemplate, {\n          key: info.key + '-wrap',\n          'data-offset-key': info.offsetKey\n        }, blocks);\n        outputBlocks.push(wrapperElement);\n      } else {\n        outputBlocks.push(info.block);\n        _ii++;\n      }\n    }\n\n    return React.createElement('div', {\n      'data-contents': 'true'\n    }, outputBlocks);\n  };\n\n  return DraftEditorContents;\n}(React.Component);\n\nmodule.exports = DraftEditorContents;","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/draft-js/lib/DraftEditorContents-core.react.js"],"names":["_assign","require","_extends","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DraftEditorBlock","DraftOffsetKey","EditorState","React","cx","joinClasses","nullthrows","getListItemClasses","type","depth","shouldResetCount","direction","DraftEditorContents","_React$Component","apply","shouldComponentUpdate","nextProps","prevEditorState","props","editorState","nextEditorState","prevDirectionMap","getDirectionMap","nextDirectionMap","didHaveFocus","getSelection","getHasFocus","nowHasFocus","nextNativeContent","getNativelyRenderedContent","wasComposing","isInCompositionMode","nowComposing","getCurrentContent","prevContent","nextContent","prevDecorator","getDecorator","nextDecorator","mustForceSelection","render","_props","blockRenderMap","blockRendererFn","blockStyleFn","customStyleMap","customStyleFn","editorKey","textDirectionality","content","selection","forceSelection","decorator","directionMap","blocksAsArray","getBlocksAsArray","processedBlocks","currentDepth","lastWrapperTemplate","ii","_block","getKey","blockType","getType","customRenderer","CustomComponent","customProps","customEditable","component","editable","get","offsetKey","encode","componentProps","contentState","block","blockProps","tree","getBlockTree","configForType","wrapperTemplate","wrapper","Element","element","getDepth","className","Component","childProps","undefined","contentEditable","suppressContentEditableWarning","child","createElement","push","outputBlocks","_ii","info","blocks","wrapperElement","cloneElement","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,eAAD,CAArB;;AAEA,IAAIC,QAAQ,GAAGF,OAAO,IAAI,UAAUG,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIE,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAA1P;;AAEA,SAASU,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0CN,IAA1C,EAAgD;AAAE,MAAI,CAACM,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOP,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0EM,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIN,SAAJ,CAAc,6DAA6D,OAAOM,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACX,SAAT,GAAqBD,MAAM,CAACc,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAACZ,SAAvC,EAAkD;AAAEc,IAAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAEJ,QAAT;AAAmBK,MAAAA,UAAU,EAAE,KAA/B;AAAsCC,MAAAA,QAAQ,EAAE,IAAhD;AAAsDC,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAIN,UAAJ,EAAgBb,MAAM,CAACoB,cAAP,GAAwBpB,MAAM,CAACoB,cAAP,CAAsBR,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACS,SAAT,GAAqBR,UAA3F;AAAwG;;AAE9e,IAAIS,gBAAgB,GAAG9B,OAAO,CAAC,0BAAD,CAA9B;;AACA,IAAI+B,cAAc,GAAG/B,OAAO,CAAC,kBAAD,CAA5B;;AACA,IAAIgC,WAAW,GAAGhC,OAAO,CAAC,eAAD,CAAzB;;AACA,IAAIiC,KAAK,GAAGjC,OAAO,CAAC,OAAD,CAAnB;;AAEA,IAAIkC,EAAE,GAAGlC,OAAO,CAAC,aAAD,CAAhB;;AACA,IAAImC,WAAW,GAAGnC,OAAO,CAAC,sBAAD,CAAzB;;AACA,IAAIoC,UAAU,GAAGpC,OAAO,CAAC,qBAAD,CAAxB;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIqC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,IAA5B,EAAkCC,KAAlC,EAAyCC,gBAAzC,EAA2DC,SAA3D,EAAsE;AAC7F,SAAOP,EAAE,CAAC;AACR,kDAA8CI,IAAI,KAAK,qBAD/C;AAER,gDAA4CA,IAAI,KAAK,mBAF7C;AAGR,sCAAkCE,gBAH1B;AAIR,uCAAmCD,KAAK,KAAK,CAJrC;AAKR,uCAAmCA,KAAK,KAAK,CALrC;AAMR,uCAAmCA,KAAK,KAAK,CANrC;AAOR,uCAAmCA,KAAK,KAAK,CAPrC;AAQR,uCAAmCA,KAAK,KAAK,CARrC;AASR,wCAAoCE,SAAS,KAAK,KAT1C;AAUR,wCAAoCA,SAAS,KAAK;AAV1C,GAAD,CAAT;AAYD,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIC,mBAAmB,GAAG,UAAUC,gBAAV,EAA4B;AACpDxB,EAAAA,SAAS,CAACuB,mBAAD,EAAsBC,gBAAtB,CAAT;;AAEA,WAASD,mBAAT,GAA+B;AAC7B9B,IAAAA,eAAe,CAAC,IAAD,EAAO8B,mBAAP,CAAf;;AAEA,WAAO1B,0BAA0B,CAAC,IAAD,EAAO2B,gBAAgB,CAACC,KAAjB,CAAuB,IAAvB,EAA6BxC,SAA7B,CAAP,CAAjC;AACD;;AAEDsC,EAAAA,mBAAmB,CAACjC,SAApB,CAA8BoC,qBAA9B,GAAsD,SAASA,qBAAT,CAA+BC,SAA/B,EAA0C;AAC9F,QAAIC,eAAe,GAAG,KAAKC,KAAL,CAAWC,WAAjC;AACA,QAAIC,eAAe,GAAGJ,SAAS,CAACG,WAAhC;AAEA,QAAIE,gBAAgB,GAAGJ,eAAe,CAACK,eAAhB,EAAvB;AACA,QAAIC,gBAAgB,GAAGH,eAAe,CAACE,eAAhB,EAAvB,CAL8F,CAO9F;;AACA,QAAID,gBAAgB,KAAKE,gBAAzB,EAA2C;AACzC,aAAO,IAAP;AACD;;AAED,QAAIC,YAAY,GAAGP,eAAe,CAACQ,YAAhB,GAA+BC,WAA/B,EAAnB;AACA,QAAIC,WAAW,GAAGP,eAAe,CAACK,YAAhB,GAA+BC,WAA/B,EAAlB;;AAEA,QAAIF,YAAY,KAAKG,WAArB,EAAkC;AAChC,aAAO,IAAP;AACD;;AAED,QAAIC,iBAAiB,GAAGR,eAAe,CAACS,0BAAhB,EAAxB;AAEA,QAAIC,YAAY,GAAGb,eAAe,CAACc,mBAAhB,EAAnB;AACA,QAAIC,YAAY,GAAGZ,eAAe,CAACW,mBAAhB,EAAnB,CAtB8F,CAwB9F;AACA;;AACA,QAAId,eAAe,KAAKG,eAApB,IAAuCQ,iBAAiB,KAAK,IAAtB,IAA8BR,eAAe,CAACa,iBAAhB,OAAwCL,iBAA7G,IAAkIE,YAAY,IAAIE,YAAtJ,EAAoK;AAClK,aAAO,KAAP;AACD;;AAED,QAAIE,WAAW,GAAGjB,eAAe,CAACgB,iBAAhB,EAAlB;AACA,QAAIE,WAAW,GAAGf,eAAe,CAACa,iBAAhB,EAAlB;AACA,QAAIG,aAAa,GAAGnB,eAAe,CAACoB,YAAhB,EAApB;AACA,QAAIC,aAAa,GAAGlB,eAAe,CAACiB,YAAhB,EAApB;AACA,WAAOP,YAAY,KAAKE,YAAjB,IAAiCE,WAAW,KAAKC,WAAjD,IAAgEC,aAAa,KAAKE,aAAlF,IAAmGlB,eAAe,CAACmB,kBAAhB,EAA1G;AACD,GAnCD;;AAqCA3B,EAAAA,mBAAmB,CAACjC,SAApB,CAA8B6D,MAA9B,GAAuC,SAASA,MAAT,GAAkB;AACvD,QAAIC,MAAM,GAAG,KAAKvB,KAAlB;AAAA,QACIwB,cAAc,GAAGD,MAAM,CAACC,cAD5B;AAAA,QAEIC,eAAe,GAAGF,MAAM,CAACE,eAF7B;AAAA,QAGIC,YAAY,GAAGH,MAAM,CAACG,YAH1B;AAAA,QAIIC,cAAc,GAAGJ,MAAM,CAACI,cAJ5B;AAAA,QAKIC,aAAa,GAAGL,MAAM,CAACK,aAL3B;AAAA,QAMI3B,WAAW,GAAGsB,MAAM,CAACtB,WANzB;AAAA,QAOI4B,SAAS,GAAGN,MAAM,CAACM,SAPvB;AAAA,QAQIC,kBAAkB,GAAGP,MAAM,CAACO,kBARhC;AAWA,QAAIC,OAAO,GAAG9B,WAAW,CAACc,iBAAZ,EAAd;AACA,QAAIiB,SAAS,GAAG/B,WAAW,CAACM,YAAZ,EAAhB;AACA,QAAI0B,cAAc,GAAGhC,WAAW,CAACoB,kBAAZ,EAArB;AACA,QAAIa,SAAS,GAAGjC,WAAW,CAACkB,YAAZ,EAAhB;AACA,QAAIgB,YAAY,GAAG/C,UAAU,CAACa,WAAW,CAACG,eAAZ,EAAD,CAA7B;AAEA,QAAIgC,aAAa,GAAGL,OAAO,CAACM,gBAAR,EAApB;AACA,QAAIC,eAAe,GAAG,EAAtB;AAEA,QAAIC,YAAY,GAAG,IAAnB;AACA,QAAIC,mBAAmB,GAAG,IAA1B;;AAEA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGL,aAAa,CAAC/E,MAApC,EAA4CoF,EAAE,EAA9C,EAAkD;AAChD,UAAIC,MAAM,GAAGN,aAAa,CAACK,EAAD,CAA1B;;AACA,UAAIlF,GAAG,GAAGmF,MAAM,CAACC,MAAP,EAAV;;AACA,UAAIC,SAAS,GAAGF,MAAM,CAACG,OAAP,EAAhB;;AAEA,UAAIC,cAAc,GAAGrB,eAAe,CAACiB,MAAD,CAApC;AACA,UAAIK,eAAe,GAAG,KAAK,CAA3B;AAAA,UACIC,WAAW,GAAG,KAAK,CADvB;AAAA,UAEIC,cAAc,GAAG,KAAK,CAF1B;;AAGA,UAAIH,cAAJ,EAAoB;AAClBC,QAAAA,eAAe,GAAGD,cAAc,CAACI,SAAjC;AACAF,QAAAA,WAAW,GAAGF,cAAc,CAAC9C,KAA7B;AACAiD,QAAAA,cAAc,GAAGH,cAAc,CAACK,QAAhC;AACD;;AAED,UAAI1D,SAAS,GAAGqC,kBAAkB,GAAGA,kBAAH,GAAwBK,YAAY,CAACiB,GAAb,CAAiB7F,GAAjB,CAA1D;AACA,UAAI8F,SAAS,GAAGtE,cAAc,CAACuE,MAAf,CAAsB/F,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B,CAAhB;AACA,UAAIgG,cAAc,GAAG;AACnBC,QAAAA,YAAY,EAAEzB,OADK;AAEnB0B,QAAAA,KAAK,EAAEf,MAFY;AAGnBgB,QAAAA,UAAU,EAAEV,WAHO;AAInBtB,QAAAA,YAAY,EAAEA,YAJK;AAKnBC,QAAAA,cAAc,EAAEA,cALG;AAMnBC,QAAAA,aAAa,EAAEA,aANI;AAOnBM,QAAAA,SAAS,EAAEA,SAPQ;AAQnBzC,QAAAA,SAAS,EAAEA,SARQ;AASnBwC,QAAAA,cAAc,EAAEA,cATG;AAUnB1E,QAAAA,GAAG,EAAEA,GAVc;AAWnB8F,QAAAA,SAAS,EAAEA,SAXQ;AAYnBrB,QAAAA,SAAS,EAAEA,SAZQ;AAanB2B,QAAAA,IAAI,EAAE1D,WAAW,CAAC2D,YAAZ,CAAyBrG,GAAzB;AAba,OAArB;AAgBA,UAAIsG,aAAa,GAAGrC,cAAc,CAAC4B,GAAf,CAAmBR,SAAnB,KAAiCpB,cAAc,CAAC4B,GAAf,CAAmB,UAAnB,CAArD;AACA,UAAIU,eAAe,GAAGD,aAAa,CAACE,OAApC;AAEA,UAAIC,OAAO,GAAGH,aAAa,CAACI,OAAd,IAAyBzC,cAAc,CAAC4B,GAAf,CAAmB,UAAnB,EAA+Ba,OAAtE;;AAEA,UAAI1E,KAAK,GAAGmD,MAAM,CAACwB,QAAP,EAAZ;;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,UAAIzC,YAAJ,EAAkB;AAChByC,QAAAA,SAAS,GAAGzC,YAAY,CAACgB,MAAD,CAAxB;AACD,OA1C+C,CA4ChD;AACA;;;AACA,UAAIsB,OAAO,KAAK,IAAhB,EAAsB;AACpB,YAAIxE,gBAAgB,GAAGgD,mBAAmB,KAAKsB,eAAxB,IAA2CvB,YAAY,KAAK,IAA5D,IAAoEhD,KAAK,GAAGgD,YAAnG;AACA4B,QAAAA,SAAS,GAAGhF,WAAW,CAACgF,SAAD,EAAY9E,kBAAkB,CAACuD,SAAD,EAAYrD,KAAZ,EAAmBC,gBAAnB,EAAqCC,SAArC,CAA9B,CAAvB;AACD;;AAED,UAAI2E,SAAS,GAAGrB,eAAe,IAAIjE,gBAAnC;AACA,UAAIuF,UAAU,GAAG;AACfF,QAAAA,SAAS,EAAEA,SADI;AAEf,sBAAc,IAFC;AAGf,uBAAetC,SAHA;AAIf,2BAAmBwB,SAJJ;AAKf9F,QAAAA,GAAG,EAAEA;AALU,OAAjB;;AAOA,UAAI0F,cAAc,KAAKqB,SAAvB,EAAkC;AAChCD,QAAAA,UAAU,GAAGpH,QAAQ,CAAC,EAAD,EAAKoH,UAAL,EAAiB;AACpCE,UAAAA,eAAe,EAAEtB,cADmB;AAEpCuB,UAAAA,8BAA8B,EAAE;AAFI,SAAjB,CAArB;AAID;;AAED,UAAIC,KAAK,GAAGxF,KAAK,CAACyF,aAAN,CAAoBV,OAApB,EAA6BK,UAA7B,EAAyCpF,KAAK,CAACyF,aAAN,CAAoBN,SAApB,EAA+Bb,cAA/B,CAAzC,CAAZ;AAEAjB,MAAAA,eAAe,CAACqC,IAAhB,CAAqB;AACnBlB,QAAAA,KAAK,EAAEgB,KADY;AAEnBX,QAAAA,eAAe,EAAEA,eAFE;AAGnBvG,QAAAA,GAAG,EAAEA,GAHc;AAInB8F,QAAAA,SAAS,EAAEA;AAJQ,OAArB;;AAOA,UAAIS,eAAJ,EAAqB;AACnBvB,QAAAA,YAAY,GAAGG,MAAM,CAACwB,QAAP,EAAf;AACD,OAFD,MAEO;AACL3B,QAAAA,YAAY,GAAG,IAAf;AACD;;AACDC,MAAAA,mBAAmB,GAAGsB,eAAtB;AACD,KAzGsD,CA2GvD;;;AACA,QAAIc,YAAY,GAAG,EAAnB;;AACA,SAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGvC,eAAe,CAACjF,MAAxC,GAAiD;AAC/C,UAAIyH,IAAI,GAAGxC,eAAe,CAACuC,GAAD,CAA1B;;AACA,UAAIC,IAAI,CAAChB,eAAT,EAA0B;AACxB,YAAIiB,MAAM,GAAG,EAAb;;AACA,WAAG;AACDA,UAAAA,MAAM,CAACJ,IAAP,CAAYrC,eAAe,CAACuC,GAAD,CAAf,CAAqBpB,KAAjC;AACAoB,UAAAA,GAAG;AACJ,SAHD,QAGSA,GAAG,GAAGvC,eAAe,CAACjF,MAAtB,IAAgCiF,eAAe,CAACuC,GAAD,CAAf,CAAqBf,eAArB,KAAyCgB,IAAI,CAAChB,eAHvF;;AAIA,YAAIkB,cAAc,GAAG/F,KAAK,CAACgG,YAAN,CAAmBH,IAAI,CAAChB,eAAxB,EAAyC;AAC5DvG,UAAAA,GAAG,EAAEuH,IAAI,CAACvH,GAAL,GAAW,OAD4C;AAE5D,6BAAmBuH,IAAI,CAACzB;AAFoC,SAAzC,EAGlB0B,MAHkB,CAArB;AAIAH,QAAAA,YAAY,CAACD,IAAb,CAAkBK,cAAlB;AACD,OAXD,MAWO;AACLJ,QAAAA,YAAY,CAACD,IAAb,CAAkBG,IAAI,CAACrB,KAAvB;AACAoB,QAAAA,GAAG;AACJ;AACF;;AAED,WAAO5F,KAAK,CAACyF,aAAN,CACL,KADK,EAEL;AAAE,uBAAiB;AAAnB,KAFK,EAGLE,YAHK,CAAP;AAKD,GArID;;AAuIA,SAAOlF,mBAAP;AACD,CAtLyB,CAsLxBT,KAAK,CAACmF,SAtLkB,CAA1B;;AAwLAc,MAAM,CAACC,OAAP,GAAiBzF,mBAAjB","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditorContents-core.react\n * @format\n * \n */\n\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DraftEditorBlock = require('./DraftEditorBlock.react');\nvar DraftOffsetKey = require('./DraftOffsetKey');\nvar EditorState = require('./EditorState');\nvar React = require('react');\n\nvar cx = require('fbjs/lib/cx');\nvar joinClasses = require('fbjs/lib/joinClasses');\nvar nullthrows = require('fbjs/lib/nullthrows');\n\n/**\n * Provide default styling for list items. This way, lists will be styled with\n * proper counters and indentation even if the caller does not specify\n * their own styling at all. If more than five levels of nesting are needed,\n * the necessary CSS classes can be provided via `blockStyleFn` configuration.\n */\nvar getListItemClasses = function getListItemClasses(type, depth, shouldResetCount, direction) {\n  return cx({\n    'public/DraftStyleDefault/unorderedListItem': type === 'unordered-list-item',\n    'public/DraftStyleDefault/orderedListItem': type === 'ordered-list-item',\n    'public/DraftStyleDefault/reset': shouldResetCount,\n    'public/DraftStyleDefault/depth0': depth === 0,\n    'public/DraftStyleDefault/depth1': depth === 1,\n    'public/DraftStyleDefault/depth2': depth === 2,\n    'public/DraftStyleDefault/depth3': depth === 3,\n    'public/DraftStyleDefault/depth4': depth === 4,\n    'public/DraftStyleDefault/listLTR': direction === 'LTR',\n    'public/DraftStyleDefault/listRTL': direction === 'RTL'\n  });\n};\n\n/**\n * `DraftEditorContents` is the container component for all block components\n * rendered for a `DraftEditor`. It is optimized to aggressively avoid\n * re-rendering blocks whenever possible.\n *\n * This component is separate from `DraftEditor` because certain props\n * (for instance, ARIA props) must be allowed to update without affecting\n * the contents of the editor.\n */\n\nvar DraftEditorContents = function (_React$Component) {\n  _inherits(DraftEditorContents, _React$Component);\n\n  function DraftEditorContents() {\n    _classCallCheck(this, DraftEditorContents);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DraftEditorContents.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var prevEditorState = this.props.editorState;\n    var nextEditorState = nextProps.editorState;\n\n    var prevDirectionMap = prevEditorState.getDirectionMap();\n    var nextDirectionMap = nextEditorState.getDirectionMap();\n\n    // Text direction has changed for one or more blocks. We must re-render.\n    if (prevDirectionMap !== nextDirectionMap) {\n      return true;\n    }\n\n    var didHaveFocus = prevEditorState.getSelection().getHasFocus();\n    var nowHasFocus = nextEditorState.getSelection().getHasFocus();\n\n    if (didHaveFocus !== nowHasFocus) {\n      return true;\n    }\n\n    var nextNativeContent = nextEditorState.getNativelyRenderedContent();\n\n    var wasComposing = prevEditorState.isInCompositionMode();\n    var nowComposing = nextEditorState.isInCompositionMode();\n\n    // If the state is unchanged or we're currently rendering a natively\n    // rendered state, there's nothing new to be done.\n    if (prevEditorState === nextEditorState || nextNativeContent !== null && nextEditorState.getCurrentContent() === nextNativeContent || wasComposing && nowComposing) {\n      return false;\n    }\n\n    var prevContent = prevEditorState.getCurrentContent();\n    var nextContent = nextEditorState.getCurrentContent();\n    var prevDecorator = prevEditorState.getDecorator();\n    var nextDecorator = nextEditorState.getDecorator();\n    return wasComposing !== nowComposing || prevContent !== nextContent || prevDecorator !== nextDecorator || nextEditorState.mustForceSelection();\n  };\n\n  DraftEditorContents.prototype.render = function render() {\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        blockStyleFn = _props.blockStyleFn,\n        customStyleMap = _props.customStyleMap,\n        customStyleFn = _props.customStyleFn,\n        editorState = _props.editorState,\n        editorKey = _props.editorKey,\n        textDirectionality = _props.textDirectionality;\n\n\n    var content = editorState.getCurrentContent();\n    var selection = editorState.getSelection();\n    var forceSelection = editorState.mustForceSelection();\n    var decorator = editorState.getDecorator();\n    var directionMap = nullthrows(editorState.getDirectionMap());\n\n    var blocksAsArray = content.getBlocksAsArray();\n    var processedBlocks = [];\n\n    var currentDepth = null;\n    var lastWrapperTemplate = null;\n\n    for (var ii = 0; ii < blocksAsArray.length; ii++) {\n      var _block = blocksAsArray[ii];\n      var key = _block.getKey();\n      var blockType = _block.getType();\n\n      var customRenderer = blockRendererFn(_block);\n      var CustomComponent = void 0,\n          customProps = void 0,\n          customEditable = void 0;\n      if (customRenderer) {\n        CustomComponent = customRenderer.component;\n        customProps = customRenderer.props;\n        customEditable = customRenderer.editable;\n      }\n\n      var direction = textDirectionality ? textDirectionality : directionMap.get(key);\n      var offsetKey = DraftOffsetKey.encode(key, 0, 0);\n      var componentProps = {\n        contentState: content,\n        block: _block,\n        blockProps: customProps,\n        blockStyleFn: blockStyleFn,\n        customStyleMap: customStyleMap,\n        customStyleFn: customStyleFn,\n        decorator: decorator,\n        direction: direction,\n        forceSelection: forceSelection,\n        key: key,\n        offsetKey: offsetKey,\n        selection: selection,\n        tree: editorState.getBlockTree(key)\n      };\n\n      var configForType = blockRenderMap.get(blockType) || blockRenderMap.get('unstyled');\n      var wrapperTemplate = configForType.wrapper;\n\n      var Element = configForType.element || blockRenderMap.get('unstyled').element;\n\n      var depth = _block.getDepth();\n      var className = '';\n      if (blockStyleFn) {\n        className = blockStyleFn(_block);\n      }\n\n      // List items are special snowflakes, since we handle nesting and\n      // counters manually.\n      if (Element === 'li') {\n        var shouldResetCount = lastWrapperTemplate !== wrapperTemplate || currentDepth === null || depth > currentDepth;\n        className = joinClasses(className, getListItemClasses(blockType, depth, shouldResetCount, direction));\n      }\n\n      var Component = CustomComponent || DraftEditorBlock;\n      var childProps = {\n        className: className,\n        'data-block': true,\n        'data-editor': editorKey,\n        'data-offset-key': offsetKey,\n        key: key\n      };\n      if (customEditable !== undefined) {\n        childProps = _extends({}, childProps, {\n          contentEditable: customEditable,\n          suppressContentEditableWarning: true\n        });\n      }\n\n      var child = React.createElement(Element, childProps, React.createElement(Component, componentProps));\n\n      processedBlocks.push({\n        block: child,\n        wrapperTemplate: wrapperTemplate,\n        key: key,\n        offsetKey: offsetKey\n      });\n\n      if (wrapperTemplate) {\n        currentDepth = _block.getDepth();\n      } else {\n        currentDepth = null;\n      }\n      lastWrapperTemplate = wrapperTemplate;\n    }\n\n    // Group contiguous runs of blocks that have the same wrapperTemplate\n    var outputBlocks = [];\n    for (var _ii = 0; _ii < processedBlocks.length;) {\n      var info = processedBlocks[_ii];\n      if (info.wrapperTemplate) {\n        var blocks = [];\n        do {\n          blocks.push(processedBlocks[_ii].block);\n          _ii++;\n        } while (_ii < processedBlocks.length && processedBlocks[_ii].wrapperTemplate === info.wrapperTemplate);\n        var wrapperElement = React.cloneElement(info.wrapperTemplate, {\n          key: info.key + '-wrap',\n          'data-offset-key': info.offsetKey\n        }, blocks);\n        outputBlocks.push(wrapperElement);\n      } else {\n        outputBlocks.push(info.block);\n        _ii++;\n      }\n    }\n\n    return React.createElement(\n      'div',\n      { 'data-contents': 'true' },\n      outputBlocks\n    );\n  };\n\n  return DraftEditorContents;\n}(React.Component);\n\nmodule.exports = DraftEditorContents;"]},"metadata":{},"sourceType":"script"}