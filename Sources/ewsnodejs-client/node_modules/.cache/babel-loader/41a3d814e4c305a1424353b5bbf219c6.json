{"ast":null,"code":"import { range } from \"d3-array\";\nimport { abs, ceil, epsilon } from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function (x) {\n    return y.map(function (y) {\n      return [x, y];\n    });\n  };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function (y) {\n    return x.map(function (x) {\n      return [x, y];\n    });\n  };\n}\n\nexport default function graticule() {\n  var x1,\n      x0,\n      X1,\n      X0,\n      y1,\n      y0,\n      Y1,\n      Y0,\n      dx = 10,\n      dy = dx,\n      DX = 90,\n      DY = 360,\n      x,\n      y,\n      X,\n      Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {\n      type: \"MultiLineString\",\n      coordinates: lines()\n    };\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X).concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function (x) {\n      return abs(x % DX) > epsilon;\n    }).map(x)).concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function (y) {\n      return abs(y % DY) > epsilon;\n    }).map(y));\n  }\n\n  graticule.lines = function () {\n    return lines().map(function (coordinates) {\n      return {\n        type: \"LineString\",\n        coordinates: coordinates\n      };\n    });\n  };\n\n  graticule.outline = function () {\n    return {\n      type: \"Polygon\",\n      coordinates: [X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1))]\n    };\n  };\n\n  graticule.extent = function (_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function (_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function (_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function (_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function (_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function (_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function (_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule.extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]]).extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\nexport function graticule10() {\n  return graticule()();\n}","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/d3-geo/src/graticule.js"],"names":["range","abs","ceil","epsilon","graticuleX","y0","y1","dy","y","concat","x","map","graticuleY","x0","x1","dx","graticule","X1","X0","Y1","Y0","DX","DY","X","Y","precision","type","coordinates","lines","filter","outline","slice","reverse","extent","_","arguments","length","extentMinor","extentMajor","step","stepMinor","stepMajor","graticule10"],"mappings":"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","sourcesContent":["import {range} from \"d3-array\";\nimport {abs, ceil, epsilon} from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nexport default function graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nexport function graticule10() {\n  return graticule()();\n}\n"]},"metadata":{},"sourceType":"module"}