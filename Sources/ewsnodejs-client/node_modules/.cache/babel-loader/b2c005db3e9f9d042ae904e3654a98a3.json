{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport { polyfill } from 'react-lifecycles-compat';\nimport DateTable from './date/DateTable';\nimport CalendarHeader from './calendar/CalendarHeader';\nimport CalendarFooter from './calendar/CalendarFooter';\nimport { calendarMixinWrapper, calendarMixinPropTypes, calendarMixinDefaultProps, getNowByCurrentStateValue } from './mixin/CalendarMixin';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport DateInput from './date/DateInput';\nimport { getTimeConfig, getTodayTime, syncTime } from './util';\nimport { goStartMonth, goEndMonth, goTime } from './util/toTime';\nimport moment from 'moment';\n\nfunction noop() {}\n\nvar getMomentObjectIfValid = function getMomentObjectIfValid(date) {\n  if (moment.isMoment(date) && date.isValid()) {\n    return date;\n  }\n\n  return false;\n};\n\nvar Calendar = function (_React$Component) {\n  _inherits(Calendar, _React$Component);\n\n  function Calendar(props) {\n    _classCallCheck(this, Calendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      mode: _this.props.mode || 'date',\n      value: getMomentObjectIfValid(props.value) || getMomentObjectIfValid(props.defaultValue) || moment(),\n      selectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n    return _this;\n  }\n\n  Calendar.prototype.componentDidMount = function componentDidMount() {\n    if (this.props.showDateInput) {\n      this.saveFocusElement(DateInput.getInstance());\n    }\n  };\n\n  Calendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var value = nextProps.value,\n        selectedValue = nextProps.selectedValue;\n    var newState = {};\n\n    if ('mode' in nextProps && state.mode !== nextProps.mode) {\n      newState = {\n        mode: nextProps.mode\n      };\n    }\n\n    if ('value' in nextProps) {\n      newState.value = getMomentObjectIfValid(value) || getMomentObjectIfValid(nextProps.defaultValue) || getNowByCurrentStateValue(state.value);\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = selectedValue;\n    }\n\n    return newState;\n  };\n\n  Calendar.prototype.render = function render() {\n    var props = this.props,\n        state = this.state;\n    var locale = props.locale,\n        prefixCls = props.prefixCls,\n        disabledDate = props.disabledDate,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        timePicker = props.timePicker,\n        disabledTime = props.disabledTime,\n        clearIcon = props.clearIcon,\n        renderFooter = props.renderFooter,\n        inputMode = props.inputMode,\n        monthCellRender = props.monthCellRender,\n        monthCellContentRender = props.monthCellContentRender;\n    var value = state.value,\n        selectedValue = state.selectedValue,\n        mode = state.mode;\n    var showTimePicker = mode === 'time';\n    var disabledTimeConfig = showTimePicker && disabledTime && timePicker ? getTimeConfig(selectedValue, disabledTime) : null;\n    var timePickerEle = null;\n\n    if (timePicker && showTimePicker) {\n      var timePickerProps = _extends({\n        showHour: true,\n        showSecond: true,\n        showMinute: true\n      }, timePicker.props, disabledTimeConfig, {\n        onChange: this.onDateInputChange,\n        value: selectedValue,\n        disabledTime: disabledTime\n      });\n\n      if (timePicker.props.defaultValue !== undefined) {\n        timePickerProps.defaultOpenValue = timePicker.props.defaultValue;\n      }\n\n      timePickerEle = React.cloneElement(timePicker, timePickerProps);\n    }\n\n    var dateInputElement = props.showDateInput ? React.createElement(DateInput, {\n      format: this.getFormat(),\n      key: 'date-input',\n      value: value,\n      locale: locale,\n      placeholder: dateInputPlaceholder,\n      showClear: true,\n      disabledTime: disabledTime,\n      disabledDate: disabledDate,\n      onClear: this.onClear,\n      prefixCls: prefixCls,\n      selectedValue: selectedValue,\n      onChange: this.onDateInputChange,\n      onSelect: this.onDateInputSelect,\n      clearIcon: clearIcon,\n      inputMode: inputMode\n    }) : null;\n    var children = [];\n\n    if (props.renderSidebar) {\n      children.push(props.renderSidebar());\n    }\n\n    children.push(React.createElement('div', {\n      className: prefixCls + '-panel',\n      key: 'panel'\n    }, dateInputElement, React.createElement('div', {\n      tabIndex: this.props.focusablePanel ? 0 : undefined,\n      className: prefixCls + '-date-panel'\n    }, React.createElement(CalendarHeader, {\n      locale: locale,\n      mode: mode,\n      value: value,\n      onValueChange: this.setValue,\n      onPanelChange: this.onPanelChange,\n      renderFooter: renderFooter,\n      showTimePicker: showTimePicker,\n      prefixCls: prefixCls,\n      monthCellRender: monthCellRender,\n      monthCellContentRender: monthCellContentRender\n    }), timePicker && showTimePicker ? React.createElement('div', {\n      className: prefixCls + '-time-picker'\n    }, React.createElement('div', {\n      className: prefixCls + '-time-picker-panel'\n    }, timePickerEle)) : null, React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement(DateTable, {\n      locale: locale,\n      value: value,\n      selectedValue: selectedValue,\n      prefixCls: prefixCls,\n      dateRender: props.dateRender,\n      onSelect: this.onDateTableSelect,\n      disabledDate: disabledDate,\n      showWeekNumber: props.showWeekNumber\n    })), React.createElement(CalendarFooter, {\n      showOk: props.showOk,\n      mode: mode,\n      renderFooter: props.renderFooter,\n      locale: locale,\n      prefixCls: prefixCls,\n      showToday: props.showToday,\n      disabledTime: disabledTime,\n      showTimePicker: showTimePicker,\n      showDateInput: props.showDateInput,\n      timePicker: timePicker,\n      selectedValue: selectedValue,\n      timePickerDisabled: !selectedValue,\n      value: value,\n      disabledDate: disabledDate,\n      okDisabled: props.showOk !== false && (!selectedValue || !this.isAllowedDate(selectedValue)),\n      onOk: this.onOk,\n      onSelect: this.onSelect,\n      onToday: this.onToday,\n      onOpenTimePicker: this.openTimePicker,\n      onCloseTimePicker: this.closeTimePicker\n    }))));\n    return this.renderRoot({\n      children: children,\n      className: props.showWeekNumber ? prefixCls + '-week-number' : ''\n    });\n  };\n\n  return Calendar;\n}(React.Component);\n\nCalendar.propTypes = _extends({}, calendarMixinPropTypes, propType, {\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  defaultValue: PropTypes.object,\n  value: PropTypes.object,\n  selectedValue: PropTypes.object,\n  defaultSelectedValue: PropTypes.object,\n  mode: PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade']),\n  locale: PropTypes.object,\n  showDateInput: PropTypes.bool,\n  showWeekNumber: PropTypes.bool,\n  showToday: PropTypes.bool,\n  showOk: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onOk: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  timePicker: PropTypes.element,\n  dateInputPlaceholder: PropTypes.any,\n  onClear: PropTypes.func,\n  onChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.any,\n  dateRender: PropTypes.func,\n  renderFooter: PropTypes.func,\n  renderSidebar: PropTypes.func,\n  clearIcon: PropTypes.node,\n  focusablePanel: PropTypes.bool,\n  inputMode: PropTypes.string,\n  onBlur: PropTypes.func\n});\nCalendar.defaultProps = _extends({}, calendarMixinDefaultProps, defaultProp, {\n  showToday: true,\n  showDateInput: true,\n  timePicker: null,\n  onOk: noop,\n  onPanelChange: noop,\n  focusablePanel: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: mode\n      });\n    }\n\n    props.onPanelChange(value || state.value, mode);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return undefined;\n    }\n\n    var keyCode = event.keyCode; // mac\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var disabledDate = _this2.props.disabledDate;\n    var value = _this2.state.value;\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        _this2.goTime(1, 'weeks');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.UP:\n        _this2.goTime(-1, 'weeks');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          _this2.goTime(-1, 'years');\n        } else {\n          _this2.goTime(-1, 'days');\n        }\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          _this2.goTime(1, 'years');\n        } else {\n          _this2.goTime(1, 'days');\n        }\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.HOME:\n        _this2.setValue(goStartMonth(_this2.state.value));\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.END:\n        _this2.setValue(goEndMonth(_this2.state.value));\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.PAGE_DOWN:\n        _this2.goTime(1, 'month');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.PAGE_UP:\n        _this2.goTime(-1, 'month');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.ENTER:\n        if (!disabledDate || !disabledDate(value)) {\n          _this2.onSelect(value, {\n            source: 'keyboard'\n          });\n        }\n\n        event.preventDefault();\n        return 1;\n\n      default:\n        _this2.props.onKeyDown(event);\n\n        return 1;\n    }\n  };\n\n  this.onClear = function () {\n    _this2.onSelect(null);\n\n    _this2.props.onClear();\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDate(selectedValue)) {\n      _this2.props.onOk(selectedValue);\n    }\n  };\n\n  this.onDateInputChange = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInput'\n    });\n  };\n\n  this.onDateInputSelect = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInputSelect'\n    });\n  };\n\n  this.onDateTableSelect = function (value) {\n    var timePicker = _this2.props.timePicker;\n    var selectedValue = _this2.state.selectedValue;\n\n    if (!selectedValue && timePicker) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (timePickerDefaultValue) {\n        syncTime(timePickerDefaultValue, value);\n      }\n    }\n\n    _this2.onSelect(value);\n  };\n\n  this.onToday = function () {\n    var value = _this2.state.value;\n    var now = getTodayTime(value);\n\n    _this2.onSelect(now, {\n      source: 'todayButton'\n    });\n  };\n\n  this.onBlur = function (event) {\n    setTimeout(function () {\n      var dateInput = DateInput.getInstance();\n      var rootInstance = _this2.rootInstance;\n\n      if (!rootInstance || rootInstance.contains(document.activeElement) || dateInput && dateInput.contains(document.activeElement)) {\n        // focused element is still part of Calendar\n        return;\n      }\n\n      if (_this2.props.onBlur) {\n        _this2.props.onBlur(event);\n      }\n    }, 0);\n  };\n\n  this.getRootDOMNode = function () {\n    return ReactDOM.findDOMNode(_this2);\n  };\n\n  this.openTimePicker = function () {\n    _this2.onPanelChange(null, 'time');\n  };\n\n  this.closeTimePicker = function () {\n    _this2.onPanelChange(null, 'date');\n  };\n\n  this.goTime = function (direction, unit) {\n    _this2.setValue(goTime(_this2.state.value, direction, unit));\n  };\n};\n\npolyfill(Calendar);\nexport default calendarMixinWrapper(commonMixinWrapper(Calendar));","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/rc-calendar/es/Calendar.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","ReactDOM","PropTypes","KeyCode","polyfill","DateTable","CalendarHeader","CalendarFooter","calendarMixinWrapper","calendarMixinPropTypes","calendarMixinDefaultProps","getNowByCurrentStateValue","commonMixinWrapper","propType","defaultProp","DateInput","getTimeConfig","getTodayTime","syncTime","goStartMonth","goEndMonth","goTime","moment","noop","getMomentObjectIfValid","date","isMoment","isValid","Calendar","_React$Component","props","_this","call","_initialiseProps","state","mode","value","defaultValue","selectedValue","defaultSelectedValue","prototype","componentDidMount","showDateInput","saveFocusElement","getInstance","getDerivedStateFromProps","nextProps","newState","render","locale","prefixCls","disabledDate","dateInputPlaceholder","timePicker","disabledTime","clearIcon","renderFooter","inputMode","monthCellRender","monthCellContentRender","showTimePicker","disabledTimeConfig","timePickerEle","timePickerProps","showHour","showSecond","showMinute","onChange","onDateInputChange","undefined","defaultOpenValue","cloneElement","dateInputElement","createElement","format","getFormat","key","placeholder","showClear","onClear","onSelect","onDateInputSelect","children","renderSidebar","push","className","tabIndex","focusablePanel","onValueChange","setValue","onPanelChange","dateRender","onDateTableSelect","showWeekNumber","showOk","showToday","timePickerDisabled","okDisabled","isAllowedDate","onOk","onToday","onOpenTimePicker","openTimePicker","onCloseTimePicker","closeTimePicker","renderRoot","Component","propTypes","string","style","object","oneOf","bool","func","onKeyDown","element","any","node","onBlur","defaultProps","_this2","setState","event","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","DOWN","preventDefault","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","source","timePickerDefaultValue","now","setTimeout","dateInput","rootInstance","contains","document","activeElement","getRootDOMNode","findDOMNode","direction","unit"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport { polyfill } from 'react-lifecycles-compat';\nimport DateTable from './date/DateTable';\nimport CalendarHeader from './calendar/CalendarHeader';\nimport CalendarFooter from './calendar/CalendarFooter';\nimport { calendarMixinWrapper, calendarMixinPropTypes, calendarMixinDefaultProps, getNowByCurrentStateValue } from './mixin/CalendarMixin';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport DateInput from './date/DateInput';\nimport { getTimeConfig, getTodayTime, syncTime } from './util';\nimport { goStartMonth, goEndMonth, goTime } from './util/toTime';\nimport moment from 'moment';\n\nfunction noop() {}\n\nvar getMomentObjectIfValid = function getMomentObjectIfValid(date) {\n  if (moment.isMoment(date) && date.isValid()) {\n    return date;\n  }\n  return false;\n};\n\nvar Calendar = function (_React$Component) {\n  _inherits(Calendar, _React$Component);\n\n  function Calendar(props) {\n    _classCallCheck(this, Calendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      mode: _this.props.mode || 'date',\n      value: getMomentObjectIfValid(props.value) || getMomentObjectIfValid(props.defaultValue) || moment(),\n      selectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n    return _this;\n  }\n\n  Calendar.prototype.componentDidMount = function componentDidMount() {\n    if (this.props.showDateInput) {\n      this.saveFocusElement(DateInput.getInstance());\n    }\n  };\n\n  Calendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var value = nextProps.value,\n        selectedValue = nextProps.selectedValue;\n\n    var newState = {};\n\n    if ('mode' in nextProps && state.mode !== nextProps.mode) {\n      newState = { mode: nextProps.mode };\n    }\n    if ('value' in nextProps) {\n      newState.value = getMomentObjectIfValid(value) || getMomentObjectIfValid(nextProps.defaultValue) || getNowByCurrentStateValue(state.value);\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = selectedValue;\n    }\n\n    return newState;\n  };\n\n  Calendar.prototype.render = function render() {\n    var props = this.props,\n        state = this.state;\n    var locale = props.locale,\n        prefixCls = props.prefixCls,\n        disabledDate = props.disabledDate,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        timePicker = props.timePicker,\n        disabledTime = props.disabledTime,\n        clearIcon = props.clearIcon,\n        renderFooter = props.renderFooter,\n        inputMode = props.inputMode,\n        monthCellRender = props.monthCellRender,\n        monthCellContentRender = props.monthCellContentRender;\n    var value = state.value,\n        selectedValue = state.selectedValue,\n        mode = state.mode;\n\n    var showTimePicker = mode === 'time';\n    var disabledTimeConfig = showTimePicker && disabledTime && timePicker ? getTimeConfig(selectedValue, disabledTime) : null;\n\n    var timePickerEle = null;\n\n    if (timePicker && showTimePicker) {\n      var timePickerProps = _extends({\n        showHour: true,\n        showSecond: true,\n        showMinute: true\n      }, timePicker.props, disabledTimeConfig, {\n        onChange: this.onDateInputChange,\n        value: selectedValue,\n        disabledTime: disabledTime\n      });\n\n      if (timePicker.props.defaultValue !== undefined) {\n        timePickerProps.defaultOpenValue = timePicker.props.defaultValue;\n      }\n\n      timePickerEle = React.cloneElement(timePicker, timePickerProps);\n    }\n\n    var dateInputElement = props.showDateInput ? React.createElement(DateInput, {\n      format: this.getFormat(),\n      key: 'date-input',\n      value: value,\n      locale: locale,\n      placeholder: dateInputPlaceholder,\n      showClear: true,\n      disabledTime: disabledTime,\n      disabledDate: disabledDate,\n      onClear: this.onClear,\n      prefixCls: prefixCls,\n      selectedValue: selectedValue,\n      onChange: this.onDateInputChange,\n      onSelect: this.onDateInputSelect,\n      clearIcon: clearIcon,\n      inputMode: inputMode\n    }) : null;\n\n    var children = [];\n    if (props.renderSidebar) {\n      children.push(props.renderSidebar());\n    }\n    children.push(React.createElement(\n      'div',\n      { className: prefixCls + '-panel', key: 'panel' },\n      dateInputElement,\n      React.createElement(\n        'div',\n        {\n          tabIndex: this.props.focusablePanel ? 0 : undefined,\n          className: prefixCls + '-date-panel'\n        },\n        React.createElement(CalendarHeader, {\n          locale: locale,\n          mode: mode,\n          value: value,\n          onValueChange: this.setValue,\n          onPanelChange: this.onPanelChange,\n          renderFooter: renderFooter,\n          showTimePicker: showTimePicker,\n          prefixCls: prefixCls,\n          monthCellRender: monthCellRender,\n          monthCellContentRender: monthCellContentRender\n        }),\n        timePicker && showTimePicker ? React.createElement(\n          'div',\n          { className: prefixCls + '-time-picker' },\n          React.createElement(\n            'div',\n            { className: prefixCls + '-time-picker-panel' },\n            timePickerEle\n          )\n        ) : null,\n        React.createElement(\n          'div',\n          { className: prefixCls + '-body' },\n          React.createElement(DateTable, {\n            locale: locale,\n            value: value,\n            selectedValue: selectedValue,\n            prefixCls: prefixCls,\n            dateRender: props.dateRender,\n            onSelect: this.onDateTableSelect,\n            disabledDate: disabledDate,\n            showWeekNumber: props.showWeekNumber\n          })\n        ),\n        React.createElement(CalendarFooter, {\n          showOk: props.showOk,\n          mode: mode,\n          renderFooter: props.renderFooter,\n          locale: locale,\n          prefixCls: prefixCls,\n          showToday: props.showToday,\n          disabledTime: disabledTime,\n          showTimePicker: showTimePicker,\n          showDateInput: props.showDateInput,\n          timePicker: timePicker,\n          selectedValue: selectedValue,\n          timePickerDisabled: !selectedValue,\n          value: value,\n          disabledDate: disabledDate,\n          okDisabled: props.showOk !== false && (!selectedValue || !this.isAllowedDate(selectedValue)),\n          onOk: this.onOk,\n          onSelect: this.onSelect,\n          onToday: this.onToday,\n          onOpenTimePicker: this.openTimePicker,\n          onCloseTimePicker: this.closeTimePicker\n        })\n      )\n    ));\n\n    return this.renderRoot({\n      children: children,\n      className: props.showWeekNumber ? prefixCls + '-week-number' : ''\n    });\n  };\n\n  return Calendar;\n}(React.Component);\n\nCalendar.propTypes = _extends({}, calendarMixinPropTypes, propType, {\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  defaultValue: PropTypes.object,\n  value: PropTypes.object,\n  selectedValue: PropTypes.object,\n  defaultSelectedValue: PropTypes.object,\n  mode: PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade']),\n  locale: PropTypes.object,\n  showDateInput: PropTypes.bool,\n  showWeekNumber: PropTypes.bool,\n  showToday: PropTypes.bool,\n  showOk: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onOk: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  timePicker: PropTypes.element,\n  dateInputPlaceholder: PropTypes.any,\n  onClear: PropTypes.func,\n  onChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.any,\n  dateRender: PropTypes.func,\n  renderFooter: PropTypes.func,\n  renderSidebar: PropTypes.func,\n  clearIcon: PropTypes.node,\n  focusablePanel: PropTypes.bool,\n  inputMode: PropTypes.string,\n  onBlur: PropTypes.func\n});\nCalendar.defaultProps = _extends({}, calendarMixinDefaultProps, defaultProp, {\n  showToday: true,\n  showDateInput: true,\n  timePicker: null,\n  onOk: noop,\n  onPanelChange: noop,\n  focusablePanel: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    if (!('mode' in props)) {\n      _this2.setState({ mode: mode });\n    }\n    props.onPanelChange(value || state.value, mode);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return undefined;\n    }\n    var keyCode = event.keyCode;\n    // mac\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var disabledDate = _this2.props.disabledDate;\n    var value = _this2.state.value;\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        _this2.goTime(1, 'weeks');\n        event.preventDefault();\n        return 1;\n      case KeyCode.UP:\n        _this2.goTime(-1, 'weeks');\n        event.preventDefault();\n        return 1;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          _this2.goTime(-1, 'years');\n        } else {\n          _this2.goTime(-1, 'days');\n        }\n        event.preventDefault();\n        return 1;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          _this2.goTime(1, 'years');\n        } else {\n          _this2.goTime(1, 'days');\n        }\n        event.preventDefault();\n        return 1;\n      case KeyCode.HOME:\n        _this2.setValue(goStartMonth(_this2.state.value));\n        event.preventDefault();\n        return 1;\n      case KeyCode.END:\n        _this2.setValue(goEndMonth(_this2.state.value));\n        event.preventDefault();\n        return 1;\n      case KeyCode.PAGE_DOWN:\n        _this2.goTime(1, 'month');\n        event.preventDefault();\n        return 1;\n      case KeyCode.PAGE_UP:\n        _this2.goTime(-1, 'month');\n        event.preventDefault();\n        return 1;\n      case KeyCode.ENTER:\n        if (!disabledDate || !disabledDate(value)) {\n          _this2.onSelect(value, {\n            source: 'keyboard'\n          });\n        }\n        event.preventDefault();\n        return 1;\n      default:\n        _this2.props.onKeyDown(event);\n        return 1;\n    }\n  };\n\n  this.onClear = function () {\n    _this2.onSelect(null);\n    _this2.props.onClear();\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDate(selectedValue)) {\n      _this2.props.onOk(selectedValue);\n    }\n  };\n\n  this.onDateInputChange = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInput'\n    });\n  };\n\n  this.onDateInputSelect = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInputSelect'\n    });\n  };\n\n  this.onDateTableSelect = function (value) {\n    var timePicker = _this2.props.timePicker;\n    var selectedValue = _this2.state.selectedValue;\n\n    if (!selectedValue && timePicker) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (timePickerDefaultValue) {\n        syncTime(timePickerDefaultValue, value);\n      }\n    }\n    _this2.onSelect(value);\n  };\n\n  this.onToday = function () {\n    var value = _this2.state.value;\n\n    var now = getTodayTime(value);\n    _this2.onSelect(now, {\n      source: 'todayButton'\n    });\n  };\n\n  this.onBlur = function (event) {\n    setTimeout(function () {\n      var dateInput = DateInput.getInstance();\n      var rootInstance = _this2.rootInstance;\n\n      if (!rootInstance || rootInstance.contains(document.activeElement) || dateInput && dateInput.contains(document.activeElement)) {\n        // focused element is still part of Calendar\n        return;\n      }\n\n      if (_this2.props.onBlur) {\n        _this2.props.onBlur(event);\n      }\n    }, 0);\n  };\n\n  this.getRootDOMNode = function () {\n    return ReactDOM.findDOMNode(_this2);\n  };\n\n  this.openTimePicker = function () {\n    _this2.onPanelChange(null, 'time');\n  };\n\n  this.closeTimePicker = function () {\n    _this2.onPanelChange(null, 'date');\n  };\n\n  this.goTime = function (direction, unit) {\n    _this2.setValue(goTime(_this2.state.value, direction, unit));\n  };\n};\n\npolyfill(Calendar);\n\nexport default calendarMixinWrapper(commonMixinWrapper(Calendar));"]},"metadata":{},"sourceType":"module"}