{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport unsafeLifecyclesPolyfill from 'rc-util/es/unsafeLifecyclesPolyfill';\nimport { toArrayChildren, mergeChildren, findShownChildInChildrenByKey, findChildInChildrenByKey, isSameChildren } from './ChildrenUtils';\nimport AnimateChild from './AnimateChild';\nimport animUtil from './util/animate';\nvar defaultKey = 'rc_animate_' + Date.now();\n\nfunction getChildrenFromProps(props) {\n  var children = props.children;\n\n  if (React.isValidElement(children)) {\n    if (!children.key) {\n      return React.cloneElement(children, {\n        key: defaultKey\n      });\n    }\n  }\n\n  return children;\n}\n\nfunction noop() {}\n\nvar Animate = function (_React$Component) {\n  _inherits(Animate, _React$Component); // eslint-disable-line\n\n\n  function Animate(props) {\n    _classCallCheck(this, Animate);\n\n    var _this = _possibleConstructorReturn(this, (Animate.__proto__ || Object.getPrototypeOf(Animate)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.currentlyAnimatingKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n    _this.state = {\n      children: toArrayChildren(getChildrenFromProps(props))\n    };\n    _this.childrenRefs = {};\n    return _this;\n  }\n\n  _createClass(Animate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var showProp = this.props.showProp;\n      var children = this.state.children;\n\n      if (showProp) {\n        children = children.filter(function (child) {\n          return !!child.props[showProp];\n        });\n      }\n\n      children.forEach(function (child) {\n        if (child) {\n          _this2.performAppear(child.key);\n        }\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      this.nextProps = nextProps;\n      var nextChildren = toArrayChildren(getChildrenFromProps(nextProps));\n      var props = this.props; // exclusive needs immediate response\n\n      if (props.exclusive) {\n        Object.keys(this.currentlyAnimatingKeys).forEach(function (key) {\n          _this3.stop(key);\n        });\n      }\n\n      var showProp = props.showProp;\n      var currentlyAnimatingKeys = this.currentlyAnimatingKeys; // last props children if exclusive\n\n      var currentChildren = props.exclusive ? toArrayChildren(getChildrenFromProps(props)) : this.state.children; // in case destroy in showProp mode\n\n      var newChildren = [];\n\n      if (showProp) {\n        currentChildren.forEach(function (currentChild) {\n          var nextChild = currentChild && findChildInChildrenByKey(nextChildren, currentChild.key);\n          var newChild = void 0;\n\n          if ((!nextChild || !nextChild.props[showProp]) && currentChild.props[showProp]) {\n            newChild = React.cloneElement(nextChild || currentChild, _defineProperty({}, showProp, true));\n          } else {\n            newChild = nextChild;\n          }\n\n          if (newChild) {\n            newChildren.push(newChild);\n          }\n        });\n        nextChildren.forEach(function (nextChild) {\n          if (!nextChild || !findChildInChildrenByKey(currentChildren, nextChild.key)) {\n            newChildren.push(nextChild);\n          }\n        });\n      } else {\n        newChildren = mergeChildren(currentChildren, nextChildren);\n      } // need render to avoid update\n\n\n      this.setState({\n        children: newChildren\n      });\n      nextChildren.forEach(function (child) {\n        var key = child && child.key;\n\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n\n        var hasPrev = child && findChildInChildrenByKey(currentChildren, key);\n\n        if (showProp) {\n          var showInNext = child.props[showProp];\n\n          if (hasPrev) {\n            var showInNow = findShownChildInChildrenByKey(currentChildren, key, showProp);\n\n            if (!showInNow && showInNext) {\n              _this3.keysToEnter.push(key);\n            }\n          } else if (showInNext) {\n            _this3.keysToEnter.push(key);\n          }\n        } else if (!hasPrev) {\n          _this3.keysToEnter.push(key);\n        }\n      });\n      currentChildren.forEach(function (child) {\n        var key = child && child.key;\n\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n\n        var hasNext = child && findChildInChildrenByKey(nextChildren, key);\n\n        if (showProp) {\n          var showInNow = child.props[showProp];\n\n          if (hasNext) {\n            var showInNext = findShownChildInChildrenByKey(nextChildren, key, showProp);\n\n            if (!showInNext && showInNow) {\n              _this3.keysToLeave.push(key);\n            }\n          } else if (showInNow) {\n            _this3.keysToLeave.push(key);\n          }\n        } else if (!hasNext) {\n          _this3.keysToLeave.push(key);\n        }\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter);\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: 'isValidChildByKey',\n    value: function isValidChildByKey(currentChildren, key) {\n      var showProp = this.props.showProp;\n\n      if (showProp) {\n        return findShownChildInChildrenByKey(currentChildren, key, showProp);\n      }\n\n      return findChildInChildrenByKey(currentChildren, key);\n    }\n  }, {\n    key: 'stop',\n    value: function stop(key) {\n      delete this.currentlyAnimatingKeys[key];\n      var component = this.childrenRefs[key];\n\n      if (component) {\n        component.stop();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var props = this.props;\n      this.nextProps = props;\n      var stateChildren = this.state.children;\n      var children = null;\n\n      if (stateChildren) {\n        children = stateChildren.map(function (child) {\n          if (child === null || child === undefined) {\n            return child;\n          }\n\n          if (!child.key) {\n            throw new Error('must set key for <rc-animate> children');\n          }\n\n          return React.createElement(AnimateChild, {\n            key: child.key,\n            ref: function ref(node) {\n              _this4.childrenRefs[child.key] = node;\n            },\n            animation: props.animation,\n            transitionName: props.transitionName,\n            transitionEnter: props.transitionEnter,\n            transitionAppear: props.transitionAppear,\n            transitionLeave: props.transitionLeave\n          }, child);\n        });\n      }\n\n      var Component = props.component;\n\n      if (Component) {\n        var passedProps = props;\n\n        if (typeof Component === 'string') {\n          passedProps = _extends({\n            className: props.className,\n            style: props.style\n          }, props.componentProps);\n        }\n\n        return React.createElement(Component, passedProps, children);\n      }\n\n      return children[0] || null;\n    }\n  }]);\n\n  return Animate;\n}(React.Component);\n\nAnimate.isAnimate = true;\nAnimate.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  component: PropTypes.any,\n  componentProps: PropTypes.object,\n  animation: PropTypes.object,\n  transitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  transitionEnter: PropTypes.bool,\n  transitionAppear: PropTypes.bool,\n  exclusive: PropTypes.bool,\n  transitionLeave: PropTypes.bool,\n  onEnd: PropTypes.func,\n  onEnter: PropTypes.func,\n  onLeave: PropTypes.func,\n  onAppear: PropTypes.func,\n  showProp: PropTypes.string,\n  children: PropTypes.node\n};\nAnimate.defaultProps = {\n  animation: {},\n  component: 'span',\n  componentProps: {},\n  transitionEnter: true,\n  transitionLeave: true,\n  transitionAppear: false,\n  onEnd: noop,\n  onEnter: noop,\n  onLeave: noop,\n  onAppear: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.performEnter = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n\n      _this5.childrenRefs[key].componentWillEnter(_this5.handleDoneAdding.bind(_this5, key, 'enter'));\n    }\n  };\n\n  this.performAppear = function (key) {\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n\n      _this5.childrenRefs[key].componentWillAppear(_this5.handleDoneAdding.bind(_this5, key, 'appear'));\n    }\n  };\n\n  this.handleDoneAdding = function (key, type) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key]; // if update on exclusive mode, skip check\n\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n\n    var currentChildren = toArrayChildren(getChildrenFromProps(props));\n\n    if (!_this5.isValidChildByKey(currentChildren, key)) {\n      // exclusive will not need this\n      _this5.performLeave(key);\n    } else if (type === 'appear') {\n      if (animUtil.allowAppearCallback(props)) {\n        props.onAppear(key);\n        props.onEnd(key, true);\n      }\n    } else if (animUtil.allowEnterCallback(props)) {\n      props.onEnter(key);\n      props.onEnd(key, true);\n    }\n  };\n\n  this.performLeave = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n\n      _this5.childrenRefs[key].componentWillLeave(_this5.handleDoneLeaving.bind(_this5, key));\n    }\n  };\n\n  this.handleDoneLeaving = function (key) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key]; // if update on exclusive mode, skip check\n\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n\n    var currentChildren = toArrayChildren(getChildrenFromProps(props)); // in case state change is too fast\n\n    if (_this5.isValidChildByKey(currentChildren, key)) {\n      _this5.performEnter(key);\n    } else {\n      var end = function end() {\n        if (animUtil.allowLeaveCallback(props)) {\n          props.onLeave(key);\n          props.onEnd(key, false);\n        }\n      };\n\n      if (!isSameChildren(_this5.state.children, currentChildren, props.showProp)) {\n        _this5.setState({\n          children: currentChildren\n        }, end);\n      } else {\n        end();\n      }\n    }\n  };\n};\n\nexport default unsafeLifecyclesPolyfill(Animate);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/node_modules/rc-animate/es/Animate.js"],"names":["_extends","_defineProperty","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","PropTypes","unsafeLifecyclesPolyfill","toArrayChildren","mergeChildren","findShownChildInChildrenByKey","findChildInChildrenByKey","isSameChildren","AnimateChild","animUtil","defaultKey","Date","now","getChildrenFromProps","props","children","isValidElement","key","cloneElement","noop","Animate","_React$Component","_this","__proto__","Object","getPrototypeOf","call","_initialiseProps","currentlyAnimatingKeys","keysToEnter","keysToLeave","state","childrenRefs","value","componentDidMount","_this2","showProp","filter","child","forEach","performAppear","componentWillReceiveProps","nextProps","_this3","nextChildren","exclusive","keys","stop","currentChildren","newChildren","currentChild","nextChild","newChild","push","setState","hasPrev","showInNext","showInNow","hasNext","componentDidUpdate","performEnter","performLeave","isValidChildByKey","component","render","_this4","stateChildren","map","undefined","Error","createElement","ref","node","animation","transitionName","transitionEnter","transitionAppear","transitionLeave","Component","passedProps","className","style","componentProps","isAnimate","propTypes","string","object","any","oneOfType","bool","onEnd","func","onEnter","onLeave","onAppear","defaultProps","_this5","componentWillEnter","handleDoneAdding","bind","componentWillAppear","type","allowAppearCallback","allowEnterCallback","componentWillLeave","handleDoneLeaving","end","allowLeaveCallback"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport unsafeLifecyclesPolyfill from 'rc-util/es/unsafeLifecyclesPolyfill';\nimport { toArrayChildren, mergeChildren, findShownChildInChildrenByKey, findChildInChildrenByKey, isSameChildren } from './ChildrenUtils';\nimport AnimateChild from './AnimateChild';\nimport animUtil from './util/animate';\n\nvar defaultKey = 'rc_animate_' + Date.now();\n\nfunction getChildrenFromProps(props) {\n  var children = props.children;\n  if (React.isValidElement(children)) {\n    if (!children.key) {\n      return React.cloneElement(children, {\n        key: defaultKey\n      });\n    }\n  }\n  return children;\n}\n\nfunction noop() {}\n\nvar Animate = function (_React$Component) {\n  _inherits(Animate, _React$Component);\n\n  // eslint-disable-line\n\n  function Animate(props) {\n    _classCallCheck(this, Animate);\n\n    var _this = _possibleConstructorReturn(this, (Animate.__proto__ || Object.getPrototypeOf(Animate)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.currentlyAnimatingKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n\n    _this.state = {\n      children: toArrayChildren(getChildrenFromProps(props))\n    };\n\n    _this.childrenRefs = {};\n    return _this;\n  }\n\n  _createClass(Animate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var showProp = this.props.showProp;\n      var children = this.state.children;\n      if (showProp) {\n        children = children.filter(function (child) {\n          return !!child.props[showProp];\n        });\n      }\n      children.forEach(function (child) {\n        if (child) {\n          _this2.performAppear(child.key);\n        }\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      this.nextProps = nextProps;\n      var nextChildren = toArrayChildren(getChildrenFromProps(nextProps));\n      var props = this.props;\n      // exclusive needs immediate response\n      if (props.exclusive) {\n        Object.keys(this.currentlyAnimatingKeys).forEach(function (key) {\n          _this3.stop(key);\n        });\n      }\n      var showProp = props.showProp;\n      var currentlyAnimatingKeys = this.currentlyAnimatingKeys;\n      // last props children if exclusive\n      var currentChildren = props.exclusive ? toArrayChildren(getChildrenFromProps(props)) : this.state.children;\n      // in case destroy in showProp mode\n      var newChildren = [];\n      if (showProp) {\n        currentChildren.forEach(function (currentChild) {\n          var nextChild = currentChild && findChildInChildrenByKey(nextChildren, currentChild.key);\n          var newChild = void 0;\n          if ((!nextChild || !nextChild.props[showProp]) && currentChild.props[showProp]) {\n            newChild = React.cloneElement(nextChild || currentChild, _defineProperty({}, showProp, true));\n          } else {\n            newChild = nextChild;\n          }\n          if (newChild) {\n            newChildren.push(newChild);\n          }\n        });\n        nextChildren.forEach(function (nextChild) {\n          if (!nextChild || !findChildInChildrenByKey(currentChildren, nextChild.key)) {\n            newChildren.push(nextChild);\n          }\n        });\n      } else {\n        newChildren = mergeChildren(currentChildren, nextChildren);\n      }\n\n      // need render to avoid update\n      this.setState({\n        children: newChildren\n      });\n\n      nextChildren.forEach(function (child) {\n        var key = child && child.key;\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n        var hasPrev = child && findChildInChildrenByKey(currentChildren, key);\n        if (showProp) {\n          var showInNext = child.props[showProp];\n          if (hasPrev) {\n            var showInNow = findShownChildInChildrenByKey(currentChildren, key, showProp);\n            if (!showInNow && showInNext) {\n              _this3.keysToEnter.push(key);\n            }\n          } else if (showInNext) {\n            _this3.keysToEnter.push(key);\n          }\n        } else if (!hasPrev) {\n          _this3.keysToEnter.push(key);\n        }\n      });\n\n      currentChildren.forEach(function (child) {\n        var key = child && child.key;\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n        var hasNext = child && findChildInChildrenByKey(nextChildren, key);\n        if (showProp) {\n          var showInNow = child.props[showProp];\n          if (hasNext) {\n            var showInNext = findShownChildInChildrenByKey(nextChildren, key, showProp);\n            if (!showInNext && showInNow) {\n              _this3.keysToLeave.push(key);\n            }\n          } else if (showInNow) {\n            _this3.keysToLeave.push(key);\n          }\n        } else if (!hasNext) {\n          _this3.keysToLeave.push(key);\n        }\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter);\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: 'isValidChildByKey',\n    value: function isValidChildByKey(currentChildren, key) {\n      var showProp = this.props.showProp;\n      if (showProp) {\n        return findShownChildInChildrenByKey(currentChildren, key, showProp);\n      }\n      return findChildInChildrenByKey(currentChildren, key);\n    }\n  }, {\n    key: 'stop',\n    value: function stop(key) {\n      delete this.currentlyAnimatingKeys[key];\n      var component = this.childrenRefs[key];\n      if (component) {\n        component.stop();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var props = this.props;\n      this.nextProps = props;\n      var stateChildren = this.state.children;\n      var children = null;\n      if (stateChildren) {\n        children = stateChildren.map(function (child) {\n          if (child === null || child === undefined) {\n            return child;\n          }\n          if (!child.key) {\n            throw new Error('must set key for <rc-animate> children');\n          }\n          return React.createElement(\n            AnimateChild,\n            {\n              key: child.key,\n              ref: function ref(node) {\n                _this4.childrenRefs[child.key] = node;\n              },\n              animation: props.animation,\n              transitionName: props.transitionName,\n              transitionEnter: props.transitionEnter,\n              transitionAppear: props.transitionAppear,\n              transitionLeave: props.transitionLeave\n            },\n            child\n          );\n        });\n      }\n      var Component = props.component;\n      if (Component) {\n        var passedProps = props;\n        if (typeof Component === 'string') {\n          passedProps = _extends({\n            className: props.className,\n            style: props.style\n          }, props.componentProps);\n        }\n        return React.createElement(\n          Component,\n          passedProps,\n          children\n        );\n      }\n      return children[0] || null;\n    }\n  }]);\n\n  return Animate;\n}(React.Component);\n\nAnimate.isAnimate = true;\nAnimate.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  component: PropTypes.any,\n  componentProps: PropTypes.object,\n  animation: PropTypes.object,\n  transitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  transitionEnter: PropTypes.bool,\n  transitionAppear: PropTypes.bool,\n  exclusive: PropTypes.bool,\n  transitionLeave: PropTypes.bool,\n  onEnd: PropTypes.func,\n  onEnter: PropTypes.func,\n  onLeave: PropTypes.func,\n  onAppear: PropTypes.func,\n  showProp: PropTypes.string,\n  children: PropTypes.node\n};\nAnimate.defaultProps = {\n  animation: {},\n  component: 'span',\n  componentProps: {},\n  transitionEnter: true,\n  transitionLeave: true,\n  transitionAppear: false,\n  onEnd: noop,\n  onEnter: noop,\n  onLeave: noop,\n  onAppear: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.performEnter = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillEnter(_this5.handleDoneAdding.bind(_this5, key, 'enter'));\n    }\n  };\n\n  this.performAppear = function (key) {\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillAppear(_this5.handleDoneAdding.bind(_this5, key, 'appear'));\n    }\n  };\n\n  this.handleDoneAdding = function (key, type) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key];\n    // if update on exclusive mode, skip check\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n    var currentChildren = toArrayChildren(getChildrenFromProps(props));\n    if (!_this5.isValidChildByKey(currentChildren, key)) {\n      // exclusive will not need this\n      _this5.performLeave(key);\n    } else if (type === 'appear') {\n      if (animUtil.allowAppearCallback(props)) {\n        props.onAppear(key);\n        props.onEnd(key, true);\n      }\n    } else if (animUtil.allowEnterCallback(props)) {\n      props.onEnter(key);\n      props.onEnd(key, true);\n    }\n  };\n\n  this.performLeave = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillLeave(_this5.handleDoneLeaving.bind(_this5, key));\n    }\n  };\n\n  this.handleDoneLeaving = function (key) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key];\n    // if update on exclusive mode, skip check\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n    var currentChildren = toArrayChildren(getChildrenFromProps(props));\n    // in case state change is too fast\n    if (_this5.isValidChildByKey(currentChildren, key)) {\n      _this5.performEnter(key);\n    } else {\n      var end = function end() {\n        if (animUtil.allowLeaveCallback(props)) {\n          props.onLeave(key);\n          props.onEnd(key, false);\n        }\n      };\n      if (!isSameChildren(_this5.state.children, currentChildren, props.showProp)) {\n        _this5.setState({\n          children: currentChildren\n        }, end);\n      } else {\n        end();\n      }\n    }\n  };\n};\n\nexport default unsafeLifecyclesPolyfill(Animate);"]},"metadata":{},"sourceType":"module"}