{"ast":null,"code":"import { atan, exp, halfPi, log, pi, tan, tau } from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function (x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function () {\n  return mercatorProjection(mercatorRaw).scale(961 / tau);\n}\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null,\n      y0,\n      x1,\n      y1; // clip extent\n\n  m.scale = function (_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function (_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function (_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function (_) {\n    return arguments.length ? (_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]] : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/d3-geo/src/projection/mercator.js"],"names":["atan","exp","halfPi","log","pi","tan","tau","rotation","projection","mercatorRaw","lambda","phi","invert","x","y","mercatorProjection","scale","project","m","center","translate","clipExtent","x0","y0","x1","y1","_","arguments","length","reclip","k","t","rotate","Math","max","min"],"mappings":"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","sourcesContent":["import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n"]},"metadata":{},"sourceType":"module"}