{"ast":null,"code":"import _slicedToArray from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{withRouter}from'react-router-dom';import{compose}from'recompose';import withUserAuth from'context/withUserAuth';import{axios}from'utils/utils';import Grid from'@material-ui/core/Grid';var Timer=/*#__PURE__*/function(_React$Component){_inherits(Timer,_React$Component);var _super=_createSuper(Timer);function Timer(props){var _this;_classCallCheck(this,Timer);_this=_super.call(this,props);_this.getTime=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var respnse,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"/api/param/getTime\");case 3:respnse=_context.sent;data=respnse.data;//console.log(data)\n_this.setState(function(state){return{seconds:Object.values(data)[0]};});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));_this.getCurrentWord=function(data){console.log(_this.state.seconds);var time=_this.state.seconds%data.length;var words=data.punct.split(' ');var cnt=0;while(time>data.words[cnt].end){//console.log(data.words[cnt].end);\ncnt++;}var prevWords=words.slice(0,cnt).join(' ');var currWord=\" \"+words[cnt];var restWords=\" \"+words.slice(cnt+1).join(' ');return[prevWords,currWord,restWords];};_this.state={seconds:0};return _this;}_createClass(Timer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){return _this2.getTime();},400);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var filename=this.props.filename;var _this$getCurrentWord=this.getCurrentWord(filename),_this$getCurrentWord2=_slicedToArray(_this$getCurrentWord,3),prev=_this$getCurrentWord2[0],curr=_this$getCurrentWord2[1],rest=_this$getCurrentWord2[2];return/*#__PURE__*/ (// <div>\n// Seconds: {this.state.seconds}\n// {filename}\n// </div>\nReact.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(\"p\",null,prev,/*#__PURE__*/React.createElement(\"font\",{color:\"red\"},curr),rest)));}}]);return Timer;}(React.Component);export default compose(withUserAuth,withRouter)(Timer);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/src/components/Timer.jsx"],"names":["React","withRouter","compose","withUserAuth","axios","Grid","Timer","props","getTime","post","respnse","data","setState","state","seconds","Object","values","alert","response","getCurrentWord","console","log","time","length","words","punct","split","cnt","end","prevWords","slice","join","currWord","restWords","interval","setInterval","clearInterval","filename","prev","curr","rest","Component"],"mappings":"69BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CACA,OAASC,KAAT,KAAsB,aAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,C,GAEMC,CAAAA,K,0GACF,eAAYC,KAAZ,CAAmB,uCACjB,uBAAMA,KAAN,EADiB,MAKnBC,OALmB,sEAKT,0LAEoBJ,CAAAA,KAAK,CAACK,IAAN,CAAW,oBAAX,CAFpB,QAEIC,OAFJ,eAGIC,IAHJ,CAGWD,OAAO,CAACC,IAHnB,CAIF;AACA,MAAKC,QAAL,CAAc,SAAAC,KAAK,QAAK,CACpBC,OAAO,CAAEC,MAAM,CAACC,MAAP,CAAcL,IAAd,EAAoB,CAApB,CADW,CAAL,EAAnB,EALE,+EAUFM,KAAK,CAAC,YAAMC,QAAN,CAAeP,IAAhB,CAAL,CAVE,oEALS,SAmBnBQ,cAnBmB,CAmBF,SAACR,IAAD,CAAS,CACtBS,OAAO,CAACC,GAAR,CAAY,MAAKR,KAAL,CAAWC,OAAvB,EACA,GAAIQ,CAAAA,IAAI,CAAG,MAAKT,KAAL,CAAWC,OAAX,CAAqBH,IAAI,CAACY,MAArC,CACA,GAAIC,CAAAA,KAAK,CAAGb,IAAI,CAACc,KAAL,CAAWC,KAAX,CAAiB,GAAjB,CAAZ,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAV,CACA,MAAOL,IAAI,CAAGX,IAAI,CAACa,KAAL,CAAWG,GAAX,EAAgBC,GAA9B,CAAkC,CAC9B;AACAD,GAAG,GACN,CACD,GAAIE,CAAAA,SAAS,CAAGL,KAAK,CAACM,KAAN,CAAY,CAAZ,CAAeH,GAAf,EAAoBI,IAApB,CAAyB,GAAzB,CAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAG,IAAKR,KAAK,CAACG,GAAD,CAAzB,CACA,GAAIM,CAAAA,SAAS,CAAG,IAAMT,KAAK,CAACM,KAAN,CAAYH,GAAG,CAAC,CAAhB,EAAmBI,IAAnB,CAAwB,GAAxB,CAAtB,CACA,MAAO,CAACF,SAAD,CAAYG,QAAZ,CAAsBC,SAAtB,CAAP,CACH,CAhCkB,CAEjB,MAAKpB,KAAL,CAAa,CAAEC,OAAO,CAAE,CAAX,CAAb,CAFiB,aAGlB,C,+EA+BmB,iBAClB,KAAKoB,QAAL,CAAgBC,WAAW,CAAC,iBAAM,CAAA,MAAI,CAAC3B,OAAL,EAAN,EAAD,CAAuB,GAAvB,CAA3B,CACD,C,mEAEsB,CACrB4B,aAAa,CAAC,KAAKF,QAAN,CAAb,CACD,C,uCAEQ,IAEDG,CAAAA,QAFC,CAGD,KAAK9B,KAHJ,CAED8B,QAFC,0BAKsB,KAAKlB,cAAL,CAAoBkB,QAApB,CALtB,8DAKEC,IALF,0BAKQC,IALR,0BAKcC,IALd,0BAOL,oBACI;AACA;AACA;AACA;AACA,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACA,6BACKF,IADL,cAEI,4BAAM,KAAK,CAAC,KAAZ,EACKC,IADL,CAFJ,CAKKC,IALL,CADA,CALJ,EAeH,C,mBAjEexC,KAAK,CAACyC,S,EAoExB,cAAevC,CAAAA,OAAO,CACpBC,YADoB,CAEpBF,UAFoB,CAAP,CAGfK,KAHe,CAAf","sourcesContent":["import React from 'react';\n\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport withUserAuth from 'context/withUserAuth';\nimport { axios } from 'utils/utils';\nimport Grid from '@material-ui/core/Grid';\n\nclass Timer extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { seconds: 0 };\n    }\n\n    getTime = async() => {\n        try {\n            const respnse = await axios.post(\"/api/param/getTime\")\n            const data = respnse.data\n            //console.log(data)\n            this.setState(state => ({\n                seconds: Object.values(data)[0]\n            }));\n        }\n        catch(error) {\n            alert(error.response.data);\n        }\n    }\n\n    getCurrentWord = (data) =>{\n        console.log(this.state.seconds)\n        let time = this.state.seconds % data.length;\n        let words = data.punct.split(' ');\n        let cnt = 0;\n        while (time > data.words[cnt].end){\n            //console.log(data.words[cnt].end);\n            cnt++;\n        }\n        let prevWords = words.slice(0, cnt).join(' ');\n        let currWord = \" \" +words[cnt];\n        let restWords = \" \" + words.slice(cnt+1).join(' ');\n        return [prevWords, currWord, restWords]\n    }\n\n    componentDidMount() {\n      this.interval = setInterval(() => this.getTime(), 400);\n    }\n  \n    componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  \n    render() {\n        const {\n            filename,\n        } = this.props\n\n        const [prev, curr, rest] = this.getCurrentWord(filename)\n\n        return (\n            // <div>\n            // Seconds: {this.state.seconds}\n            // {filename}\n            // </div>\n            <Grid item xs={12}>\n            <p>\n                {prev}\n                <font color=\"red\">\n                    {curr}\n                </font>\n                {rest}\n            </p>\n            </Grid>\n        );\n    }\n  }\n  \n  export default compose(\n    withUserAuth,\n    withRouter,\n)(Timer);"]},"metadata":{},"sourceType":"module"}