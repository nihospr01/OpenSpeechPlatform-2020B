{"ast":null,"code":"import _regeneratorRuntime from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _defineProperty from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{withStyles}from\"@material-ui/styles\";import Stepper from\"@material-ui/core/Stepper\";import Step from\"@material-ui/core/Step\";import StepLabel from\"@material-ui/core/StepLabel\";import StepContent from\"@material-ui/core/StepContent\";import Button from\"@material-ui/core/Button\";import Typography from\"@material-ui/core/Typography\";import Grid from\"@material-ui/core/Grid\";import FormControl from\"@material-ui/core/FormControl\";import InputLabel from\"@material-ui/core/InputLabel\";import FormHelperText from\"@material-ui/core/FormHelperText\";import Select from\"@material-ui/core/Select\";import FormGroup from\"@material-ui/core/FormGroup\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import TextField from\"@material-ui/core/TextField\";import Paper from\"@material-ui/core/Paper\";import{axios}from\"utils/utils\";import{Link,withRouter}from\"react-router-dom\";import{compose}from\"recompose\";import withUserAuth from\"context/withUserAuth\";var styles=function styles(theme){return{formControl:{margin:theme.spacing(0),minWidth:120},illnessCheckBox:{height:10},relationCheckBox:{minWidth:150},inputLabel:{width:320},fullSelect:{minWidth:280,marginBottom:8}};};var getEarConditions=function getEarConditions(){return[\"No Hearing\",\"Limited Hearing\",\"Normal Hearing\"];};var getSteps=function getSteps(){return[\"Medical History\",\"Devemopment History\",\"Education History\",\"Family History\"];};var getIllnesses=function getIllnesses(){return[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\"];};var getRelations=function getRelations(){return[\"Parent\",\"Child\",\"Sibling\",\"Grandparent\",\"Grandchild\",\"Other\"];};var SurveyPage=/*#__PURE__*/function(_Component){_inherits(SurveyPage,_Component);var _super=_createSuper(SurveyPage);function SurveyPage(){var _this;_classCallCheck(this,SurveyPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeStep:0,leftEar:\"\",rightEar:\"\",development:\"\",education:\"\",personalIllnesses:[],siblingIllnesses:[],personalIllnessesInfo:{},siblingIllnessesInfo:{}};_this.handleNext=function(){_this.setState({activeStep:_this.state.activeStep+1});};_this.handleBack=function(){_this.setState({activeStep:_this.state.activeStep-1});};_this.handleChangeEarInfo=function(name){return function(event){_this.setState(_defineProperty({},name,event.target.value?parseInt(event.target.value):\"\"));};};_this.handleChangeUserInfo=function(name){return function(event){_this.setState(_defineProperty({},name,event.target.value?event.target.value:\"\"));};};_this.handleChangeIllness=function(name,sibling){return function(event){if(sibling===false){var _this$state=_this.state,personalIllnesses=_this$state.personalIllnesses,personalIllnessesInfo=_this$state.personalIllnessesInfo;if(event.target.checked){personalIllnesses.push(name);personalIllnesses.sort();personalIllnessesInfo[name]=[\"\",\"\",\"\"];_this.setState({personalIllnesses:personalIllnesses,personalIllnessesInfo:personalIllnessesInfo});}else{delete personalIllnessesInfo[name];_this.setState({personalIllnesses:personalIllnesses.filter(function(illness){return name!==illness;}),personalIllnessesInfo:personalIllnessesInfo});}}else{var _this$state2=_this.state,siblingIllnesses=_this$state2.siblingIllnesses,siblingIllnessesInfo=_this$state2.siblingIllnessesInfo;if(event.target.checked){siblingIllnesses.push(name);siblingIllnesses.sort();siblingIllnessesInfo[name]=[[],\"\",\"\",\"\"];_this.setState({siblingIllnesses:siblingIllnesses,siblingIllnessesInfo:siblingIllnessesInfo});}else{delete siblingIllnessesInfo[name];_this.setState({siblingIllnesses:siblingIllnesses.filter(function(illness){return name!==illness;}),siblingIllnessesInfo:siblingIllnessesInfo});}}};};_this.handleChangeIllnessInfo=function(name,sibling,index){return function(event){if(sibling===false){var personalIllnessesInfo=_this.state.personalIllnessesInfo;personalIllnessesInfo[name][index]=event.target.value;_this.setState({personalIllnessesInfo:personalIllnessesInfo});}else{var siblingIllnessesInfo=_this.state.siblingIllnessesInfo;if(index===0){siblingIllnessesInfo[name][0].includes(event.target.value)?siblingIllnessesInfo[name][0]=siblingIllnessesInfo[name][0].filter(function(relation){return event.target.value!==relation;}):siblingIllnessesInfo[name][0].push(event.target.value);}else{siblingIllnessesInfo[name][index]=event.target.value;}_this.setState({siblingIllnessesInfo:siblingIllnessesInfo});}};};_this.parseLog=function(){var _this$state3=_this.state,leftEar=_this$state3.leftEar,rightEar=_this$state3.rightEar,personalIllnesses=_this$state3.personalIllnesses,personalIllnessesInfo=_this$state3.personalIllnessesInfo,development=_this$state3.development,education=_this$state3.education,siblingIllnesses=_this$state3.siblingIllnesses,siblingIllnessesInfo=_this$state3.siblingIllnessesInfo;var illnesses={},illnessesFam={};var _iterator=_createForOfIteratorHelper(personalIllnesses),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var illness=_step.value;illnesses[illness]={occur:personalIllnessesInfo[illness][0],happen:personalIllnessesInfo[illness][1],resolve:personalIllnessesInfo[illness][2]};}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(siblingIllnesses),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _illness=_step2.value;illnessesFam[_illness]={relation:siblingIllnessesInfo[_illness][0],occur:siblingIllnessesInfo[_illness][1],happen:siblingIllnessesInfo[_illness][2],resolve:siblingIllnessesInfo[_illness][3]};}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return{history:{logOn:new Date().toLocaleString(),//medical\nmedicalHistory:{leftEar:getEarConditions()[leftEar-1],rightEar:getEarConditions()[rightEar-1]},illnesses:illnesses,//development\nageSpeak:development,//education\nhighestEdu:education,//family\nillnessesFam:illnessesFam}};};_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props$context,updateUser,user,_this$state4,leftEar,rightEar;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props$context=_this.props.context,updateUser=_this$props$context.updateUser,user=_this$props$context.user;_this$state4=_this.state,leftEar=_this$state4.leftEar,rightEar=_this$state4.rightEar;_context.prev=2;_context.next=5;return axios.post(\"/api/listener/addLog\",{listenerID:user,newLog:_this.parseLog(),flag:\"leftEarIsWorse\",flagValue:leftEar<=rightEar});case 5:_context.next=7;return axios.post(\"/api/listener/addLog\",{listenerID:user,newLog:\"\",flag:\"historyDone\",flagValue:true});case 7:_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);alert(_context.t0.message);console.log(_context.t0);case 13:sessionStorage.setItem(\"leftEarIsWorse\",leftEar<=rightEar);sessionStorage.setItem(\"historyDone\",true);updateUser();case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));_this.getStepContent=function(step){var classes=_this.props.classes;var _this$state5=_this.state,leftEar=_this$state5.leftEar,rightEar=_this$state5.rightEar,development=_this$state5.development,education=_this$state5.education,personalIllnesses=_this$state5.personalIllnesses,siblingIllnesses=_this$state5.siblingIllnesses,personalIllnessesInfo=_this$state5.personalIllnessesInfo,siblingIllnessesInfo=_this$state5.siblingIllnessesInfo;switch(step){case 0:return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},\"How well are you hearing?\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(FormControl,{required:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,null,\"Left Ear\"),/*#__PURE__*/React.createElement(Select,{native:true,value:leftEar,onChange:_this.handleChangeEarInfo(\"leftEar\")},/*#__PURE__*/React.createElement(\"option\",{value:\"\"}),/*#__PURE__*/React.createElement(\"option\",{value:1},\"No Hearing\"),/*#__PURE__*/React.createElement(\"option\",{value:2},\"Limited Hearing\"),/*#__PURE__*/React.createElement(\"option\",{value:3},\"Normal Hearing\")),/*#__PURE__*/React.createElement(FormHelperText,null,\"Required\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(FormControl,{required:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,null,\"Right Ear\"),/*#__PURE__*/React.createElement(Select,{native:true,value:rightEar,onChange:_this.handleChangeEarInfo(\"rightEar\")},/*#__PURE__*/React.createElement(\"option\",{value:\"\"}),/*#__PURE__*/React.createElement(\"option\",{value:1},\"No Hearing\"),/*#__PURE__*/React.createElement(\"option\",{value:2},\"Limited Hearing\"),/*#__PURE__*/React.createElement(\"option\",{value:3},\"Normal Hearing\")),/*#__PURE__*/React.createElement(FormHelperText,null,\"Required\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},\"Check the following illnesses you have had before:\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormGroup,{row:true},getIllnesses().map(function(illness){return/*#__PURE__*/React.createElement(FormControlLabel,{key:\"\".concat(illness,\"-checkbox\"),control:/*#__PURE__*/React.createElement(Checkbox,{className:classes.illnessCheckBox,checked:personalIllnesses.includes(illness),onChange:_this.handleChangeIllness(illness,false),value:illness}),label:illness});}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},personalIllnesses.map(function(illness){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(illness,\"-form\")},/*#__PURE__*/React.createElement(\"form\",{noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text1\"),label:\"When did \".concat(illness,\" occur?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,false,0),value:personalIllnessesInfo[illness][0]}),/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text2\"),label:\"How did \".concat(illness,\" happen?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,false,1),value:personalIllnessesInfo[illness][1]}),/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text3\"),label:\"When did \".concat(illness,\" resolve?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,false,2),value:personalIllnessesInfo[illness][2]})));})));case 1:return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.inputLabel},\"Age you started to speak?\"),/*#__PURE__*/React.createElement(Select,{className:classes.fullSelect,autoWidth:true,native:true,value:development,onChange:_this.handleChangeUserInfo(\"development\")},/*#__PURE__*/React.createElement(\"option\",{value:\"\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"0 - 2 years old.\"},\"0 - 2 years old.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"After 2 years old.\"},\"After 2 years old.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Unknown.\"},\"Unknown.\")))));case 2:return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.inputLabel},\"The highest education level you obtained?\"),/*#__PURE__*/React.createElement(Select,{className:classes.fullSelect,autoWidth:true,native:true,value:education,onChange:_this.handleChangeUserInfo(\"education\")},/*#__PURE__*/React.createElement(\"option\",{value:\"\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"Primary, Secondary and Higher Secondary education.\"},\"Primary, Secondary and Higher Secondary education.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Under-Graduate/Bachelor\\u2019s level education.\"},\"Under-Graduate/Bachelor\\u2019s level education.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Post-Graduate/Master\\u2019s level education.\"},\"Post-Graduate/Master\\u2019s level education.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Doctoral studies/Ph.D level education.\"},\"Doctoral studies/Ph.D level education.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Vocational Education & Training.\"},\"Vocational Education & Training.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Certificate and Diploma programs.\"},\"Certificate and Diploma programs.\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Distance Education.\"},\"Distance Education.\")))));case 3:return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},\"Have any of your family members had the following illnesses?\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormGroup,{row:true},getIllnesses().map(function(illness){return/*#__PURE__*/React.createElement(FormControlLabel,{key:\"\".concat(illness,\"-checkbox\"),control:/*#__PURE__*/React.createElement(Checkbox,{className:classes.illnessCheckBox,checked:siblingIllnesses.includes(illness),onChange:_this.handleChangeIllness(illness,true),value:illness}),label:illness});}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},siblingIllnesses.map(function(illness){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(illness,\"-form\")},\"\".concat(illness,\": Relation(s) between you and the person(s)?\"),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(FormGroup,{row:true},getRelations().map(function(relation){return/*#__PURE__*/React.createElement(FormControlLabel,{className:classes.relationCheckBox,key:\"\".concat(relation,\"-checkbox\"),control:/*#__PURE__*/React.createElement(Checkbox,{checked:siblingIllnessesInfo[illness][0].includes(relation),onChange:_this.handleChangeIllnessInfo(illness,true,0),value:relation}),label:relation});}))),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text4\"),label:\"When did \".concat(illness,\" occur?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,true,1),value:siblingIllnessesInfo[illness][1]}),/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text5\"),label:\"How did \".concat(illness,\" happen?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,true,2),value:siblingIllnessesInfo[illness][2]}),/*#__PURE__*/React.createElement(TextField,{key:\"\".concat(illness,\"-text6\"),label:\"When did \".concat(illness,\" resolve?\"),fullWidth:true,margin:\"dense\",multiline:true,onChange:_this.handleChangeIllnessInfo(illness,true,3),value:siblingIllnessesInfo[illness][3]})));})));default:return\"Unknown step\";}};return _this;}_createClass(SurveyPage,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;var _this$state6=this.state,activeStep=_this$state6.activeStep,leftEar=_this$state6.leftEar,rightEar=_this$state6.rightEar;var steps=getSteps();return/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(Stepper,{activeStep:activeStep,orientation:\"vertical\"},steps.map(function(label,index){return/*#__PURE__*/React.createElement(Step,{key:label},/*#__PURE__*/React.createElement(StepLabel,null,label),/*#__PURE__*/React.createElement(StepContent,null,/*#__PURE__*/React.createElement(Typography,{component:\"span\"},_this2.getStepContent(index)),/*#__PURE__*/React.createElement(\"div\",{className:classes.actionsContainer},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{disabled:activeStep===0,onClick:_this2.handleBack,className:classes.button},\"Back\"),activeStep===steps.length-1?/*#__PURE__*/React.createElement(Button,{disabled:leftEar===\"\"||rightEar===\"\",variant:\"contained\",color:\"primary\",onClick:_this2.handleSubmit,className:classes.button,component:Link,to:\"/researcherpage\"},\"Submit\"):/*#__PURE__*/React.createElement(Button,{disabled:leftEar===\"\"||rightEar===\"\",variant:\"contained\",color:\"primary\",onClick:_this2.handleNext,className:classes.button},\"Next\")))));})));}}]);return SurveyPage;}(Component);export default compose(withUserAuth,withRouter,withStyles(styles))(SurveyPage);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/src/pages/BST/surveyPage.jsx"],"names":["React","Component","withStyles","Stepper","Step","StepLabel","StepContent","Button","Typography","Grid","FormControl","InputLabel","FormHelperText","Select","FormGroup","FormControlLabel","Checkbox","TextField","Paper","axios","Link","withRouter","compose","withUserAuth","styles","theme","formControl","margin","spacing","minWidth","illnessCheckBox","height","relationCheckBox","inputLabel","width","fullSelect","marginBottom","getEarConditions","getSteps","getIllnesses","getRelations","SurveyPage","state","activeStep","leftEar","rightEar","development","education","personalIllnesses","siblingIllnesses","personalIllnessesInfo","siblingIllnessesInfo","handleNext","setState","handleBack","handleChangeEarInfo","name","event","target","value","parseInt","handleChangeUserInfo","handleChangeIllness","sibling","checked","push","sort","filter","illness","handleChangeIllnessInfo","index","includes","relation","parseLog","illnesses","illnessesFam","occur","happen","resolve","history","logOn","Date","toLocaleString","medicalHistory","ageSpeak","highestEdu","handleSubmit","props","context","updateUser","user","post","listenerID","newLog","flag","flagValue","alert","message","console","log","sessionStorage","setItem","getStepContent","step","classes","map","steps","label","actionsContainer","button","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Select from \"@material-ui/core/Select\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {  axios } from \"utils/utils\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport withUserAuth from \"context/withUserAuth\";\n\nconst styles = (theme) => ({\n  formControl: {\n    margin: theme.spacing(0),\n    minWidth: 120,\n  },\n  illnessCheckBox: {\n    height: 10,\n  },\n  relationCheckBox: {\n    minWidth: 150,\n  },\n  inputLabel: {\n    width: 320,\n  },\n  fullSelect: {\n    minWidth: 280,\n    marginBottom: 8,\n  },\n});\n\nconst getEarConditions = () => {\n  return [\"No Hearing\", \"Limited Hearing\", \"Normal Hearing\"];\n};\n\nconst getSteps = () => {\n  return [\n    \"Medical History\",\n    \"Devemopment History\",\n    \"Education History\",\n    \"Family History\",\n  ];\n};\n\nconst getIllnesses = () => {\n  return [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\"];\n};\n\nconst getRelations = () => {\n  return [\"Parent\", \"Child\", \"Sibling\", \"Grandparent\", \"Grandchild\", \"Other\"];\n};\n\nclass SurveyPage extends Component {\n  state = {\n    activeStep: 0,\n    leftEar: \"\",\n    rightEar: \"\",\n    development: \"\",\n    education: \"\",\n    personalIllnesses: [],\n    siblingIllnesses: [],\n    personalIllnessesInfo: {},\n    siblingIllnessesInfo: {},\n  };\n\n  handleNext = () => {\n    this.setState({ activeStep: this.state.activeStep + 1 });\n  };\n\n  handleBack = () => {\n    this.setState({ activeStep: this.state.activeStep - 1 });\n  };\n\n  handleChangeEarInfo = (name) => (event) => {\n    this.setState({\n      [name]: event.target.value ? parseInt(event.target.value) : \"\",\n    });\n  };\n\n  handleChangeUserInfo = (name) => (event) => {\n    this.setState({ [name]: event.target.value ? event.target.value : \"\" });\n  };\n\n  handleChangeIllness = (name, sibling) => (event) => {\n    if (sibling === false) {\n      const { personalIllnesses, personalIllnessesInfo } = this.state;\n      if (event.target.checked) {\n        personalIllnesses.push(name);\n        personalIllnesses.sort();\n        personalIllnessesInfo[name] = [\"\", \"\", \"\"];\n        this.setState({ personalIllnesses, personalIllnessesInfo });\n      } else {\n        delete personalIllnessesInfo[name];\n        this.setState({\n          personalIllnesses: personalIllnesses.filter(\n            (illness) => name !== illness\n          ),\n          personalIllnessesInfo,\n        });\n      }\n    } else {\n      const { siblingIllnesses, siblingIllnessesInfo } = this.state;\n      if (event.target.checked) {\n        siblingIllnesses.push(name);\n        siblingIllnesses.sort();\n        siblingIllnessesInfo[name] = [[], \"\", \"\", \"\"];\n        this.setState({ siblingIllnesses, siblingIllnessesInfo });\n      } else {\n        delete siblingIllnessesInfo[name];\n        this.setState({\n          siblingIllnesses: siblingIllnesses.filter(\n            (illness) => name !== illness\n          ),\n          siblingIllnessesInfo,\n        });\n      }\n    }\n  };\n\n  handleChangeIllnessInfo = (name, sibling, index) => (event) => {\n    if (sibling === false) {\n      const { personalIllnessesInfo } = this.state;\n      personalIllnessesInfo[name][index] = event.target.value;\n      this.setState({ personalIllnessesInfo });\n    } else {\n      const { siblingIllnessesInfo } = this.state;\n      if (index === 0) {\n        siblingIllnessesInfo[name][0].includes(event.target.value)\n          ? (siblingIllnessesInfo[name][0] = siblingIllnessesInfo[\n              name\n            ][0].filter((relation) => event.target.value !== relation))\n          : siblingIllnessesInfo[name][0].push(event.target.value);\n      } else {\n        siblingIllnessesInfo[name][index] = event.target.value;\n      }\n      this.setState({ siblingIllnessesInfo });\n    }\n  };\n\n  parseLog = () => {\n    const {\n      leftEar,\n      rightEar,\n      personalIllnesses,\n      personalIllnessesInfo,\n      development,\n      education,\n      siblingIllnesses,\n      siblingIllnessesInfo,\n    } = this.state;\n\n    let illnesses = {},\n      illnessesFam = {};\n    for (let illness of personalIllnesses) {\n      illnesses[illness] = {\n        occur: personalIllnessesInfo[illness][0],\n        happen: personalIllnessesInfo[illness][1],\n        resolve: personalIllnessesInfo[illness][2],\n      };\n    }\n\n    for (let illness of siblingIllnesses) {\n      illnessesFam[illness] = {\n        relation: siblingIllnessesInfo[illness][0],\n        occur: siblingIllnessesInfo[illness][1],\n        happen: siblingIllnessesInfo[illness][2],\n        resolve: siblingIllnessesInfo[illness][3],\n      };\n    }\n\n    return {\n      history: {\n        logOn: new Date().toLocaleString(),\n        //medical\n        medicalHistory: {\n          leftEar: getEarConditions()[leftEar - 1],\n          rightEar: getEarConditions()[rightEar - 1],\n        },\n        illnesses,\n        //development\n        ageSpeak: development,\n        //education\n        highestEdu: education,\n        //family\n        illnessesFam,\n      },\n    };\n  };\n\n  handleSubmit = async () => {\n    const { updateUser, user } = this.props.context;\n    const { leftEar, rightEar } = this.state;\n    try {\n      await axios.post(\"/api/listener/addLog\", {\n        listenerID: user,\n        newLog: this.parseLog(),\n        flag: \"leftEarIsWorse\",\n        flagValue: leftEar <= rightEar,\n      });\n      await axios.post(\"/api/listener/addLog\", {\n        listenerID: user,\n        newLog: \"\",\n        flag: \"historyDone\",\n        flagValue: true,\n      });\n    } catch (error) {\n      alert(error.message);\n      console.log(error);\n    }\n    sessionStorage.setItem(\"leftEarIsWorse\", leftEar <= rightEar);\n    sessionStorage.setItem(\"historyDone\", true);\n    updateUser();\n  };\n\n  getStepContent = (step) => {\n    const { classes } = this.props;\n    const {\n      leftEar,\n      rightEar,\n      development,\n      education,\n      personalIllnesses,\n      siblingIllnesses,\n      personalIllnessesInfo,\n      siblingIllnessesInfo,\n    } = this.state;\n\n    switch (step) {\n      case 0:\n        return (\n          <Grid container spacing={1}>\n            <Grid item xs={12}>\n              How well are you hearing?\n            </Grid>\n            <Grid item xs={6}>\n              <FormControl required className={classes.formControl}>\n                <InputLabel>Left Ear</InputLabel>\n                <Select\n                  native\n                  value={leftEar}\n                  onChange={this.handleChangeEarInfo(\"leftEar\")}\n                >\n                  <option value=\"\" />\n                  <option value={1}>No Hearing</option>\n                  <option value={2}>Limited Hearing</option>\n                  <option value={3}>Normal Hearing</option>\n                </Select>\n                <FormHelperText>Required</FormHelperText>\n              </FormControl>\n            </Grid>\n            <Grid item xs={6}>\n              <FormControl required className={classes.formControl}>\n                <InputLabel>Right Ear</InputLabel>\n                <Select\n                  native\n                  value={rightEar}\n                  onChange={this.handleChangeEarInfo(\"rightEar\")}\n                >\n                  <option value=\"\" />\n                  <option value={1}>No Hearing</option>\n                  <option value={2}>Limited Hearing</option>\n                  <option value={3}>Normal Hearing</option>\n                </Select>\n                <FormHelperText>Required</FormHelperText>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12}>\n              Check the following illnesses you have had before:\n            </Grid>\n            <Grid item xs={12}>\n              <FormGroup row>\n                {getIllnesses().map((illness) => {\n                  return (\n                    <FormControlLabel\n                      key={`${illness}-checkbox`}\n                      control={\n                        <Checkbox\n                          className={classes.illnessCheckBox}\n                          checked={personalIllnesses.includes(illness)}\n                          onChange={this.handleChangeIllness(illness, false)}\n                          value={illness}\n                        />\n                      }\n                      label={illness}\n                    />\n                  );\n                })}\n              </FormGroup>\n            </Grid>\n            <Grid item xs={12}>\n              {personalIllnesses.map((illness) => {\n                return (\n                  <div key={`${illness}-form`}>\n                    <form noValidate autoComplete=\"off\">\n                      <TextField\n                        key={`${illness}-text1`}\n                        label={`When did ${illness} occur?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          false,\n                          0\n                        )}\n                        value={personalIllnessesInfo[illness][0]}\n                      />\n                      <TextField\n                        key={`${illness}-text2`}\n                        label={`How did ${illness} happen?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          false,\n                          1\n                        )}\n                        value={personalIllnessesInfo[illness][1]}\n                      />\n                      <TextField\n                        key={`${illness}-text3`}\n                        label={`When did ${illness} resolve?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          false,\n                          2\n                        )}\n                        value={personalIllnessesInfo[illness][2]}\n                      />\n                    </form>\n                  </div>\n                );\n              })}\n            </Grid>\n          </Grid>\n        );\n      case 1:\n        return (\n          <Grid container spacing={0}>\n            <Grid item xs={12}>\n              <FormControl>\n                <InputLabel className={classes.inputLabel}>\n                  Age you started to speak?\n                </InputLabel>\n                <Select\n                  className={classes.fullSelect}\n                  autoWidth={true}\n                  native\n                  value={development}\n                  onChange={this.handleChangeUserInfo(\"development\")}\n                >\n                  <option value=\"\" />\n                  <option value=\"0 - 2 years old.\">0 - 2 years old.</option>\n                  <option value=\"After 2 years old.\">After 2 years old.</option>\n                  <option value=\"Unknown.\">Unknown.</option>\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        );\n      case 2:\n        return (\n          <Grid container spacing={0}>\n            <Grid item xs={12}>\n              <FormControl>\n                <InputLabel className={classes.inputLabel}>\n                  The highest education level you obtained?\n                </InputLabel>\n                <Select\n                  className={classes.fullSelect}\n                  autoWidth={true}\n                  native\n                  value={education}\n                  onChange={this.handleChangeUserInfo(\"education\")}\n                >\n                  <option value=\"\" />\n                  <option value=\"Primary, Secondary and Higher Secondary education.\">\n                    Primary, Secondary and Higher Secondary education.\n                  </option>\n                  <option value=\"Under-Graduate/Bachelor’s level education.\">\n                    Under-Graduate/Bachelor’s level education.\n                  </option>\n                  <option value=\"Post-Graduate/Master’s level education.\">\n                    Post-Graduate/Master’s level education.\n                  </option>\n                  <option value=\"Doctoral studies/Ph.D level education.\">\n                    Doctoral studies/Ph.D level education.\n                  </option>\n                  <option value=\"Vocational Education & Training.\">\n                    Vocational Education & Training.\n                  </option>\n                  <option value=\"Certificate and Diploma programs.\">\n                    Certificate and Diploma programs.\n                  </option>\n                  <option value=\"Distance Education.\">\n                    Distance Education.\n                  </option>\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        );\n      case 3:\n        return (\n          <Grid container spacing={1}>\n            <Grid item xs={12}>\n              Have any of your family members had the following illnesses?\n            </Grid>\n            <Grid item xs={12}>\n              <FormGroup row>\n                {getIllnesses().map((illness) => {\n                  return (\n                    <FormControlLabel\n                      key={`${illness}-checkbox`}\n                      control={\n                        <Checkbox\n                          className={classes.illnessCheckBox}\n                          checked={siblingIllnesses.includes(illness)}\n                          onChange={this.handleChangeIllness(illness, true)}\n                          value={illness}\n                        />\n                      }\n                      label={illness}\n                    />\n                  );\n                })}\n              </FormGroup>\n            </Grid>\n            <Grid item xs={12}>\n              {siblingIllnesses.map((illness) => {\n                return (\n                  <div key={`${illness}-form`}>\n                    {`${illness}: Relation(s) between you and the person(s)?`}\n                    <FormControl>\n                      <FormGroup row>\n                        {getRelations().map((relation) => {\n                          return (\n                            <FormControlLabel\n                              className={classes.relationCheckBox}\n                              key={`${relation}-checkbox`}\n                              control={\n                                <Checkbox\n                                  checked={siblingIllnessesInfo[\n                                    illness\n                                  ][0].includes(relation)}\n                                  onChange={this.handleChangeIllnessInfo(\n                                    illness,\n                                    true,\n                                    0\n                                  )}\n                                  value={relation}\n                                />\n                              }\n                              label={relation}\n                            />\n                          );\n                        })}\n                      </FormGroup>\n                    </FormControl>\n                    <form noValidate autoComplete=\"off\">\n                      <TextField\n                        key={`${illness}-text4`}\n                        label={`When did ${illness} occur?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          true,\n                          1\n                        )}\n                        value={siblingIllnessesInfo[illness][1]}\n                      />\n                      <TextField\n                        key={`${illness}-text5`}\n                        label={`How did ${illness} happen?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          true,\n                          2\n                        )}\n                        value={siblingIllnessesInfo[illness][2]}\n                      />\n                      <TextField\n                        key={`${illness}-text6`}\n                        label={`When did ${illness} resolve?`}\n                        fullWidth\n                        margin=\"dense\"\n                        multiline\n                        onChange={this.handleChangeIllnessInfo(\n                          illness,\n                          true,\n                          3\n                        )}\n                        value={siblingIllnessesInfo[illness][3]}\n                      />\n                    </form>\n                  </div>\n                );\n              })}\n            </Grid>\n          </Grid>\n        );\n      default:\n        return \"Unknown step\";\n    }\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { activeStep, leftEar, rightEar } = this.state;\n\n    const steps = getSteps();\n\n    return (\n      <Paper>\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\n          {steps.map((label, index) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n              <StepContent>\n                <Typography component={\"span\"}>\n                  {this.getStepContent(index)}\n                </Typography>\n                <div className={classes.actionsContainer}>\n                  <div>\n                    <Button\n                      disabled={activeStep === 0}\n                      onClick={this.handleBack}\n                      className={classes.button}\n                    >\n                      Back\n                    </Button>\n                    {activeStep === steps.length - 1 ? (\n                      <Button\n                        disabled={leftEar === \"\" || rightEar === \"\"}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.handleSubmit}\n                        className={classes.button}\n                        component={Link}\n                        to=\"/researcherpage\"\n                      >\n                        Submit\n                      </Button>\n                    ) : (\n                      <Button\n                        disabled={leftEar === \"\" || rightEar === \"\"}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.handleNext}\n                        className={classes.button}\n                      >\n                        Next\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </StepContent>\n            </Step>\n          ))}\n        </Stepper>\n      </Paper>\n    );\n  }\n}\n\nexport default compose(\n  withUserAuth,\n  withRouter,\n  withStyles(styles)\n)(SurveyPage);\n"]},"metadata":{},"sourceType":"module"}