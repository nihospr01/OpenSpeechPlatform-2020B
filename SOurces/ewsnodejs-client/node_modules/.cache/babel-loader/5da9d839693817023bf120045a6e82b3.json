{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { EditorCore } from 'rc-editor-core';\nimport { EditorState, SelectionState, ContentState, CompositeDecorator } from 'draft-js';\nimport createMention from '../utils/createMention';\nimport exportContent from '../utils/exportContent';\n\nvar Mention = function (_React$Component) {\n  _inherits(Mention, _React$Component);\n\n  function Mention(props) {\n    _classCallCheck(this, Mention);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onEditorChange = function (editorState) {\n      var selection = editorState.getSelection();\n      _this._decorator = editorState.getDecorator();\n      var content = editorState.getCurrentContent();\n\n      if (_this.props.onChange) {\n        _this.setState({\n          selection: selection\n        }, function () {\n          _this.props.onChange(content, exportContent(content));\n        });\n      } else {\n        _this.setState({\n          editorState: editorState,\n          selection: selection\n        });\n      }\n    };\n\n    _this.onFocus = function (e) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus(e);\n      }\n    };\n\n    _this.onBlur = function (e) {\n      if (_this.props.onBlur) {\n        _this.props.onBlur(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n    };\n\n    _this.reset = function () {\n      /*eslint-disable*/\n      _this._editor.Reset();\n      /*eslint-enable*/\n\n    };\n\n    _this.mention = createMention({\n      prefix: _this.getPrefix(props),\n      tag: props.tag,\n      mode: props.mode,\n      mentionStyle: props.mentionStyle\n    });\n    _this.Suggestions = _this.mention.Suggestions;\n    _this.plugins = [_this.mention];\n    _this.state = {\n      suggestions: props.suggestions,\n      value: props.value && EditorState.createWithContent(props.value, new CompositeDecorator(_this.mention.decorators)),\n      selection: SelectionState.createEmpty()\n    };\n\n    if (typeof props.defaultValue === 'string') {\n      // eslint-disable-next-line\n      console.warn('The property `defaultValue` now allow `EditorState` only, see http://react-component.github.io/editor-mention/examples/defaultValue.html ');\n    }\n\n    if (props.value !== undefined) {\n      _this.controlledMode = true;\n    }\n\n    return _this;\n  }\n\n  Mention.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var suggestions = nextProps.suggestions;\n    var selection = this.state.selection;\n    var value = nextProps.value;\n\n    if (value && selection) {\n      value = EditorState.acceptSelection(EditorState.createWithContent(value, this._decorator), selection);\n    }\n\n    this.setState({\n      suggestions: suggestions,\n      value: value\n    });\n  };\n\n  Mention.prototype.getPrefix = function getPrefix() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n    return Array.isArray(props.prefix) ? props.prefix : [props.prefix];\n  };\n\n  Mention.prototype.render = function render() {\n    var _classnames,\n        _this2 = this;\n\n    var _props = this.props,\n        prefixCls = _props.prefixCls,\n        style = _props.style,\n        tag = _props.tag,\n        multiLines = _props.multiLines,\n        editorKey = _props.editorKey,\n        suggestionStyle = _props.suggestionStyle,\n        placeholder = _props.placeholder,\n        defaultValue = _props.defaultValue,\n        className = _props.className,\n        notFoundContent = _props.notFoundContent,\n        getSuggestionContainer = _props.getSuggestionContainer,\n        readOnly = _props.readOnly,\n        disabled = _props.disabled,\n        placement = _props.placement,\n        mode = _props.mode;\n    var suggestions = this.state.suggestions;\n    var Suggestions = this.Suggestions;\n    var editorClass = classnames(className, (_classnames = {}, _classnames[prefixCls + '-wrapper'] = true, _classnames.readonly = readOnly, _classnames.disabled = disabled, _classnames.multilines = multiLines, _classnames));\n    var editorProps = this.controlledMode ? {\n      value: this.state.value\n    } : {};\n    var defaultValueState = defaultValue && EditorState.createWithContent(typeof defaultValue === 'string' ? ContentState.createFromText(defaultValue) : defaultValue, this._decorator);\n    return React.createElement('div', {\n      className: editorClass,\n      style: style,\n      ref: function ref(wrapper) {\n        return _this2._wrapper = wrapper;\n      }\n    }, React.createElement(EditorCore, _extends({\n      ref: function ref(editor) {\n        return _this2._editor = editor;\n      },\n      prefixCls: prefixCls,\n      style: style,\n      multiLines: multiLines,\n      editorKey: editorKey,\n      plugins: this.plugins,\n      defaultValue: defaultValueState,\n      placeholder: placeholder,\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      onKeyDown: this.onKeyDown,\n      onChange: this.onEditorChange\n    }, editorProps, {\n      readOnly: readOnly || disabled\n    }), React.createElement(Suggestions, {\n      mode: tag ? 'immutable' : mode,\n      prefix: this.getPrefix(),\n      prefixCls: prefixCls,\n      style: suggestionStyle,\n      placement: placement,\n      notFoundContent: notFoundContent,\n      suggestions: suggestions,\n      getSuggestionContainer: getSuggestionContainer ? function () {\n        return getSuggestionContainer(_this2._wrapper);\n      } : null,\n      onSearchChange: this.props.onSearchChange,\n      onSelect: this.props.onSelect,\n      noRedup: this.props.noRedup\n    })));\n  };\n\n  return Mention;\n}(React.Component);\n\nMention.propTypes = {\n  value: PropTypes.object,\n  suggestions: PropTypes.array,\n  prefix: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  prefixCls: PropTypes.string,\n  tag: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n  style: PropTypes.object,\n  className: PropTypes.string,\n  onSearchChange: PropTypes.func,\n  onChange: PropTypes.func,\n  mode: PropTypes.string,\n  multiLines: PropTypes.bool,\n  suggestionStyle: PropTypes.object,\n  placeholder: PropTypes.string,\n  defaultValue: PropTypes.object,\n  notFoundContent: PropTypes.any,\n  position: PropTypes.string,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onSelect: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  getSuggestionContainer: PropTypes.func,\n  noRedup: PropTypes.bool,\n  mentionStyle: PropTypes.object,\n  placement: PropTypes.string,\n  editorKey: PropTypes.string\n};\nMention.controlledMode = false;\nMention.defaultProps = {\n  prefixCls: 'rc-editor-mention',\n  prefix: '@',\n  mode: 'mutable',\n  suggestions: [],\n  multiLines: false,\n  className: '',\n  suggestionStyle: {},\n  notFoundContent: '无法找到',\n  position: 'absolute',\n  placement: 'bottom',\n  // top, bottom\n  mentionStyle: {}\n};\nexport default Mention;","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/rc-editor-mention/es/component/Mention.react.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","classnames","EditorCore","EditorState","SelectionState","ContentState","CompositeDecorator","createMention","exportContent","Mention","_React$Component","props","_this","call","onEditorChange","editorState","selection","getSelection","_decorator","getDecorator","content","getCurrentContent","onChange","setState","onFocus","e","onBlur","onKeyDown","reset","_editor","Reset","mention","prefix","getPrefix","tag","mode","mentionStyle","Suggestions","plugins","state","suggestions","value","createWithContent","decorators","createEmpty","defaultValue","console","warn","undefined","controlledMode","prototype","componentWillReceiveProps","nextProps","acceptSelection","arguments","length","Array","isArray","render","_classnames","_this2","_props","prefixCls","style","multiLines","editorKey","suggestionStyle","placeholder","className","notFoundContent","getSuggestionContainer","readOnly","disabled","placement","editorClass","readonly","multilines","editorProps","defaultValueState","createFromText","createElement","ref","wrapper","_wrapper","editor","onSearchChange","onSelect","noRedup","Component","propTypes","object","array","oneOfType","string","arrayOf","element","func","bool","any","position","defaultProps"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,+BAArB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,0BAAP,MAAuC,iDAAvC;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,WAAT,EAAsBC,cAAtB,EAAsCC,YAAtC,EAAoDC,kBAApD,QAA8E,UAA9E;AAEA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAEA,IAAIC,OAAO,GAAG,UAAUC,gBAAV,EAA4B;AACxCZ,EAAAA,SAAS,CAACW,OAAD,EAAUC,gBAAV,CAAT;;AAEA,WAASD,OAAT,CAAiBE,KAAjB,EAAwB;AACtBf,IAAAA,eAAe,CAAC,IAAD,EAAOa,OAAP,CAAf;;AAEA,QAAIG,KAAK,GAAGf,0BAA0B,CAAC,IAAD,EAAOa,gBAAgB,CAACG,IAAjB,CAAsB,IAAtB,EAA4BF,KAA5B,CAAP,CAAtC;;AAEAC,IAAAA,KAAK,CAACE,cAAN,GAAuB,UAAUC,WAAV,EAAuB;AAC5C,UAAIC,SAAS,GAAGD,WAAW,CAACE,YAAZ,EAAhB;AACAL,MAAAA,KAAK,CAACM,UAAN,GAAmBH,WAAW,CAACI,YAAZ,EAAnB;AACA,UAAIC,OAAO,GAAGL,WAAW,CAACM,iBAAZ,EAAd;;AAEA,UAAIT,KAAK,CAACD,KAAN,CAAYW,QAAhB,EAA0B;AACxBV,QAAAA,KAAK,CAACW,QAAN,CAAe;AACbP,UAAAA,SAAS,EAAEA;AADE,SAAf,EAEG,YAAY;AACbJ,UAAAA,KAAK,CAACD,KAAN,CAAYW,QAAZ,CAAqBF,OAArB,EAA8BZ,aAAa,CAACY,OAAD,CAA3C;AACD,SAJD;AAKD,OAND,MAMO;AACLR,QAAAA,KAAK,CAACW,QAAN,CAAe;AACbR,UAAAA,WAAW,EAAEA,WADA;AAEbC,UAAAA,SAAS,EAAEA;AAFE,SAAf;AAID;AACF,KAjBD;;AAmBAJ,IAAAA,KAAK,CAACY,OAAN,GAAgB,UAAUC,CAAV,EAAa;AAC3B,UAAIb,KAAK,CAACD,KAAN,CAAYa,OAAhB,EAAyB;AACvBZ,QAAAA,KAAK,CAACD,KAAN,CAAYa,OAAZ,CAAoBC,CAApB;AACD;AACF,KAJD;;AAMAb,IAAAA,KAAK,CAACc,MAAN,GAAe,UAAUD,CAAV,EAAa;AAC1B,UAAIb,KAAK,CAACD,KAAN,CAAYe,MAAhB,EAAwB;AACtBd,QAAAA,KAAK,CAACD,KAAN,CAAYe,MAAZ,CAAmBD,CAAnB;AACD;AACF,KAJD;;AAMAb,IAAAA,KAAK,CAACe,SAAN,GAAkB,UAAUF,CAAV,EAAa;AAC7B,UAAIb,KAAK,CAACD,KAAN,CAAYgB,SAAhB,EAA2B;AACzBf,QAAAA,KAAK,CAACD,KAAN,CAAYgB,SAAZ,CAAsBF,CAAtB;AACD;AACF,KAJD;;AAMAb,IAAAA,KAAK,CAACgB,KAAN,GAAc,YAAY;AACxB;AACAhB,MAAAA,KAAK,CAACiB,OAAN,CAAcC,KAAd;AACA;;AACD,KAJD;;AAMAlB,IAAAA,KAAK,CAACmB,OAAN,GAAgBxB,aAAa,CAAC;AAC5ByB,MAAAA,MAAM,EAAEpB,KAAK,CAACqB,SAAN,CAAgBtB,KAAhB,CADoB;AAE5BuB,MAAAA,GAAG,EAAEvB,KAAK,CAACuB,GAFiB;AAG5BC,MAAAA,IAAI,EAAExB,KAAK,CAACwB,IAHgB;AAI5BC,MAAAA,YAAY,EAAEzB,KAAK,CAACyB;AAJQ,KAAD,CAA7B;AAOAxB,IAAAA,KAAK,CAACyB,WAAN,GAAoBzB,KAAK,CAACmB,OAAN,CAAcM,WAAlC;AACAzB,IAAAA,KAAK,CAAC0B,OAAN,GAAgB,CAAC1B,KAAK,CAACmB,OAAP,CAAhB;AAEAnB,IAAAA,KAAK,CAAC2B,KAAN,GAAc;AACZC,MAAAA,WAAW,EAAE7B,KAAK,CAAC6B,WADP;AAEZC,MAAAA,KAAK,EAAE9B,KAAK,CAAC8B,KAAN,IAAetC,WAAW,CAACuC,iBAAZ,CAA8B/B,KAAK,CAAC8B,KAApC,EAA2C,IAAInC,kBAAJ,CAAuBM,KAAK,CAACmB,OAAN,CAAcY,UAArC,CAA3C,CAFV;AAGZ3B,MAAAA,SAAS,EAAEZ,cAAc,CAACwC,WAAf;AAHC,KAAd;;AAMA,QAAI,OAAOjC,KAAK,CAACkC,YAAb,KAA8B,QAAlC,EAA4C;AAC1C;AACAC,MAAAA,OAAO,CAACC,IAAR,CAAa,2IAAb;AACD;;AACD,QAAIpC,KAAK,CAAC8B,KAAN,KAAgBO,SAApB,EAA+B;AAC7BpC,MAAAA,KAAK,CAACqC,cAAN,GAAuB,IAAvB;AACD;;AACD,WAAOrC,KAAP;AACD;;AAEDH,EAAAA,OAAO,CAACyC,SAAR,CAAkBC,yBAAlB,GAA8C,SAASA,yBAAT,CAAmCC,SAAnC,EAA8C;AAC1F,QAAIZ,WAAW,GAAGY,SAAS,CAACZ,WAA5B;AACA,QAAIxB,SAAS,GAAG,KAAKuB,KAAL,CAAWvB,SAA3B;AAEA,QAAIyB,KAAK,GAAGW,SAAS,CAACX,KAAtB;;AACA,QAAIA,KAAK,IAAIzB,SAAb,EAAwB;AACtByB,MAAAA,KAAK,GAAGtC,WAAW,CAACkD,eAAZ,CAA4BlD,WAAW,CAACuC,iBAAZ,CAA8BD,KAA9B,EAAqC,KAAKvB,UAA1C,CAA5B,EAAmFF,SAAnF,CAAR;AACD;;AACD,SAAKO,QAAL,CAAc;AACZiB,MAAAA,WAAW,EAAEA,WADD;AAEZC,MAAAA,KAAK,EAAEA;AAFK,KAAd;AAID,GAZD;;AAcAhC,EAAAA,OAAO,CAACyC,SAAR,CAAkBjB,SAAlB,GAA8B,SAASA,SAAT,GAAqB;AACjD,QAAItB,KAAK,GAAG2C,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBN,SAAzC,GAAqDM,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAK3C,KAArF;AAEA,WAAO6C,KAAK,CAACC,OAAN,CAAc9C,KAAK,CAACqB,MAApB,IAA8BrB,KAAK,CAACqB,MAApC,GAA6C,CAACrB,KAAK,CAACqB,MAAP,CAApD;AACD,GAJD;;AAMAvB,EAAAA,OAAO,CAACyC,SAAR,CAAkBQ,MAAlB,GAA2B,SAASA,MAAT,GAAkB;AAC3C,QAAIC,WAAJ;AAAA,QACIC,MAAM,GAAG,IADb;;AAGA,QAAIC,MAAM,GAAG,KAAKlD,KAAlB;AAAA,QACImD,SAAS,GAAGD,MAAM,CAACC,SADvB;AAAA,QAEIC,KAAK,GAAGF,MAAM,CAACE,KAFnB;AAAA,QAGI7B,GAAG,GAAG2B,MAAM,CAAC3B,GAHjB;AAAA,QAII8B,UAAU,GAAGH,MAAM,CAACG,UAJxB;AAAA,QAKIC,SAAS,GAAGJ,MAAM,CAACI,SALvB;AAAA,QAMIC,eAAe,GAAGL,MAAM,CAACK,eAN7B;AAAA,QAOIC,WAAW,GAAGN,MAAM,CAACM,WAPzB;AAAA,QAQItB,YAAY,GAAGgB,MAAM,CAAChB,YAR1B;AAAA,QASIuB,SAAS,GAAGP,MAAM,CAACO,SATvB;AAAA,QAUIC,eAAe,GAAGR,MAAM,CAACQ,eAV7B;AAAA,QAWIC,sBAAsB,GAAGT,MAAM,CAACS,sBAXpC;AAAA,QAYIC,QAAQ,GAAGV,MAAM,CAACU,QAZtB;AAAA,QAaIC,QAAQ,GAAGX,MAAM,CAACW,QAbtB;AAAA,QAcIC,SAAS,GAAGZ,MAAM,CAACY,SAdvB;AAAA,QAeItC,IAAI,GAAG0B,MAAM,CAAC1B,IAflB;AAgBA,QAAIK,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B;AACA,QAAIH,WAAW,GAAG,KAAKA,WAAvB;AAEA,QAAIqC,WAAW,GAAGzE,UAAU,CAACmE,SAAD,GAAaT,WAAW,GAAG,EAAd,EAAkBA,WAAW,CAACG,SAAS,GAAG,UAAb,CAAX,GAAsC,IAAxD,EAA8DH,WAAW,CAACgB,QAAZ,GAAuBJ,QAArF,EAA+FZ,WAAW,CAACa,QAAZ,GAAuBA,QAAtH,EAAgIb,WAAW,CAACiB,UAAZ,GAAyBZ,UAAzJ,EAAqKL,WAAlL,EAA5B;AACA,QAAIkB,WAAW,GAAG,KAAK5B,cAAL,GAAsB;AAAER,MAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE;AAApB,KAAtB,GAAoD,EAAtE;AACA,QAAIqC,iBAAiB,GAAGjC,YAAY,IAAI1C,WAAW,CAACuC,iBAAZ,CAA8B,OAAOG,YAAP,KAAwB,QAAxB,GAAmCxC,YAAY,CAAC0E,cAAb,CAA4BlC,YAA5B,CAAnC,GAA+EA,YAA7G,EAA2H,KAAK3B,UAAhI,CAAxC;AACA,WAAOnB,KAAK,CAACiF,aAAN,CACL,KADK,EAEL;AAAEZ,MAAAA,SAAS,EAAEM,WAAb;AAA0BX,MAAAA,KAAK,EAAEA,KAAjC;AAAwCkB,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,OAAb,EAAsB;AAC/D,eAAOtB,MAAM,CAACuB,QAAP,GAAkBD,OAAzB;AACD;AAFH,KAFK,EAKLnF,KAAK,CAACiF,aAAN,CACE9E,UADF,EAEEP,QAAQ,CAAC;AACPsF,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAaG,MAAb,EAAqB;AACxB,eAAOxB,MAAM,CAAC/B,OAAP,GAAiBuD,MAAxB;AACD,OAHM;AAIPtB,MAAAA,SAAS,EAAEA,SAJJ;AAKPC,MAAAA,KAAK,EAAEA,KALA;AAMPC,MAAAA,UAAU,EAAEA,UANL;AAOPC,MAAAA,SAAS,EAAEA,SAPJ;AAQP3B,MAAAA,OAAO,EAAE,KAAKA,OARP;AASPO,MAAAA,YAAY,EAAEiC,iBATP;AAUPX,MAAAA,WAAW,EAAEA,WAVN;AAWP3C,MAAAA,OAAO,EAAE,KAAKA,OAXP;AAYPE,MAAAA,MAAM,EAAE,KAAKA,MAZN;AAaPC,MAAAA,SAAS,EAAE,KAAKA,SAbT;AAcPL,MAAAA,QAAQ,EAAE,KAAKR;AAdR,KAAD,EAeL+D,WAfK,EAeQ;AACdN,MAAAA,QAAQ,EAAEA,QAAQ,IAAIC;AADR,KAfR,CAFV,EAoBEzE,KAAK,CAACiF,aAAN,CAAoB3C,WAApB,EAAiC;AAC/BF,MAAAA,IAAI,EAAED,GAAG,GAAG,WAAH,GAAiBC,IADK;AAE/BH,MAAAA,MAAM,EAAE,KAAKC,SAAL,EAFuB;AAG/B6B,MAAAA,SAAS,EAAEA,SAHoB;AAI/BC,MAAAA,KAAK,EAAEG,eAJwB;AAK/BO,MAAAA,SAAS,EAAEA,SALoB;AAM/BJ,MAAAA,eAAe,EAAEA,eANc;AAO/B7B,MAAAA,WAAW,EAAEA,WAPkB;AAQ/B8B,MAAAA,sBAAsB,EAAEA,sBAAsB,GAAG,YAAY;AAC3D,eAAOA,sBAAsB,CAACV,MAAM,CAACuB,QAAR,CAA7B;AACD,OAF6C,GAE1C,IAV2B;AAW/BE,MAAAA,cAAc,EAAE,KAAK1E,KAAL,CAAW0E,cAXI;AAY/BC,MAAAA,QAAQ,EAAE,KAAK3E,KAAL,CAAW2E,QAZU;AAa/BC,MAAAA,OAAO,EAAE,KAAK5E,KAAL,CAAW4E;AAbW,KAAjC,CApBF,CALK,CAAP;AA0CD,GApED;;AAsEA,SAAO9E,OAAP;AACD,CAxKa,CAwKZV,KAAK,CAACyF,SAxKM,CAAd;;AA0KA/E,OAAO,CAACgF,SAAR,GAAoB;AAClBhD,EAAAA,KAAK,EAAEzC,SAAS,CAAC0F,MADC;AAElBlD,EAAAA,WAAW,EAAExC,SAAS,CAAC2F,KAFL;AAGlB3D,EAAAA,MAAM,EAAEhC,SAAS,CAAC4F,SAAV,CAAoB,CAAC5F,SAAS,CAAC6F,MAAX,EAAmB7F,SAAS,CAAC8F,OAAV,CAAkB9F,SAAS,CAAC6F,MAA5B,CAAnB,CAApB,CAHU;AAIlB/B,EAAAA,SAAS,EAAE9D,SAAS,CAAC6F,MAJH;AAKlB3D,EAAAA,GAAG,EAAElC,SAAS,CAAC4F,SAAV,CAAoB,CAAC5F,SAAS,CAAC+F,OAAX,EAAoB/F,SAAS,CAACgG,IAA9B,CAApB,CALa;AAMlBjC,EAAAA,KAAK,EAAE/D,SAAS,CAAC0F,MANC;AAOlBtB,EAAAA,SAAS,EAAEpE,SAAS,CAAC6F,MAPH;AAQlBR,EAAAA,cAAc,EAAErF,SAAS,CAACgG,IARR;AASlB1E,EAAAA,QAAQ,EAAEtB,SAAS,CAACgG,IATF;AAUlB7D,EAAAA,IAAI,EAAEnC,SAAS,CAAC6F,MAVE;AAWlB7B,EAAAA,UAAU,EAAEhE,SAAS,CAACiG,IAXJ;AAYlB/B,EAAAA,eAAe,EAAElE,SAAS,CAAC0F,MAZT;AAalBvB,EAAAA,WAAW,EAAEnE,SAAS,CAAC6F,MAbL;AAclBhD,EAAAA,YAAY,EAAE7C,SAAS,CAAC0F,MAdN;AAelBrB,EAAAA,eAAe,EAAErE,SAAS,CAACkG,GAfT;AAgBlBC,EAAAA,QAAQ,EAAEnG,SAAS,CAAC6F,MAhBF;AAiBlBrE,EAAAA,OAAO,EAAExB,SAAS,CAACgG,IAjBD;AAkBlBtE,EAAAA,MAAM,EAAE1B,SAAS,CAACgG,IAlBA;AAmBlBV,EAAAA,QAAQ,EAAEtF,SAAS,CAACgG,IAnBF;AAoBlBrE,EAAAA,SAAS,EAAE3B,SAAS,CAACgG,IApBH;AAqBlB1B,EAAAA,sBAAsB,EAAEtE,SAAS,CAACgG,IArBhB;AAsBlBT,EAAAA,OAAO,EAAEvF,SAAS,CAACiG,IAtBD;AAuBlB7D,EAAAA,YAAY,EAAEpC,SAAS,CAAC0F,MAvBN;AAwBlBjB,EAAAA,SAAS,EAAEzE,SAAS,CAAC6F,MAxBH;AAyBlB5B,EAAAA,SAAS,EAAEjE,SAAS,CAAC6F;AAzBH,CAApB;AA2BApF,OAAO,CAACwC,cAAR,GAAyB,KAAzB;AAGAxC,OAAO,CAAC2F,YAAR,GAAuB;AACrBtC,EAAAA,SAAS,EAAE,mBADU;AAErB9B,EAAAA,MAAM,EAAE,GAFa;AAGrBG,EAAAA,IAAI,EAAE,SAHe;AAIrBK,EAAAA,WAAW,EAAE,EAJQ;AAKrBwB,EAAAA,UAAU,EAAE,KALS;AAMrBI,EAAAA,SAAS,EAAE,EANU;AAOrBF,EAAAA,eAAe,EAAE,EAPI;AAQrBG,EAAAA,eAAe,EAAE,MARI;AASrB8B,EAAAA,QAAQ,EAAE,UATW;AAUrB1B,EAAAA,SAAS,EAAE,QAVU;AAUA;AACrBrC,EAAAA,YAAY,EAAE;AAXO,CAAvB;AAcA,eAAe3B,OAAf","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { EditorCore } from 'rc-editor-core';\nimport { EditorState, SelectionState, ContentState, CompositeDecorator } from 'draft-js';\n\nimport createMention from '../utils/createMention';\nimport exportContent from '../utils/exportContent';\n\nvar Mention = function (_React$Component) {\n  _inherits(Mention, _React$Component);\n\n  function Mention(props) {\n    _classCallCheck(this, Mention);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onEditorChange = function (editorState) {\n      var selection = editorState.getSelection();\n      _this._decorator = editorState.getDecorator();\n      var content = editorState.getCurrentContent();\n\n      if (_this.props.onChange) {\n        _this.setState({\n          selection: selection\n        }, function () {\n          _this.props.onChange(content, exportContent(content));\n        });\n      } else {\n        _this.setState({\n          editorState: editorState,\n          selection: selection\n        });\n      }\n    };\n\n    _this.onFocus = function (e) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus(e);\n      }\n    };\n\n    _this.onBlur = function (e) {\n      if (_this.props.onBlur) {\n        _this.props.onBlur(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n    };\n\n    _this.reset = function () {\n      /*eslint-disable*/\n      _this._editor.Reset();\n      /*eslint-enable*/\n    };\n\n    _this.mention = createMention({\n      prefix: _this.getPrefix(props),\n      tag: props.tag,\n      mode: props.mode,\n      mentionStyle: props.mentionStyle\n    });\n\n    _this.Suggestions = _this.mention.Suggestions;\n    _this.plugins = [_this.mention];\n\n    _this.state = {\n      suggestions: props.suggestions,\n      value: props.value && EditorState.createWithContent(props.value, new CompositeDecorator(_this.mention.decorators)),\n      selection: SelectionState.createEmpty()\n    };\n\n    if (typeof props.defaultValue === 'string') {\n      // eslint-disable-next-line\n      console.warn('The property `defaultValue` now allow `EditorState` only, see http://react-component.github.io/editor-mention/examples/defaultValue.html ');\n    }\n    if (props.value !== undefined) {\n      _this.controlledMode = true;\n    }\n    return _this;\n  }\n\n  Mention.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var suggestions = nextProps.suggestions;\n    var selection = this.state.selection;\n\n    var value = nextProps.value;\n    if (value && selection) {\n      value = EditorState.acceptSelection(EditorState.createWithContent(value, this._decorator), selection);\n    }\n    this.setState({\n      suggestions: suggestions,\n      value: value\n    });\n  };\n\n  Mention.prototype.getPrefix = function getPrefix() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n    return Array.isArray(props.prefix) ? props.prefix : [props.prefix];\n  };\n\n  Mention.prototype.render = function render() {\n    var _classnames,\n        _this2 = this;\n\n    var _props = this.props,\n        prefixCls = _props.prefixCls,\n        style = _props.style,\n        tag = _props.tag,\n        multiLines = _props.multiLines,\n        editorKey = _props.editorKey,\n        suggestionStyle = _props.suggestionStyle,\n        placeholder = _props.placeholder,\n        defaultValue = _props.defaultValue,\n        className = _props.className,\n        notFoundContent = _props.notFoundContent,\n        getSuggestionContainer = _props.getSuggestionContainer,\n        readOnly = _props.readOnly,\n        disabled = _props.disabled,\n        placement = _props.placement,\n        mode = _props.mode;\n    var suggestions = this.state.suggestions;\n    var Suggestions = this.Suggestions;\n\n    var editorClass = classnames(className, (_classnames = {}, _classnames[prefixCls + '-wrapper'] = true, _classnames.readonly = readOnly, _classnames.disabled = disabled, _classnames.multilines = multiLines, _classnames));\n    var editorProps = this.controlledMode ? { value: this.state.value } : {};\n    var defaultValueState = defaultValue && EditorState.createWithContent(typeof defaultValue === 'string' ? ContentState.createFromText(defaultValue) : defaultValue, this._decorator);\n    return React.createElement(\n      'div',\n      { className: editorClass, style: style, ref: function ref(wrapper) {\n          return _this2._wrapper = wrapper;\n        } },\n      React.createElement(\n        EditorCore,\n        _extends({\n          ref: function ref(editor) {\n            return _this2._editor = editor;\n          },\n          prefixCls: prefixCls,\n          style: style,\n          multiLines: multiLines,\n          editorKey: editorKey,\n          plugins: this.plugins,\n          defaultValue: defaultValueState,\n          placeholder: placeholder,\n          onFocus: this.onFocus,\n          onBlur: this.onBlur,\n          onKeyDown: this.onKeyDown,\n          onChange: this.onEditorChange\n        }, editorProps, {\n          readOnly: readOnly || disabled\n        }),\n        React.createElement(Suggestions, {\n          mode: tag ? 'immutable' : mode,\n          prefix: this.getPrefix(),\n          prefixCls: prefixCls,\n          style: suggestionStyle,\n          placement: placement,\n          notFoundContent: notFoundContent,\n          suggestions: suggestions,\n          getSuggestionContainer: getSuggestionContainer ? function () {\n            return getSuggestionContainer(_this2._wrapper);\n          } : null,\n          onSearchChange: this.props.onSearchChange,\n          onSelect: this.props.onSelect,\n          noRedup: this.props.noRedup\n        })\n      )\n    );\n  };\n\n  return Mention;\n}(React.Component);\n\nMention.propTypes = {\n  value: PropTypes.object,\n  suggestions: PropTypes.array,\n  prefix: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  prefixCls: PropTypes.string,\n  tag: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n  style: PropTypes.object,\n  className: PropTypes.string,\n  onSearchChange: PropTypes.func,\n  onChange: PropTypes.func,\n  mode: PropTypes.string,\n  multiLines: PropTypes.bool,\n  suggestionStyle: PropTypes.object,\n  placeholder: PropTypes.string,\n  defaultValue: PropTypes.object,\n  notFoundContent: PropTypes.any,\n  position: PropTypes.string,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onSelect: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  getSuggestionContainer: PropTypes.func,\n  noRedup: PropTypes.bool,\n  mentionStyle: PropTypes.object,\n  placement: PropTypes.string,\n  editorKey: PropTypes.string\n};\nMention.controlledMode = false;\n\n\nMention.defaultProps = {\n  prefixCls: 'rc-editor-mention',\n  prefix: '@',\n  mode: 'mutable',\n  suggestions: [],\n  multiLines: false,\n  className: '',\n  suggestionStyle: {},\n  notFoundContent: '无法找到',\n  position: 'absolute',\n  placement: 'bottom', // top, bottom\n  mentionStyle: {}\n};\n\nexport default Mention;"]},"metadata":{},"sourceType":"module"}