{"ast":null,"code":"import _regeneratorRuntime from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{axios}from'utils/utils';import{withStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import Dialog from'@material-ui/core/Dialog';import DialogTitle from'@material-ui/core/DialogTitle';import CircularProgress from'@material-ui/core/CircularProgress';import{compose}from'recompose';import withUserAuth from'context/withUserAuth';var formStyles={formContent:{paddingTop:30,paddingBottom:20,display:'flex',flexDirection:'column',alignItems:'center'},textField:{width:'90%',maxWidth:400,marginBottom:20}};var ListenerSignup=/*#__PURE__*/function(_Component){_inherits(ListenerSignup,_Component);var _super=_createSuper(ListenerSignup);function ListenerSignup(){var _this;_classCallCheck(this,ListenerSignup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={listenerID:\"\",password:\"\",isLoading:false};_this.handleInputChange=function(event){_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var handleClose,user,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({isLoading:true});handleClose=_this.props.handleClose;user=_this.props.context.user;_context.prev=4;_context.next=7;return axios.post(\"http://localhost:5000/api/listener/signup\",{listenerID:_this.state.listenerID,researcher:user,password:_this.state.password});case 7:response=_context.sent;if(handleClose!=null){handleClose();}console.log(response);window.location.reload();_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);_this.setState({isLoading:false});alert(_context.t0.message);console.log(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ListenerSignup,[{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,open=_this$props.open,handleClose=_this$props.handleClose;var _this$state=this.state,listenerID=_this$state.listenerID,password=_this$state.password,isLoading=_this$state.isLoading;var submidDisabled=listenerID===\"\"||password===\"\"||isLoading;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Create Listener\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,label:\"listener ID\",id:\"listenerID\",onChange:this.handleInputChange,className:classes.textField}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,type:\"password\",label:\"Password\",id:\"password\",onChange:this.handleInputChange,className:classes.textField}),isLoading&&/*#__PURE__*/React.createElement(CircularProgress,null)),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"secondary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:this.handleSubmit,color:\"primary\",disabled:submidDisabled},\"Create\"))));}}]);return ListenerSignup;}(Component);export default compose(withUserAuth,withStyles(formStyles))(ListenerSignup);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/src/components/listenerSignup.jsx"],"names":["React","Component","axios","withStyles","Button","TextField","DialogActions","DialogContent","Dialog","DialogTitle","CircularProgress","compose","withUserAuth","formStyles","formContent","paddingTop","paddingBottom","display","flexDirection","alignItems","textField","width","maxWidth","marginBottom","ListenerSignup","state","listenerID","password","isLoading","handleInputChange","event","setState","target","id","value","handleSubmit","preventDefault","handleClose","props","user","context","post","researcher","response","console","log","window","location","reload","alert","message","classes","open","submidDisabled"],"mappings":"+9BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,KAAT,KAAsB,aAAtB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CAEA,GAAMC,CAAAA,UAAU,CAAG,CACfC,WAAW,CAAE,CACTC,UAAU,CAAE,EADH,CAETC,aAAa,CAAE,EAFN,CAGTC,OAAO,CAAE,MAHA,CAITC,aAAa,CAAE,QAJN,CAKTC,UAAU,CAAE,QALH,CADE,CAQfC,SAAS,CAAE,CACPC,KAAK,CAAE,KADA,CAEPC,QAAQ,CAAE,GAFH,CAGPC,YAAY,CAAE,EAHP,CARI,CAAnB,C,GAeMC,CAAAA,c,2VACFC,K,CAAQ,CACJC,UAAU,CAAE,EADR,CAEJC,QAAQ,CAAE,EAFN,CAGJC,SAAS,CAAE,KAHP,C,OAMRC,iB,CAAoB,SAACC,KAAD,CAAW,CAC3B,MAAKC,QAAL,oBACKD,KAAK,CAACE,MAAN,CAAaC,EADlB,CACuBH,KAAK,CAACE,MAAN,CAAaE,KADpC,GAGH,C,OAEDC,Y,0FAAe,iBAAML,KAAN,gJACXA,KAAK,CAACM,cAAN,GACA,MAAKL,QAAL,CAAc,CACVH,SAAS,CAAE,IADD,CAAd,EAGQS,WALG,CAKa,MAAKC,KALlB,CAKHD,WALG,CAMHE,IANG,CAMM,MAAKD,KAAL,CAAWE,OANjB,CAMHD,IANG,uCAQgBrC,CAAAA,KAAK,CAACuC,IAAN,CAAW,2CAAX,CAAwD,CAC3Ef,UAAU,CAAE,MAAKD,KAAL,CAAWC,UADoD,CAE3EgB,UAAU,CAAEH,IAF+D,CAG3EZ,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QAHsD,CAAxD,CARhB,QAQDgB,QARC,eAaP,GAAIN,WAAW,EAAI,IAAnB,CAAyB,CACrBA,WAAW,GACd,CACDO,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAjBO,iFAoBP,MAAKjB,QAAL,CAAc,CACVH,SAAS,CAAE,KADD,CAAd,EAGAqB,KAAK,CAAC,YAAMC,OAAP,CAAL,CACAN,OAAO,CAACC,GAAR,cAxBO,qE,+IA4BN,iBACkC,KAAKP,KADvC,CACGa,OADH,aACGA,OADH,CACYC,IADZ,aACYA,IADZ,CACkBf,WADlB,aACkBA,WADlB,iBAEuC,KAAKZ,KAF5C,CAEGC,UAFH,aAEGA,UAFH,CAEeC,QAFf,aAEeA,QAFf,CAEyBC,SAFzB,aAEyBA,SAFzB,CAGL,GAAMyB,CAAAA,cAAc,CAAI3B,UAAU,GAAK,EAAf,EAAqBC,QAAQ,GAAK,EAAlC,EAAwCC,SAAhE,CACA,mBACI,4CACI,oBAAC,MAAD,EAAQ,IAAI,CAAEwB,IAAd,CAAoB,OAAO,CAAEf,WAA7B,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,oBADJ,cAEI,oBAAC,aAAD,mBACI,oBAAC,SAAD,EACI,OAAO,CAAC,UADZ,CAEI,QAAQ,KAFZ,CAGI,KAAK,CAAC,aAHV,CAII,EAAE,CAAC,YAJP,CAKI,QAAQ,CAAE,KAAKR,iBALnB,CAMI,SAAS,CAAEsB,OAAO,CAAC/B,SANvB,EADJ,cASI,oBAAC,SAAD,EACI,OAAO,CAAC,UADZ,CAEI,QAAQ,KAFZ,CAGI,IAAI,CAAC,UAHT,CAII,KAAK,CAAC,UAJV,CAKI,EAAE,CAAC,UALP,CAMI,QAAQ,CAAE,KAAKS,iBANnB,CAOI,SAAS,CAAEsB,OAAO,CAAC/B,SAPvB,EATJ,CAkBKQ,SAAS,eAAI,oBAAC,gBAAD,MAlBlB,CAFJ,cAsBI,oBAAC,aAAD,mBACI,oBAAC,MAAD,EACI,OAAO,CAAES,WADb,CAEI,KAAK,CAAC,WAFV,WADJ,cAOI,oBAAC,MAAD,EACI,OAAO,CAAE,KAAKF,YADlB,CAEI,KAAK,CAAC,SAFV,CAGI,QAAQ,CAAEkB,cAHd,WAPJ,CAtBJ,CADJ,CADJ,CA0CH,C,4BAvFwBpD,S,EA0F7B,cAAeU,CAAAA,OAAO,CAClBC,YADkB,CAElBT,UAAU,CAACU,UAAD,CAFQ,CAAP,CAGbW,cAHa,CAAf","sourcesContent":["import React, {Component} from 'react';\nimport { axios } from 'utils/utils';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { compose } from 'recompose';\nimport withUserAuth from 'context/withUserAuth';\n\nconst formStyles = {\n    formContent: {\n        paddingTop: 30,\n        paddingBottom: 20,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    textField: {\n        width: '90%',\n        maxWidth: 400,\n        marginBottom: 20\n    },\n}\n\nclass ListenerSignup extends Component {\n    state = {\n        listenerID: \"\",\n        password: \"\",\n        isLoading: false,\n    };\n\n    handleInputChange = (event) => {\n        this.setState({\n            [event.target.id]: event.target.value,\n        });\n    }\n\n    handleSubmit = async event => {\n        event.preventDefault();\n        this.setState({\n            isLoading: true,\n        });\n        const { handleClose } = this.props;\n        const { user } = this.props.context;\n        try {\n            const response = await axios.post(\"http://localhost:5000/api/listener/signup\", {\n                listenerID: this.state.listenerID,\n                researcher: user,\n                password: this.state.password\n            });\n            if (handleClose != null) {\n                handleClose();\n            }\n            console.log(response);\n            window.location.reload();\n        }\n        catch (error) {\n            this.setState({\n                isLoading: false,\n            });\n            alert(error.message);\n            console.log(error);\n        }\n    }\n\n    render() {\n        const { classes, open, handleClose } = this.props;\n        const { listenerID, password, isLoading } = this.state;\n        const submidDisabled = (listenerID === \"\" || password === \"\" || isLoading);\n        return (\n            <div>\n                <Dialog open={open} onClose={handleClose}>\n                    <DialogTitle id=\"form-dialog-title\">Create Listener</DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            variant=\"outlined\"\n                            required\n                            label=\"listener ID\"\n                            id=\"listenerID\"\n                            onChange={this.handleInputChange}\n                            className={classes.textField}\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            required\n                            type=\"password\"\n                            label=\"Password\"\n                            id=\"password\"\n                            onChange={this.handleInputChange}\n                            className={classes.textField}\n                        /> \n                        {isLoading && <CircularProgress />}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button \n                            onClick={handleClose} \n                            color=\"secondary\"                       \n                        >\n                            Cancel\n                        </Button>\n                        <Button \n                            onClick={this.handleSubmit} \n                            color=\"primary\"\n                            disabled={submidDisabled}\n                        >\n                            Create\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nexport default compose(\n    withUserAuth,\n    withStyles(formStyles),\n)(ListenerSignup);\n"]},"metadata":{},"sourceType":"module"}