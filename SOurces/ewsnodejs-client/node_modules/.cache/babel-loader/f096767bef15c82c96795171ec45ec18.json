{"ast":null,"code":"import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\"; // https://observablehq.com/@mbostock/lab-and-rgb\n\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn),\n      x,\n      z;\n  if (r === g && g === b) x = z = y;else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Lab, lab, extend(Color, {\n  brighter: function brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/d3-color/src/lab.js"],"names":["define","extend","Color","rgbConvert","Rgb","deg2rad","rad2deg","K","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","o","Lab","l","a","b","opacity","Hcl","hcl2lab","r","rgb2lrgb","g","y","xyz2lab","x","z","gray","lab","arguments","length","brighter","k","darker","rgb","isNaN","lab2xyz","lrgb2rgb","t","Math","pow","hclConvert","h","c","NaN","atan2","sqrt","lch","hcl","cos","sin"],"mappings":"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","sourcesContent":["import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n"]},"metadata":{},"sourceType":"module"}