{"ast":null,"code":"import _objectWithoutProperties from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _createForOfIteratorHelper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"/opt/osp/ewsnodejs-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{Component}from\"react\";import{axios,getBandFrequencies}from\"utils/utils\";import Paper from\"@material-ui/core/Paper\";import{withStyles}from\"@material-ui/styles\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import ListSubheader from\"@material-ui/core/ListSubheader\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import ListItemSecondaryAction from\"@material-ui/core/ListItemSecondaryAction\";import Toolbar from\"@material-ui/core/Toolbar\";import TableBody from\"@material-ui/core/TableBody\";import InputBase from\"@material-ui/core/InputBase\";import Hidden from\"@material-ui/core/Hidden\";import List from\"@material-ui/core/List\";import Button from\"@material-ui/core/Button\";import Radio from\"antd/es/radio\";import TextField from\"@material-ui/core/TextField\";import Table from\"@material-ui/core/Table\";import TableCell from\"@material-ui/core/TableCell\";import TableRow from\"@material-ui/core/TableRow\";import TableHead from\"@material-ui/core/TableHead\";import Input from\"@material-ui/core/Input\";import FormControl from\"@material-ui/core/FormControl\";import Select from\"react-select\";import ProfileSetting from\"components/profileSetting\";import _ from\"lodash\";import Tooltip from'@material-ui/core/Tooltip';var styles=function styles(theme){var _paramSectionContent;return{content:{padding:theme.spacing(3)},paramSection:{marginTop:30,maxWidth:1000},paramSectionContent:(_paramSectionContent={display:\"flex\",flexDirection:\"column\",width:\"90%\",paddingLeft:theme.spacing(2)},_defineProperty(_paramSectionContent,theme.breakpoints.down(\"md\"),{maxWidth:450}),_defineProperty(_paramSectionContent,theme.breakpoints.up(\"md\"),{alignItems:\"center\"}),_paramSectionContent),paramControlButtons:{width:\"80%\",maxWidth:600,marginTop:30,marginBottom:30},formControl:{margin:theme.spacing(1),minWidth:120},mobileDoubleText:{width:\"20vw\",margin:\"3vw\"}};};var typeOptions=[{value:[\"cr\",\"g65\"],label:\"CR/G65\"},{value:[\"g50\",\"g80\"],label:\"G50/G80\"},{value:[\"kneeLow\",\"mpo\"],label:\"Kneelow/Mpo\"},{value:[\"attack\",\"release\"],label:\"Attack/Release\"},{value:[\"frepingAlpha\"],label:\"FrepingAlpha\"}];// Disable g50 and g80 when control_via = 0\n// Disable cr and g65 when control_via = 1\nvar disabled_row=[[\"cr\",\"g65\"],[\"g50\",\"g80\"]];var channel_suffix={Left:'_L',Right:'_R'};var Amplification=/*#__PURE__*/function(_Component){_inherits(Amplification,_Component);var _super=_createSuper(Amplification);function Amplification(){var _this;_classCallCheck(this,Amplification);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={type:typeOptions[0],control_via:1,afc:1,// alpha: 1,\nfreping:0,global_mpo:120,// in single channel, the channel should be at channels[0]\nchannels:[\"Left\"],aligned:1,cr_L:[1,1,1,1,1,1],cr_R:[1,1,1,1,1,1],g50_L:[0,0,0,0,0,0],g50_R:[0,0,0,0,0,0],g65_L:[0,0,0,0,0,0],g65_R:[0,0,0,0,0,0],g80_L:[0,0,0,0,0,0],g80_R:[0,0,0,0,0,0],kneeLow_L:[45,45,45,45,45,45],kneeLow_R:[45,45,45,45,45,45],mpo_L:[120,120,120,120,120,120],mpo_R:[120,120,120,120,120,120],attack_L:[5,5,5,5,5,5],attack_R:[5,5,5,5,5,5],release_L:[20,20,20,20,20,20],release_R:[20,20,20,20,20,20],frepingAlpha_L:[0,0,0,0,0,0],frepingAlpha_R:[0,0,0,0,0,0],bandNumber:6,controlSignalChanged:[0,0,0,0,0],stateBeforeTransmit:{}};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this.loadParameter();case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));_this.fixPrecision=function(data){//console.log(data)\nfor(var i;i<data.length;i++){if(data[i]>1e-4){data[i]=data[i].toFixed(2);}}};_this.updateParamTable=function(data){console.log(\"update param from OSP\");var param_left=data[\"left\"];var param_right=data[\"right\"];var g50_Left=param_left[\"g50\"];var g80_Left=param_left[\"g80\"];var g50_Right=param_right[\"g50\"];var g80_Right=param_right[\"g80\"];var g65_Left=param_left[\"g50\"];var g65_Right=param_right[\"g50\"];var bandNumber=g50_Left.length;for(var i=0;i<bandNumber;i++){var slope_L=(g80_Left[i]-g50_Left[i])/30;var slope_R=(g80_Right[i]-g80_Right[i])/30;var leftVal=Number(g50_Left[i])+Number(slope_L*15);var rightVal=Number(g50_Right[i])+Number(slope_R*15);g65_Left[i]=leftVal;g65_Right[i]=rightVal;}_this.fixPrecision(param_left[\"g50\"]);_this.fixPrecision(param_right[\"g50\"]);_this.fixPrecision(g65_Left);_this.fixPrecision(g65_Right);_this.fixPrecision(param_left[\"g80\"]);_this.fixPrecision(param_right[\"g80\"]);_this.fixPrecision(param_left[\"knee_low\"]);_this.fixPrecision(param_right[\"knee_low\"]);_this.fixPrecision(param_left[\"mpo_band\"]);_this.fixPrecision(param_right[\"mpo_band\"]);_this.fixPrecision(param_left[\"attack\"]);_this.fixPrecision(param_right[\"attack\"]);_this.fixPrecision(param_left[\"release\"]);_this.fixPrecision(param_right[\"release\"]);var stateData={afc:param_left[\"afc\"],freping:param_left[\"freping\"],global_mpo:param_left[\"global_mpo\"],//TODO: USE LINE ABOVE WHEN ALIGNED IS IN 1/0 FORMAT\n// aligned: bandNumber === 10? param_left[\"aligned\"] : 0,\naligned:bandNumber===10?param_left[\"aligned\"]?1:0:0,cr_L:Array(bandNumber).fill(1),cr_R:Array(bandNumber).fill(1),g50_L:param_left[\"g50\"],g50_R:param_right[\"g50\"],g65_L:g65_Left,g65_R:g65_Right,g80_L:param_left[\"g80\"],g80_R:param_right[\"g80\"],kneeLow_L:param_left[\"knee_low\"],kneeLow_R:param_right[\"knee_low\"],mpo_L:param_left[\"mpo_band\"],mpo_R:param_right[\"mpo_band\"],attack_L:param_left[\"attack\"],attack_R:param_right[\"attack\"],release_L:param_left[\"release\"],release_R:param_right[\"release\"],frepingAlpha_L:param_left[\"freping_alpha\"]?param_left[\"freping_alpha\"]:Array(bandNumber).fill(0),frepingAlpha_R:param_right[\"freping_alpha\"]?param_right[\"freping_alpha\"]:Array(bandNumber).fill(0),bandNumber:bandNumber};var stateBeforeTransmit=JSON.parse(JSON.stringify(stateData));_this.setState(_objectSpread({stateBeforeTransmit:stateBeforeTransmit},stateData));};_this.updateParamTableFromDB=function(data){console.log(\"update from DB\");var param_left=data[\"left\"];var param_right=data[\"right\"];var stateData={cr_L:param_left[\"cr\"],cr_R:param_right[\"cr\"],g50_L:param_left[\"g50\"],g50_R:param_right[\"g50\"],g65_L:param_left[\"g65\"],g65_R:param_right[\"g65\"],g80_L:param_left[\"g80\"],g80_R:param_right[\"g80\"],kneeLow_L:param_left[\"knee_low\"],kneeLow_R:param_right[\"knee_low\"],mpo_L:param_left[\"mpo_band\"],mpo_R:param_right[\"mpo_band\"],attack_L:param_left[\"attack\"],attack_R:param_right[\"attack\"],release_L:param_left[\"release\"],release_R:param_right[\"release\"],frepingAlpha_L:param_left[\"freping_alpha\"],frepingAlpha_R:param_right[\"freping_alpha\"]};var stateBeforeTransmit=JSON.parse(JSON.stringify(stateData));// add control signals from current state \n//TODO\nstateBeforeTransmit=_objectSpread(_objectSpread({},stateBeforeTransmit),{},{afc:_this.state.afc,freping:_this.state.freping,global_mpo:_this.state.global_mpo,aligned:_this.state.aligned});console.log(stateBeforeTransmit);_this.setState(_objectSpread({stateBeforeTransmit:stateBeforeTransmit},stateData));};_this.loadParameter=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/param/getparam\");case 3:response=_context2.sent;data=response.data;console.log(Object.values(data));_this.updateParamTable(data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));_this.handleControlViaChange=function(event){_this.setState({control_via:event.target.value});};_this.handleAfcChange=function(event){_this.setState({afc:event.target.value});};_this.handleFrepingChange=function(event){_this.setState({freping:event.target.value});};_this.handleChannelChange=function(event){var data=[];if(event.target.value==='Both'){data=['Left','Right'];}else{data=[event.target.value];}console.log(data);_this.setState({channels:data});// this.setState({\n//     channel: event.target.value,\n// });\n};_this.handleAlignChange=function(event){_this.setState({aligned:event.target.value});};_this.handleInputChange=function(event){_this.setState(_defineProperty({},event.target.id,Number(event.target.value)));};_this.handleTypeChange=function(value){_this.setState({type:value});};_this.handleSubBandInputChange=function(event){var channels=_this.state.channels;var inputId=event.target.id.split(\"_\");var index=inputId[1];var type=inputId[0];var data={};var _iterator=_createForOfIteratorHelper(channels),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var channel=_step.value;// add name suffix based on the channel\nvar type_channel=type+channel_suffix[channel];var values=_this.state[type_channel];values[index]=Number(event.target.value);data[type_channel]=values;}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState(data);if(type===\"cr\"||type===\"g50\"||type===\"g80\"||type===\"g65\"){_this.updateParameter(index);}};_this.handleAllInputChange=function(event){var _this$state=_this.state,channels=_this$state.channels,bandNumber=_this$state.bandNumber;var inputId=event.target.id.split(\"_\");var type=inputId[0];var data={};var _iterator2=_createForOfIteratorHelper(channels),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var channel=_step2.value;var type_channel=type+channel_suffix[channel];var values=_this.state[type_channel];for(var i=0;i<bandNumber;i++){values[i]=Number(event.target.value);}data[type_channel]=values;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState(data);if(type===\"cr\"||type===\"g50\"||type===\"g80\"||type===\"g65\"){_this.updateAllParameters();}};_this.updateParameter=function(index){var _this$state2=_this.state,control_via=_this$state2.control_via,channels=_this$state2.channels;//update the g50/g80 when control via cr/g65\nif(control_via===1){var data={};var _iterator3=_createForOfIteratorHelper(channels),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var channel=_step3.value;var cr_channel='cr'+channel_suffix[channel];var cr_values=_this.state[cr_channel].slice();var cr=cr_values[index];if(cr!==0){var slope=(1-cr)/cr;var g65_channel='g65'+channel_suffix[channel];var g65_values=_this.state[g65_channel].slice();var g65=g65_values[index];var g80=Number(g65)+Number(slope*15);var g50=Number(g65)-Number(slope*15);// update g80 and g50 values\nvar g50_channel='g50'+channel_suffix[channel];var g50_values=_this.state[g50_channel].slice();g50_values[index]=g50;data[g50_channel]=g50_values;var g80_channel='g80'+channel_suffix[channel];var g80_values=_this.state[g80_channel].slice();g80_values[index]=g80;data[g80_channel]=g80_values;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState(data);}};_this.updateAllParameters=function(){var _this$state3=_this.state,control_via=_this$state3.control_via,channels=_this$state3.channels,bandNumber=_this$state3.bandNumber;if(control_via===1){var data={};var _iterator4=_createForOfIteratorHelper(channels),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var channel=_step4.value;// construct the param name based on channels and get values\nvar cr_channel='cr'+channel_suffix[channel];var cr_values=_this.state[cr_channel].slice();var g65_channel='g65'+channel_suffix[channel];var g65_values=_this.state[g65_channel].slice();var g50_channel='g50'+channel_suffix[channel];var g50_values=_this.state[g50_channel].slice();var g80_channel='g80'+channel_suffix[channel];var g80_values=_this.state[g80_channel].slice();for(var index=0;index<bandNumber;index++){var cr=cr_values[index];if(cr!==0){var slope=(1-cr)/cr;var g65=g65_values[index];var g80=Number(g65)+Number(slope*15);var g50=Number(g65)-Number(slope*15);// update g80 and g50 values\ng50_values[index]=g50;data[g50_channel]=g50_values;g80_values[index]=g80;data[g80_channel]=g80_values;}}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState(data);}};_this.generateParams=function(){var _this$state4=_this.state,afc=_this$state4.afc,aligned=_this$state4.aligned,global_mpo=_this$state4.global_mpo,g50_L=_this$state4.g50_L,g50_R=_this$state4.g50_R,g80_L=_this$state4.g80_L,g80_R=_this$state4.g80_R,kneeLow_L=_this$state4.kneeLow_L,kneeLow_R=_this$state4.kneeLow_R,mpo_L=_this$state4.mpo_L,mpo_R=_this$state4.mpo_R,attack_L=_this$state4.attack_L,attack_R=_this$state4.attack_R,release_L=_this$state4.release_L,release_R=_this$state4.release_R,frepingAlpha_L=_this$state4.frepingAlpha_L,frepingAlpha_R=_this$state4.frepingAlpha_R,freping=_this$state4.freping,bandNumber=_this$state4.bandNumber;var params={left:{en_ha:1,afc:afc,freping:freping,rear_mics:0,g50:g50_L,g80:g80_L,knee_low:kneeLow_L,mpo_band:mpo_L,attack:attack_L,release:release_L,global_mpo:global_mpo,freping_alpha:frepingAlpha_L},right:{en_ha:1,afc:afc,freping:freping,rear_mics:0,g50:g50_R,g80:g80_R,knee_low:kneeLow_R,mpo_band:mpo_R,attack:attack_R,release:release_R,global_mpo:global_mpo,freping_alpha:frepingAlpha_R}};if(bandNumber===10){console.log(\"10 band param with aligned: \",aligned);params={left:_objectSpread(_objectSpread({},params.left),{},{aligned:aligned}),right:_objectSpread(_objectSpread({},params.right),{},{aligned:aligned})};}return params;};_this.generateParamsProfile=function(){var _this$state5=_this.state,afc=_this$state5.afc,global_mpo=_this$state5.global_mpo,cr_L=_this$state5.cr_L,cr_R=_this$state5.cr_R,g50_L=_this$state5.g50_L,g50_R=_this$state5.g50_R,g80_L=_this$state5.g80_L,g80_R=_this$state5.g80_R,g65_L=_this$state5.g65_L,g65_R=_this$state5.g65_R,kneeLow_L=_this$state5.kneeLow_L,kneeLow_R=_this$state5.kneeLow_R,mpo_L=_this$state5.mpo_L,mpo_R=_this$state5.mpo_R,attack_L=_this$state5.attack_L,attack_R=_this$state5.attack_R,release_L=_this$state5.release_L,release_R=_this$state5.release_R,frepingAlpha_L=_this$state5.frepingAlpha_L,frepingAlpha_R=_this$state5.frepingAlpha_R,freping=_this$state5.freping;var params={left:{afc:afc,freping:freping,cr:cr_L,g50:g50_L,g65:g65_L,g80:g80_L,knee_low:kneeLow_L,mpo_band:mpo_L,attack:attack_L,release:release_L,global_mpo:global_mpo,freping_alpha:frepingAlpha_L},right:{afc:afc,freping:freping,cr:cr_R,g50:g50_R,g65:g65_R,g80:g80_R,knee_low:kneeLow_R,mpo_band:mpo_R,attack:attack_R,release:release_R,global_mpo:global_mpo,freping_alpha:frepingAlpha_R}};return params;};_this.handleSaveParamsToDB=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(profileName){var params,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:params=JSON.stringify(_this.generateParamsProfile());_context3.prev=1;_context3.next=4;return axios.post(\"/api/param/amplification\",{profileName:profileName,bandNumber:_this.state.bandNumber,parameters:params});case 4:response=_context3.sent;console.log(response.data);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);alert(\"This profile name has already existed\");case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.handleLoadParamsFromDB=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(profile){var params;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return JSON.parse(profile);case 3:params=_context4.sent;_this.updateParamTableFromDB(params);_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);alert(\"Error parsing JSON\");case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();_this.onTransmitParams=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var params,response,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:params=_this.generateParams();_context5.prev=1;_context5.next=4;return axios.post(\"/api/param/setparam\",{method:\"set\",data:params});case 4:response=_context5.sent;data=response.data;// Update the current transmitted state\n_this.setState(function(prevState){// Omit old stateBeforeTransmit\nvar stateBeforeTransmit=prevState.stateBeforeTransmit,stateData=_objectWithoutProperties(prevState,[\"stateBeforeTransmit\"]);var newStateBeforeTransmit=JSON.parse(JSON.stringify(stateData));;return{stateBeforeTransmit:newStateBeforeTransmit};});console.log(data);_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](1);alert(_context5.t0.response.data);case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[1,10]]);}));_this.paramTableRowMobile=function(subBand,index){var classes=_this.props.classes;var _this$state6=_this.state,channels=_this$state6.channels,type=_this$state6.type,bandNumber=_this$state6.bandNumber;if(index!==bandNumber){return/*#__PURE__*/React.createElement(ListItem,{key:\"subBand_\".concat(subBand,\"_index_\").concat(index)},/*#__PURE__*/React.createElement(ListItemText,{primary:subBand}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,type.value.map(function(data_id){var curr_data_id=data_id;curr_data_id+=channel_suffix[channels[0]];return/*#__PURE__*/React.createElement(TextField,{className:type.value.length===2?classes.mobileDoubleText:null,key:data_id+\"_\"+index,id:data_id+\"_\"+index,type:\"number\",margin:\"dense\",variant:\"outlined\",value:_this.state[curr_data_id][index],onChange:_this.handleSubBandInputChange});})));}else{return/*#__PURE__*/React.createElement(ListItem,{key:\"subBand_\".concat(subBand,\"_index_\").concat(index)},/*#__PURE__*/React.createElement(ListItemText,{primary:subBand}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,type.value.map(function(data_id){return/*#__PURE__*/React.createElement(TextField,{className:type.value.length===2?classes.mobileDoubleText:null,key:data_id+\"_all\",id:data_id+\"_all\",type:\"number\",margin:\"dense\",variant:\"outlined\",onChange:_this.handleAllInputChange});})));}};_this.paramTableRow=function(type){var _this$state7=_this.state,channels=_this$state7.channels,control_via=_this$state7.control_via;var data_id=type+channel_suffix[channels[0]];var disabled_style=disabled_row[control_via].includes(type)?{backgroundColor:\"#bdbdbd\",testColor:\"gray\"}:{};return/*#__PURE__*/React.createElement(TableRow,{hover:true,key:type,style:disabled_style},/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",style:_this.getParamLabelColor(data_id)},type)),_this.state[data_id].map(function(value,index){return/*#__PURE__*/React.createElement(TableCell,{key:\"row_index_\".concat(index),children:/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputBase,{disabled:disabled_row[control_via].includes(type),id:type+\"_\"+index,fullWidth:true,type:\"number\",value:value,onChange:_this.handleSubBandInputChange}))});}),/*#__PURE__*/React.createElement(TableCell,{children:/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(Input,{id:type+\"_all\",fullWidth:true,type:\"number\",disabled:disabled_row[control_via].includes(type),onChange:_this.handleAllInputChange}))}));};_this.renderControlSignals=function(){var channels=_this.state.channels;return/*#__PURE__*/React.createElement(List,{subheader:/*#__PURE__*/React.createElement(ListSubheader,null,\"Researcher Page Controls\")},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"Control Via\"}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Radio.Group,{value:_this.state.control_via,buttonStyle:\"solid\",onChange:_this.handleControlViaChange},/*#__PURE__*/React.createElement(Radio.Button,{value:0},\"G50/G80\"),/*#__PURE__*/React.createElement(Radio.Button,{value:1},\"CR/G65\")))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"Channel\"}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Radio.Group,{value:channels.length===2?'Both':channels[0],buttonStyle:\"solid\",onChange:_this.handleChannelChange},/*#__PURE__*/React.createElement(Radio.Button,{value:\"Left\"},\"Left\"),/*#__PURE__*/React.createElement(Radio.Button,{value:\"Right\"},\"Right\"),/*#__PURE__*/React.createElement(Radio.Button,{value:\"Both\"},\"Both\")))));};_this.getControlLabelColor=function(label){return _this.state[label]!==_this.state.stateBeforeTransmit[label]?{color:\"#F50057\"}:{color:'black'};};_this.getParamLabelColor=function(label){return _.isEqual(_this.state[label],_this.state.stateBeforeTransmit[label])?{color:'black'}:{color:\"#F50057\"};};_this.renderParamControls=function(){var bandNumber=_this.state.bandNumber;return/*#__PURE__*/React.createElement(List,{subheader:/*#__PURE__*/React.createElement(ListSubheader,null,\"RTMHA Controls\")},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"AFC\",style:_this.getControlLabelColor('afc')}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Radio.Group,{value:_this.state.afc,buttonStyle:\"solid\",onChange:_this.handleAfcChange},/*#__PURE__*/React.createElement(Radio.Button,{value:1},\"On\"),/*#__PURE__*/React.createElement(Radio.Button,{value:0},\"Off\")))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"Freping\",style:_this.getControlLabelColor('freping')}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Radio.Group,{value:_this.state.freping,buttonStyle:\"solid\",onChange:_this.handleFrepingChange},/*#__PURE__*/React.createElement(Radio.Button,{value:1},\"On\"),/*#__PURE__*/React.createElement(Radio.Button,{value:0},\"Off\")))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"Global MPO\",style:_this.getControlLabelColor('global_mpo')}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(TextField,{id:\"global_mpo\",type:\"number\",margin:\"dense\",variant:\"outlined\",value:_this.state.global_mpo,onChange:_this.handleInputChange}))),// Render Aligned control based on the bandNUmber\nbandNumber===10&&/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,{primary:\"Aligned\",style:_this.getControlLabelColor('aligned')}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Radio.Group,{value:_this.state.aligned,buttonStyle:\"solid\",onChange:_this.handleAlignChange},/*#__PURE__*/React.createElement(Radio.Button,{value:1},\"On\"),/*#__PURE__*/React.createElement(Radio.Button,{value:0},\"Off\")))));};_this.getTableColor=function(){var channels=_this.state.channels;// Both channels\nif(channels.length===2){return\"#91f2ad\";}else if(channels[0]==='Right'){//Right\nreturn\"#ffa6a6\";}else{//Left\nreturn\"#b0dfe5\";}};return _this;}_createClass(Amplification,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;var _this$state8=this.state,type=_this$state8.type,bandNumber=_this$state8.bandNumber;return/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12,spacing:10},/*#__PURE__*/React.createElement(Paper,{style:{maxWidth:500}},this.renderControlSignals()),/*#__PURE__*/React.createElement(Paper,{style:{maxWidth:500,marginTop:30}},this.renderParamControls())),/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12},/*#__PURE__*/React.createElement(ProfileSetting,{save:this.handleSaveParamsToDB,load:this.handleLoadParamsFromDB,currProfileBand:bandNumber}))),/*#__PURE__*/React.createElement(Paper,{className:classes.paramSection,style:{backgroundColor:this.getTableColor()}},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",gutterBottom:true},\"Parameter Settings\")),/*#__PURE__*/React.createElement(Hidden,{mdUp:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.paramSectionContent},/*#__PURE__*/React.createElement(Select,{defaultValue:typeOptions[0],value:type,onChange:this.handleTypeChange,options:typeOptions}),/*#__PURE__*/React.createElement(List,null,getBandFrequencies(bandNumber).map(function(value,index){return _this2.paramTableRowMobile(value,index);})),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2,className:classes.paramControlButtons},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",fullWidth:true,onClick:this.loadParameter},\"Pull\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",fullWidth:true,onClick:this.onTransmitParams},\"Transmit\"))))),/*#__PURE__*/React.createElement(Hidden,{smDown:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.paramSectionContent},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,[\"\"].concat(getBandFrequencies(bandNumber)).map(function(text){return/*#__PURE__*/React.createElement(TableCell,{key:text},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"textSecondary\"},text));}))),/*#__PURE__*/React.createElement(TableBody,null,[\"cr\",\"g50\",\"g65\",\"g80\",\"kneeLow\",\"mpo\",\"attack\",\"release\",\"frepingAlpha\"].map(function(text){return _this2.paramTableRow(text);}))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2,className:classes.paramControlButtons},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(Tooltip,{title:\"Get the latest setting from OSP devices\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",fullWidth:true,onClick:this.loadParameter},\"Pull\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(Tooltip,{title:\"Update current setting to OSP devices\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",fullWidth:true,onClick:this.onTransmitParams},\"Transmit\"))))))));}}]);return Amplification;}(Component);export default withStyles(styles)(Amplification);","map":{"version":3,"sources":["/opt/osp/ewsnodejs-client/src/components/amplification.jsx"],"names":["React","Component","axios","getBandFrequencies","Paper","withStyles","Grid","Typography","ListSubheader","ListItem","ListItemText","ListItemSecondaryAction","Toolbar","TableBody","InputBase","Hidden","List","Button","Radio","TextField","Table","TableCell","TableRow","TableHead","Input","FormControl","Select","ProfileSetting","_","Tooltip","styles","theme","content","padding","spacing","paramSection","marginTop","maxWidth","paramSectionContent","display","flexDirection","width","paddingLeft","breakpoints","down","up","alignItems","paramControlButtons","marginBottom","formControl","margin","minWidth","mobileDoubleText","typeOptions","value","label","disabled_row","channel_suffix","Left","Right","Amplification","state","type","control_via","afc","freping","global_mpo","channels","aligned","cr_L","cr_R","g50_L","g50_R","g65_L","g65_R","g80_L","g80_R","kneeLow_L","kneeLow_R","mpo_L","mpo_R","attack_L","attack_R","release_L","release_R","frepingAlpha_L","frepingAlpha_R","bandNumber","controlSignalChanged","stateBeforeTransmit","componentDidMount","loadParameter","alert","fixPrecision","data","i","length","toFixed","updateParamTable","console","log","param_left","param_right","g50_Left","g80_Left","g50_Right","g80_Right","g65_Left","g65_Right","slope_L","slope_R","leftVal","Number","rightVal","stateData","Array","fill","JSON","parse","stringify","setState","updateParamTableFromDB","post","response","Object","values","handleControlViaChange","event","target","handleAfcChange","handleFrepingChange","handleChannelChange","handleAlignChange","handleInputChange","id","handleTypeChange","handleSubBandInputChange","inputId","split","index","channel","type_channel","updateParameter","handleAllInputChange","updateAllParameters","cr_channel","cr_values","slice","cr","slope","g65_channel","g65_values","g65","g80","g50","g50_channel","g50_values","g80_channel","g80_values","generateParams","params","left","en_ha","rear_mics","knee_low","mpo_band","attack","release","freping_alpha","right","generateParamsProfile","handleSaveParamsToDB","profileName","parameters","handleLoadParamsFromDB","profile","onTransmitParams","method","prevState","newStateBeforeTransmit","paramTableRowMobile","subBand","classes","props","map","data_id","curr_data_id","paramTableRow","disabled_style","includes","backgroundColor","testColor","getParamLabelColor","renderControlSignals","getControlLabelColor","color","isEqual","renderParamControls","getTableColor","concat","text"],"mappings":"07CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,kBAAhB,KAA0C,aAA1C,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,uBAAP,KAAoC,2CAApC,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CAGA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,iCAAY,CACvBC,OAAO,CAAE,CACLC,OAAO,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADJ,CADc,CAIvBC,YAAY,CAAE,CACVC,SAAS,CAAE,EADD,CAEVC,QAAQ,CAAE,IAFA,CAJS,CAQvBC,mBAAmB,wBACfC,OAAO,CAAE,MADM,CAEfC,aAAa,CAAE,QAFA,CAGfC,KAAK,CAAE,KAHQ,CAIfC,WAAW,CAAEX,KAAK,CAACG,OAAN,CAAc,CAAd,CAJE,uCAKdH,KAAK,CAACY,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CALc,CAKiB,CAC5BP,QAAQ,CAAE,GADkB,CALjB,uCAQdN,KAAK,CAACY,WAAN,CAAkBE,EAAlB,CAAqB,IAArB,CARc,CAQe,CAC1BC,UAAU,CAAE,QADc,CARf,uBARI,CAoBvBC,mBAAmB,CAAE,CACjBN,KAAK,CAAE,KADU,CAEjBJ,QAAQ,CAAE,GAFO,CAGjBD,SAAS,CAAE,EAHM,CAIjBY,YAAY,CAAE,EAJG,CApBE,CA0BvBC,WAAW,CAAE,CACTC,MAAM,CAAEnB,KAAK,CAACG,OAAN,CAAc,CAAd,CADC,CAETiB,QAAQ,CAAE,GAFD,CA1BU,CA8BvBC,gBAAgB,CAAE,CACdX,KAAK,CAAE,MADO,CAEdS,MAAM,CAAE,KAFM,CA9BK,CAAZ,EAAf,CAoCA,GAAMG,CAAAA,WAAW,CAAG,CAChB,CAAEC,KAAK,CAAE,CAAC,IAAD,CAAO,KAAP,CAAT,CAAwBC,KAAK,CAAE,QAA/B,CADgB,CAEhB,CAAED,KAAK,CAAE,CAAC,KAAD,CAAQ,KAAR,CAAT,CAAyBC,KAAK,CAAE,SAAhC,CAFgB,CAGhB,CAAED,KAAK,CAAE,CAAC,SAAD,CAAY,KAAZ,CAAT,CAA6BC,KAAK,CAAE,aAApC,CAHgB,CAIhB,CAAED,KAAK,CAAE,CAAC,QAAD,CAAW,SAAX,CAAT,CAAgCC,KAAK,CAAE,gBAAvC,CAJgB,CAKhB,CAAED,KAAK,CAAE,CAAC,cAAD,CAAT,CAA2BC,KAAK,CAAE,cAAlC,CALgB,CAApB,CAQA;AACA;AACA,GAAMC,CAAAA,YAAY,CAAG,CACjB,CAAC,IAAD,CAAO,KAAP,CADiB,CAEjB,CAAC,KAAD,CAAQ,KAAR,CAFiB,CAArB,CAMA,GAAMC,CAAAA,cAAc,CAAG,CACnBC,IAAI,CAAE,IADa,CAEnBC,KAAK,CAAC,IAFa,CAAvB,C,GAKMC,CAAAA,a,uVACFC,K,CAAQ,CACJC,IAAI,CAAET,WAAW,CAAC,CAAD,CADb,CAEJU,WAAW,CAAE,CAFT,CAGJC,GAAG,CAAE,CAHD,CAIJ;AACAC,OAAO,CAAE,CALL,CAMJC,UAAU,CAAE,GANR,CAOJ;AACAC,QAAQ,CAAE,CAAC,MAAD,CARN,CASJC,OAAO,CAAE,CATL,CAUJC,IAAI,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAVF,CAWJC,IAAI,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAXF,CAYJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAZH,CAaJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAbH,CAcJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAdH,CAeJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAfH,CAgBJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAhBH,CAiBJC,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAjBH,CAkBJC,SAAS,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,EAAjB,CAAqB,EAArB,CAlBP,CAmBJC,SAAS,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,EAAjB,CAAqB,EAArB,CAnBP,CAoBJC,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,GAAhB,CAAqB,GAArB,CAA0B,GAA1B,CApBH,CAqBJC,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,GAAhB,CAAqB,GAArB,CAA0B,GAA1B,CArBH,CAsBJC,QAAQ,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAtBN,CAuBJC,QAAQ,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAvBN,CAwBJC,SAAS,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,EAAjB,CAAqB,EAArB,CAxBP,CAyBJC,SAAS,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAiB,EAAjB,CAAqB,EAArB,CAzBP,CA0BJC,cAAc,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CA1BZ,CA2BJC,cAAc,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CA3BZ,CA4BJC,UAAU,CAAE,CA5BR,CA6BJC,oBAAoB,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CA7BlB,CA8BJC,mBAAmB,CAAE,EA9BjB,C,OAiCRC,iB,sEAAoB,yKAEN,OAAKC,aAAL,EAFM,sFAIZC,KAAK,aAAL,CAJY,mE,SAQpBC,Y,CAAe,SAACC,IAAD,CAAU,CACrB;AACA,IAAK,GAAIC,CAAAA,CAAT,CAAYA,CAAC,CAAGD,IAAI,CAACE,MAArB,CAA6BD,CAAC,EAA9B,CAAkC,CAC9B,GAAID,IAAI,CAACC,CAAD,CAAJ,CAAU,IAAd,CAAoB,CAChBD,IAAI,CAACC,CAAD,CAAJ,CAAUD,IAAI,CAACC,CAAD,CAAJ,CAAQE,OAAR,CAAgB,CAAhB,CAAV,CACH,CACJ,CACJ,C,OAEDC,gB,CAAmB,SAACJ,IAAD,CAAU,CACzBK,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACA,GAAIC,CAAAA,UAAU,CAAGP,IAAI,CAAC,MAAD,CAArB,CACA,GAAIQ,CAAAA,WAAW,CAAGR,IAAI,CAAC,OAAD,CAAtB,CACA,GAAIS,CAAAA,QAAQ,CAAGF,UAAU,CAAC,KAAD,CAAzB,CACA,GAAIG,CAAAA,QAAQ,CAAGH,UAAU,CAAC,KAAD,CAAzB,CACA,GAAII,CAAAA,SAAS,CAAGH,WAAW,CAAC,KAAD,CAA3B,CACA,GAAII,CAAAA,SAAS,CAAGJ,WAAW,CAAC,KAAD,CAA3B,CACA,GAAIK,CAAAA,QAAQ,CAAGN,UAAU,CAAC,KAAD,CAAzB,CACA,GAAIO,CAAAA,SAAS,CAAGN,WAAW,CAAC,KAAD,CAA3B,CAEA,GAAMf,CAAAA,UAAU,CAAGgB,QAAQ,CAACP,MAA5B,CAEA,IAAK,GAAID,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGR,UAApB,CAAgCQ,CAAC,EAAjC,CAAqC,CACjC,GAAIc,CAAAA,OAAO,CAAG,CAACL,QAAQ,CAACT,CAAD,CAAR,CAAcQ,QAAQ,CAACR,CAAD,CAAvB,EAA8B,EAA5C,CACA,GAAIe,CAAAA,OAAO,CAAG,CAACJ,SAAS,CAACX,CAAD,CAAT,CAAeW,SAAS,CAACX,CAAD,CAAzB,EAAgC,EAA9C,CACA,GAAIgB,CAAAA,OAAO,CAAGC,MAAM,CAACT,QAAQ,CAACR,CAAD,CAAT,CAAN,CAAsBiB,MAAM,CAACH,OAAO,CAAG,EAAX,CAA1C,CACA,GAAII,CAAAA,QAAQ,CAAGD,MAAM,CAACP,SAAS,CAACV,CAAD,CAAV,CAAN,CAAuBiB,MAAM,CAACF,OAAO,CAAG,EAAX,CAA5C,CACAH,QAAQ,CAACZ,CAAD,CAAR,CAAcgB,OAAd,CACAH,SAAS,CAACb,CAAD,CAAT,CAAekB,QAAf,CACH,CAED,MAAKpB,YAAL,CAAkBQ,UAAU,CAAC,KAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,KAAD,CAA7B,EACA,MAAKT,YAAL,CAAkBc,QAAlB,EACA,MAAKd,YAAL,CAAkBe,SAAlB,EACA,MAAKf,YAAL,CAAkBQ,UAAU,CAAC,KAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,KAAD,CAA7B,EACA,MAAKT,YAAL,CAAkBQ,UAAU,CAAC,UAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,UAAD,CAA7B,EACA,MAAKT,YAAL,CAAkBQ,UAAU,CAAC,UAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,UAAD,CAA7B,EACA,MAAKT,YAAL,CAAkBQ,UAAU,CAAC,QAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,QAAD,CAA7B,EACA,MAAKT,YAAL,CAAkBQ,UAAU,CAAC,SAAD,CAA5B,EACA,MAAKR,YAAL,CAAkBS,WAAW,CAAC,SAAD,CAA7B,EAEA,GAAIY,CAAAA,SAAS,CAAG,CACZlD,GAAG,CAAEqC,UAAU,CAAC,KAAD,CADH,CAEZpC,OAAO,CAAEoC,UAAU,CAAC,SAAD,CAFP,CAGZnC,UAAU,CAAEmC,UAAU,CAAC,YAAD,CAHV,CAIZ;AACA;AACAjC,OAAO,CAAEmB,UAAU,GAAK,EAAf,CAAqBc,UAAU,CAAC,SAAD,CAAV,CAAwB,CAAxB,CAA4B,CAAjD,CAAsD,CANnD,CAOZhC,IAAI,CAAE8C,KAAK,CAAC5B,UAAD,CAAL,CAAkB6B,IAAlB,CAAuB,CAAvB,CAPM,CAQZ9C,IAAI,CAAE6C,KAAK,CAAC5B,UAAD,CAAL,CAAkB6B,IAAlB,CAAuB,CAAvB,CARM,CASZ7C,KAAK,CAAE8B,UAAU,CAAC,KAAD,CATL,CAUZ7B,KAAK,CAAE8B,WAAW,CAAC,KAAD,CAVN,CAWZ7B,KAAK,CAAEkC,QAXK,CAYZjC,KAAK,CAAEkC,SAZK,CAaZjC,KAAK,CAAE0B,UAAU,CAAC,KAAD,CAbL,CAcZzB,KAAK,CAAE0B,WAAW,CAAC,KAAD,CAdN,CAeZzB,SAAS,CAAEwB,UAAU,CAAC,UAAD,CAfT,CAgBZvB,SAAS,CAAEwB,WAAW,CAAC,UAAD,CAhBV,CAiBZvB,KAAK,CAAEsB,UAAU,CAAC,UAAD,CAjBL,CAkBZrB,KAAK,CAAEsB,WAAW,CAAC,UAAD,CAlBN,CAmBZrB,QAAQ,CAAEoB,UAAU,CAAC,QAAD,CAnBR,CAoBZnB,QAAQ,CAAEoB,WAAW,CAAC,QAAD,CApBT,CAqBZnB,SAAS,CAAEkB,UAAU,CAAC,SAAD,CArBT,CAsBZjB,SAAS,CAAEkB,WAAW,CAAC,SAAD,CAtBV,CAuBZjB,cAAc,CAAEgB,UAAU,CAAC,eAAD,CAAV,CACVA,UAAU,CAAC,eAAD,CADA,CAEVc,KAAK,CAAC5B,UAAD,CAAL,CAAkB6B,IAAlB,CAAuB,CAAvB,CAzBM,CA0BZ9B,cAAc,CAAEgB,WAAW,CAAC,eAAD,CAAX,CACVA,WAAW,CAAC,eAAD,CADD,CAEVa,KAAK,CAAC5B,UAAD,CAAL,CAAkB6B,IAAlB,CAAuB,CAAvB,CA5BM,CA6BZ7B,UAAU,CAAVA,UA7BY,CAAhB,CA+BA,GAAIE,CAAAA,mBAAmB,CAAI4B,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,SAAf,CAAX,CAA3B,CACA,MAAKM,QAAL,gBACI/B,mBAAmB,CAAnBA,mBADJ,EAEOyB,SAFP,GAOH,C,OAIDO,sB,CAAyB,SAAC3B,IAAD,CAAU,CAC/BK,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA,GAAIC,CAAAA,UAAU,CAAGP,IAAI,CAAC,MAAD,CAArB,CACA,GAAIQ,CAAAA,WAAW,CAAGR,IAAI,CAAC,OAAD,CAAtB,CAEA,GAAIoB,CAAAA,SAAS,CAAG,CACZ7C,IAAI,CAAEgC,UAAU,CAAC,IAAD,CADJ,CAEZ/B,IAAI,CAAEgC,WAAW,CAAC,IAAD,CAFL,CAGZ/B,KAAK,CAAE8B,UAAU,CAAC,KAAD,CAHL,CAIZ7B,KAAK,CAAE8B,WAAW,CAAC,KAAD,CAJN,CAKZ7B,KAAK,CAAE4B,UAAU,CAAC,KAAD,CALL,CAMZ3B,KAAK,CAAE4B,WAAW,CAAC,KAAD,CANN,CAOZ3B,KAAK,CAAE0B,UAAU,CAAC,KAAD,CAPL,CAQZzB,KAAK,CAAE0B,WAAW,CAAC,KAAD,CARN,CASZzB,SAAS,CAAEwB,UAAU,CAAC,UAAD,CATT,CAUZvB,SAAS,CAAEwB,WAAW,CAAC,UAAD,CAVV,CAWZvB,KAAK,CAAEsB,UAAU,CAAC,UAAD,CAXL,CAYZrB,KAAK,CAAEsB,WAAW,CAAC,UAAD,CAZN,CAaZrB,QAAQ,CAAEoB,UAAU,CAAC,QAAD,CAbR,CAcZnB,QAAQ,CAAEoB,WAAW,CAAC,QAAD,CAdT,CAeZnB,SAAS,CAAEkB,UAAU,CAAC,SAAD,CAfT,CAgBZjB,SAAS,CAAEkB,WAAW,CAAC,SAAD,CAhBV,CAiBZjB,cAAc,CAAEgB,UAAU,CAAC,eAAD,CAjBd,CAkBZf,cAAc,CAAEgB,WAAW,CAAC,eAAD,CAlBf,CAAhB,CAqBA,GAAIb,CAAAA,mBAAmB,CAAI4B,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,SAAf,CAAX,CAA3B,CACA;AACA;AACAzB,mBAAmB,gCACZA,mBADY,MAEfzB,GAAG,CAAE,MAAKH,KAAL,CAAWG,GAFD,CAGfC,OAAO,CAAE,MAAKJ,KAAL,CAAWI,OAHL,CAIfC,UAAU,CAAE,MAAKL,KAAL,CAAWK,UAJR,CAKfE,OAAO,CAAE,MAAKP,KAAL,CAAWO,OALL,EAAnB,CAOA+B,OAAO,CAACC,GAAR,CAAYX,mBAAZ,EACA,MAAK+B,QAAL,gBACI/B,mBAAmB,CAAnBA,mBADJ,EAEOyB,SAFP,GAKH,C,OAEDvB,a,sEAAgB,kMAEezF,CAAAA,KAAK,CAACwH,IAAN,CAAW,qBAAX,CAFf,QAEFC,QAFE,gBAGJ7B,IAHI,CAGG6B,QAAQ,CAAC7B,IAHZ,CAIRK,OAAO,CAACC,GAAR,CAAYwB,MAAM,CAACC,MAAP,CAAc/B,IAAd,CAAZ,EACA,MAAKI,gBAAL,CAAsBJ,IAAtB,EALQ,4K,SAWhBgC,sB,CAAyB,SAACC,KAAD,CAAW,CAChC,MAAKP,QAAL,CAAc,CACVzD,WAAW,CAAEgE,KAAK,CAACC,MAAN,CAAa1E,KADhB,CAAd,EAGH,C,OAED2E,e,CAAkB,SAACF,KAAD,CAAW,CACzB,MAAKP,QAAL,CAAc,CACVxD,GAAG,CAAE+D,KAAK,CAACC,MAAN,CAAa1E,KADR,CAAd,EAIH,C,OAED4E,mB,CAAsB,SAACH,KAAD,CAAW,CAC7B,MAAKP,QAAL,CAAc,CACVvD,OAAO,CAAE8D,KAAK,CAACC,MAAN,CAAa1E,KADZ,CAAd,EAGH,C,OAED6E,mB,CAAsB,SAACJ,KAAD,CAAW,CAC7B,GAAIjC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAGiC,KAAK,CAACC,MAAN,CAAa1E,KAAb,GAAuB,MAA1B,CAAiC,CAC7BwC,IAAI,CAAG,CAAC,MAAD,CAAS,OAAT,CAAP,CACH,CAFD,IAEK,CACDA,IAAI,CAAG,CAACiC,KAAK,CAACC,MAAN,CAAa1E,KAAd,CAAP,CACH,CACD6C,OAAO,CAACC,GAAR,CAAYN,IAAZ,EACA,MAAK0B,QAAL,CAAc,CACVrD,QAAQ,CAAE2B,IADA,CAAd,EAGA;AACA;AACA;AACH,C,OAEDsC,iB,CAAoB,SAACL,KAAD,CAAW,CAC3B,MAAKP,QAAL,CAAc,CACVpD,OAAO,CAAE2D,KAAK,CAACC,MAAN,CAAa1E,KADZ,CAAd,EAGH,C,OAED+E,iB,CAAoB,SAACN,KAAD,CAAW,CAC3B,MAAKP,QAAL,oBACKO,KAAK,CAACC,MAAN,CAAaM,EADlB,CACuBtB,MAAM,CAACe,KAAK,CAACC,MAAN,CAAa1E,KAAd,CAD7B,GAIH,C,OAEDiF,gB,CAAmB,SAACjF,KAAD,CAAW,CAC1B,MAAKkE,QAAL,CAAc,CACV1D,IAAI,CAAER,KADI,CAAd,EAGH,C,OAGDkF,wB,CAA2B,SAACT,KAAD,CAAW,IAC1B5D,CAAAA,QAD0B,CACb,MAAKN,KADQ,CAC1BM,QAD0B,CAElC,GAAIsE,CAAAA,OAAO,CAAGV,KAAK,CAACC,MAAN,CAAaM,EAAb,CAAgBI,KAAhB,CAAsB,GAAtB,CAAd,CACA,GAAIC,CAAAA,KAAK,CAAGF,OAAO,CAAC,CAAD,CAAnB,CACA,GAAI3E,CAAAA,IAAI,CAAG2E,OAAO,CAAC,CAAD,CAAlB,CAEA,GAAI3C,CAAAA,IAAI,CAAG,EAAX,CANkC,yCAOb3B,QAPa,YAOlC,+CAA8B,IAApByE,CAAAA,OAAoB,aAC1B;AACA,GAAIC,CAAAA,YAAY,CAAG/E,IAAI,CAAGL,cAAc,CAACmF,OAAD,CAAxC,CACA,GAAIf,CAAAA,MAAM,CAAG,MAAKhE,KAAL,CAAWgF,YAAX,CAAb,CACAhB,MAAM,CAACc,KAAD,CAAN,CAAgB3B,MAAM,CAACe,KAAK,CAACC,MAAN,CAAa1E,KAAd,CAAtB,CACAwC,IAAI,CAAC+C,YAAD,CAAJ,CAAqBhB,MAArB,CACH,CAbiC,qDAelC,MAAKL,QAAL,CAAc1B,IAAd,EACA,GACIhC,IAAI,GAAK,IAAT,EACAA,IAAI,GAAK,KADT,EAEAA,IAAI,GAAK,KAFT,EAGAA,IAAI,GAAK,KAJb,CAKE,CACE,MAAKgF,eAAL,CAAqBH,KAArB,EACH,CACJ,C,OAGDI,oB,CAAuB,SAAChB,KAAD,CAAW,iBACG,MAAKlE,KADR,CACtBM,QADsB,aACtBA,QADsB,CACZoB,UADY,aACZA,UADY,CAE9B,GAAIkD,CAAAA,OAAO,CAAGV,KAAK,CAACC,MAAN,CAAaM,EAAb,CAAgBI,KAAhB,CAAsB,GAAtB,CAAd,CACA,GAAI5E,CAAAA,IAAI,CAAG2E,OAAO,CAAC,CAAD,CAAlB,CAGA,GAAI3C,CAAAA,IAAI,CAAG,EAAX,CAN8B,0CAOR3B,QAPQ,aAO9B,kDAAgC,IAArByE,CAAAA,OAAqB,cAC5B,GAAIC,CAAAA,YAAY,CAAG/E,IAAI,CAAGL,cAAc,CAACmF,OAAD,CAAxC,CACA,GAAIf,CAAAA,MAAM,CAAG,MAAKhE,KAAL,CAAWgF,YAAX,CAAb,CACA,IAAK,GAAI9C,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGR,UAApB,CAAgCQ,CAAC,EAAjC,CAAqC,CACjC8B,MAAM,CAAC9B,CAAD,CAAN,CAAYiB,MAAM,CAACe,KAAK,CAACC,MAAN,CAAa1E,KAAd,CAAlB,CACH,CACDwC,IAAI,CAAC+C,YAAD,CAAJ,CAAqBhB,MAArB,CACH,CAd6B,uDAe9B,MAAKL,QAAL,CAAc1B,IAAd,EAEA,GACIhC,IAAI,GAAK,IAAT,EACAA,IAAI,GAAK,KADT,EAEAA,IAAI,GAAK,KAFT,EAGAA,IAAI,GAAK,KAJb,CAKE,CACE,MAAKkF,mBAAL,GACH,CACJ,C,OAGDF,e,CAAkB,SAACH,KAAD,CAAW,kBAIrB,MAAK9E,KAJgB,CAErBE,WAFqB,cAErBA,WAFqB,CAGrBI,QAHqB,cAGrBA,QAHqB,CAMzB;AACA,GAAGJ,WAAW,GAAK,CAAnB,CAAqB,CACjB,GAAI+B,CAAAA,IAAI,CAAG,EAAX,CADiB,0CAEI3B,QAFJ,aAEjB,kDAA8B,IAApByE,CAAAA,OAAoB,cAC1B,GAAIK,CAAAA,UAAU,CAAI,KAAOxF,cAAc,CAACmF,OAAD,CAAvC,CACA,GAAIM,CAAAA,SAAS,CAAG,MAAKrF,KAAL,CAAWoF,UAAX,EAAuBE,KAAvB,EAAhB,CACA,GAAIC,CAAAA,EAAE,CAAGF,SAAS,CAACP,KAAD,CAAlB,CACA,GAAGS,EAAE,GAAK,CAAV,CAAY,CACR,GAAIC,CAAAA,KAAK,CAAG,CAAC,EAAED,EAAH,EAAQA,EAApB,CAEA,GAAIE,CAAAA,WAAW,CAAI,MAAQ7F,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIW,CAAAA,UAAU,CAAG,MAAK1F,KAAL,CAAWyF,WAAX,EAAwBH,KAAxB,EAAjB,CACA,GAAIK,CAAAA,GAAG,CAAGD,UAAU,CAACZ,KAAD,CAApB,CAEA,GAAIc,CAAAA,GAAG,CAAGzC,MAAM,CAACwC,GAAD,CAAN,CAAcxC,MAAM,CAACqC,KAAK,CAAG,EAAT,CAA9B,CACA,GAAIK,CAAAA,GAAG,CAAG1C,MAAM,CAACwC,GAAD,CAAN,CAAcxC,MAAM,CAACqC,KAAK,CAAG,EAAT,CAA9B,CAEA;AACA,GAAIM,CAAAA,WAAW,CAAI,MAAQlG,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIgB,CAAAA,UAAU,CAAG,MAAK/F,KAAL,CAAW8F,WAAX,EAAwBR,KAAxB,EAAjB,CACAS,UAAU,CAACjB,KAAD,CAAV,CAAoBe,GAApB,CACA5D,IAAI,CAAC6D,WAAD,CAAJ,CAAoBC,UAApB,CAEA,GAAIC,CAAAA,WAAW,CAAI,MAAQpG,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIkB,CAAAA,UAAU,CAAG,MAAKjG,KAAL,CAAWgG,WAAX,EAAwBV,KAAxB,EAAjB,CACAW,UAAU,CAACnB,KAAD,CAAV,CAAoBc,GAApB,CACA3D,IAAI,CAAC+D,WAAD,CAAJ,CAAoBC,UAApB,CACH,CACJ,CA3BgB,uDA4BjB,MAAKtC,QAAL,CAAc1B,IAAd,EACH,CACJ,C,OAEDkD,mB,CAAsB,UAAM,kBAKpB,MAAKnF,KALe,CAEpBE,WAFoB,cAEpBA,WAFoB,CAGpBI,QAHoB,cAGpBA,QAHoB,CAIpBoB,UAJoB,cAIpBA,UAJoB,CAOxB,GAAGxB,WAAW,GAAK,CAAnB,CAAqB,CACjB,GAAI+B,CAAAA,IAAI,CAAG,EAAX,CADiB,0CAEI3B,QAFJ,aAEjB,kDAA8B,IAApByE,CAAAA,OAAoB,cAC1B;AACA,GAAIK,CAAAA,UAAU,CAAI,KAAOxF,cAAc,CAACmF,OAAD,CAAvC,CACA,GAAIM,CAAAA,SAAS,CAAG,MAAKrF,KAAL,CAAWoF,UAAX,EAAuBE,KAAvB,EAAhB,CAEA,GAAIG,CAAAA,WAAW,CAAI,MAAQ7F,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIW,CAAAA,UAAU,CAAG,MAAK1F,KAAL,CAAWyF,WAAX,EAAwBH,KAAxB,EAAjB,CAEA,GAAIQ,CAAAA,WAAW,CAAI,MAAQlG,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIgB,CAAAA,UAAU,CAAG,MAAK/F,KAAL,CAAW8F,WAAX,EAAwBR,KAAxB,EAAjB,CAEA,GAAIU,CAAAA,WAAW,CAAI,MAAQpG,cAAc,CAACmF,OAAD,CAAzC,CACA,GAAIkB,CAAAA,UAAU,CAAG,MAAKjG,KAAL,CAAWgG,WAAX,EAAwBV,KAAxB,EAAjB,CAEA,IAAK,GAAIR,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGpD,UAA5B,CAAwCoD,KAAK,EAA7C,CAAiD,CAC7C,GAAIS,CAAAA,EAAE,CAAGF,SAAS,CAACP,KAAD,CAAlB,CACA,GAAGS,EAAE,GAAK,CAAV,CAAY,CACR,GAAIC,CAAAA,KAAK,CAAG,CAAC,EAAED,EAAH,EAAQA,EAApB,CACA,GAAII,CAAAA,GAAG,CAAGD,UAAU,CAACZ,KAAD,CAApB,CAEA,GAAIc,CAAAA,GAAG,CAAGzC,MAAM,CAACwC,GAAD,CAAN,CAAcxC,MAAM,CAACqC,KAAK,CAAG,EAAT,CAA9B,CACA,GAAIK,CAAAA,GAAG,CAAG1C,MAAM,CAACwC,GAAD,CAAN,CAAcxC,MAAM,CAACqC,KAAK,CAAG,EAAT,CAA9B,CAEA;AACAO,UAAU,CAACjB,KAAD,CAAV,CAAoBe,GAApB,CACA5D,IAAI,CAAC6D,WAAD,CAAJ,CAAoBC,UAApB,CAEAE,UAAU,CAACnB,KAAD,CAAV,CAAoBc,GAApB,CACA3D,IAAI,CAAC+D,WAAD,CAAJ,CAAoBC,UAApB,CACH,CACJ,CAEJ,CAlCgB,uDAmCjB,MAAKtC,QAAL,CAAc1B,IAAd,EACH,CACJ,C,OAEDiE,c,CAAiB,UAAM,kBAqBf,MAAKlG,KArBU,CAEfG,GAFe,cAEfA,GAFe,CAGfI,OAHe,cAGfA,OAHe,CAIfF,UAJe,cAIfA,UAJe,CAKfK,KALe,cAKfA,KALe,CAMfC,KANe,cAMfA,KANe,CAOfG,KAPe,cAOfA,KAPe,CAQfC,KARe,cAQfA,KARe,CASfC,SATe,cASfA,SATe,CAUfC,SAVe,cAUfA,SAVe,CAWfC,KAXe,cAWfA,KAXe,CAYfC,KAZe,cAYfA,KAZe,CAafC,QAbe,cAafA,QAbe,CAcfC,QAde,cAcfA,QAde,CAefC,SAfe,cAefA,SAfe,CAgBfC,SAhBe,cAgBfA,SAhBe,CAiBfC,cAjBe,cAiBfA,cAjBe,CAkBfC,cAlBe,cAkBfA,cAlBe,CAmBfrB,OAnBe,cAmBfA,OAnBe,CAoBfsB,UApBe,cAoBfA,UApBe,CAuBnB,GAAIyE,CAAAA,MAAM,CAAG,CACTC,IAAI,CAAE,CACFC,KAAK,CAAE,CADL,CAEFlG,GAAG,CAAEA,GAFH,CAGFC,OAAO,CAAEA,OAHP,CAIFkG,SAAS,CAAE,CAJT,CAKFT,GAAG,CAAEnF,KALH,CAMFkF,GAAG,CAAE9E,KANH,CAOFyF,QAAQ,CAAEvF,SAPR,CAQFwF,QAAQ,CAAEtF,KARR,CASFuF,MAAM,CAAErF,QATN,CAUFsF,OAAO,CAAEpF,SAVP,CAWFjB,UAAU,CAAEA,UAXV,CAYFsG,aAAa,CAAEnF,cAZb,CADG,CAeToF,KAAK,CAAE,CACHP,KAAK,CAAE,CADJ,CAEHlG,GAAG,CAAEA,GAFF,CAGHC,OAAO,CAAEA,OAHN,CAIHkG,SAAS,CAAE,CAJR,CAKHT,GAAG,CAAElF,KALF,CAMHiF,GAAG,CAAE7E,KANF,CAOHwF,QAAQ,CAAEtF,SAPP,CAQHuF,QAAQ,CAAErF,KARP,CASHsF,MAAM,CAAEpF,QATL,CAUHqF,OAAO,CAAEnF,SAVN,CAWHlB,UAAU,CAAEA,UAXT,CAYHsG,aAAa,CAAElF,cAZZ,CAfE,CAAb,CA8BA,GAAIC,UAAU,GAAK,EAAnB,CAAuB,CACnBY,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4ChC,OAA5C,EACA4F,MAAM,CAAG,CACLC,IAAI,gCACGD,MAAM,CAACC,IADV,MAEA7F,OAAO,CAAPA,OAFA,EADC,CAKLqG,KAAK,gCACET,MAAM,CAACS,KADT,MAEDrG,OAAO,CAAPA,OAFC,EALA,CAAT,CAUH,CACD,MAAO4F,CAAAA,MAAP,CACH,C,OAEDU,qB,CAAwB,UAAM,kBAuBtB,MAAK7G,KAvBiB,CAEtBG,GAFsB,cAEtBA,GAFsB,CAGtBE,UAHsB,cAGtBA,UAHsB,CAItBG,IAJsB,cAItBA,IAJsB,CAKtBC,IALsB,cAKtBA,IALsB,CAMtBC,KANsB,cAMtBA,KANsB,CAOtBC,KAPsB,cAOtBA,KAPsB,CAQtBG,KARsB,cAQtBA,KARsB,CAStBC,KATsB,cAStBA,KATsB,CAUtBH,KAVsB,cAUtBA,KAVsB,CAWtBC,KAXsB,cAWtBA,KAXsB,CAYtBG,SAZsB,cAYtBA,SAZsB,CAatBC,SAbsB,cAatBA,SAbsB,CActBC,KAdsB,cActBA,KAdsB,CAetBC,KAfsB,cAetBA,KAfsB,CAgBtBC,QAhBsB,cAgBtBA,QAhBsB,CAiBtBC,QAjBsB,cAiBtBA,QAjBsB,CAkBtBC,SAlBsB,cAkBtBA,SAlBsB,CAmBtBC,SAnBsB,cAmBtBA,SAnBsB,CAoBtBC,cApBsB,cAoBtBA,cApBsB,CAqBtBC,cArBsB,cAqBtBA,cArBsB,CAsBtBrB,OAtBsB,cAsBtBA,OAtBsB,CAyB1B,GAAI+F,CAAAA,MAAM,CAAG,CACTC,IAAI,CAAE,CACFjG,GAAG,CAAEA,GADH,CAEFC,OAAO,CAAEA,OAFP,CAGFmF,EAAE,CAAE/E,IAHF,CAIFqF,GAAG,CAAEnF,KAJH,CAKFiF,GAAG,CAAE/E,KALH,CAMFgF,GAAG,CAAE9E,KANH,CAOFyF,QAAQ,CAAEvF,SAPR,CAQFwF,QAAQ,CAAEtF,KARR,CASFuF,MAAM,CAAErF,QATN,CAUFsF,OAAO,CAAEpF,SAVP,CAWFjB,UAAU,CAAEA,UAXV,CAYFsG,aAAa,CAAEnF,cAZb,CADG,CAeToF,KAAK,CAAE,CACHzG,GAAG,CAAEA,GADF,CAEHC,OAAO,CAAEA,OAFN,CAGHmF,EAAE,CAAE9E,IAHD,CAIHoF,GAAG,CAAElF,KAJF,CAKHgF,GAAG,CAAE9E,KALF,CAMH+E,GAAG,CAAE7E,KANF,CAOHwF,QAAQ,CAAEtF,SAPP,CAQHuF,QAAQ,CAAErF,KARP,CASHsF,MAAM,CAAEpF,QATL,CAUHqF,OAAO,CAAEnF,SAVN,CAWHlB,UAAU,CAAEA,UAXT,CAYHsG,aAAa,CAAElF,cAZZ,CAfE,CAAb,CA+BA,MAAO0E,CAAAA,MAAP,CACH,C,OAIDW,oB,2FAAuB,kBAAOC,WAAP,0IACfZ,MADe,CACN3C,IAAI,CAACE,SAAL,CAAe,MAAKmD,qBAAL,EAAf,CADM,yCAIQxK,CAAAA,KAAK,CAACwH,IAAN,CAAW,0BAAX,CAAuC,CAC1DkD,WAAW,CAAEA,WAD6C,CAE1DrF,UAAU,CAAE,MAAK1B,KAAL,CAAW0B,UAFmC,CAG1DsF,UAAU,CAAEb,MAH8C,CAAvC,CAJR,QAITrC,QAJS,gBASfxB,OAAO,CAACC,GAAR,CAAYuB,QAAQ,CAAC7B,IAArB,EATe,mFAWfF,KAAK,CAAC,uCAAD,CAAL,CAXe,sE,sEAiBvBkF,sB,2FAAyB,kBAAOC,OAAP,yKAEI1D,CAAAA,IAAI,CAACC,KAAL,CAAWyD,OAAX,CAFJ,QAEXf,MAFW,gBAGjB,MAAKvC,sBAAL,CAA4BuC,MAA5B,EAHiB,mFAKjBpE,KAAK,CAAC,oBAAD,CAAL,CALiB,sE,uEASzBoF,gB,sEAAmB,iKACXhB,MADW,CACF,MAAKD,cAAL,EADE,yCAGY7J,CAAAA,KAAK,CAACwH,IAAN,CAAW,qBAAX,CAAkC,CACrDuD,MAAM,CAAE,KAD6C,CAErDnF,IAAI,CAAEkE,MAF+C,CAAlC,CAHZ,QAGLrC,QAHK,gBAOL7B,IAPK,CAOE6B,QAAQ,CAAC7B,IAPX,CAQX;AACA,MAAK0B,QAAL,CAAc,SAAA0D,SAAS,CAAI,CACvB;AADuB,GAEjBzF,CAAAA,mBAFiB,CAEoByF,SAFpB,CAEjBzF,mBAFiB,CAEOyB,SAFP,0BAEoBgE,SAFpB,0BAGvB,GAAIC,CAAAA,sBAAsB,CAAI9D,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,SAAf,CAAX,CAA9B,CAAoE,CACpE,MAAO,CAACzB,mBAAmB,CAAE0F,sBAAtB,CAAP,CACH,CALD,EAMAhF,OAAO,CAACC,GAAR,CAAYN,IAAZ,EAfW,qFAiBXF,KAAK,CAAC,aAAM+B,QAAN,CAAe7B,IAAhB,CAAL,CAjBW,uE,SAsBnBsF,mB,CAAsB,SAACC,OAAD,CAAU1C,KAAV,CAAoB,IAC9B2C,CAAAA,OAD8B,CAClB,MAAKC,KADa,CAC9BD,OAD8B,kBAEC,MAAKzH,KAFN,CAE9BM,QAF8B,cAE9BA,QAF8B,CAEpBL,IAFoB,cAEpBA,IAFoB,CAEdyB,UAFc,cAEdA,UAFc,CAItC,GAAIoD,KAAK,GAAKpD,UAAd,CAA0B,CACtB,mBACI,oBAAC,QAAD,EAAU,GAAG,mBAAa8F,OAAb,mBAA8B1C,KAA9B,CAAb,eACI,oBAAC,YAAD,EAAc,OAAO,CAAE0C,OAAvB,EADJ,cAEI,oBAAC,uBAAD,MACKvH,IAAI,CAACR,KAAL,CAAWkI,GAAX,CAAe,SAACC,OAAD,CAAa,CACzB,GAAIC,CAAAA,YAAY,CAAGD,OAAnB,CACAC,YAAY,EAAIjI,cAAc,CAACU,QAAQ,CAAC,CAAD,CAAT,CAA9B,CAEA,mBACI,oBAAC,SAAD,EACI,SAAS,CACLL,IAAI,CAACR,KAAL,CAAW0C,MAAX,GAAsB,CAAtB,CACMsF,OAAO,CAAClI,gBADd,CAEM,IAJd,CAMI,GAAG,CAAEqI,OAAO,CAAG,GAAV,CAAgB9C,KANzB,CAOI,EAAE,CAAE8C,OAAO,CAAG,GAAV,CAAgB9C,KAPxB,CAQI,IAAI,CAAC,QART,CASI,MAAM,CAAC,OATX,CAUI,OAAO,CAAC,UAVZ,CAWI,KAAK,CAAE,MAAK9E,KAAL,CAAW6H,YAAX,EAAyB/C,KAAzB,CAXX,CAYI,QAAQ,CAAE,MAAKH,wBAZnB,EADJ,CAgBH,CApBA,CADL,CAFJ,CADJ,CA4BH,CA7BD,IA6BO,CACH,mBACI,oBAAC,QAAD,EAAU,GAAG,mBAAa6C,OAAb,mBAA8B1C,KAA9B,CAAb,eACI,oBAAC,YAAD,EAAc,OAAO,CAAE0C,OAAvB,EADJ,cAEI,oBAAC,uBAAD,MACKvH,IAAI,CAACR,KAAL,CAAWkI,GAAX,CAAe,SAACC,OAAD,CAAa,CACzB,mBACI,oBAAC,SAAD,EACI,SAAS,CACL3H,IAAI,CAACR,KAAL,CAAW0C,MAAX,GAAsB,CAAtB,CACMsF,OAAO,CAAClI,gBADd,CAEM,IAJd,CAMI,GAAG,CAAEqI,OAAO,CAAG,MANnB,CAOI,EAAE,CAAEA,OAAO,CAAG,MAPlB,CAQI,IAAI,CAAC,QART,CASI,MAAM,CAAC,OATX,CAUI,OAAO,CAAC,UAVZ,CAWI,QAAQ,CAAE,MAAK1C,oBAXnB,EADJ,CAeH,CAhBA,CADL,CAFJ,CADJ,CAwBH,CACJ,C,OAKD4C,a,CAAgB,SAAC7H,IAAD,CAAU,kBACY,MAAKD,KADjB,CACdM,QADc,cACdA,QADc,CACJJ,WADI,cACJA,WADI,CAEtB,GAAI0H,CAAAA,OAAO,CAAG3H,IAAI,CAAGL,cAAc,CAACU,QAAQ,CAAC,CAAD,CAAT,CAAnC,CAEA,GAAIyH,CAAAA,cAAc,CAAGpI,YAAY,CAACO,WAAD,CAAZ,CAA0B8H,QAA1B,CAAmC/H,IAAnC,EACf,CAAEgI,eAAe,CAAE,SAAnB,CAA8BC,SAAS,CAAE,MAAzC,CADe,CAEf,EAFN,CAIA,mBACI,oBAAC,QAAD,EAAU,KAAK,KAAf,CAAgB,GAAG,CAAEjI,IAArB,CAA2B,KAAK,CAAE8H,cAAlC,eACI,oBAAC,SAAD,mBACI,oBAAC,UAAD,EAAY,OAAO,CAAC,WAApB,CAAgC,KAAK,CAAE,MAAKI,kBAAL,CAAwBP,OAAxB,CAAvC,EACK3H,IADL,CADJ,CADJ,CAMK,MAAKD,KAAL,CAAW4H,OAAX,EAAoBD,GAApB,CAAwB,SAAClI,KAAD,CAAQqF,KAAR,qBACrB,oBAAC,SAAD,EACI,GAAG,qBAAeA,KAAf,CADP,CAEI,QAAQ,cACJ,oBAAC,WAAD,mBACI,oBAAC,SAAD,EACI,QAAQ,CAAEnF,YAAY,CAClBO,WADkB,CAAZ,CAER8H,QAFQ,CAEC/H,IAFD,CADd,CAII,EAAE,CAAEA,IAAI,CAAG,GAAP,CAAa6E,KAJrB,CAKI,SAAS,KALb,CAMI,IAAI,CAAC,QANT,CAOI,KAAK,CAAErF,KAPX,CAQI,QAAQ,CAAE,MAAKkF,wBARnB,EADJ,CAHR,EADqB,EAAxB,CANL,cAyBI,oBAAC,SAAD,EACI,QAAQ,cACJ,oBAAC,WAAD,mBACI,oBAAC,KAAD,EACI,EAAE,CAAE1E,IAAI,CAAG,MADf,CAEI,SAAS,KAFb,CAGI,IAAI,CAAC,QAHT,CAII,QAAQ,CAAEN,YAAY,CAACO,WAAD,CAAZ,CAA0B8H,QAA1B,CACN/H,IADM,CAJd,CAOI,QAAQ,CAAE,MAAKiF,oBAPnB,EADJ,CAFR,EAzBJ,CADJ,CA2CH,C,OAEDkD,oB,CAAuB,UAAM,IACjB9H,CAAAA,QADiB,CACJ,MAAKN,KADD,CACjBM,QADiB,CAEzB,mBACI,oBAAC,IAAD,EACI,SAAS,cACL,oBAAC,aAAD,iCAFR,eAKI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,aAAtB,EADJ,cAEI,oBAAC,uBAAD,mBACI,oBAAC,KAAD,CAAO,KAAP,EACI,KAAK,CAAE,MAAKN,KAAL,CAAWE,WADtB,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,MAAK+D,sBAHnB,eAKI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,YALJ,cAMI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,WANJ,CADJ,CAFJ,CALJ,cAkBI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,SAAtB,EADJ,cAEI,oBAAC,uBAAD,mBACI,oBAAC,KAAD,CAAO,KAAP,EACI,KAAK,CAAE3D,QAAQ,CAAC6B,MAAT,GAAoB,CAApB,CAAwB,MAAxB,CAAiC7B,QAAQ,CAAC,CAAD,CADpD,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,MAAKgE,mBAHnB,eAKI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAC,MAApB,SALJ,cAMI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAC,OAApB,UANJ,cAOI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAC,MAApB,SAPJ,CADJ,CAFJ,CAlBJ,CADJ,CAmCH,C,OAID+D,oB,CAAuB,SAAC3I,KAAD,CAAW,CAC9B,MAAO,OAAKM,KAAL,CAAWN,KAAX,IAAsB,MAAKM,KAAL,CAAW4B,mBAAX,CAA+BlC,KAA/B,CAAtB,CAA4D,CAAE4I,KAAK,CAAE,SAAT,CAA5D,CAAkF,CAACA,KAAK,CAAC,OAAP,CAAzF,CACH,C,OAIDH,kB,CAAqB,SAACzI,KAAD,CAAW,CAC5B,MAAO3B,CAAAA,CAAC,CAACwK,OAAF,CAAU,MAAKvI,KAAL,CAAWN,KAAX,CAAV,CAA4B,MAAKM,KAAL,CAAW4B,mBAAX,CAA+BlC,KAA/B,CAA5B,EAAoE,CAAC4I,KAAK,CAAC,OAAP,CAApE,CAAoF,CAAEA,KAAK,CAAE,SAAT,CAA3F,CACH,C,OAEDE,mB,CAAsB,UAAM,IAChB9G,CAAAA,UADgB,CACD,MAAK1B,KADJ,CAChB0B,UADgB,CAExB,mBACI,oBAAC,IAAD,EAAM,SAAS,cAAE,oBAAC,aAAD,uBAAjB,eACI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,KAAtB,CACA,KAAK,CAAE,MAAK2G,oBAAL,CAA0B,KAA1B,CADP,EADJ,cAKI,oBAAC,uBAAD,mBACI,oBAAC,KAAD,CAAO,KAAP,EACI,KAAK,CAAE,MAAKrI,KAAL,CAAWG,GADtB,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,MAAKiE,eAHnB,eAKI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,OALJ,cAMI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,QANJ,CADJ,CALJ,CADJ,cAiBI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,SAAtB,CACA,KAAK,CAAE,MAAKiE,oBAAL,CAA0B,SAA1B,CADP,EADJ,cAII,oBAAC,uBAAD,mBACI,oBAAC,KAAD,CAAO,KAAP,EACI,KAAK,CAAE,MAAKrI,KAAL,CAAWI,OADtB,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,MAAKiE,mBAHnB,eAKI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,OALJ,cAMI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,QANJ,CADJ,CAJJ,CAjBJ,cAgCI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,YAAtB,CACA,KAAK,CAAE,MAAKgE,oBAAL,CAA0B,YAA1B,CADP,EADJ,cAII,oBAAC,uBAAD,mBACI,oBAAC,SAAD,EACI,EAAE,CAAC,YADP,CAEI,IAAI,CAAC,QAFT,CAGI,MAAM,CAAC,OAHX,CAII,OAAO,CAAC,UAJZ,CAKI,KAAK,CAAE,MAAKrI,KAAL,CAAWK,UALtB,CAMI,QAAQ,CAAE,MAAKmE,iBANnB,EADJ,CAJJ,CAhCJ,CAgDQ;AACA9C,UAAU,GAAK,EAAf,eACI,oBAAC,QAAD,mBACI,oBAAC,YAAD,EAAc,OAAO,CAAC,SAAtB,CACC,KAAK,CAAE,MAAK2G,oBAAL,CAA0B,SAA1B,CADR,EADJ,cAII,oBAAC,uBAAD,mBACI,oBAAC,KAAD,CAAO,KAAP,EACI,KAAK,CAAE,MAAKrI,KAAL,CAAWO,OADtB,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,MAAKgE,iBAHnB,eAKI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,OALJ,cAMI,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,CAArB,QANJ,CADJ,CAJJ,CAlDZ,CADJ,CAsEH,C,OAEDkE,a,CAAgB,UAAM,IACVnI,CAAAA,QADU,CACG,MAAKN,KADR,CACVM,QADU,CAElB;AACA,GAAGA,QAAQ,CAAC6B,MAAT,GAAoB,CAAvB,CAAyB,CACrB,MAAO,SAAP,CACH,CAFD,IAEM,IAAG7B,QAAQ,CAAC,CAAD,CAAR,GAAgB,OAAnB,CAA2B,CAC7B;AACA,MAAO,SAAP,CACH,CAHK,IAGA,CACF;AACA,MAAO,SAAP,CACH,CACJ,C,gFAEQ,oBACGmH,CAAAA,OADH,CACe,KAAKC,KADpB,CACGD,OADH,kBAEwB,KAAKzH,KAF7B,CAEGC,IAFH,cAEGA,IAFH,CAESyB,UAFT,cAESA,UAFT,CAIL,mBACI,2BAAK,SAAS,CAAE+F,OAAO,CAACtJ,OAAxB,eACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,CAAkB,EAAE,CAAE,EAAtB,CAA0B,OAAO,CAAE,EAAnC,eACI,oBAAC,KAAD,EAAO,KAAK,CAAE,CAAEK,QAAQ,CAAE,GAAZ,CAAd,EACK,KAAK4J,oBAAL,EADL,CADJ,cAII,oBAAC,KAAD,EAAO,KAAK,CAAE,CAAE5J,QAAQ,CAAE,GAAZ,CAAiBD,SAAS,CAAE,EAA5B,CAAd,EACK,KAAKiK,mBAAL,EADL,CAJJ,CADJ,cASI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,CAAkB,EAAE,CAAE,EAAtB,eACI,oBAAC,cAAD,EACI,IAAI,CAAE,KAAK1B,oBADf,CAEI,IAAI,CAAE,KAAKG,sBAFf,CAGI,eAAe,CAAEvF,UAHrB,EADJ,CATJ,CADJ,cAmBI,oBAAC,KAAD,EAAO,SAAS,CAAE+F,OAAO,CAACnJ,YAA1B,CAAwC,KAAK,CAAE,CAAC2J,eAAe,CAAC,KAAKQ,aAAL,EAAjB,CAA/C,eACI,oBAAC,OAAD,mBACI,oBAAC,UAAD,EAAY,KAAK,CAAC,eAAlB,CAAkC,YAAY,KAA9C,uBADJ,CADJ,cAMI,oBAAC,MAAD,EAAQ,IAAI,KAAZ,eACI,2BAAK,SAAS,CAAEhB,OAAO,CAAChJ,mBAAxB,eACI,oBAAC,MAAD,EACI,YAAY,CAAEe,WAAW,CAAC,CAAD,CAD7B,CAEI,KAAK,CAAES,IAFX,CAGI,QAAQ,CAAE,KAAKyE,gBAHnB,CAII,OAAO,CAAElF,WAJb,EADJ,cAOI,oBAAC,IAAD,MACKlD,kBAAkB,CACfoF,UADe,CAAlB,CAECiG,GAFD,CAEK,SAAClI,KAAD,CAAQqF,KAAR,QACF,CAAA,MAAI,CAACyC,mBAAL,CAAyB9H,KAAzB,CAAgCqF,KAAhC,CADE,EAFL,CADL,CAPJ,cAcI,oBAAC,IAAD,EACI,SAAS,KADb,CAEI,OAAO,CAAE,CAFb,CAGI,SAAS,CAAE2C,OAAO,CAACvI,mBAHvB,eAKI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACI,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,WAFV,CAGI,SAAS,KAHb,CAII,OAAO,CAAE,KAAK4C,aAJlB,SADJ,CALJ,cAeI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACI,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,WAFV,CAGI,SAAS,KAHb,CAII,OAAO,CAAE,KAAKqF,gBAJlB,aADJ,CAfJ,CAdJ,CADJ,CANJ,cAkDI,oBAAC,MAAD,EAAQ,MAAM,KAAd,eACI,2BAAK,SAAS,CAAEM,OAAO,CAAChJ,mBAAxB,eACI,oBAAC,KAAD,mBACI,oBAAC,SAAD,mBACI,oBAAC,QAAD,MACK,CAAC,EAAD,EACIiK,MADJ,CAEOpM,kBAAkB,CAACoF,UAAD,CAFzB,EAIIiG,GAJJ,CAIQ,SAACgB,IAAD,qBACD,oBAAC,SAAD,EAAW,GAAG,CAAEA,IAAhB,eACI,oBAAC,UAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,eAFV,EAIKA,IAJL,CADJ,CADC,EAJR,CADL,CADJ,CADJ,cAmBI,oBAAC,SAAD,MACK,CACG,IADH,CAEG,KAFH,CAGG,KAHH,CAIG,KAJH,CAKG,SALH,CAMG,KANH,CAOG,QAPH,CAQG,SARH,CASG,cATH,EAUChB,GAVD,CAUK,SAACgB,IAAD,QAAU,CAAA,MAAI,CAACb,aAAL,CAAmBa,IAAnB,CAAV,EAVL,CADL,CAnBJ,CADJ,cAkCI,oBAAC,IAAD,EACI,SAAS,KADb,CAEI,OAAO,CAAE,CAFb,CAGI,SAAS,CAAElB,OAAO,CAACvI,mBAHvB,eAKI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACI,oBAAC,OAAD,EAAS,KAAK,CAAC,yCAAf,eACI,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,WAFV,CAGI,SAAS,KAHb,CAII,OAAO,CAAE,KAAK4C,aAJlB,SADJ,CADJ,CALJ,cAiBI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACI,oBAAC,OAAD,EAAS,KAAK,CAAC,uCAAf,eACI,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,WAFV,CAGI,SAAS,KAHb,CAII,OAAO,CAAE,KAAKqF,gBAJlB,aADJ,CADJ,CAjBJ,CAlCJ,CADJ,CAlDJ,CAnBJ,CADJ,CA4IH,C,2BA/7BuB/K,S,EAk8B5B,cAAeI,CAAAA,UAAU,CAACyB,MAAD,CAAV,CAAmB8B,aAAnB,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { axios, getBandFrequencies } from \"utils/utils\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport List from \"@material-ui/core/List\";\nimport Button from \"@material-ui/core/Button\";\nimport Radio from \"antd/es/radio\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Table from \"@material-ui/core/Table\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport Input from \"@material-ui/core/Input\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"react-select\";\nimport ProfileSetting from \"components/profileSetting\";\nimport _ from \"lodash\";\nimport Tooltip from '@material-ui/core/Tooltip';\n\n\nconst styles = (theme) => ({\n    content: {\n        padding: theme.spacing(3),\n    },\n    paramSection: {\n        marginTop: 30,\n        maxWidth: 1000,\n    },\n    paramSectionContent: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"90%\",\n        paddingLeft: theme.spacing(2),\n        [theme.breakpoints.down(\"md\")]: {\n            maxWidth: 450,\n        },\n        [theme.breakpoints.up(\"md\")]: {\n            alignItems: \"center\",\n        },\n    },\n    paramControlButtons: {\n        width: \"80%\",\n        maxWidth: 600,\n        marginTop: 30,\n        marginBottom: 30,\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120,\n    },\n    mobileDoubleText: {\n        width: \"20vw\",\n        margin: \"3vw\",\n    },\n});\n\nconst typeOptions = [\n    { value: [\"cr\", \"g65\"], label: \"CR/G65\" },\n    { value: [\"g50\", \"g80\"], label: \"G50/G80\" },\n    { value: [\"kneeLow\", \"mpo\"], label: \"Kneelow/Mpo\" },\n    { value: [\"attack\", \"release\"], label: \"Attack/Release\" },\n    { value: [\"frepingAlpha\"], label: \"FrepingAlpha\" },\n];\n\n// Disable g50 and g80 when control_via = 0\n// Disable cr and g65 when control_via = 1\nconst disabled_row = [\n    [\"cr\", \"g65\"],\n    [\"g50\", \"g80\"],\n];\n\n\nconst channel_suffix = {\n    Left: '_L',\n    Right:'_R'\n}\n\nclass Amplification extends Component {\n    state = {\n        type: typeOptions[0],\n        control_via: 1,\n        afc: 1,\n        // alpha: 1,\n        freping: 0,\n        global_mpo: 120,\n        // in single channel, the channel should be at channels[0]\n        channels: [\"Left\"],\n        aligned: 1,\n        cr_L: [1, 1, 1, 1, 1, 1],\n        cr_R: [1, 1, 1, 1, 1, 1],\n        g50_L: [0, 0, 0, 0, 0, 0],\n        g50_R: [0, 0, 0, 0, 0, 0],\n        g65_L: [0, 0, 0, 0, 0, 0],\n        g65_R: [0, 0, 0, 0, 0, 0],\n        g80_L: [0, 0, 0, 0, 0, 0],\n        g80_R: [0, 0, 0, 0, 0, 0],\n        kneeLow_L: [45, 45, 45, 45, 45, 45],\n        kneeLow_R: [45, 45, 45, 45, 45, 45],\n        mpo_L: [120, 120, 120, 120, 120, 120],\n        mpo_R: [120, 120, 120, 120, 120, 120],\n        attack_L: [5, 5, 5, 5, 5, 5],\n        attack_R: [5, 5, 5, 5, 5, 5],\n        release_L: [20, 20, 20, 20, 20, 20],\n        release_R: [20, 20, 20, 20, 20, 20],\n        frepingAlpha_L: [0, 0, 0, 0, 0, 0],\n        frepingAlpha_R: [0, 0, 0, 0, 0, 0],\n        bandNumber: 6,\n        controlSignalChanged: [0, 0, 0, 0, 0],\n        stateBeforeTransmit: {},\n    };\n\n    componentDidMount = async () => {\n        try {\n            await this.loadParameter();\n        } catch (error) {\n            alert(error);\n        }\n    };\n\n    fixPrecision = (data) => {\n        //console.log(data)\n        for (let i; i < data.length; i++) {\n            if (data[i] > 1e-4) {\n                data[i] = data[i].toFixed(2);\n            }\n        }\n    };\n\n    updateParamTable = (data) => {\n        console.log(\"update param from OSP\");\n        let param_left = data[\"left\"];\n        let param_right = data[\"right\"];\n        var g50_Left = param_left[\"g50\"];\n        var g80_Left = param_left[\"g80\"];\n        var g50_Right = param_right[\"g50\"];\n        var g80_Right = param_right[\"g80\"];\n        var g65_Left = param_left[\"g50\"];\n        var g65_Right = param_right[\"g50\"];\n\n        const bandNumber = g50_Left.length;\n\n        for (var i = 0; i < bandNumber; i++) {\n            var slope_L = (g80_Left[i] - g50_Left[i]) / 30;\n            var slope_R = (g80_Right[i] - g80_Right[i]) / 30;\n            var leftVal = Number(g50_Left[i]) + Number(slope_L * 15);\n            var rightVal = Number(g50_Right[i]) + Number(slope_R * 15);\n            g65_Left[i] = leftVal;\n            g65_Right[i] = rightVal;\n        }\n\n        this.fixPrecision(param_left[\"g50\"]);\n        this.fixPrecision(param_right[\"g50\"]);\n        this.fixPrecision(g65_Left);\n        this.fixPrecision(g65_Right);\n        this.fixPrecision(param_left[\"g80\"]);\n        this.fixPrecision(param_right[\"g80\"]);\n        this.fixPrecision(param_left[\"knee_low\"]);\n        this.fixPrecision(param_right[\"knee_low\"]);\n        this.fixPrecision(param_left[\"mpo_band\"]);\n        this.fixPrecision(param_right[\"mpo_band\"]);\n        this.fixPrecision(param_left[\"attack\"]);\n        this.fixPrecision(param_right[\"attack\"]);\n        this.fixPrecision(param_left[\"release\"]);\n        this.fixPrecision(param_right[\"release\"]);\n\n        let stateData = {\n            afc: param_left[\"afc\"],\n            freping: param_left[\"freping\"],\n            global_mpo: param_left[\"global_mpo\"],\n            //TODO: USE LINE ABOVE WHEN ALIGNED IS IN 1/0 FORMAT\n            // aligned: bandNumber === 10? param_left[\"aligned\"] : 0,\n            aligned: bandNumber === 10 ? (param_left[\"aligned\"] ? 1 : 0) : 0,\n            cr_L: Array(bandNumber).fill(1),\n            cr_R: Array(bandNumber).fill(1),\n            g50_L: param_left[\"g50\"],\n            g50_R: param_right[\"g50\"],\n            g65_L: g65_Left,\n            g65_R: g65_Right,\n            g80_L: param_left[\"g80\"],\n            g80_R: param_right[\"g80\"],\n            kneeLow_L: param_left[\"knee_low\"],\n            kneeLow_R: param_right[\"knee_low\"],\n            mpo_L: param_left[\"mpo_band\"],\n            mpo_R: param_right[\"mpo_band\"],\n            attack_L: param_left[\"attack\"],\n            attack_R: param_right[\"attack\"],\n            release_L: param_left[\"release\"],\n            release_R: param_right[\"release\"],\n            frepingAlpha_L: param_left[\"freping_alpha\"]\n                ? param_left[\"freping_alpha\"]\n                : Array(bandNumber).fill(0),\n            frepingAlpha_R: param_right[\"freping_alpha\"]\n                ? param_right[\"freping_alpha\"]\n                : Array(bandNumber).fill(0),\n            bandNumber,\n        }\n        let stateBeforeTransmit =  JSON.parse(JSON.stringify(stateData));\n        this.setState({\n            stateBeforeTransmit,\n            ...stateData\n        });\n\n       \n\n    };\n\n    // Note: DB profile data does not contain bandNumber\n    // bandNumber is decided by OSP, not need to reset bandNumber when loading from DB\n    updateParamTableFromDB = (data) => {\n        console.log(\"update from DB\")\n        let param_left = data[\"left\"];\n        let param_right = data[\"right\"];\n\n        let stateData = {\n            cr_L: param_left[\"cr\"],\n            cr_R: param_right[\"cr\"],\n            g50_L: param_left[\"g50\"],\n            g50_R: param_right[\"g50\"],\n            g65_L: param_left[\"g65\"],\n            g65_R: param_right[\"g65\"],\n            g80_L: param_left[\"g80\"],\n            g80_R: param_right[\"g80\"],\n            kneeLow_L: param_left[\"knee_low\"],\n            kneeLow_R: param_right[\"knee_low\"],\n            mpo_L: param_left[\"mpo_band\"],\n            mpo_R: param_right[\"mpo_band\"],\n            attack_L: param_left[\"attack\"],\n            attack_R: param_right[\"attack\"],\n            release_L: param_left[\"release\"],\n            release_R: param_right[\"release\"],\n            frepingAlpha_L: param_left[\"freping_alpha\"],\n            frepingAlpha_R: param_right[\"freping_alpha\"],\n        }\n\n        let stateBeforeTransmit =  JSON.parse(JSON.stringify(stateData));\n        // add control signals from current state \n        //TODO\n        stateBeforeTransmit = {\n            ...stateBeforeTransmit,\n            afc: this.state.afc,\n            freping: this.state.freping,\n            global_mpo: this.state.global_mpo,\n            aligned: this.state.aligned,\n        }\n        console.log(stateBeforeTransmit);\n        this.setState({\n            stateBeforeTransmit,\n            ...stateData\n        });\n        \n    };\n\n    loadParameter = async () => {\n        try {\n            const response = await axios.post(\"/api/param/getparam\");\n            let data = response.data;\n            console.log(Object.values(data));\n            this.updateParamTable(data);\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    handleControlViaChange = (event) => {\n        this.setState({\n            control_via: event.target.value,\n        });\n    };\n\n    handleAfcChange = (event) => {\n        this.setState({\n            afc: event.target.value,\n\n        });\n    };\n\n    handleFrepingChange = (event) => {\n        this.setState({\n            freping: event.target.value,\n        });\n    };\n\n    handleChannelChange = (event) => {\n        let data = []\n        if(event.target.value === 'Both'){\n            data = ['Left', 'Right'];\n        }else{\n            data = [event.target.value];\n        }\n        console.log(data)\n        this.setState({\n            channels: data\n        })\n        // this.setState({\n        //     channel: event.target.value,\n        // });\n    };\n\n    handleAlignChange = (event) => {\n        this.setState({\n            aligned: event.target.value,\n        });\n    };\n\n    handleInputChange = (event) => {\n        this.setState({\n            [event.target.id]: Number(event.target.value),\n        });\n\n    };\n\n    handleTypeChange = (value) => {\n        this.setState({\n            type: value,\n        });\n    };\n\n    // Called when the input field is changed in param table row\n    handleSubBandInputChange = (event) => {\n        const { channels } = this.state;\n        let inputId = event.target.id.split(\"_\");\n        let index = inputId[1];\n        let type = inputId[0];\n\n        let data = {};\n        for(const channel of channels){\n            // add name suffix based on the channel\n            let type_channel = type + channel_suffix[channel];\n            let values = this.state[type_channel];\n            values[index] = Number(event.target.value);\n            data[type_channel] = values;\n        }\n\n        this.setState(data);\n        if (\n            type === \"cr\" ||\n            type === \"g50\" ||\n            type === \"g80\" ||\n            type === \"g65\"\n        ) {\n            this.updateParameter(index);\n        }\n    };\n\n    // Called when ALL field is changed in parameter table row \n    handleAllInputChange = (event) => {\n        const { channels, bandNumber } = this.state;\n        let inputId = event.target.id.split(\"_\");\n        let type = inputId[0];\n\n\n        let data = {}\n        for( const channel of channels) {\n            let type_channel = type + channel_suffix[channel];\n            let values = this.state[type_channel];\n            for (let i = 0; i < bandNumber; i++) {\n                values[i] = Number(event.target.value);\n            }\n            data[type_channel] = values;\n        }\n        this.setState(data);\n\n        if (\n            type === \"cr\" ||\n            type === \"g50\" ||\n            type === \"g80\" ||\n            type === \"g65\"\n        ) {\n            this.updateAllParameters();\n        }\n    };\n\n    // Update g50 and g80\n    updateParameter = (index) => {\n        const {\n            control_via,\n            channels,\n        } = this.state;\n\n        //update the g50/g80 when control via cr/g65\n        if(control_via === 1){\n            let data = {};\n            for(const channel of channels){\n                let cr_channel  = 'cr' + channel_suffix[channel];\n                let cr_values = this.state[cr_channel].slice();\n                let cr = cr_values[index];\n                if(cr !== 0){\n                    let slope = (1-cr) /cr;\n\n                    let g65_channel  = 'g65' + channel_suffix[channel];\n                    let g65_values = this.state[g65_channel].slice();\n                    let g65 = g65_values[index];\n                    \n                    let g80 = Number(g65) + Number(slope * 15);\n                    let g50 = Number(g65) - Number(slope * 15);\n\n                    // update g80 and g50 values\n                    let g50_channel  = 'g50' + channel_suffix[channel];\n                    let g50_values = this.state[g50_channel].slice();\n                    g50_values[index] = g50;\n                    data[g50_channel] = g50_values;\n\n                    let g80_channel  = 'g80' + channel_suffix[channel];\n                    let g80_values = this.state[g80_channel].slice();\n                    g80_values[index] = g80;\n                    data[g80_channel] = g80_values;\n                }    \n            }\n            this.setState(data);\n        }\n    };\n\n    updateAllParameters = () => {\n        const {\n            control_via,\n            channels,\n            bandNumber,\n        } = this.state;\n\n        if(control_via === 1){\n            let data = {};\n            for(const channel of channels){\n                // construct the param name based on channels and get values\n                let cr_channel  = 'cr' + channel_suffix[channel];\n                let cr_values = this.state[cr_channel].slice();\n\n                let g65_channel  = 'g65' + channel_suffix[channel];\n                let g65_values = this.state[g65_channel].slice();\n\n                let g50_channel  = 'g50' + channel_suffix[channel];\n                let g50_values = this.state[g50_channel].slice();\n\n                let g80_channel  = 'g80' + channel_suffix[channel];\n                let g80_values = this.state[g80_channel].slice();\n\n                for (let index = 0; index < bandNumber; index++) {\n                    let cr = cr_values[index];\n                    if(cr !== 0){\n                        let slope = (1-cr) /cr;\n                        let g65 = g65_values[index];\n                        \n                        let g80 = Number(g65) + Number(slope * 15);\n                        let g50 = Number(g65) - Number(slope * 15);\n\n                        // update g80 and g50 values\n                        g50_values[index] = g50;\n                        data[g50_channel] = g50_values;\n\n                        g80_values[index] = g80;\n                        data[g80_channel] = g80_values;\n                    }\n                }\n                    \n            }\n            this.setState(data);\n        }\n    };\n\n    generateParams = () => {\n        const {\n            afc,\n            aligned,\n            global_mpo,\n            g50_L,\n            g50_R,\n            g80_L,\n            g80_R,\n            kneeLow_L,\n            kneeLow_R,\n            mpo_L,\n            mpo_R,\n            attack_L,\n            attack_R,\n            release_L,\n            release_R,\n            frepingAlpha_L,\n            frepingAlpha_R,\n            freping,\n            bandNumber,\n        } = this.state;\n\n        var params = {\n            left: {\n                en_ha: 1,\n                afc: afc,\n                freping: freping,\n                rear_mics: 0,\n                g50: g50_L,\n                g80: g80_L,\n                knee_low: kneeLow_L,\n                mpo_band: mpo_L,\n                attack: attack_L,\n                release: release_L,\n                global_mpo: global_mpo,\n                freping_alpha: frepingAlpha_L,\n            },\n            right: {\n                en_ha: 1,\n                afc: afc,\n                freping: freping,\n                rear_mics: 0,\n                g50: g50_R,\n                g80: g80_R,\n                knee_low: kneeLow_R,\n                mpo_band: mpo_R,\n                attack: attack_R,\n                release: release_R,\n                global_mpo: global_mpo,\n                freping_alpha: frepingAlpha_R,\n            },\n        };\n        if (bandNumber === 10) {\n            console.log(\"10 band param with aligned: \", aligned);\n            params = {\n                left: {\n                    ...params.left,\n                    aligned,\n                },\n                right: {\n                    ...params.right,\n                    aligned,\n                },\n            };\n        }\n        return params;\n    };\n\n    generateParamsProfile = () => {\n        const {\n            afc,\n            global_mpo,\n            cr_L,\n            cr_R,\n            g50_L,\n            g50_R,\n            g80_L,\n            g80_R,\n            g65_L,\n            g65_R,\n            kneeLow_L,\n            kneeLow_R,\n            mpo_L,\n            mpo_R,\n            attack_L,\n            attack_R,\n            release_L,\n            release_R,\n            frepingAlpha_L,\n            frepingAlpha_R,\n            freping,\n        } = this.state;\n\n        var params = {\n            left: {\n                afc: afc,\n                freping: freping,\n                cr: cr_L,\n                g50: g50_L,\n                g65: g65_L,\n                g80: g80_L,\n                knee_low: kneeLow_L,\n                mpo_band: mpo_L,\n                attack: attack_L,\n                release: release_L,\n                global_mpo: global_mpo,\n                freping_alpha: frepingAlpha_L,\n            },\n            right: {\n                afc: afc,\n                freping: freping,\n                cr: cr_R,\n                g50: g50_R,\n                g65: g65_R,\n                g80: g80_R,\n                knee_low: kneeLow_R,\n                mpo_band: mpo_R,\n                attack: attack_R,\n                release: release_R,\n                global_mpo: global_mpo,\n                freping_alpha: frepingAlpha_R,\n            },\n        };\n\n        return params;\n    };\n\n    // Called when 'save profile' is clicked\n    // Save current values of parameters into DB\n    handleSaveParamsToDB = async (profileName) => {\n        var params = JSON.stringify(this.generateParamsProfile());\n\n        try {\n            const response = await axios.post(\"/api/param/amplification\", {\n                profileName: profileName,\n                bandNumber: this.state.bandNumber,\n                parameters: params,\n            });\n            console.log(response.data);\n        } catch (error) {\n            alert(\"This profile name has already existed\");\n        }\n    };\n\n    // Called when 'load profile' is clicked\n    // Load param values from DB\n    handleLoadParamsFromDB = async (profile) => {\n        try {\n            const params = await JSON.parse(profile);\n            this.updateParamTableFromDB(params);\n        } catch (error) {\n            alert(\"Error parsing JSON\");\n        }\n    };\n\n    onTransmitParams = async () => {\n        var params = this.generateParams();\n        try {\n            const response = await axios.post(\"/api/param/setparam\", {\n                method: \"set\",\n                data: params,\n            });\n            const data = response.data;\n            // Update the current transmitted state\n            this.setState(prevState => {\n                // Omit old stateBeforeTransmit\n                let { stateBeforeTransmit, ...stateData} = prevState;\n                let newStateBeforeTransmit =  JSON.parse(JSON.stringify(stateData));;\n                return {stateBeforeTransmit: newStateBeforeTransmit}\n            })\n            console.log(data);\n        } catch (error) {\n            alert(error.response.data);\n        }\n    };\n\n    // Table for mobile view\n    paramTableRowMobile = (subBand, index) => {\n        const { classes } = this.props;\n        const { channels, type, bandNumber } = this.state;\n\n        if (index !== bandNumber) {\n            return (\n                <ListItem key={`subBand_${subBand}_index_${index}`}>\n                    <ListItemText primary={subBand} />\n                    <ListItemSecondaryAction>\n                        {type.value.map((data_id) => {\n                            var curr_data_id = data_id;\n                            curr_data_id += channel_suffix[channels[0]];\n\n                            return (\n                                <TextField\n                                    className={\n                                        type.value.length === 2\n                                            ? classes.mobileDoubleText\n                                            : null\n                                    }\n                                    key={data_id + \"_\" + index}\n                                    id={data_id + \"_\" + index}\n                                    type=\"number\"\n                                    margin=\"dense\"\n                                    variant=\"outlined\"\n                                    value={this.state[curr_data_id][index]}\n                                    onChange={this.handleSubBandInputChange}\n                                />\n                            );\n                        })}\n                    </ListItemSecondaryAction>\n                </ListItem>\n            );\n        } else {\n            return (\n                <ListItem key={`subBand_${subBand}_index_${index}`}>\n                    <ListItemText primary={subBand} />\n                    <ListItemSecondaryAction>\n                        {type.value.map((data_id) => {\n                            return (\n                                <TextField\n                                    className={\n                                        type.value.length === 2\n                                            ? classes.mobileDoubleText\n                                            : null\n                                    }\n                                    key={data_id + \"_all\"}\n                                    id={data_id + \"_all\"}\n                                    type=\"number\"\n                                    margin=\"dense\"\n                                    variant=\"outlined\"\n                                    onChange={this.handleAllInputChange}\n                                />\n                            );\n                        })}\n                    </ListItemSecondaryAction>\n                </ListItem>\n            );\n        }\n    };\n\n    // Generate table row for each parameter\n    // Disable cr and g65 row when control via = g50/g80\n    // Disable g58 and g80 row when control via = cr/g65\n    paramTableRow = (type) => {\n        const { channels, control_via } = this.state;\n        var data_id = type + channel_suffix[channels[0]];\n\n        var disabled_style = disabled_row[control_via].includes(type)\n            ? { backgroundColor: \"#bdbdbd\", testColor: \"gray\" }\n            : {};\n\n        return (\n            <TableRow hover key={type} style={disabled_style}>\n                <TableCell>\n                    <Typography variant=\"subtitle1\" style={this.getParamLabelColor(data_id)}>\n                        {type}\n                    </Typography>\n                </TableCell>\n                {this.state[data_id].map((value, index) => (\n                    <TableCell\n                        key={`row_index_${index}`}\n                        children={\n                            <FormControl>\n                                <InputBase\n                                    disabled={disabled_row[\n                                        control_via\n                                    ].includes(type)}\n                                    id={type + \"_\" + index}\n                                    fullWidth\n                                    type=\"number\"\n                                    value={value}\n                                    onChange={this.handleSubBandInputChange}\n                                />\n                            </FormControl>\n                        }\n                    />\n                ))}\n                <TableCell\n                    children={\n                        <FormControl>\n                            <Input\n                                id={type + \"_all\"}\n                                fullWidth\n                                type=\"number\"\n                                disabled={disabled_row[control_via].includes(\n                                    type\n                                )}\n                                onChange={this.handleAllInputChange}\n                            />\n                        </FormControl>\n                    }\n                />\n            </TableRow>\n        );\n    };\n\n    renderControlSignals = () => {\n        const { channels } = this.state;\n        return (\n            <List\n                subheader={\n                    <ListSubheader>Researcher Page Controls</ListSubheader>\n                }\n            >\n                <ListItem>\n                    <ListItemText primary=\"Control Via\" />\n                    <ListItemSecondaryAction>\n                        <Radio.Group\n                            value={this.state.control_via}\n                            buttonStyle=\"solid\"\n                            onChange={this.handleControlViaChange}\n                        >\n                            <Radio.Button value={0}>G50/G80</Radio.Button>\n                            <Radio.Button value={1}>CR/G65</Radio.Button>\n                        </Radio.Group>\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemText primary=\"Channel\" />\n                    <ListItemSecondaryAction>\n                        <Radio.Group\n                            value={channels.length === 2 ? 'Both' : channels[0]}\n                            buttonStyle=\"solid\"\n                            onChange={this.handleChannelChange}\n                        >\n                            <Radio.Button value=\"Left\">Left</Radio.Button>\n                            <Radio.Button value=\"Right\">Right</Radio.Button>\n                            <Radio.Button value=\"Both\">Both</Radio.Button>\n                        </Radio.Group>\n                    </ListItemSecondaryAction>\n                </ListItem>\n            </List>\n        );\n    };\n\n    // Get the control signal label color by comparing current value and previously transmitted value\n    // If value is changed, highlight label colors\n    getControlLabelColor = (label) => {\n        return this.state[label] !== this.state.stateBeforeTransmit[label]?{ color: \"#F50057\" }: {color:'black'}\n    }\n\n    // Get the parameter label color by comparing current value and previously transmitted value\n    // If value is changed, highlight label colors\n    getParamLabelColor = (label) => {\n        return _.isEqual(this.state[label],this.state.stateBeforeTransmit[label]) ?{color:'black'}:{ color: \"#F50057\" };\n    }\n\n    renderParamControls = () => {\n        const { bandNumber } = this.state;\n        return (\n            <List subheader={<ListSubheader>RTMHA Controls</ListSubheader>}>\n                <ListItem>\n                    <ListItemText primary=\"AFC\" \n                    style={this.getControlLabelColor('afc')}\n                    />\n\n                    <ListItemSecondaryAction>\n                        <Radio.Group\n                            value={this.state.afc}\n                            buttonStyle=\"solid\"\n                            onChange={this.handleAfcChange}\n                        >\n                            <Radio.Button value={1}>On</Radio.Button>\n                            <Radio.Button value={0}>Off</Radio.Button>\n                        </Radio.Group>\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemText primary=\"Freping\" \n                    style={this.getControlLabelColor('freping')}\n                    />\n                    <ListItemSecondaryAction>\n                        <Radio.Group\n                            value={this.state.freping}\n                            buttonStyle=\"solid\"\n                            onChange={this.handleFrepingChange}\n                        >\n                            <Radio.Button value={1}>On</Radio.Button>\n                            <Radio.Button value={0}>Off</Radio.Button>\n                        </Radio.Group>\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemText primary=\"Global MPO\" \n                    style={this.getControlLabelColor('global_mpo')}\n                    />\n                    <ListItemSecondaryAction>\n                        <TextField\n                            id=\"global_mpo\"\n                            type=\"number\"\n                            margin=\"dense\"\n                            variant=\"outlined\"\n                            value={this.state.global_mpo}\n                            onChange={this.handleInputChange}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n                {\n                    // Render Aligned control based on the bandNUmber\n                    bandNumber === 10 && (\n                        <ListItem>\n                            <ListItemText primary=\"Aligned\" \n                             style={this.getControlLabelColor('aligned')}\n                            />\n                            <ListItemSecondaryAction>\n                                <Radio.Group\n                                    value={this.state.aligned}\n                                    buttonStyle=\"solid\"\n                                    onChange={this.handleAlignChange}\n                                >\n                                    <Radio.Button value={1}>On</Radio.Button>\n                                    <Radio.Button value={0}>Off</Radio.Button>\n                                </Radio.Group>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    )\n                }\n            </List>\n        );\n    };\n\n    getTableColor = () => { \n        const { channels } = this.state;\n        // Both channels\n        if(channels.length === 2){\n            return \"#91f2ad\"; \n        }else if(channels[0] === 'Right'){\n            //Right\n            return \"#ffa6a6\";\n        }else {\n            //Left\n            return \"#b0dfe5\";\n        }\n    }\n\n    render() {\n        const { classes } = this.props;\n        const { type, bandNumber } = this.state;\n\n        return (\n            <div className={classes.content}>\n                <Grid container spacing={3}>\n                    <Grid item md={6} xs={12} spacing={10}>\n                        <Paper style={{ maxWidth: 500 }}>\n                            {this.renderControlSignals()}\n                        </Paper>\n                        <Paper style={{ maxWidth: 500, marginTop: 30 }}>\n                            {this.renderParamControls()}\n                        </Paper>\n                    </Grid>\n                    <Grid item md={6} xs={12}>\n                        <ProfileSetting\n                            save={this.handleSaveParamsToDB}\n                            load={this.handleLoadParamsFromDB}\n                            currProfileBand={bandNumber}\n                        />\n                    </Grid>\n                </Grid>\n\n                <Paper className={classes.paramSection} style={{backgroundColor:this.getTableColor()}}>\n                    <Toolbar>\n                        <Typography color=\"textSecondary\" gutterBottom>\n                            Parameter Settings\n                        </Typography>\n                    </Toolbar>\n                    <Hidden mdUp>\n                        <div className={classes.paramSectionContent}>\n                            <Select\n                                defaultValue={typeOptions[0]}\n                                value={type}\n                                onChange={this.handleTypeChange}\n                                options={typeOptions}\n                            />\n                            <List>\n                                {getBandFrequencies(\n                                    bandNumber\n                                ).map((value, index) =>\n                                    this.paramTableRowMobile(value, index)\n                                )}\n                            </List>\n                            <Grid\n                                container\n                                spacing={2}\n                                className={classes.paramControlButtons}\n                            >\n                                <Grid item xs={12} sm={6}>\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        fullWidth\n                                        onClick={this.loadParameter}\n                                    >\n                                        Pull\n                                    </Button>\n                                </Grid>\n                                <Grid item xs={12} sm={6}>\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        fullWidth\n                                        onClick={this.onTransmitParams}\n                                    >\n                                        Transmit\n                                    </Button>\n                                </Grid>\n                            </Grid>\n                        </div>\n                    </Hidden>\n\n                    <Hidden smDown>\n                        <div className={classes.paramSectionContent}>\n                            <Table >\n                                <TableHead>\n                                    <TableRow>\n                                        {[\"\"]\n                                            .concat(\n                                                getBandFrequencies(bandNumber)\n                                            )\n                                            .map((text) => (\n                                                <TableCell key={text}>\n                                                    <Typography\n                                                        variant=\"subtitle1\"\n                                                        color=\"textSecondary\"\n                                                    >\n                                                        {text}\n                                                    </Typography>\n                                                </TableCell>\n                                            ))}\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {[\n                                        \"cr\",\n                                        \"g50\",\n                                        \"g65\",\n                                        \"g80\",\n                                        \"kneeLow\",\n                                        \"mpo\",\n                                        \"attack\",\n                                        \"release\",\n                                        \"frepingAlpha\",\n                                    ].map((text) => this.paramTableRow(text))}\n                                </TableBody>\n                            </Table>\n                            <Grid\n                                container\n                                spacing={2}\n                                className={classes.paramControlButtons}\n                            >\n                                <Grid item xs={12} sm={6}>\n                                    <Tooltip title=\"Get the latest setting from OSP devices\">\n                                        <Button\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            fullWidth\n                                            onClick={this.loadParameter}\n                                        >\n                                            Pull\n                                        </Button>\n                                    </Tooltip>\n                                </Grid>\n                                <Grid item xs={12} sm={6}>\n                                    <Tooltip title=\"Update current setting to OSP devices\">\n                                        <Button\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            fullWidth\n                                            onClick={this.onTransmitParams}\n                                        >\n                                            Transmit\n                                        </Button>\n                                    </Tooltip>\n                                </Grid>\n                            </Grid>\n                        </div>\n                    </Hidden>\n                </Paper>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(Amplification);\n"]},"metadata":{},"sourceType":"module"}