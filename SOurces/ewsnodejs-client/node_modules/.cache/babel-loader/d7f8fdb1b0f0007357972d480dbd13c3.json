{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditor.react\n * @format\n * \n * @preventMunge\n */\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DefaultDraftBlockRenderMap = require('./DefaultDraftBlockRenderMap');\n\nvar DefaultDraftInlineStyle = require('./DefaultDraftInlineStyle');\n\nvar DraftEditorCompositionHandler = require('./DraftEditorCompositionHandler');\n\nvar DraftEditorContents = require('./DraftEditorContents.react');\n\nvar DraftEditorDragHandler = require('./DraftEditorDragHandler');\n\nvar DraftEditorEditHandler = require('./DraftEditorEditHandler');\n\nvar DraftEditorPlaceholder = require('./DraftEditorPlaceholder.react');\n\nvar EditorState = require('./EditorState');\n\nvar React = require('react');\n\nvar ReactDOM = require('react-dom');\n\nvar Scroll = require('fbjs/lib/Scroll');\n\nvar Style = require('fbjs/lib/Style');\n\nvar UserAgent = require('fbjs/lib/UserAgent');\n\nvar cx = require('fbjs/lib/cx');\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\n\nvar generateRandomKey = require('./generateRandomKey');\n\nvar getDefaultKeyBinding = require('./getDefaultKeyBinding');\n\nvar getScrollPosition = require('fbjs/lib/getScrollPosition');\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar nullthrows = require('fbjs/lib/nullthrows');\n\nvar isIE = UserAgent.isBrowser('IE'); // IE does not support the `input` event on contentEditable, so we can't\n// observe spellcheck behavior.\n\nvar allowSpellCheck = !isIE; // Define a set of handler objects to correspond to each possible `mode`\n// of editor behavior.\n\nvar handlerMap = {\n  edit: DraftEditorEditHandler,\n  composite: DraftEditorCompositionHandler,\n  drag: DraftEditorDragHandler,\n  cut: null,\n  render: null\n};\n/**\n * `DraftEditor` is the root editor component. It composes a `contentEditable`\n * div, and provides a wide variety of useful function props for managing the\n * state of the editor. See `DraftEditorProps` for details.\n */\n\nvar DraftEditor = function (_React$Component) {\n  _inherits(DraftEditor, _React$Component);\n\n  function DraftEditor(props) {\n    _classCallCheck(this, DraftEditor);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.focus = function (scrollPosition) {\n      var editorState = _this.props.editorState;\n      var alreadyHasFocus = editorState.getSelection().getHasFocus();\n      var editorNode = ReactDOM.findDOMNode(_this.editor);\n\n      if (!editorNode) {\n        // once in a while people call 'focus' in a setTimeout, and the node has\n        // been deleted, so it can be null in that case.\n        return;\n      }\n\n      var scrollParent = Style.getScrollParent(editorNode);\n\n      var _ref = scrollPosition || getScrollPosition(scrollParent),\n          x = _ref.x,\n          y = _ref.y;\n\n      !(editorNode instanceof HTMLElement) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'editorNode is not an HTMLElement') : invariant(false) : void 0;\n      editorNode.focus(); // Restore scroll position\n\n      if (scrollParent === window) {\n        window.scrollTo(x, y);\n      } else {\n        Scroll.setTop(scrollParent, y);\n      } // On Chrome and Safari, calling focus on contenteditable focuses the\n      // cursor at the first character. This is something you don't expect when\n      // you're clicking on an input element but not directly on a character.\n      // Put the cursor back where it was before the blur.\n\n\n      if (!alreadyHasFocus) {\n        _this.update(EditorState.forceSelection(editorState, editorState.getSelection()));\n      }\n    };\n\n    _this.blur = function () {\n      var editorNode = ReactDOM.findDOMNode(_this.editor);\n      !(editorNode instanceof HTMLElement) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'editorNode is not an HTMLElement') : invariant(false) : void 0;\n      editorNode.blur();\n    };\n\n    _this.setMode = function (mode) {\n      _this._handler = handlerMap[mode];\n    };\n\n    _this.exitCurrentMode = function () {\n      _this.setMode('edit');\n    };\n\n    _this.restoreEditorDOM = function (scrollPosition) {\n      _this.setState({\n        contentsKey: _this.state.contentsKey + 1\n      }, function () {\n        _this.focus(scrollPosition);\n      });\n    };\n\n    _this.setClipboard = function (clipboard) {\n      _this._clipboard = clipboard;\n    };\n\n    _this.getClipboard = function () {\n      return _this._clipboard;\n    };\n\n    _this.update = function (editorState) {\n      _this._latestEditorState = editorState;\n\n      _this.props.onChange(editorState);\n    };\n\n    _this.onDragEnter = function () {\n      _this._dragCount++;\n    };\n\n    _this.onDragLeave = function () {\n      _this._dragCount--;\n\n      if (_this._dragCount === 0) {\n        _this.exitCurrentMode();\n      }\n    };\n\n    _this._blockSelectEvents = false;\n    _this._clipboard = null;\n    _this._handler = null;\n    _this._dragCount = 0;\n    _this._editorKey = props.editorKey || generateRandomKey();\n    _this._placeholderAccessibilityID = 'placeholder-' + _this._editorKey;\n    _this._latestEditorState = props.editorState;\n    _this._latestCommittedEditorState = props.editorState;\n    _this._onBeforeInput = _this._buildHandler('onBeforeInput');\n    _this._onBlur = _this._buildHandler('onBlur');\n    _this._onCharacterData = _this._buildHandler('onCharacterData');\n    _this._onCompositionEnd = _this._buildHandler('onCompositionEnd');\n    _this._onCompositionStart = _this._buildHandler('onCompositionStart');\n    _this._onCopy = _this._buildHandler('onCopy');\n    _this._onCut = _this._buildHandler('onCut');\n    _this._onDragEnd = _this._buildHandler('onDragEnd');\n    _this._onDragOver = _this._buildHandler('onDragOver');\n    _this._onDragStart = _this._buildHandler('onDragStart');\n    _this._onDrop = _this._buildHandler('onDrop');\n    _this._onInput = _this._buildHandler('onInput');\n    _this._onFocus = _this._buildHandler('onFocus');\n    _this._onKeyDown = _this._buildHandler('onKeyDown');\n    _this._onKeyPress = _this._buildHandler('onKeyPress');\n    _this._onKeyUp = _this._buildHandler('onKeyUp');\n    _this._onMouseDown = _this._buildHandler('onMouseDown');\n    _this._onMouseUp = _this._buildHandler('onMouseUp');\n    _this._onPaste = _this._buildHandler('onPaste');\n    _this._onSelect = _this._buildHandler('onSelect');\n\n    _this.getEditorKey = function () {\n      return _this._editorKey;\n    }; // See `restoreEditorDOM()`.\n\n\n    _this.state = {\n      contentsKey: 0\n    };\n    return _this;\n  }\n  /**\n   * Build a method that will pass the event to the specified handler method.\n   * This allows us to look up the correct handler function for the current\n   * editor mode, if any has been specified.\n   */\n\n  /**\n   * Define proxies that can route events to the current handler.\n   */\n\n\n  DraftEditor.prototype._buildHandler = function _buildHandler(eventName) {\n    var _this2 = this;\n\n    return function (e) {\n      if (!_this2.props.readOnly) {\n        var method = _this2._handler && _this2._handler[eventName];\n        method && method(_this2, e);\n      }\n    };\n  };\n\n  DraftEditor.prototype._showPlaceholder = function _showPlaceholder() {\n    return !!this.props.placeholder && !this.props.editorState.isInCompositionMode() && !this.props.editorState.getCurrentContent().hasText();\n  };\n\n  DraftEditor.prototype._renderPlaceholder = function _renderPlaceholder() {\n    if (this._showPlaceholder()) {\n      var placeHolderProps = {\n        text: nullthrows(this.props.placeholder),\n        editorState: this.props.editorState,\n        textAlignment: this.props.textAlignment,\n        accessibilityID: this._placeholderAccessibilityID\n      };\n      return React.createElement(DraftEditorPlaceholder, placeHolderProps);\n    }\n\n    return null;\n  };\n\n  DraftEditor.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        blockStyleFn = _props.blockStyleFn,\n        customStyleFn = _props.customStyleFn,\n        customStyleMap = _props.customStyleMap,\n        editorState = _props.editorState,\n        readOnly = _props.readOnly,\n        textAlignment = _props.textAlignment,\n        textDirectionality = _props.textDirectionality;\n    var rootClass = cx({\n      'DraftEditor/root': true,\n      'DraftEditor/alignLeft': textAlignment === 'left',\n      'DraftEditor/alignRight': textAlignment === 'right',\n      'DraftEditor/alignCenter': textAlignment === 'center'\n    });\n    var contentStyle = {\n      outline: 'none',\n      // fix parent-draggable Safari bug. #1326\n      userSelect: 'text',\n      WebkitUserSelect: 'text',\n      whiteSpace: 'pre-wrap',\n      wordWrap: 'break-word'\n    }; // The aria-expanded and aria-haspopup properties should only be rendered\n    // for a combobox.\n\n    var ariaRole = this.props.role || 'textbox';\n    var ariaExpanded = ariaRole === 'combobox' ? !!this.props.ariaExpanded : null;\n    var editorContentsProps = {\n      blockRenderMap: blockRenderMap,\n      blockRendererFn: blockRendererFn,\n      blockStyleFn: blockStyleFn,\n      customStyleMap: _extends({}, DefaultDraftInlineStyle, customStyleMap),\n      customStyleFn: customStyleFn,\n      editorKey: this._editorKey,\n      editorState: editorState,\n      key: 'contents' + this.state.contentsKey,\n      textDirectionality: textDirectionality\n    };\n    return React.createElement('div', {\n      className: rootClass\n    }, this._renderPlaceholder(), React.createElement('div', {\n      className: cx('DraftEditor/editorContainer'),\n      ref: function ref(_ref3) {\n        return _this3.editorContainer = _ref3;\n      }\n    }, React.createElement('div', {\n      'aria-activedescendant': readOnly ? null : this.props.ariaActiveDescendantID,\n      'aria-autocomplete': readOnly ? null : this.props.ariaAutoComplete,\n      'aria-controls': readOnly ? null : this.props.ariaControls,\n      'aria-describedby': this.props.ariaDescribedBy || this._placeholderAccessibilityID,\n      'aria-expanded': readOnly ? null : ariaExpanded,\n      'aria-label': this.props.ariaLabel,\n      'aria-labelledby': this.props.ariaLabelledBy,\n      'aria-multiline': this.props.ariaMultiline,\n      autoCapitalize: this.props.autoCapitalize,\n      autoComplete: this.props.autoComplete,\n      autoCorrect: this.props.autoCorrect,\n      className: cx({\n        // Chrome's built-in translation feature mutates the DOM in ways\n        // that Draft doesn't expect (ex: adding <font> tags inside\n        // DraftEditorLeaf spans) and causes problems. We add notranslate\n        // here which makes its autotranslation skip over this subtree.\n        notranslate: !readOnly,\n        'public/DraftEditor/content': true\n      }),\n      contentEditable: !readOnly,\n      'data-testid': this.props.webDriverTestID,\n      onBeforeInput: this._onBeforeInput,\n      onBlur: this._onBlur,\n      onCompositionEnd: this._onCompositionEnd,\n      onCompositionStart: this._onCompositionStart,\n      onCopy: this._onCopy,\n      onCut: this._onCut,\n      onDragEnd: this._onDragEnd,\n      onDragEnter: this.onDragEnter,\n      onDragLeave: this.onDragLeave,\n      onDragOver: this._onDragOver,\n      onDragStart: this._onDragStart,\n      onDrop: this._onDrop,\n      onFocus: this._onFocus,\n      onInput: this._onInput,\n      onKeyDown: this._onKeyDown,\n      onKeyPress: this._onKeyPress,\n      onKeyUp: this._onKeyUp,\n      onMouseUp: this._onMouseUp,\n      onPaste: this._onPaste,\n      onSelect: this._onSelect,\n      ref: function ref(_ref2) {\n        return _this3.editor = _ref2;\n      },\n      role: readOnly ? null : ariaRole,\n      spellCheck: allowSpellCheck && this.props.spellCheck,\n      style: contentStyle,\n      suppressContentEditableWarning: true,\n      tabIndex: this.props.tabIndex\n    }, React.createElement(DraftEditorContents, editorContentsProps))));\n  };\n\n  DraftEditor.prototype.componentDidMount = function componentDidMount() {\n    this.setMode('edit');\n    /**\n     * IE has a hardcoded \"feature\" that attempts to convert link text into\n     * anchors in contentEditable DOM. This breaks the editor's expectations of\n     * the DOM, and control is lost. Disable it to make IE behave.\n     * See: http://blogs.msdn.com/b/ieinternals/archive/2010/09/15/\n     * ie9-beta-minor-change-list.aspx\n     */\n\n    if (isIE) {\n      document.execCommand('AutoUrlDetect', false, false);\n    }\n  };\n  /**\n   * Prevent selection events from affecting the current editor state. This\n   * is mostly intended to defend against IE, which fires off `selectionchange`\n   * events regardless of whether the selection is set via the browser or\n   * programmatically. We only care about selection events that occur because\n   * of browser interaction, not re-renders and forced selections.\n   */\n\n\n  DraftEditor.prototype.componentWillUpdate = function componentWillUpdate(nextProps) {\n    this._blockSelectEvents = true;\n    this._latestEditorState = nextProps.editorState;\n  };\n\n  DraftEditor.prototype.componentDidUpdate = function componentDidUpdate() {\n    this._blockSelectEvents = false;\n    this._latestCommittedEditorState = this.props.editorState;\n  };\n  /**\n   * Used via `this.focus()`.\n   *\n   * Force focus back onto the editor node.\n   *\n   * We attempt to preserve scroll position when focusing. You can also pass\n   * a specified scroll position (for cases like `cut` behavior where it should\n   * be restored to a known position).\n   */\n\n  /**\n   * Used via `this.setMode(...)`.\n   *\n   * Set the behavior mode for the editor component. This switches the current\n   * handler module to ensure that DOM events are managed appropriately for\n   * the active mode.\n   */\n\n  /**\n   * Used via `this.restoreEditorDOM()`.\n   *\n   * Force a complete re-render of the DraftEditorContents based on the current\n   * EditorState. This is useful when we know we are going to lose control of\n   * the DOM state (cut command, IME) and we want to make sure that\n   * reconciliation occurs on a version of the DOM that is synchronized with\n   * our EditorState.\n   */\n\n  /**\n   * Used via `this.setClipboard(...)`.\n   *\n   * Set the clipboard state for a cut/copy event.\n   */\n\n  /**\n   * Used via `this.getClipboard()`.\n   *\n   * Retrieve the clipboard state for a cut/copy event.\n   */\n\n  /**\n   * Used via `this.update(...)`.\n   *\n   * Propagate a new `EditorState` object to higher-level components. This is\n   * the method by which event handlers inform the `DraftEditor` component of\n   * state changes. A component that composes a `DraftEditor` **must** provide\n   * an `onChange` prop to receive state updates passed along from this\n   * function.\n   */\n\n  /**\n   * Used in conjunction with `onDragLeave()`, by counting the number of times\n   * a dragged element enters and leaves the editor (or any of its children),\n   * to determine when the dragged element absolutely leaves the editor.\n   */\n\n  /**\n   * See `onDragEnter()`.\n   */\n\n\n  return DraftEditor;\n}(React.Component);\n\nDraftEditor.defaultProps = {\n  blockRenderMap: DefaultDraftBlockRenderMap,\n  blockRendererFn: emptyFunction.thatReturnsNull,\n  blockStyleFn: emptyFunction.thatReturns(''),\n  keyBindingFn: getDefaultKeyBinding,\n  readOnly: false,\n  spellCheck: false,\n  stripPastedStyles: false\n};\nmodule.exports = DraftEditor;","map":{"version":3,"sources":["/opt/OpenSpeechPlatform-UCSD/Software/ewsnodejs-client/node_modules/draft-js/lib/DraftEditor.react.js"],"names":["_assign","require","_extends","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder","EditorState","React","ReactDOM","Scroll","Style","UserAgent","cx","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","invariant","nullthrows","isIE","isBrowser","allowSpellCheck","handlerMap","edit","composite","drag","cut","render","DraftEditor","_React$Component","props","_this","focus","scrollPosition","editorState","alreadyHasFocus","getSelection","getHasFocus","editorNode","findDOMNode","editor","scrollParent","getScrollParent","_ref","x","y","HTMLElement","process","env","NODE_ENV","window","scrollTo","setTop","update","forceSelection","blur","setMode","mode","_handler","exitCurrentMode","restoreEditorDOM","setState","contentsKey","state","setClipboard","clipboard","_clipboard","getClipboard","_latestEditorState","onChange","onDragEnter","_dragCount","onDragLeave","_blockSelectEvents","_editorKey","editorKey","_placeholderAccessibilityID","_latestCommittedEditorState","_onBeforeInput","_buildHandler","_onBlur","_onCharacterData","_onCompositionEnd","_onCompositionStart","_onCopy","_onCut","_onDragEnd","_onDragOver","_onDragStart","_onDrop","_onInput","_onFocus","_onKeyDown","_onKeyPress","_onKeyUp","_onMouseDown","_onMouseUp","_onPaste","_onSelect","getEditorKey","eventName","_this2","e","readOnly","method","_showPlaceholder","placeholder","isInCompositionMode","getCurrentContent","hasText","_renderPlaceholder","placeHolderProps","text","textAlignment","accessibilityID","createElement","_this3","_props","blockRenderMap","blockRendererFn","blockStyleFn","customStyleFn","customStyleMap","textDirectionality","rootClass","contentStyle","outline","userSelect","WebkitUserSelect","whiteSpace","wordWrap","ariaRole","role","ariaExpanded","editorContentsProps","className","ref","_ref3","editorContainer","ariaActiveDescendantID","ariaAutoComplete","ariaControls","ariaDescribedBy","ariaLabel","ariaLabelledBy","ariaMultiline","autoCapitalize","autoComplete","autoCorrect","notranslate","contentEditable","webDriverTestID","onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragOver","onDragStart","onDrop","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onMouseUp","onPaste","onSelect","_ref2","spellCheck","style","suppressContentEditableWarning","tabIndex","componentDidMount","document","execCommand","componentWillUpdate","nextProps","componentDidUpdate","Component","defaultProps","thatReturnsNull","thatReturns","keyBindingFn","stripPastedStyles","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditor.react\n * @format\n * \n * @preventMunge\n */\n\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DefaultDraftBlockRenderMap = require('./DefaultDraftBlockRenderMap');\nvar DefaultDraftInlineStyle = require('./DefaultDraftInlineStyle');\nvar DraftEditorCompositionHandler = require('./DraftEditorCompositionHandler');\nvar DraftEditorContents = require('./DraftEditorContents.react');\nvar DraftEditorDragHandler = require('./DraftEditorDragHandler');\nvar DraftEditorEditHandler = require('./DraftEditorEditHandler');\nvar DraftEditorPlaceholder = require('./DraftEditorPlaceholder.react');\nvar EditorState = require('./EditorState');\nvar React = require('react');\nvar ReactDOM = require('react-dom');\nvar Scroll = require('fbjs/lib/Scroll');\nvar Style = require('fbjs/lib/Style');\nvar UserAgent = require('fbjs/lib/UserAgent');\n\nvar cx = require('fbjs/lib/cx');\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar generateRandomKey = require('./generateRandomKey');\nvar getDefaultKeyBinding = require('./getDefaultKeyBinding');\nvar getScrollPosition = require('fbjs/lib/getScrollPosition');\nvar invariant = require('fbjs/lib/invariant');\nvar nullthrows = require('fbjs/lib/nullthrows');\n\nvar isIE = UserAgent.isBrowser('IE');\n\n// IE does not support the `input` event on contentEditable, so we can't\n// observe spellcheck behavior.\nvar allowSpellCheck = !isIE;\n\n// Define a set of handler objects to correspond to each possible `mode`\n// of editor behavior.\nvar handlerMap = {\n  edit: DraftEditorEditHandler,\n  composite: DraftEditorCompositionHandler,\n  drag: DraftEditorDragHandler,\n  cut: null,\n  render: null\n};\n\n/**\n * `DraftEditor` is the root editor component. It composes a `contentEditable`\n * div, and provides a wide variety of useful function props for managing the\n * state of the editor. See `DraftEditorProps` for details.\n */\nvar DraftEditor = function (_React$Component) {\n  _inherits(DraftEditor, _React$Component);\n\n  function DraftEditor(props) {\n    _classCallCheck(this, DraftEditor);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.focus = function (scrollPosition) {\n      var editorState = _this.props.editorState;\n\n      var alreadyHasFocus = editorState.getSelection().getHasFocus();\n      var editorNode = ReactDOM.findDOMNode(_this.editor);\n\n      if (!editorNode) {\n        // once in a while people call 'focus' in a setTimeout, and the node has\n        // been deleted, so it can be null in that case.\n        return;\n      }\n\n      var scrollParent = Style.getScrollParent(editorNode);\n\n      var _ref = scrollPosition || getScrollPosition(scrollParent),\n          x = _ref.x,\n          y = _ref.y;\n\n      !(editorNode instanceof HTMLElement) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'editorNode is not an HTMLElement') : invariant(false) : void 0;\n      editorNode.focus();\n\n      // Restore scroll position\n      if (scrollParent === window) {\n        window.scrollTo(x, y);\n      } else {\n        Scroll.setTop(scrollParent, y);\n      }\n\n      // On Chrome and Safari, calling focus on contenteditable focuses the\n      // cursor at the first character. This is something you don't expect when\n      // you're clicking on an input element but not directly on a character.\n      // Put the cursor back where it was before the blur.\n      if (!alreadyHasFocus) {\n        _this.update(EditorState.forceSelection(editorState, editorState.getSelection()));\n      }\n    };\n\n    _this.blur = function () {\n      var editorNode = ReactDOM.findDOMNode(_this.editor);\n      !(editorNode instanceof HTMLElement) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'editorNode is not an HTMLElement') : invariant(false) : void 0;\n      editorNode.blur();\n    };\n\n    _this.setMode = function (mode) {\n      _this._handler = handlerMap[mode];\n    };\n\n    _this.exitCurrentMode = function () {\n      _this.setMode('edit');\n    };\n\n    _this.restoreEditorDOM = function (scrollPosition) {\n      _this.setState({ contentsKey: _this.state.contentsKey + 1 }, function () {\n        _this.focus(scrollPosition);\n      });\n    };\n\n    _this.setClipboard = function (clipboard) {\n      _this._clipboard = clipboard;\n    };\n\n    _this.getClipboard = function () {\n      return _this._clipboard;\n    };\n\n    _this.update = function (editorState) {\n      _this._latestEditorState = editorState;\n      _this.props.onChange(editorState);\n    };\n\n    _this.onDragEnter = function () {\n      _this._dragCount++;\n    };\n\n    _this.onDragLeave = function () {\n      _this._dragCount--;\n      if (_this._dragCount === 0) {\n        _this.exitCurrentMode();\n      }\n    };\n\n    _this._blockSelectEvents = false;\n    _this._clipboard = null;\n    _this._handler = null;\n    _this._dragCount = 0;\n    _this._editorKey = props.editorKey || generateRandomKey();\n    _this._placeholderAccessibilityID = 'placeholder-' + _this._editorKey;\n    _this._latestEditorState = props.editorState;\n    _this._latestCommittedEditorState = props.editorState;\n\n    _this._onBeforeInput = _this._buildHandler('onBeforeInput');\n    _this._onBlur = _this._buildHandler('onBlur');\n    _this._onCharacterData = _this._buildHandler('onCharacterData');\n    _this._onCompositionEnd = _this._buildHandler('onCompositionEnd');\n    _this._onCompositionStart = _this._buildHandler('onCompositionStart');\n    _this._onCopy = _this._buildHandler('onCopy');\n    _this._onCut = _this._buildHandler('onCut');\n    _this._onDragEnd = _this._buildHandler('onDragEnd');\n    _this._onDragOver = _this._buildHandler('onDragOver');\n    _this._onDragStart = _this._buildHandler('onDragStart');\n    _this._onDrop = _this._buildHandler('onDrop');\n    _this._onInput = _this._buildHandler('onInput');\n    _this._onFocus = _this._buildHandler('onFocus');\n    _this._onKeyDown = _this._buildHandler('onKeyDown');\n    _this._onKeyPress = _this._buildHandler('onKeyPress');\n    _this._onKeyUp = _this._buildHandler('onKeyUp');\n    _this._onMouseDown = _this._buildHandler('onMouseDown');\n    _this._onMouseUp = _this._buildHandler('onMouseUp');\n    _this._onPaste = _this._buildHandler('onPaste');\n    _this._onSelect = _this._buildHandler('onSelect');\n\n    _this.getEditorKey = function () {\n      return _this._editorKey;\n    };\n\n    // See `restoreEditorDOM()`.\n    _this.state = { contentsKey: 0 };\n    return _this;\n  }\n\n  /**\n   * Build a method that will pass the event to the specified handler method.\n   * This allows us to look up the correct handler function for the current\n   * editor mode, if any has been specified.\n   */\n\n\n  /**\n   * Define proxies that can route events to the current handler.\n   */\n\n\n  DraftEditor.prototype._buildHandler = function _buildHandler(eventName) {\n    var _this2 = this;\n\n    return function (e) {\n      if (!_this2.props.readOnly) {\n        var method = _this2._handler && _this2._handler[eventName];\n        method && method(_this2, e);\n      }\n    };\n  };\n\n  DraftEditor.prototype._showPlaceholder = function _showPlaceholder() {\n    return !!this.props.placeholder && !this.props.editorState.isInCompositionMode() && !this.props.editorState.getCurrentContent().hasText();\n  };\n\n  DraftEditor.prototype._renderPlaceholder = function _renderPlaceholder() {\n    if (this._showPlaceholder()) {\n      var placeHolderProps = {\n        text: nullthrows(this.props.placeholder),\n        editorState: this.props.editorState,\n        textAlignment: this.props.textAlignment,\n        accessibilityID: this._placeholderAccessibilityID\n      };\n\n      return React.createElement(DraftEditorPlaceholder, placeHolderProps);\n    }\n    return null;\n  };\n\n  DraftEditor.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        blockStyleFn = _props.blockStyleFn,\n        customStyleFn = _props.customStyleFn,\n        customStyleMap = _props.customStyleMap,\n        editorState = _props.editorState,\n        readOnly = _props.readOnly,\n        textAlignment = _props.textAlignment,\n        textDirectionality = _props.textDirectionality;\n\n\n    var rootClass = cx({\n      'DraftEditor/root': true,\n      'DraftEditor/alignLeft': textAlignment === 'left',\n      'DraftEditor/alignRight': textAlignment === 'right',\n      'DraftEditor/alignCenter': textAlignment === 'center'\n    });\n\n    var contentStyle = {\n      outline: 'none',\n      // fix parent-draggable Safari bug. #1326\n      userSelect: 'text',\n      WebkitUserSelect: 'text',\n      whiteSpace: 'pre-wrap',\n      wordWrap: 'break-word'\n    };\n\n    // The aria-expanded and aria-haspopup properties should only be rendered\n    // for a combobox.\n    var ariaRole = this.props.role || 'textbox';\n    var ariaExpanded = ariaRole === 'combobox' ? !!this.props.ariaExpanded : null;\n\n    var editorContentsProps = {\n      blockRenderMap: blockRenderMap,\n      blockRendererFn: blockRendererFn,\n      blockStyleFn: blockStyleFn,\n      customStyleMap: _extends({}, DefaultDraftInlineStyle, customStyleMap),\n      customStyleFn: customStyleFn,\n      editorKey: this._editorKey,\n      editorState: editorState,\n      key: 'contents' + this.state.contentsKey,\n      textDirectionality: textDirectionality\n    };\n\n    return React.createElement(\n      'div',\n      { className: rootClass },\n      this._renderPlaceholder(),\n      React.createElement(\n        'div',\n        {\n          className: cx('DraftEditor/editorContainer'),\n          ref: function ref(_ref3) {\n            return _this3.editorContainer = _ref3;\n          } },\n        React.createElement(\n          'div',\n          {\n            'aria-activedescendant': readOnly ? null : this.props.ariaActiveDescendantID,\n            'aria-autocomplete': readOnly ? null : this.props.ariaAutoComplete,\n            'aria-controls': readOnly ? null : this.props.ariaControls,\n            'aria-describedby': this.props.ariaDescribedBy || this._placeholderAccessibilityID,\n            'aria-expanded': readOnly ? null : ariaExpanded,\n            'aria-label': this.props.ariaLabel,\n            'aria-labelledby': this.props.ariaLabelledBy,\n            'aria-multiline': this.props.ariaMultiline,\n            autoCapitalize: this.props.autoCapitalize,\n            autoComplete: this.props.autoComplete,\n            autoCorrect: this.props.autoCorrect,\n            className: cx({\n              // Chrome's built-in translation feature mutates the DOM in ways\n              // that Draft doesn't expect (ex: adding <font> tags inside\n              // DraftEditorLeaf spans) and causes problems. We add notranslate\n              // here which makes its autotranslation skip over this subtree.\n              notranslate: !readOnly,\n              'public/DraftEditor/content': true\n            }),\n            contentEditable: !readOnly,\n            'data-testid': this.props.webDriverTestID,\n            onBeforeInput: this._onBeforeInput,\n            onBlur: this._onBlur,\n            onCompositionEnd: this._onCompositionEnd,\n            onCompositionStart: this._onCompositionStart,\n            onCopy: this._onCopy,\n            onCut: this._onCut,\n            onDragEnd: this._onDragEnd,\n            onDragEnter: this.onDragEnter,\n            onDragLeave: this.onDragLeave,\n            onDragOver: this._onDragOver,\n            onDragStart: this._onDragStart,\n            onDrop: this._onDrop,\n            onFocus: this._onFocus,\n            onInput: this._onInput,\n            onKeyDown: this._onKeyDown,\n            onKeyPress: this._onKeyPress,\n            onKeyUp: this._onKeyUp,\n            onMouseUp: this._onMouseUp,\n            onPaste: this._onPaste,\n            onSelect: this._onSelect,\n            ref: function ref(_ref2) {\n              return _this3.editor = _ref2;\n            },\n            role: readOnly ? null : ariaRole,\n            spellCheck: allowSpellCheck && this.props.spellCheck,\n            style: contentStyle,\n            suppressContentEditableWarning: true,\n            tabIndex: this.props.tabIndex },\n          React.createElement(DraftEditorContents, editorContentsProps)\n        )\n      )\n    );\n  };\n\n  DraftEditor.prototype.componentDidMount = function componentDidMount() {\n    this.setMode('edit');\n\n    /**\n     * IE has a hardcoded \"feature\" that attempts to convert link text into\n     * anchors in contentEditable DOM. This breaks the editor's expectations of\n     * the DOM, and control is lost. Disable it to make IE behave.\n     * See: http://blogs.msdn.com/b/ieinternals/archive/2010/09/15/\n     * ie9-beta-minor-change-list.aspx\n     */\n    if (isIE) {\n      document.execCommand('AutoUrlDetect', false, false);\n    }\n  };\n\n  /**\n   * Prevent selection events from affecting the current editor state. This\n   * is mostly intended to defend against IE, which fires off `selectionchange`\n   * events regardless of whether the selection is set via the browser or\n   * programmatically. We only care about selection events that occur because\n   * of browser interaction, not re-renders and forced selections.\n   */\n\n\n  DraftEditor.prototype.componentWillUpdate = function componentWillUpdate(nextProps) {\n    this._blockSelectEvents = true;\n    this._latestEditorState = nextProps.editorState;\n  };\n\n  DraftEditor.prototype.componentDidUpdate = function componentDidUpdate() {\n    this._blockSelectEvents = false;\n    this._latestCommittedEditorState = this.props.editorState;\n  };\n\n  /**\n   * Used via `this.focus()`.\n   *\n   * Force focus back onto the editor node.\n   *\n   * We attempt to preserve scroll position when focusing. You can also pass\n   * a specified scroll position (for cases like `cut` behavior where it should\n   * be restored to a known position).\n   */\n\n\n  /**\n   * Used via `this.setMode(...)`.\n   *\n   * Set the behavior mode for the editor component. This switches the current\n   * handler module to ensure that DOM events are managed appropriately for\n   * the active mode.\n   */\n\n\n  /**\n   * Used via `this.restoreEditorDOM()`.\n   *\n   * Force a complete re-render of the DraftEditorContents based on the current\n   * EditorState. This is useful when we know we are going to lose control of\n   * the DOM state (cut command, IME) and we want to make sure that\n   * reconciliation occurs on a version of the DOM that is synchronized with\n   * our EditorState.\n   */\n\n\n  /**\n   * Used via `this.setClipboard(...)`.\n   *\n   * Set the clipboard state for a cut/copy event.\n   */\n\n\n  /**\n   * Used via `this.getClipboard()`.\n   *\n   * Retrieve the clipboard state for a cut/copy event.\n   */\n\n\n  /**\n   * Used via `this.update(...)`.\n   *\n   * Propagate a new `EditorState` object to higher-level components. This is\n   * the method by which event handlers inform the `DraftEditor` component of\n   * state changes. A component that composes a `DraftEditor` **must** provide\n   * an `onChange` prop to receive state updates passed along from this\n   * function.\n   */\n\n\n  /**\n   * Used in conjunction with `onDragLeave()`, by counting the number of times\n   * a dragged element enters and leaves the editor (or any of its children),\n   * to determine when the dragged element absolutely leaves the editor.\n   */\n\n\n  /**\n   * See `onDragEnter()`.\n   */\n\n\n  return DraftEditor;\n}(React.Component);\n\nDraftEditor.defaultProps = {\n  blockRenderMap: DefaultDraftBlockRenderMap,\n  blockRendererFn: emptyFunction.thatReturnsNull,\n  blockStyleFn: emptyFunction.thatReturns(''),\n  keyBindingFn: getDefaultKeyBinding,\n  readOnly: false,\n  spellCheck: false,\n  stripPastedStyles: false\n};\n\n\nmodule.exports = DraftEditor;"]},"metadata":{},"sourceType":"script"}