(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,a){e.exports=a.p+"static/media/treeGraph.978248e8.csv"},223:function(e,t,a){e.exports=a.p+"static/media/4afcBlock.9e545bc2.png"},225:function(e){e.exports=JSON.parse('{"punct":"Please listen to this message and adjust the volume","length":3,"length_comment":"the length of the audio file in second","index":8,"index_comment":"number of words in punct - 1","words":[{"start":0,"end":0.69,"content":"Please","index":0},{"start":0.69,"end":1.14,"content":"listen","index":1},{"start":1.14,"end":1.39,"content":"to","index":2},{"start":1.39,"end":1.48,"content":"this","index":3},{"start":1.48,"end":1.68,"content":"message","index":4},{"start":1.68,"end":1.99,"content":"and","index":5},{"start":1.99,"end":2.48,"content":"adjust","index":6},{"start":2.48,"end":2.78,"content":"the","index":7},{"start":2.78,"end":3,"content":"volume","index":8}]}')},226:function(e,t,a){e.exports=a.p+"static/media/demo1.c4e9169b.png"},227:function(e,t,a){e.exports=a.p+"static/media/demo2.8fe4c290.png"},228:function(e,t,a){e.exports=a.p+"static/media/demo3.0c18e092.png"},229:function(e,t,a){e.exports=a.p+"static/media/demo4.94b910f2.png"},230:function(e,t,a){e.exports=a.p+"static/media/demo5.70b4d777.png"},260:function(e,t,a){e.exports=a(332)},265:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),l=a.n(o),s=(a(265),a(5)),i=a.n(s),c=a(9),u=a(11),m=a(12),p=a(14),d=a(13),h=a(21),f=a(6),g=a.n(f),v=a(8),b=a(417),E=a(403),y=a(71),x=a(422),w=a(407),C=a(336),k=a(425),O=a(234),_=a.n(O),S=a(386),N=a(385),j=a(387),I=a(388),P=a(165),D=a.n(P),L=a(166),F=a.n(L),A=a(335),B=a(16),T=a(69),W=a(17),R=r.a.createContext(),M=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null,loginMode:null,historyDone:null,PTAdone:null,assessmentDone:null,AFCDone:null,leftEarIsWorse:null},e.updateUser=function(){var t=sessionStorage.getItem("user"),a=sessionStorage.getItem("loginMode"),n=JSON.parse(sessionStorage.getItem("historyDone")),r=JSON.parse(sessionStorage.getItem("PTAdone")),o=JSON.parse(sessionStorage.getItem("assessmentDone")),l=JSON.parse(sessionStorage.getItem("AFCDone")),s=JSON.parse(sessionStorage.getItem("leftEarIsWorse"));e.setState({user:t,loginMode:a,historyDone:n,PTAdone:r,assessmentDone:o,AFCDone:l,leftEarIsWorse:s})},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(R.Provider,{value:{user:this.state.user,loginMode:this.state.loginMode,historyDone:this.state.historyDone,PTAdone:this.state.PTAdone,assessmentDone:this.state.assessmentDone,AFCDone:this.state.AFCDone,leftEarIsWorse:this.state.leftEarIsWorse,updateUser:this.updateUser}},this.props.children)}}]),a}(n.Component),H=R.Consumer,G=M;function U(e){return function(t){return r.a.createElement(H,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}}var q=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fittingAppsOpen:!1,demosOpen:!1,adminOpen:!0,ABOpen:!1},e.handleAdminOpen=function(){e.setState((function(e){return{adminOpen:!e.adminOpen}}))},e.handleDemos=function(){e.setState((function(e){return{demosOpen:!e.demosOpen}}))},e.handleFittingApps=function(){e.setState((function(e){return{fittingAppsOpen:!e.fittingAppsOpen}}))},e.handleABOpen=function(){e.setState((function(e){return{ABOpen:!e.ABOpen}}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.props.context,a=t.loginMode,n=(t.assessmentDone,t.historyDone),o=(t.AFCDone,t.PTAdone);return r.a.createElement("div",null,r.a.createElement("div",{className:e.header},r.a.createElement(y.a,{variant:"h5"},"Open Speech Platform"),r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement(N.a,null),r.a.createElement(S.a,null,"researcher"===a&&[r.a.createElement(j.a,{button:!0,key:"Admin",onClick:this.handleAdminOpen},r.a.createElement(I.a,{primary:"Admin"}),this.state.adminOpen?r.a.createElement(D.a,null):r.a.createElement(F.a,null)),r.a.createElement(A.a,{key:"AdminTab",in:this.state.adminOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(S.a,{component:"div",disablePadding:!0},r.a.createElement(j.a,{className:e.nested,button:!0,key:"ListenerManagement",component:B.b,to:"/listenermanagement"},r.a.createElement(I.a,{primary:"Listener Management"})),r.a.createElement(j.a,{className:e.nested,button:!0,key:"FileManagement",component:B.b,to:"/filemanagement"},r.a.createElement(I.a,{primary:"File Management"}))))],r.a.createElement(j.a,{button:!0,key:"Stimulus",component:B.b,to:"/stimulus"},r.a.createElement(I.a,{primary:"Stimulus"})),r.a.createElement(j.a,{button:!0,key:"Researcher Page",component:B.b,to:"/researcherpage"},r.a.createElement(I.a,{primary:"Researcher Page"})),!0!==n&&r.a.createElement(j.a,{button:!0,key:"Survey Page",component:B.b,to:"/surveypage"},r.a.createElement(I.a,{primary:"Patient History"})),!0!==o&&r.a.createElement(j.a,{button:!0,key:"Pure Tone Audiogram",component:B.b,to:"/PTApage"},r.a.createElement(I.a,{primary:"Pure Tone Audiogram"})),r.a.createElement(j.a,{button:!0,key:"Demos",onClick:this.handleDemos},r.a.createElement(I.a,{primary:"Demos"}),this.state.demosOpen?r.a.createElement(D.a,null):r.a.createElement(F.a,null)),r.a.createElement(A.a,{in:this.state.demosOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(S.a,{component:"div",disablePadding:!0},r.a.createElement(j.a,{className:e.nested,button:!0,key:"Hearing Loss Demo",component:B.b,to:"/hearingLossDemo"},r.a.createElement(I.a,{primary:"Hearing Loss Demo"})),r.a.createElement(j.a,{className:e.nested,button:!0,key:"Quality Assessment Demo",component:B.b,to:"/qualityAssessmentDemo"},r.a.createElement(I.a,{primary:"Quality Assessment Demo"}))))))}}]),a}(n.Component),V=Object(W.a)(U,T.f,Object(v.a)((function(e){return{list:{width:300},fullList:{width:"auto"},drawerPaper:{width:300},nested:{paddingLeft:e.spacing(4)},doublyNested:{paddingLeft:e.spacing(8)},header:{paddingTop:20,paddingLeft:20,paddingBottom:10}}})))(q),J=a(273),z=function(e){return 6===e?["250","500","1000","2000","4000","8000","All"]:10===e?["250","500","750","1000","1500","2000","3000","4000","6000","8000","All"]:void 0},Q=a(333),K=a(240),Y=a(389),$=a(390),X=a(213),Z=a.n(X),ee=a(212),te=a.n(ee),ae=a(210),ne=a.n(ae),re=a(211),oe=a.n(re),le=a(214),se=a.n(le),ie=a(92),ce=["live","Audio file"],ue=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={alpha:1,file:0,fileList:[],currentFile:"",audioPath:"",audio_repeat:0,audio_play:0},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.get("/api/researcher/fileNames");case 3:return a=t.sent,t.next=6,J.get("/api/researcher/audioPath");case 6:n=t.sent,r=[],o="/../../.."+n.data,a.data.forEach((function(e){e.endsWith(".wav")&&r.push({value:e,label:e})})),e.setState({fileList:r,audioPath:o}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),alert(t.t0.response.data);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),e.handleFileChange=function(t){e.setState({currentFile:t.value})},e.handlePlayChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){var r,o,l,s,c,u,m,p,d,f,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,o=r.currentFile,l=r.alpha,s=r.audioPath,c=r.audio_repeat,u=r.audio_play,m="",m="alpha"===a?1===n?s.concat(o):"":1===l?s.concat(o):"",p=Object(h.a)({audio_filename:m,audio_reset:0,audio_repeat:c,audio_play:u,alpha:l},a,n),d={left:p,right:p},t.prev=5,t.next=8,J.post("/api/param/setparam",{method:"set",data:d});case 8:f=t.sent,g=f.data,console.log(g),e.setState(Object(h.a)({},a,n)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),alert(t.t0.response.data);case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.alpha,o=a.audio_play,l=a.audio_repeat;return r.a.createElement("div",{className:t.root},r.a.createElement(K.a,null,r.a.createElement(Y.a,{container:!0,direction:"column",spacing:5,className:t.content},r.a.createElement(Y.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},ce.map((function(a,o){return r.a.createElement($.a,{color:"primary",className:t.groupButton,key:"stimulus_".concat(o),value:o,selected:o===n,onClick:function(){return e.handlePlayChange("alpha",o)}},a)}))),r.a.createElement(Y.a,{item:!0},1===n&&r.a.createElement(ie.a,{onChange:this.handleFileChange,options:this.state.fileList})),r.a.createElement(Y.a,{container:!0,spacing:3,justify:"space-between",alignItems:"center"},1===n&&r.a.createElement("div",null,0===l?r.a.createElement(ne.a,{onClick:function(){return e.handlePlayChange("audio_repeat",1)},className:t.icon}):r.a.createElement(oe.a,{onClick:function(){return e.handlePlayChange("audio_repeat",0)},className:t.icon}),r.a.createElement(y.a,null,1===l?"Repeat":"Stop Repeat")),1===n&&r.a.createElement("div",null,0===o?r.a.createElement(te.a,{className:t.icon,onClick:function(){return e.handlePlayChange("audio_play",1)}}):r.a.createElement(Z.a,{onClick:function(){return e.handlePlayChange("audio_play",0)},className:t.icon}),r.a.createElement(y.a,null,"Play / Pause")),1===n&&r.a.createElement("div",null,r.a.createElement(se.a,{className:t.icon,onClick:function(){return e.handlePlayChange("audio_reset",1)}}),r.a.createElement(y.a,null,"Reset"))))))}}]),a}(n.Component),me=Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3),maxWidth:480,minWidth:200,margin:"auto"},icon:{width:50,height:50},groupButton:{width:320,color:"gray"}}}))(ue),pe=a(408),de=a(420),he=a(105),fe=a(70),ge=a(49),ve=a(391),be=a(400),Ee=a(406),ye=a(242),xe=a(37),we=a(398),Ce=a(404),ke=a(402),Oe=a(401),_e=a(405),Se=a(338),Ne=a(340),je=a(397),Ie=a(396),Pe=a(395),De=a(392),Le=a(394),Fe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loadDialogOpen:!1,saveDialogOpen:!1,profileName:"",profiles:[],profileOptions:[],selectedProfile:""},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.currProfileBand,t.prev=1,t.next=4,J.get("/api/param/amplification");case 4:n=t.sent,r=n.data,o=[],r.forEach((function(e){e.bandNumber===a&&o.push({value:e.parameters,label:e.profileName})})),e.setState({profileOptions:o,profiles:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),alert("Error loading profiles");case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),e.componentDidUpdate=function(t){var a=e.props.currProfileBand,n=e.state.profiles;if(t.currProfileBand!==a){var r=[];n.forEach((function(e){e.bandNumber===a&&r.push({value:e.parameters,label:e.profileName})})),e.setState({profileOptions:r})}},e.handleLoadDialogOpen=function(){e.setState({loadDialogOpen:!0})},e.handleLoadDialogClose=function(){e.setState({loadDialogOpen:!1})},e.handleSaveDialogOpen=function(){e.setState({saveDialogOpen:!0})},e.handleSaveDialogClose=function(){e.setState({saveDialogOpen:!1})},e.handleChangeProfileName=function(t){e.setState({profileName:t.target.value})},e.handleSaveParams=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.save,n=e.state.profileName,null==a){t.next=12;break}return t.prev=3,t.next=6,a(n);case 6:e.setState({saveDialogOpen:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.handleLoadProfile=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.load,n=e.state.selectedProfile,console.log(n),null==a){t.next=15;break}return t.prev=4,t.next=7,a(n);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),console.log(t.t0);case 12:e.setState({loadDialogOpen:!1}),t.next=16;break;case 15:e.setState({loadDialogOpen:!1});case 16:case"end":return t.stop()}}),t,null,[[4,9]])}))),e.handleProfileChange=function(t){e.setState({selectedProfile:t.value})},e.handleDisableSelect=function(){},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loadDialogOpen,a=e.saveDialogOpen;return r.a.createElement(n.Fragment,null,r.a.createElement(K.a,{style:{maxWidth:350}},r.a.createElement(S.a,{subheader:r.a.createElement(ve.a,null,"Parameter Settings")},r.a.createElement(j.a,null,r.a.createElement(C.a,{color:"primary",variant:"contained",fullWidth:!0,onClick:this.handleLoadDialogOpen},"Load Profile")),r.a.createElement(j.a,null,r.a.createElement(C.a,{color:"primary",variant:"contained",fullWidth:!0,onClick:this.handleSaveDialogOpen},"Save Profile")))),r.a.createElement(De.a,{open:t,scroll:"body",onClose:this.handleLoadDialogClose,fullWidth:!0,maxWidth:"xs"},r.a.createElement(Le.a,null,"Load Parameter Profile"),r.a.createElement(Pe.a,null,r.a.createElement(ie.a,{onChange:this.handleProfileChange,options:this.state.profileOptions,styles:{menuPortal:function(e){return Object(ge.a)(Object(ge.a)({},e),{},{zIndex:9999})}},menuPortalTarget:document.body})),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{onClick:this.handleLoadDialogClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{color:"primary",onClick:this.handleLoadProfile},"Load"))),r.a.createElement(De.a,{open:a,onClose:this.handleSaveDialogClose,fullWidth:!0,maxWidth:"xs"},r.a.createElement(Le.a,null,"Save Parameters"),r.a.createElement(Pe.a,null,r.a.createElement(je.a,null,"Please enter your profile name"),r.a.createElement(we.a,{variant:"outlined",label:"Profile Name",fullWidth:!0,onChange:this.handleChangeProfileName})),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{onClick:this.handleSaveDialogClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{color:"primary",onClick:this.handleSaveParams},"Save"))))}}]),a}(n.Component),Ae=a(215),Be=a.n(Ae),Te=[{value:["cr","g65"],label:"CR/G65"},{value:["g50","g80"],label:"G50/G80"},{value:["kneeLow","mpo"],label:"Kneelow/Mpo"},{value:["attack","release"],label:"Attack/Release"},{value:["frepingAlpha"],label:"FrepingAlpha"}],We=[["cr","g65"],["g50","g80"]],Re={Left:"_L",Right:"_R"},Me=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={type:Te[0],control_via:1,afc:1,freping:0,global_mpo:120,channels:["Left"],aligned:1,cr_L:[1,1,1,1,1,1],cr_R:[1,1,1,1,1,1],g50_L:[0,0,0,0,0,0],g50_R:[0,0,0,0,0,0],g65_L:[0,0,0,0,0,0],g65_R:[0,0,0,0,0,0],g80_L:[0,0,0,0,0,0],g80_R:[0,0,0,0,0,0],kneeLow_L:[45,45,45,45,45,45],kneeLow_R:[45,45,45,45,45,45],mpo_L:[120,120,120,120,120,120],mpo_R:[120,120,120,120,120,120],attack_L:[5,5,5,5,5,5],attack_R:[5,5,5,5,5,5],release_L:[20,20,20,20,20,20],release_R:[20,20,20,20,20,20],frepingAlpha_L:[0,0,0,0,0,0],frepingAlpha_R:[0,0,0,0,0,0],bandNumber:6,controlSignalChanged:[0,0,0,0,0],stateBeforeTransmit:{}},e.componentDidMount=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadParameter();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),alert(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.fixPrecision=function(e){for(var t;t<e.length;t++)e[t]>1e-4&&(e[t]=e[t].toFixed(2))},e.updateParamTable=function(t){console.log("update param from OSP");for(var a=t.left,n=t.right,r=a.g50,o=a.g80,l=n.g50,s=n.g80,i=a.g50,c=n.g50,u=r.length,m=0;m<u;m++){var p=(o[m]-r[m])/30,d=(s[m]-s[m])/30,h=Number(r[m])+Number(15*p),f=Number(l[m])+Number(15*d);i[m]=h,c[m]=f}e.fixPrecision(a.g50),e.fixPrecision(n.g50),e.fixPrecision(i),e.fixPrecision(c),e.fixPrecision(a.g80),e.fixPrecision(n.g80),e.fixPrecision(a.knee_low),e.fixPrecision(n.knee_low),e.fixPrecision(a.mpo_band),e.fixPrecision(n.mpo_band),e.fixPrecision(a.attack),e.fixPrecision(n.attack),e.fixPrecision(a.release),e.fixPrecision(n.release);var g={afc:a.afc,freping:a.freping,global_mpo:a.global_mpo,aligned:10===u&&a.aligned?1:0,cr_L:Array(u).fill(1),cr_R:Array(u).fill(1),g50_L:a.g50,g50_R:n.g50,g65_L:i,g65_R:c,g80_L:a.g80,g80_R:n.g80,kneeLow_L:a.knee_low,kneeLow_R:n.knee_low,mpo_L:a.mpo_band,mpo_R:n.mpo_band,attack_L:a.attack,attack_R:n.attack,release_L:a.release,release_R:n.release,frepingAlpha_L:a.freping_alpha?a.freping_alpha:Array(u).fill(0),frepingAlpha_R:n.freping_alpha?n.freping_alpha:Array(u).fill(0),bandNumber:u},v=JSON.parse(JSON.stringify(g));e.setState(Object(ge.a)({stateBeforeTransmit:v},g))},e.updateParamTableFromDB=function(t){console.log("update from DB");var a=t.left,n=t.right,r={cr_L:a.cr,cr_R:n.cr,g50_L:a.g50,g50_R:n.g50,g65_L:a.g65,g65_R:n.g65,g80_L:a.g80,g80_R:n.g80,kneeLow_L:a.knee_low,kneeLow_R:n.knee_low,mpo_L:a.mpo_band,mpo_R:n.mpo_band,attack_L:a.attack,attack_R:n.attack,release_L:a.release,release_R:n.release,frepingAlpha_L:a.freping_alpha,frepingAlpha_R:n.freping_alpha},o=JSON.parse(JSON.stringify(r));o=Object(ge.a)(Object(ge.a)({},o),{},{afc:e.state.afc,freping:e.state.freping,global_mpo:e.state.global_mpo,aligned:e.state.aligned}),console.log(o),e.setState(Object(ge.a)({stateBeforeTransmit:o},r))},e.loadParameter=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/param/getparam");case 3:a=t.sent,n=a.data,console.log(Object.values(n)),e.updateParamTable(n),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleControlViaChange=function(t){e.setState({control_via:t.target.value})},e.handleAfcChange=function(t){e.setState({afc:t.target.value})},e.handleFrepingChange=function(t){e.setState({freping:t.target.value})},e.handleChannelChange=function(t){var a=[];a="Both"===t.target.value?["Left","Right"]:[t.target.value],console.log(a),e.setState({channels:a})},e.handleAlignChange=function(t){e.setState({aligned:t.target.value})},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,Number(t.target.value)))},e.handleTypeChange=function(t){e.setState({type:t})},e.handleSubBandInputChange=function(t){var a,n=e.state.channels,r=t.target.id.split("_"),o=r[1],l=r[0],s={},i=Object(fe.a)(n);try{for(i.s();!(a=i.n()).done;){var c=a.value,u=l+Re[c],m=e.state[u];m[o]=Number(t.target.value),s[u]=m}}catch(p){i.e(p)}finally{i.f()}e.setState(s),"cr"!==l&&"g50"!==l&&"g80"!==l&&"g65"!==l||e.updateParameter(o)},e.handleAllInputChange=function(t){var a,n=e.state,r=n.channels,o=n.bandNumber,l=t.target.id.split("_")[0],s={},i=Object(fe.a)(r);try{for(i.s();!(a=i.n()).done;){for(var c=a.value,u=l+Re[c],m=e.state[u],p=0;p<o;p++)m[p]=Number(t.target.value);s[u]=m}}catch(d){i.e(d)}finally{i.f()}e.setState(s),"cr"!==l&&"g50"!==l&&"g80"!==l&&"g65"!==l||e.updateAllParameters()},e.updateParameter=function(t){var a=e.state,n=a.control_via,r=a.channels;if(1===n){var o,l={},s=Object(fe.a)(r);try{for(s.s();!(o=s.n()).done;){var i=o.value,c="cr"+Re[i],u=e.state[c].slice()[t];if(0!==u){var m=(1-u)/u,p="g65"+Re[i],d=e.state[p].slice()[t],h=Number(d)+Number(15*m),f=Number(d)-Number(15*m),g="g50"+Re[i],v=e.state[g].slice();v[t]=f,l[g]=v;var b="g80"+Re[i],E=e.state[b].slice();E[t]=h,l[b]=E}}}catch(y){s.e(y)}finally{s.f()}e.setState(l)}},e.updateAllParameters=function(){var t=e.state,a=t.control_via,n=t.channels,r=t.bandNumber;if(1===a){var o,l={},s=Object(fe.a)(n);try{for(s.s();!(o=s.n()).done;)for(var i=o.value,c="cr"+Re[i],u=e.state[c].slice(),m="g65"+Re[i],p=e.state[m].slice(),d="g50"+Re[i],h=e.state[d].slice(),f="g80"+Re[i],g=e.state[f].slice(),v=0;v<r;v++){var b=u[v];if(0!==b){var E=(1-b)/b,y=p[v],x=Number(y)+Number(15*E),w=Number(y)-Number(15*E);h[v]=w,l[d]=h,g[v]=x,l[f]=g}}}catch(C){s.e(C)}finally{s.f()}e.setState(l)}},e.generateParams=function(){var t=e.state,a=t.afc,n=t.aligned,r=t.global_mpo,o=t.g50_L,l=t.g50_R,s=t.g80_L,i=t.g80_R,c=t.kneeLow_L,u=t.kneeLow_R,m=t.mpo_L,p=t.mpo_R,d=t.attack_L,h=t.attack_R,f=t.release_L,g=t.release_R,v=t.frepingAlpha_L,b=t.frepingAlpha_R,E=t.freping,y={left:{en_ha:1,afc:a,freping:E,rear_mics:0,g50:o,g80:s,knee_low:c,mpo_band:m,attack:d,release:f,global_mpo:r,freping_alpha:v},right:{en_ha:1,afc:a,freping:E,rear_mics:0,g50:l,g80:i,knee_low:u,mpo_band:p,attack:h,release:g,global_mpo:r,freping_alpha:b}};return 10===t.bandNumber&&(console.log("10 band param with aligned: ",n),y={left:Object(ge.a)(Object(ge.a)({},y.left),{},{aligned:n}),right:Object(ge.a)(Object(ge.a)({},y.right),{},{aligned:n})}),y},e.generateParamsProfile=function(){var t=e.state,a=t.afc,n=t.global_mpo,r=t.cr_L,o=t.cr_R,l=t.g50_L,s=t.g50_R,i=t.g80_L,c=t.g80_R,u=t.g65_L,m=t.g65_R,p=t.kneeLow_L,d=t.kneeLow_R,h=t.mpo_L,f=t.mpo_R,g=t.attack_L,v=t.attack_R,b=t.release_L,E=t.release_R,y=t.frepingAlpha_L,x=t.frepingAlpha_R,w=t.freping;return{left:{afc:a,freping:w,cr:r,g50:l,g65:u,g80:i,knee_low:p,mpo_band:h,attack:g,release:b,global_mpo:n,freping_alpha:y},right:{afc:a,freping:w,cr:o,g50:s,g65:m,g80:c,knee_low:d,mpo_band:f,attack:v,release:E,global_mpo:n,freping_alpha:x}}},e.handleSaveParamsToDB=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.stringify(e.generateParamsProfile()),t.prev=1,t.next=4,J.post("/api/param/amplification",{profileName:a,bandNumber:e.state.bandNumber,parameters:n});case 4:r=t.sent,console.log(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),alert("This profile name has already existed");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLoadParamsFromDB=function(){var t=Object(c.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,JSON.parse(a);case 3:n=t.sent,e.updateParamTableFromDB(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Error parsing JSON");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.onTransmitParams=Object(c.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.generateParams(),t.prev=1,t.next=4,J.post("/api/param/setparam",{method:"set",data:a});case 4:n=t.sent,r=n.data,e.setState((function(e){e.stateBeforeTransmit;var t=Object(he.a)(e,["stateBeforeTransmit"]);return{stateBeforeTransmit:JSON.parse(JSON.stringify(t))}})),console.log(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),alert(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.paramTableRowMobile=function(t,a){var n=e.props.classes,o=e.state,l=o.channels,s=o.type,i=o.bandNumber;return a!==i?r.a.createElement(j.a,{key:"subBand_".concat(t,"_index_").concat(a)},r.a.createElement(I.a,{primary:t}),r.a.createElement(be.a,null,s.value.map((function(t){var o=t;return o+=Re[l[0]],r.a.createElement(we.a,{className:2===s.value.length?n.mobileDoubleText:null,key:t+"_"+a,id:t+"_"+a,type:"number",margin:"dense",variant:"outlined",value:e.state[o][a],onChange:e.handleSubBandInputChange})})))):r.a.createElement(j.a,{key:"subBand_".concat(t,"_index_").concat(a)},r.a.createElement(I.a,{primary:t}),r.a.createElement(be.a,null,s.value.map((function(t){return r.a.createElement(we.a,{className:2===s.value.length?n.mobileDoubleText:null,key:t+"_all",id:t+"_all",type:"number",margin:"dense",variant:"outlined",onChange:e.handleAllInputChange})}))))},e.paramTableRow=function(t){var a=e.state,n=a.channels,o=a.control_via,l=t+Re[n[0]],s=We[o].includes(t)?{backgroundColor:"#bdbdbd",testColor:"gray"}:{};return r.a.createElement(Oe.a,{hover:!0,key:t,style:s},r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",style:e.getParamLabelColor(l)},t)),e.state[l].map((function(a,n){return r.a.createElement(ke.a,{key:"row_index_".concat(n),children:r.a.createElement(Ne.a,null,r.a.createElement(ye.a,{disabled:We[o].includes(t),id:t+"_"+n,fullWidth:!0,type:"number",value:a,onChange:e.handleSubBandInputChange}))})})),r.a.createElement(ke.a,{children:r.a.createElement(Ne.a,null,r.a.createElement(Se.a,{id:t+"_all",fullWidth:!0,type:"number",disabled:We[o].includes(t),onChange:e.handleAllInputChange}))}))},e.renderControlSignals=function(){var t=e.state.channels;return r.a.createElement(S.a,{subheader:r.a.createElement(ve.a,null,"Researcher Page Controls")},r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"Control Via"}),r.a.createElement(be.a,null,r.a.createElement(xe.a.Group,{value:e.state.control_via,buttonStyle:"solid",onChange:e.handleControlViaChange},r.a.createElement(xe.a.Button,{value:0},"G50/G80"),r.a.createElement(xe.a.Button,{value:1},"CR/G65")))),r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"Channel"}),r.a.createElement(be.a,null,r.a.createElement(xe.a.Group,{value:2===t.length?"Both":t[0],buttonStyle:"solid",onChange:e.handleChannelChange},r.a.createElement(xe.a.Button,{value:"Left"},"Left"),r.a.createElement(xe.a.Button,{value:"Right"},"Right"),r.a.createElement(xe.a.Button,{value:"Both"},"Both")))))},e.getControlLabelColor=function(t){return e.state[t]!==e.state.stateBeforeTransmit[t]?{color:"#F50057"}:{color:"black"}},e.getParamLabelColor=function(t){return Be.a.isEqual(e.state[t],e.state.stateBeforeTransmit[t])?{color:"black"}:{color:"#F50057"}},e.renderParamControls=function(){var t=e.state.bandNumber;return r.a.createElement(S.a,{subheader:r.a.createElement(ve.a,null,"RTMHA Controls")},r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"AFC",style:e.getControlLabelColor("afc")}),r.a.createElement(be.a,null,r.a.createElement(xe.a.Group,{value:e.state.afc,buttonStyle:"solid",onChange:e.handleAfcChange},r.a.createElement(xe.a.Button,{value:1},"On"),r.a.createElement(xe.a.Button,{value:0},"Off")))),r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"Freping",style:e.getControlLabelColor("freping")}),r.a.createElement(be.a,null,r.a.createElement(xe.a.Group,{value:e.state.freping,buttonStyle:"solid",onChange:e.handleFrepingChange},r.a.createElement(xe.a.Button,{value:1},"On"),r.a.createElement(xe.a.Button,{value:0},"Off")))),r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"Global MPO",style:e.getControlLabelColor("global_mpo")}),r.a.createElement(be.a,null,r.a.createElement(we.a,{id:"global_mpo",type:"number",margin:"dense",variant:"outlined",value:e.state.global_mpo,onChange:e.handleInputChange}))),10===t&&r.a.createElement(j.a,null,r.a.createElement(I.a,{primary:"Aligned",style:e.getControlLabelColor("aligned")}),r.a.createElement(be.a,null,r.a.createElement(xe.a.Group,{value:e.state.aligned,buttonStyle:"solid",onChange:e.handleAlignChange},r.a.createElement(xe.a.Button,{value:1},"On"),r.a.createElement(xe.a.Button,{value:0},"Off")))))},e.getTableColor=function(){var t=e.state.channels;return 2===t.length?"#91f2ad":"Right"===t[0]?"#ffa6a6":"#b0dfe5"},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.type,o=a.bandNumber;return r.a.createElement("div",{className:t.content},r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,md:6,xs:12,spacing:10},r.a.createElement(K.a,{style:{maxWidth:500}},this.renderControlSignals()),r.a.createElement(K.a,{style:{maxWidth:500,marginTop:30}},this.renderParamControls())),r.a.createElement(Y.a,{item:!0,md:6,xs:12},r.a.createElement(Fe,{save:this.handleSaveParamsToDB,load:this.handleLoadParamsFromDB,currProfileBand:o}))),r.a.createElement(K.a,{className:t.paramSection,style:{backgroundColor:this.getTableColor()}},r.a.createElement(E.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"Parameter Settings")),r.a.createElement(x.a,{mdUp:!0},r.a.createElement("div",{className:t.paramSectionContent},r.a.createElement(ie.a,{defaultValue:Te[0],value:n,onChange:this.handleTypeChange,options:Te}),r.a.createElement(S.a,null,z(o).map((function(t,a){return e.paramTableRowMobile(t,a)}))),r.a.createElement(Y.a,{container:!0,spacing:2,className:t.paramControlButtons},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.loadParameter},"Pull")),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.onTransmitParams},"Transmit"))))),r.a.createElement(x.a,{smDown:!0},r.a.createElement("div",{className:t.paramSectionContent},r.a.createElement(Ce.a,null,r.a.createElement(_e.a,null,r.a.createElement(Oe.a,null,[""].concat(z(o)).map((function(e){return r.a.createElement(ke.a,{key:e},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},e))})))),r.a.createElement(Ee.a,null,["cr","g50","g65","g80","kneeLow","mpo","attack","release","frepingAlpha"].map((function(t){return e.paramTableRow(t)})))),r.a.createElement(Y.a,{container:!0,spacing:2,className:t.paramControlButtons},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.loadParameter},"Pull")),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.onTransmitParams},"Transmit")))))))}}]),a}(n.Component),He=Object(Q.a)((function(e){var t;return{content:{padding:e.spacing(3)},paramSection:{marginTop:30,maxWidth:1e3},paramSectionContent:(t={display:"flex",flexDirection:"column",width:"90%",paddingLeft:e.spacing(2)},Object(h.a)(t,e.breakpoints.down("md"),{maxWidth:450}),Object(h.a)(t,e.breakpoints.up("md"),{alignItems:"center"}),t),paramControlButtons:{width:"80%",maxWidth:600,marginTop:30,marginBottom:30},formControl:{margin:e.spacing(1),minWidth:120},mobileDoubleText:{width:"20vw",margin:"3vw"}}}))(Me),Ge=a(428),Ue=a(419),qe=["None","Arslan power averaging procedure","Hirsch and Ehrlicher weighted noise averaging procedure","Cohen and Berdugo MCRA Procedure"],Ve=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentNoiseOption:0,noiseSubtraction:0,speechEnhancementEnabled:!1,normConstraint:0,adaptionModeControl:0,beamformingEnabled:!1},e.componentDidMount=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadParameter();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),alert(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.loadParameter=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/param/getparam");case 3:a=t.sent,n=a.data,e.setState({currentNoiseOption:parseInt(n.left.noise_estimation_type),noiseSubtraction:parseFloat(n.left.spectral_subtraction),speechEnhancementEnabled:1===n.left.spectral_type,normConstraint:parseInt(n.left.nc_thr),adaptionModeControl:parseInt(n.left.amc_thr),beamformingEnabled:1===n.left.bf}),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.handleToggleNoiseOption=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.speechEnhancementEnabled,o=n.noiseSubtraction,t.next=3,e.handleTransmitSpeechData(r,a,o);case 3:e.setState({currentNoiseOption:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleNoiseSubtractionSliderChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setNoiseSubtraction(n);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleNoiseSubtractionInputChange=function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setNoiseSubtraction(""===a.target.value?0:Number(a.target.value));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlurNoiseSubtraction=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=e.state.noiseSubtraction)<0)){t.next=6;break}return t.next=4,e.setNoiseSubtraction(0);case 4:t.next=9;break;case 6:if(!(a>1)){t.next=9;break}return t.next=9,e.setNoiseSubtraction(1);case 9:case"end":return t.stop()}}),t)}))),e.handleNormConstraintSliderChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setNormConstraint(n);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleNormConstraintInputChange=function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setNormConstraint(""===a.target.value?0:Number(a.target.value));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlurNormConstraint=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=e.state.normConstraint)<0)){t.next=6;break}return t.next=4,e.setNormConstraint(0);case 4:t.next=9;break;case 6:if(!(a>10)){t.next=9;break}return t.next=9,e.setNormConstraint(10);case 9:case"end":return t.stop()}}),t)}))),e.handleAdaptionSliderChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setAdaption(n);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleAdaptionInputChange=function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setAdaption(""===a.target.value?0:Number(a.target.value));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlurAdaption=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=e.state.adaptionModeControl)<0)){t.next=6;break}return t.next=4,e.setAdaption(0);case 4:t.next=9;break;case 6:if(!(a>1)){t.next=9;break}return t.next=9,e.setAdaption(1);case 9:case"end":return t.stop()}}),t)}))),e.setNoiseSubtraction=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.speechEnhancementEnabled,o=n.currentNoiseOption,t.next=3,e.handleTransmitSpeechData(r,o,a);case 3:e.setState({noiseSubtraction:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setNormConstraint=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.beamformingEnabled,o=n.adaptionModeControl,t.next=3,e.handleTransmiteBeamformingData(r,a,o);case 3:e.setState({normConstraint:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setAdaption=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.beamformingEnabled,o=n.normConstraint,t.next=3,e.handleTransmiteBeamformingData(r,o,a);case 3:e.setState({adaptionModeControl:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSpeechEnhancementChange=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.speechEnhancementEnabled,r=a.currentNoiseOption,o=a.noiseSubtraction,t.prev=1,t.next=4,e.handleTransmitSpeechData(!n,r,o);case 4:e.setState({speechEnhancementEnabled:!n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert(t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e.handleBeamformingChange=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.beamformingEnabled,r=a.normConstraint,o=a.adaptionModeControl,t.prev=1,t.next=4,e.handleTransmiteBeamformingData(!n,r,o);case 4:e.setState({beamformingEnabled:!n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert(t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e.handleTransmiteBeamformingData=function(){var e=Object(c.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={bf:!1===t?0:1,nc_thr:a,amc_thr:n},e.next=3,J.post("/api/param/setparam",{method:"set",data:{left:r,right:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e.handleTransmitSpeechData=function(){var e=Object(c.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={noise_estimation_type:a,spectral_type:!1===t?0:1,spectral_subtraction:n},e.next=3,J.post("/api/param/setparam",{method:"set",data:{left:r,right:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.currentNoiseOption,o=a.noiseSubtraction,l=a.speechEnhancementEnabled,s=a.normConstraint,i=a.adaptionModeControl,c=a.beamformingEnabled;return r.a.createElement("div",{className:t.content},r.a.createElement(Y.a,{container:!0,direction:"column"},r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2},"Noise Estimation Options:")),r.a.createElement(Y.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},qe.map((function(a,o){return r.a.createElement($.a,{color:"primary",className:t.groupButton,key:"noise_".concat(o),value:o,selected:o===n,onClick:function(){return e.handleToggleNoiseOption(o)}},a)}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2},"Noise Subtraction Parameter:")),r.a.createElement(Y.a,{container:!0,spacing:3,alignItems:"center"},r.a.createElement(Y.a,{item:!0},"None"),r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement(Ge.a,{value:o,onChange:this.handleNoiseSubtractionSliderChange,step:.001,min:0,max:1})),r.a.createElement(Y.a,{item:!0},"Aggressive"),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:o,margin:"dense",onChange:this.handleNoiseSubtractionInputChange,onBlur:this.handleBlurNoiseSubtraction,inputProps:{step:.001,min:0,max:1,type:"number"}}))),r.a.createElement(Y.a,{container:!0,alignItems:"center"},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.handleSpeechEnhancementChange,className:t.button},l?"Disable Speech Enhancement":"Enable Speech Enhancement")),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2,fontSize:24},"Beamforming")),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2},"Norm Constraint:")),r.a.createElement(Y.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},r.a.createElement(Y.a,{container:!0,item:!0,xs:8},r.a.createElement(Ge.a,{value:s,onChange:this.handleNormConstraintSliderChange,step:1,min:0,max:10})),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:s,margin:"dense",onChange:this.handleNormConstraintInputChange,onBlur:this.handleBlurNormConstraint,inputProps:{step:1,min:0,max:10,type:"number"}}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2},"Adaptation mode control:")),r.a.createElement(Y.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},r.a.createElement(Y.a,{container:!0,item:!0,xs:8},r.a.createElement(Ge.a,{value:i,onChange:this.handleAdaptionSliderChange,step:1,min:0,max:10})),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:i,margin:"dense",onChange:this.handleAdaptionInputChange,onBlur:this.handleBlurAdaption,inputProps:{step:1,min:0,max:10,type:"number"}}))),r.a.createElement(Y.a,{container:!0,alignItems:"center"},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.handleBeamformingChange,className:t.button},c?"Disable Beamforming":"Enable Beamforming"))))}}]),a}(n.Component),Je=Object(Q.a)((function(e){return{content:{padding:e.spacing(3),maxWidth:500,minWidth:200,margin:"auto"},button:{width:320,margin:"auto",marginTop:8},groupButton:{width:320,color:"gray"},input:{width:60}}}))(Ve),ze=a(427),Qe=a(80),Ke=a.n(Qe),Ye=a(223),$e=a.n(Ye),Xe=["No Adaptation","FxLMS","IPNLMS","SLMS"],Ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={afc_delay:0,afc_mu:0,afc_rho:0,afc_type:0},e.componentDidMount=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadParameter();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),alert(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.loadParameter=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/param/getparam");case 3:a=t.sent,n=a.data,console.log(n),e.setState({afc_delay:parseInt(1e5*n.left.afc_delay)/1e5,afc_mu:parseInt(1e5*n.left.afc_mu)/1e5,afc_rho:parseInt(1e5*n.left.afc_rho)/1e5,afc_type:parseInt(n.left.afc_type)}),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleAllInputChange=function(t,a){"afc_mu"!==t&&"afc_rho"!==t||(a=""===a||a<=0?0:a>=1?1:a),"afc_delay"===t&&(a=""===a||a<=0?0:a>=8?8:a),e.setState(Object(h.a)({},t,a))},e.handleTransmit=function(){var t=Object(c.a)(i.a.mark((function t(a,n){var r,o,l,s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=13;break}return r=e.state,o=r.afc_mu,l=r.afc_rho,s=r.afc_type,c=r.afc_delay,u={afc_mu:o,afc_rho:l,afc_type:s,afc_delay:c,afc_reset:n?1:0},t.prev=3,t.next=6,J.post("/api/param/setparam",{method:"set",data:{left:u,right:u}});case 6:return t.next=8,e.loadParameter();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),alert(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e.handleRhoSliderChange=function(t,a){e.setRho(a)},e.handleDelayInputChange=function(t){e.setDelay(""===t.target.value?0:Number(t.target.value))},e.handleMuInputChange=function(t){e.setMu(""===t.target.value?0:Number(t.target.value))},e.handleRhoInputChange=function(t){e.setRho(""===t.target.value?0:Number(t.target.value))},e.handleBlurDelay=function(){var t=e.state.afc_delay;t<0?e.setDelay(0):t>8&&e.setDelay(8)},e.handleBlurMu=function(){var t=e.state.afc_mu;t<0?e.setMu(0):t>1&&e.setMu(1)},e.handleBlurRho=function(){var t=e.state.afc_rho;t<0?e.setRho(0):t>1&&e.setRho(1)},e.setDelay=function(t){e.setState({afc_delay:t})},e.setMu=function(t){e.setState({afc_mu:t})},e.setRho=function(t){e.setState({afc_rho:t})},e.handleReset=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.afc_mu,r=a.afc_rho,o=a.afc_type,l=a.afc_delay,t.prev=1,t.next=4,J.post("/api/param/setparam",{method:"set",data:{left:{afc_mu:n,afc_rho:r,afc_type:o,afc_delay:l,afc_reset:1},right:{afc_mu:n,afc_rho:r,afc_type:o,afc_delay:l,afc_reset:1}}});case 4:return t.sent,t.next=7,e.loadParameter();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleTransmitParamChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){var r,o,l,s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a,n),r=e.state,o=r.afc_mu,l=r.afc_rho,s=r.afc_type,c=r.afc_delay,"afc_mu"!==a&&"afc_rho"!==a||(n=""===n||n<=0?0:n>=1?1:n),"afc_delay"===a&&(n=""===n||n<=0?0:n>=8?8:n),u=Object(h.a)({afc_mu:o,afc_rho:l,afc_type:s,afc_delay:c,afc_reset:0},a,n),console.log(u),t.prev=6,t.next=9,J.post("/api/param/setparam",{method:"set",data:{left:u,right:u}});case 9:return t.sent,t.next=12,e.loadParameter();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),alert(t.t0.response.data);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.afc_type,o=a.afc_delay,l=a.afc_mu,s=a.afc_rho;return r.a.createElement("div",{className:t.content},r.a.createElement(Y.a,{container:!0,direction:"column",spacing:2},r.a.createElement(Y.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},Xe.map((function(a,o){return r.a.createElement($.a,{color:"primary",className:t.groupButton,key:"noise_".concat(o),value:o,selected:o===n,onClick:function(){return e.handleAllInputChange("afc_type",o)}},a)}))),r.a.createElement(Y.a,{container:!0,spacing:3,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{lineHeight:2},"Delay (ms):"))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:o,margin:"dense",onKeyDown:this.handleTransmit,onChange:function(t){return e.handleAllInputChange("afc_delay",Number(t.target.value))},inputProps:{step:1e-5,min:0,max:8,type:"number"}}))),r.a.createElement(Y.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},r.a.createElement(Y.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,null,"Mu",r.a.createElement(ze.a,{disableFocusListener:!0,title:"The step size parameter, which has to be set to ".concat("a positive value. It controls the adaptation rate of the AFC filter,"," in the sense that a larger mu is more suitable for a highlty changin ","environment. Note, however, a larger mu also leads to a higher possibility ","of instability and more artifacts.")},r.a.createElement(w.a,{size:"small",className:t.helperIcon},r.a.createElement(Ke.a,null))),":"))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:l,margin:"dense",onKeyDown:this.handleTransmit,onChange:function(t){return e.handleAllInputChange("afc_mu",Number(t.target.value))},inputProps:{step:1e-5,min:0,max:1,type:"number"}}))),r.a.createElement(Y.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},r.a.createElement(Y.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,null,"Rho",r.a.createElement(ze.a,{disableFocusListener:!0,title:"A forgetting factor for controlling the update of the signal power estimate".concat(". It ranges from 0-1. For speech signals, typical values of rho are around 0.9. ","If it is too large, the update of the power estimate would fail to catch up with ","speech variatios. If it is set too small, the variance of the estimate will be high, ","leading to more artifacts.")},r.a.createElement(w.a,{size:"small",className:t.helperIcon},r.a.createElement(Ke.a,null))),":"))),r.a.createElement(Y.a,{container:!0,item:!0,xs:6},r.a.createElement(Ge.a,{value:s,onChange:function(t,a){return e.handleAllInputChange("afc_rho",a)},step:1e-5,min:0,max:1})),r.a.createElement(Y.a,{item:!0},r.a.createElement(Se.a,{className:t.input,value:s,margin:"dense",onKeyDown:this.handleTransmit,onChange:function(t){return e.handleAllInputChange("afc_rho",Number(t.target.value))},inputProps:{step:1e-5,min:0,max:1,type:"number"}}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,{fontSize:24},"Troubleshooting 4AFC")),r.a.createElement(y.a,{component:"div"},r.a.createElement(Ue.a,null,"When instability is detected by the user, he/she should press ".concat('the "Undo\u201d button below. This will (i) initialize AFC filter to its'," initial coefficients, obtained from average of multiple feedback path"," measurements; and (ii) reduce amplification gain in all bands by x dB. ","(Arthur to experiment and suggest value of x. Initially, x=10)."))),r.a.createElement(Y.a,{container:!0,justify:"flex-end"},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(t){return e.handleAllInputChange("afc_reset",1)},className:t.button},"Reset")),r.a.createElement("img",{src:$e.a,alt:"4AFC Block",className:t.img})))}}]),a}(n.Component),et=Object(Q.a)((function(e){return{content:{padding:e.spacing(3),maxWidth:480,minWidth:200,margin:"auto"},button:{width:100,margin:10},groupButton:{width:320,color:"gray"},input:{width:72},helperIcon:{display:"inline-flex",verticalAlign:"middle"},img:{width:440,height:"auto"}}}))(Ze),tt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:0},e.handleTabChange=function(t,a){e.setState({value:a})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(K.a,{className:e.root},r.a.createElement(x.a,{smDown:!0,implementation:"css"},r.a.createElement(de.a,{value:this.state.value,centered:!0,onChange:this.handleTabChange},r.a.createElement(pe.a,{label:"Amplification"}),r.a.createElement(pe.a,{label:"Noise"}),r.a.createElement(pe.a,{label:"Feedback"}))),r.a.createElement(x.a,{mdUp:!0,implementation:"css"},r.a.createElement(de.a,{value:this.state.value,onChange:this.handleTabChange,variant:"scrollable",scrollButtons:"on",className:e.mobileTabs},r.a.createElement(pe.a,{label:"Amplification"}),r.a.createElement(pe.a,{label:"Noise"}),r.a.createElement(pe.a,{label:"Feedback"}))),0===this.state.value&&r.a.createElement(He,null),1===this.state.value&&r.a.createElement(Je,null),2===this.state.value&&r.a.createElement(et,null)))}}]),a}(n.Component),at=Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},mobileTabs:{width:"100vw"}}}))(tt),nt=a(424),rt=a(411),ot=a(423),lt=a(412),st=a(345),it=a(341),ct=a(343),ut=a(409),mt=a(410),pt=a(421),dt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={activeStep:0,leftEar:"",rightEar:"",development:"",education:"",personalIllnesses:[],siblingIllnesses:[],personalIllnessesInfo:{},siblingIllnessesInfo:{}},e.handleNext=function(){e.setState({activeStep:e.state.activeStep+1})},e.handleBack=function(){e.setState({activeStep:e.state.activeStep-1})},e.handleChangeEarInfo=function(t){return function(a){e.setState(Object(h.a)({},t,a.target.value?parseInt(a.target.value):""))}},e.handleChangeUserInfo=function(t){return function(a){e.setState(Object(h.a)({},t,a.target.value?a.target.value:""))}},e.handleChangeIllness=function(t,a){return function(n){if(!1===a){var r=e.state,o=r.personalIllnesses,l=r.personalIllnessesInfo;n.target.checked?(o.push(t),o.sort(),l[t]=["","",""],e.setState({personalIllnesses:o,personalIllnessesInfo:l})):(delete l[t],e.setState({personalIllnesses:o.filter((function(e){return t!==e})),personalIllnessesInfo:l}))}else{var s=e.state,i=s.siblingIllnesses,c=s.siblingIllnessesInfo;n.target.checked?(i.push(t),i.sort(),c[t]=[[],"","",""],e.setState({siblingIllnesses:i,siblingIllnessesInfo:c})):(delete c[t],e.setState({siblingIllnesses:i.filter((function(e){return t!==e})),siblingIllnessesInfo:c}))}}},e.handleChangeIllnessInfo=function(t,a,n){return function(r){if(!1===a){var o=e.state.personalIllnessesInfo;o[t][n]=r.target.value,e.setState({personalIllnessesInfo:o})}else{var l=e.state.siblingIllnessesInfo;0===n?l[t][0].includes(r.target.value)?l[t][0]=l[t][0].filter((function(e){return r.target.value!==e})):l[t][0].push(r.target.value):l[t][n]=r.target.value,e.setState({siblingIllnessesInfo:l})}}},e.parseLog=function(){var t,a=e.state,n=a.leftEar,r=a.rightEar,o=a.personalIllnesses,l=a.personalIllnessesInfo,s=a.development,i=a.education,c=a.siblingIllnesses,u=a.siblingIllnessesInfo,m={},p={},d=Object(fe.a)(o);try{for(d.s();!(t=d.n()).done;){var h=t.value;m[h]={occur:l[h][0],happen:l[h][1],resolve:l[h][2]}}}catch(b){d.e(b)}finally{d.f()}var f,g=Object(fe.a)(c);try{for(g.s();!(f=g.n()).done;){var v=f.value;p[v]={relation:u[v][0],occur:u[v][1],happen:u[v][2],resolve:u[v][3]}}}catch(b){g.e(b)}finally{g.f()}return{history:{logOn:(new Date).toLocaleString(),medicalHistory:{leftEar:["No Hearing","Limited Hearing","Normal Hearing"][n-1],rightEar:["No Hearing","Limited Hearing","Normal Hearing"][r-1]},illnesses:m,ageSpeak:s,highestEdu:i,illnessesFam:p}}},e.handleSubmit=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.context,n=a.updateUser,r=a.user,o=e.state,l=o.leftEar,s=o.rightEar,t.prev=2,t.next=5,J.post("/api/listener/addLog",{listenerID:r,newLog:e.parseLog(),flag:"leftEarIsWorse",flagValue:l<=s});case 5:return t.next=7,J.post("/api/listener/addLog",{listenerID:r,newLog:"",flag:"historyDone",flagValue:!0});case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),alert(t.t0.message),console.log(t.t0);case 13:sessionStorage.setItem("leftEarIsWorse",l<=s),sessionStorage.setItem("historyDone",!0),n();case 16:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.getStepContent=function(t){var a=e.props.classes,n=e.state,o=n.leftEar,l=n.rightEar,s=n.development,i=n.education,c=n.personalIllnesses,u=n.siblingIllnesses,m=n.personalIllnessesInfo,p=n.siblingIllnessesInfo;switch(t){case 0:return r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12},"How well are you hearing?"),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Ne.a,{required:!0,className:a.formControl},r.a.createElement(st.a,null,"Left Ear"),r.a.createElement(ct.a,{native:!0,value:o,onChange:e.handleChangeEarInfo("leftEar")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:1},"No Hearing"),r.a.createElement("option",{value:2},"Limited Hearing"),r.a.createElement("option",{value:3},"Normal Hearing")),r.a.createElement(it.a,null,"Required"))),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Ne.a,{required:!0,className:a.formControl},r.a.createElement(st.a,null,"Right Ear"),r.a.createElement(ct.a,{native:!0,value:l,onChange:e.handleChangeEarInfo("rightEar")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:1},"No Hearing"),r.a.createElement("option",{value:2},"Limited Hearing"),r.a.createElement("option",{value:3},"Normal Hearing")),r.a.createElement(it.a,null,"Required"))),r.a.createElement(Y.a,{item:!0,xs:12},"Check the following illnesses you have had before:"),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(ut.a,{row:!0},["A","B","C","D","E","F","G"].map((function(t){return r.a.createElement(mt.a,{key:"".concat(t,"-checkbox"),control:r.a.createElement(pt.a,{className:a.illnessCheckBox,checked:c.includes(t),onChange:e.handleChangeIllness(t,!1),value:t}),label:t})})))),r.a.createElement(Y.a,{item:!0,xs:12},c.map((function(t){return r.a.createElement("div",{key:"".concat(t,"-form")},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(we.a,{key:"".concat(t,"-text1"),label:"When did ".concat(t," occur?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!1,0),value:m[t][0]}),r.a.createElement(we.a,{key:"".concat(t,"-text2"),label:"How did ".concat(t," happen?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!1,1),value:m[t][1]}),r.a.createElement(we.a,{key:"".concat(t,"-text3"),label:"When did ".concat(t," resolve?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!1,2),value:m[t][2]})))}))));case 1:return r.a.createElement(Y.a,{container:!0,spacing:0},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ne.a,null,r.a.createElement(st.a,{className:a.inputLabel},"Age you started to speak?"),r.a.createElement(ct.a,{className:a.fullSelect,autoWidth:!0,native:!0,value:s,onChange:e.handleChangeUserInfo("development")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0 - 2 years old."},"0 - 2 years old."),r.a.createElement("option",{value:"After 2 years old."},"After 2 years old."),r.a.createElement("option",{value:"Unknown."},"Unknown.")))));case 2:return r.a.createElement(Y.a,{container:!0,spacing:0},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ne.a,null,r.a.createElement(st.a,{className:a.inputLabel},"The highest education level you obtained?"),r.a.createElement(ct.a,{className:a.fullSelect,autoWidth:!0,native:!0,value:i,onChange:e.handleChangeUserInfo("education")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Primary, Secondary and Higher Secondary education."},"Primary, Secondary and Higher Secondary education."),r.a.createElement("option",{value:"Under-Graduate/Bachelor\u2019s level education."},"Under-Graduate/Bachelor\u2019s level education."),r.a.createElement("option",{value:"Post-Graduate/Master\u2019s level education."},"Post-Graduate/Master\u2019s level education."),r.a.createElement("option",{value:"Doctoral studies/Ph.D level education."},"Doctoral studies/Ph.D level education."),r.a.createElement("option",{value:"Vocational Education & Training."},"Vocational Education & Training."),r.a.createElement("option",{value:"Certificate and Diploma programs."},"Certificate and Diploma programs."),r.a.createElement("option",{value:"Distance Education."},"Distance Education.")))));case 3:return r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12},"Have any of your family members had the following illnesses?"),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(ut.a,{row:!0},["A","B","C","D","E","F","G"].map((function(t){return r.a.createElement(mt.a,{key:"".concat(t,"-checkbox"),control:r.a.createElement(pt.a,{className:a.illnessCheckBox,checked:u.includes(t),onChange:e.handleChangeIllness(t,!0),value:t}),label:t})})))),r.a.createElement(Y.a,{item:!0,xs:12},u.map((function(t){return r.a.createElement("div",{key:"".concat(t,"-form")},"".concat(t,": Relation(s) between you and the person(s)?"),r.a.createElement(Ne.a,null,r.a.createElement(ut.a,{row:!0},["Parent","Child","Sibling","Grandparent","Grandchild","Other"].map((function(n){return r.a.createElement(mt.a,{className:a.relationCheckBox,key:"".concat(n,"-checkbox"),control:r.a.createElement(pt.a,{checked:p[t][0].includes(n),onChange:e.handleChangeIllnessInfo(t,!0,0),value:n}),label:n})})))),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(we.a,{key:"".concat(t,"-text4"),label:"When did ".concat(t," occur?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!0,1),value:p[t][1]}),r.a.createElement(we.a,{key:"".concat(t,"-text5"),label:"How did ".concat(t," happen?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!0,2),value:p[t][2]}),r.a.createElement(we.a,{key:"".concat(t,"-text6"),label:"When did ".concat(t," resolve?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:e.handleChangeIllnessInfo(t,!0,3),value:p[t][3]})))}))));default:return"Unknown step"}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.activeStep,o=a.leftEar,l=a.rightEar,s=["Medical History","Devemopment History","Education History","Family History"];return r.a.createElement(K.a,null,r.a.createElement(nt.a,{activeStep:n,orientation:"vertical"},s.map((function(a,i){return r.a.createElement(rt.a,{key:a},r.a.createElement(ot.a,null,a),r.a.createElement(lt.a,null,r.a.createElement(y.a,{component:"span"},e.getStepContent(i)),r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(C.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Back"),n===s.length-1?r.a.createElement(C.a,{disabled:""===o||""===l,variant:"contained",color:"primary",onClick:e.handleSubmit,className:t.button,component:B.b,to:"/researcherpage"},"Submit"):r.a.createElement(C.a,{disabled:""===o||""===l,variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},"Next")))))}))))}}]),a}(n.Component),ht=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{formControl:{margin:e.spacing(0),minWidth:120},illnessCheckBox:{height:10},relationCheckBox:{minWidth:150},inputLabel:{width:320},fullSelect:{minWidth:280,marginBottom:8}}})))(dt),ft=[125,250,500,750,1e3,1500,2e3,3e3,4e3,6e3,8e3],gt=[1,2,4,6,8],vt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={audiologistID:"",firstEditable:!1,secondEditable:!1,worseEarList:["","","","","","","","","","",""],betterEarList:["","","","","","","","","","",""],currentEar:!1},e.componentDidMount=function(){e.getWorseEar()},e.handleIDChange=function(t){var a=e.state.firstEditable;e.setState({audiologistID:t.target.value}),(e.validateID(t.target.value)?!a:a)&&e.setState({firstEditable:!a})},e.handleTextChange=function(t,a){return function(n){var r=e.state,o=r.worseEarList,l=r.betterEarList;t?(o[a]=n.target.value,e.setState({worseEarList:o})):(l[a]=n.target.value,e.setState({betterEarList:l})),0===gt.filter((function(e){return""===l[e]})).length&&0===gt.filter((function(e){return""===o[e]})).length?e.setState({secondEditable:!0}):e.setState({secondEditable:!1})}},e.validateID=function(e){return e.length>0},e.getWorseEar=function(){console.log(e.props.context);var t=e.props.context.leftEarIsWorse;e.setState({currentEar:t})},e.onSubmit=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s,c,u,m,p,d,h,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.context,n=a.updateUser,r=a.user,o=a.loginMode,l=e.state,s=l.currentEar,c=l.audiologistID,u=l.worseEarList,m=l.betterEarList,"researcher"!==o){t.next=4;break}return t.abrupt("return");case 4:return p=!0===s?u:m,d={},ft.forEach((function(e,t){d[e]=p[t]})),h=!1===s?u:m,f={},ft.forEach((function(e,t){f[e]=h[t]})),t.prev=10,t.next=13,J.post("/api/listener/addLog",{listenerID:r,newLog:{PTA:{logOn:(new Date).toLocaleString(),audiologistID:c,right:f,left:d}},flag:"PTAdone",flagValue:!0});case 13:sessionStorage.setItem("PTAdone",!0),n(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),alert(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[10,17]])}))),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.audiologistID,o=a.firstEditable,l=a.secondEditable,s=a.worseEarList,i=a.betterEarList,c=a.currentEar;return r.a.createElement(K.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:6,className:t.grid},r.a.createElement(we.a,{label:"Audiologist ID *",onChange:this.handleIDChange,value:n,variant:"outlined"})),r.a.createElement(Ce.a,{size:"small",className:t.table},r.a.createElement(_e.a,null,r.a.createElement(Oe.a,null,r.a.createElement(ke.a,null,"Frequency in Hertz(Hz)"),r.a.createElement(ke.a,{align:"right"},c?"Left Ear(dBspl)":"Right Ear(dBspl)"),r.a.createElement(ke.a,{align:"right"},c?"Right Ear(dBspl)":"Left Ear(dBspl)"))),r.a.createElement(Ee.a,null,ft.map((function(t,a){return r.a.createElement(Oe.a,{key:a},r.a.createElement(ke.a,{component:"th",scope:"row"},gt.includes(a)?t+" *":t),r.a.createElement(ke.a,{align:"right"},r.a.createElement(we.a,{disabled:!o,onChange:e.handleTextChange(!0,a),value:s[a],type:"number",inputProps:{step:"5",style:{textAlign:"right"}}})),r.a.createElement(ke.a,{align:"right"},r.a.createElement(we.a,{disabled:!o,onChange:e.handleTextChange(!1,a),value:i[a],type:"number",inputProps:{step:"5",style:{textAlign:"right"}}})))})))),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(C.a,{className:t.button,variant:"contained",color:"primary",onClick:this.onSubmit,component:B.b,to:"/researcherpage",disabled:!o||!l},"Submit"))))}}]),a}(n.Component),bt=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},grid:{marginLeft:30,marginTop:10},button:{margin:10},table:{margin:10}}})))(vt),Et=a(413),yt=a(44),xt=a.n(yt),wt=a(52),Ct=a(162),kt=a.n(Ct),Ot=a(61),_t=a.n(Ot);function St(e){return{left:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]},right:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]}}}function Nt(e,t){return t?{left:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]},right:{}}:{left:{},right:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]}}}var jt=a(239),It=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getTime=Object(c.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.post("/api/param/getTime");case 3:t=e.sent,a=t.data,n.setState((function(e){return{seconds:Object.values(a)[0]}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.getCurrentWord=function(e){console.log(n.state.seconds);for(var t=n.state.seconds%e.length,a=e.punct.split(" "),r=0;t>e.words[r].end;)r++;return[a.slice(0,r).join(" ")," "+a[r]," "+a.slice(r+1).join(" ")]},n.state={seconds:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.getTime()}),400)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.filename,t=this.getCurrentWord(e),a=Object(jt.a)(t,3),n=a[0],o=a[1],l=a[2];return r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("p",null,n,r.a.createElement("font",{color:"red"},o),l))}}]),a}(r.a.Component),Pt=Object(W.a)(U,T.f)(It),Dt=a(225),Lt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={playCurrent:!0,currentNode:1,nextNode:2,currentQueue:[1],currentVisited:{},graph:{},nodes:{},firstTimeAccess:!0,completed:!1,currentEar:!0,audioConfig:{},currentFile:Dt,audioPath:"",log:[],numQuestion:1},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.graph,n=e.props.context.assessmentDone,0!==Object.keys(a).length||!0===n){t.next=23;break}return t.next=5,e.getWorseEar();case 5:return t.next=7,e.constructGraph();case 7:return t.prev=7,t.next=10,J.get("/api/researcher/userAssessmentConfig");case 10:return r=t.sent,o=r.data,t.next=14,J.get("/api/researcher/audioPath");case 14:l=t.sent,s=l.data,e.setState({audioConfig:o,audioPath:s},Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFile();case 2:case"end":return t.stop()}}),t)})))),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),alert(t.t0.response.data);case 22:e.handlePlay(!0);case 23:case"end":return t.stop()}}),t,null,[[7,19]])}))),e.getFilePath=function(){var t=e.state,a=t.audioConfig,n=t.audioPath,r=t.currentEar;return n.concat(e.getRandom(a[r?"left":"right"]))},e.getRandom=function(e){return e[Math.floor(Math.random()*e.length)]},e.playFile=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.getFilePath(),n={left:{audio_filename:a,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1},right:{audio_filename:a,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1}},t.prev=2,t.next=5,J.post("/api/param/setparam",{method:"set",data:n});case 5:r=t.sent,o=r.data,console.log(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),alert(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.mute=Object(c.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={left:{alpha:0},right:{alpha:0}},e.prev=1,e.next=4,J.post("/api/param/setparam",{method:"set",data:t});case 4:a=e.sent,n=a.data,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),e.getWorseEar=function(){var t=e.props.context.leftEarIsWorse;e.setState({currentEar:"true"===e.props.match.params.currentIsLeft,firstTimeAccess:t===("true"===e.props.match.params.currentIsLeft)}),console.log(t)},e.constructGraph=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n={},r=[],t.next=5,wt.a(kt.a,(function(e){r.push([e.ParentNodeNo,e.NodeNo])}));case 5:return r.forEach((function(e){a[e[0]]=a[e[0]]?a[e[0]]:[],a[e[0]].push(e[1])})),t.next=8,wt.a(_t.a,(function(t){n[t.NodeNo]=Nt(t,e.state.currentEar)}));case 8:o=sessionStorage.getItem("rootNode"),l=o?parseInt(o):1,console.log(l),e.setState({graph:a,nodes:n,currentNode:l,nextNode:a[l][0],currentQueue:[l]});case 12:case"end":return t.stop()}}),t)}))),e.handlePlay=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o,l,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.nodes,o=n.currentNode,l=n.nextNode,t.prev=1,e.setState({showMessage:!e.state.showMessage}),t.next=5,J.post("/api/param/setparam",{method:"set",data:a?r[o]:r[l]});case 5:s=t.sent,c=s.data,console.log(c),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),alert(t.t0.response.data);case 13:e.setState({playCurrent:a});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleContinue=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o,l,s,c,u,m,p,d,h,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,r=n.currentNode,o=n.nextNode,l=n.currentQueue,s=n.currentVisited,c=n.graph,u=n.currentEar,m=n.log,s[r]=!0,s[o]=!0,p=r,d=o,0===a&&(h=l.indexOf(r),l.splice(h,1),p=o),2!==a&&l.push(o),f="",t.t0=a,t.next=0===t.t0?11:1===t.t0?13:2===t.t0?15:17;break;case 11:return f=f.concat("User thinks NEW(",o,") is better than CURRENT(",r,") for the ",u?"LEFT ear":"RIGHT ear"),t.abrupt("break",18);case 13:return f=f.concat("User thinks NEW(",o,") is the same as CURRENT(",r,") for the ",u?"LEFT ear":"RIGHT ear"),t.abrupt("break",18);case 15:return f=f.concat("User thinks NEW(",o,") is worse than CURRENT(",r,") for the ",u?"LEFT ear":"RIGHT ear"),t.abrupt("break",18);case 17:return t.abrupt("break",18);case 18:if(m.push(f),e.setState(m),0!==l.length){t.next=23;break}return e.setState({completed:!0}),t.abrupt("return");case 23:if(l.forEach((function(e){e in c&&c[e].forEach((function(e){d!==o||e in s||(d=e)}))})),d!==o){t.next=30;break}return e.setState({completed:!0}),t.next=28,e.mute();case 28:t.next=33;break;case 30:return t.next=32,e.playFile();case 32:e.setState({currentNode:p,nextNode:d,currentQueue:l,currentVisited:s},(function(){return e.handlePlay(!0)}));case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s,c,u,m,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.context,n=a.updateUser,r=a.user,o=a.loginMode,l=e.state,s=l.currentQueue,c=l.nodes,u=l.currentEar,m=l.log,p=l.firstTimeAccess,"researcher"!==o){t.next=4;break}return t.abrupt("return");case 4:if(t.prev=4,p){t.next=15;break}return t.next=8,J.post("/api/listener/addLog",{listenerID:r,newLog:{assessment:{logOn:(new Date).toLocaleString(),log:m}},flag:"assessmentDone",flagValue:!0});case 8:return sessionStorage.setItem("assessmentDone",!0),n(),d=sessionStorage.getItem("tmpParameters"),t.next=13,J.post("/api/listener/updateParameters",{listenerID:r,parameters:JSON.stringify({left:!0===u?c[s[0]].left:d,right:!1===u?c[s[0]].right:d})});case 13:t.next=18;break;case 15:return t.next=17,J.post("/api/listener/addLog",{listenerID:r,newLog:{assessment:{logOn:(new Date).toLocaleString(),log:m}},flag:"assessmentDone",flagValue:!1});case 17:sessionStorage.setItem("tmpParameters",!0===u?c[s[0]].left:c[s[0]].right);case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),alert(t.t0.message),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[4,20]])}))),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.showNodeNumber,o=this.state,l=o.playCurrent,s=o.firstTimeAccess,i=o.completed,c=o.currentEar,u=o.currentNode,m=o.nextNode,p=o.currentFile;return r.a.createElement(K.a,{className:a.paper},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12,className:a.grid},"Use your ",c?"LEFT":"RIGHT"," ear:"),r.a.createElement(Y.a,{item:!0,xs:12,className:a.grid},"Please click the one you think is better:"),r.a.createElement(Pt,{filename:p}),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(Et.a,{size:"large",color:"primary","aria-label":"large outlined primary button group"},r.a.createElement(C.a,{className:a.buttonGroup,variant:l?"contained":"outlined",startIcon:r.a.createElement(xt.a,null),onClick:function(){return e.handlePlay(!0)}},"Current"),r.a.createElement(C.a,{className:a.buttonGroup,variant:l?"outlined":"contained",startIcon:r.a.createElement(xt.a,null),onClick:function(){return e.handlePlay(!1)}},"Next"))),i?r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},s?"You've finished ".concat(c?"LEFT":"RIGHT"," ear."):"Congrats!! You've finished the user assessment!",s&&!n?r.a.createElement(C.a,{className:a.button,variant:"outlined",color:"primary",onClick:this.onSubmit,component:B.b,to:"/assessmentpageSetup/second"},"Proceed to the next ear"):r.a.createElement(C.a,{className:a.button,variant:"outlined",color:"primary",onClick:this.onSubmit,component:B.b,to:"/researcherpage"},"Back to main menu")):[r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center",key:"options"},r.a.createElement(C.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(0)}},"New is Better than Current"),r.a.createElement(C.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(1)}},"New is the Same as Current"),r.a.createElement(C.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(2)}},"New is Worse than Current")),n?r.a.createElement(Y.a,{container:!0,direction:"row",justify:"center",key:"node_helpers"},r.a.createElement(we.a,{className:a.buttonGroup,variant:"outlined",value:"Node ".concat(u),inputProps:{style:{textAlign:"center"}},disabled:!0}),r.a.createElement(we.a,{className:a.buttonGroup,variant:"outlined",value:"Node ".concat(m),inputProps:{style:{textAlign:"center"}},disabled:!0})):null]))}}]),a}(n.Component),Ft=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},paper:{minHeight:"90vh"},button:{minWidth:250,height:50,margin:10},grid:{marginLeft:10,fontSize:16},margin:{margin:10},extendedIcon:{marginRight:8},buttonGroup:{width:"40vw",height:100,marginTop:30,marginBottom:30}}})))(Lt),At=a(99),Bt=a.n(At),Tt=a(101),Wt=a.n(Tt),Rt=a(100),Mt=a.n(Rt),Ht=a(98),Gt=a.n(Ht),Ut=a(414),qt=Object(v.a)({root:{height:10},bar:{borderRadius:20}})(Ut.a),Vt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={nodes:{},options:{},currentNode:1,currentIsLeft:!0,time:"first"},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._isMounted=!0,a=e.state.options,t.next=4,e.getWorseEar(e.props.match.params.time);case 4:if(0!==Object.keys(a).length){t.next=9;break}return t.next=7,e.constructGraph();case 7:return t.next=9,e.handleApply();case 9:case"end":return t.stop()}}),t)}))),e.getWorseEar=function(t){var a=e.props.context.leftEarIsWorse;e.setState({currentIsLeft:"first"===t?a:!a,time:t})},e.constructGraph=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n={},t.next=4,wt.a(Gt.a,(function(e){n[e.NodeNo]=e.HearingLoss}));case 4:return t.next=6,wt.a(_t.a,(function(e){a[e.NodeNo]=St(e)}));case 6:e._isMounted&&e.setState({options:n,nodes:a});case 7:case"end":return t.stop()}}),t)}))),e.decreaseSound=function(){e.setState({currentNode:e.state.currentNode>1?e.state.currentNode-1:1},e.handleApply)},e.increaseSound=function(){e.setState({currentNode:e.state.currentNode<5?e.state.currentNode+1:5},e.handleApply)},e.getMarks=function(){var t=[],a=e.state.options;return Object.keys(a).forEach((function(e){t.push({value:25*(e-1),label:e})})),t},e.handleApply=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.currentNode,r=a.nodes,t.prev=1,t.next=4,J.post("/api/param/setparam",{method:"set",data:r[n]});case 4:o=t.sent,l=o.data,console.log(l),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleSliderChange=function(t,a){e.setState({currentNode:a/25+1})},e.earDone=function(){var t=e.state.currentNode;sessionStorage.setItem("rootNode",parseInt(t))},e.handlePlay=Object(c.a)(i.a.mark((function e(){var t,a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,J.get("/api/researcher/audioPath");case 4:a=e.sent,t=t.concat("/../../..",a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data);case 11:return t=t.concat("test.wav"),console.log(t),n={left:{audio_filename:t,audio_reset:1,audio_repeat:0,audio_play:1,alpha:1},right:{audio_filename:t,audio_reset:1,audio_repeat:0,audio_play:1,alpha:1}},e.prev=14,e.next=17,J.post("/api/param/setparam",{method:"set",data:n});case 17:r=e.sent,o=r.data,console.log(o),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(14),alert(e.t1.response.data);case 25:case"end":return e.stop()}}),e,null,[[1,8],[14,22]])}))),e}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.currentNode,o=a.options,l=a.currentIsLeft;return r.a.createElement(K.a,{className:t.paper},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12,className:t.title},"Please adjust the volume for your ".concat(l?"LEFT":"RIGHT"," ear"),r.a.createElement(ze.a,{title:"In this section, first adjust volumn, then choose the audio that you think is better. The process is repeated for both right ear and left ear"},r.a.createElement(w.a,{"aria-label":"help"},r.a.createElement(Ke.a,null)))),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(Bt.a,{className:t.icon}),o?r.a.createElement(qt,{variant:"determinate",value:25*(n-1),style:{flex:.3}}):null,r.a.createElement("div",{style:{marginLeft:10,fontSize:16}},25*(n-1)+"%")),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(w.a,{"aria-label":"remove",onClick:this.decreaseSound,className:t.iconButtonMarginLeft,disabled:1===n},r.a.createElement(Mt.a,{className:t.iconButton})),r.a.createElement(w.a,{"aria-label":"add",onClick:this.increaseSound,className:t.iconButtonMarginRight,disabled:5===n},r.a.createElement(Wt.a,{className:t.iconButton}))),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(w.a,{variant:"contained",onClick:function(){return e.handlePlay()}},r.a.createElement(xt.a,{className:t.buttonGroup}))),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.earDone,component:B.b,to:"/assessmentPage/".concat(l)},"Continue"),"}")))}}]),a}(n.Component),Jt=Object(W.a)(U,T.f,Object(v.a)((function(e){return{slider:{width:"60vw",marginLeft:30,marginRight:30},icon:{maxWidth:"10vw",marginRight:10},title:{margin:10},img:{height:"auto",width:"60vw"},button:{margin:10},iconButton:{height:50,width:50},iconButtonMarginLeft:{},iconButtonMarginRight:{},buttonGroup:{width:200,height:200}}})))(Vt),zt=a(4),Qt=a(415),Kt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e,n;Object(u.a)(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=t.call.apply(t,[this].concat(o))).state=(e={numIteration:1,low:-20,high:0,directoin:0,diff:0,alpha:0,New:0,Now:0,switchingTime:2.5,currPlaying:0,switchingParamIntervalId:null,controlMode:0,playCurrent:!0,completed:!1,isSetup:!1},Object(h.a)(e,"controlMode",null),Object(h.a)(e,"inputMode",null),e),n.reset=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={left:{alpha:0},right:{alpha:0}},e.prev=1,e.next=4,J.post("/api/param/setparam",{method:"set",data:a});case 4:r=e.sent,o=r.data,console.log(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data);case 12:n.setState({low:-20,high:0}),t&&n.setState({isSetup:!1});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),n.playFile=Object(c.a)(i.a.mark((function e(){var t,a,r,o,l,s,c,u,m,p,d,h,f,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.high,r=t.low,o=t.inputMode,l=t.controlMode,s=t.switchingTime,console.log("high: "+a),console.log("low: "+r),console.log(l),console.log("inputMode: "+o==="0"?"live audio":"file stimulus"),console.log("control: "+l==="0"?"auto":"manual"),c="",e.prev=7,e.next=10,J.get("/api/researcher/audioPath");case 10:u=e.sent,c=c.concat(u.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),alert(e.t0.response.data);case 17:c=c.concat("test.wav"),{left:{audio_filename:c,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1,afc:0},right:{audio_filename:c,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1,afc:0}},n.setState({isSetup:!0}),m=.5*(Number(r)+Number(a)),p=.25*Math.abs(a-r),d=Number(m)+Number(p),h=Number(m)-Number(p),0==l&&(f=n.getParam(h),n.transmitParams(f),null,g=setInterval((function(){return n.switchParam(h)}),1e3*s),n.setState({switchingParamIntervalId:g})),n.setState({low:h,high:d,diff:p,New:d,Now:h}),console.log("Current: "+n.state.Now),console.log("New: "+n.state.New);case 28:case"end":return e.stop()}}),e,null,[[7,14]])}))),n.switchParam=function(e){if(n.state.playCurrent){var t=n.getParam(e);n.transmitParams(t),n.setState({playCurrent:!1})}else{var a=n.getParam(e);n.transmitParams(a),n.setState({playCurrent:!0})}},n.getParam=function(e){return{left:{g50:[e,e,e,e,e,e],g80:[e,e,e,e,e,e]},right:{g50:[e,e,e,e,e,e],g80:[e,e,e,e,e,e]}}},n.transmitParams=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.post("/api/param/setparam",{method:"set",data:t});case 3:a=e.sent,n=a.data,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),n.handlePlay=function(e){var t=n.state,a=t.New,r=t.Now,o=e?n.getParam(r):n.getParam(a);n.transmitParams(o),n.setState({playCurrent:e}),console.log(e?"Current: "+o.left.g50[0]:"New: "+o.left.g50[0])},n.calculateNew=function(e){var t=n.state,a=t.high,r=t.low,o=t.diff,l=(t.New,0),s=0,i=0;return Math.abs(e-a)<Math.abs(e-r)?(l=Number(r)+Number(o),s=.25*Math.abs(a-r),[Number(a)-Number(s),[l,"l"],s]):(i=Number(a)-Number(o),s=.25*Math.abs(a-r),[Number(r)+Number(s),[i,"h"],s])},n.handleNewBetter=function(){var e=n.state,t=e.New,a=e.numIteration;n.setState({Now:t});var r=n.getParam(t);n.transmitParams(r);var o=n.calculateNew(t);"h"===o[1][1]?n.setState({New:o[0],diff:o[2],high:o[1][0],numIteration:a+1}):n.setState({New:o[0],diff:o[2],low:o[1][0],numIteration:a+1})},n.handleEqual=function(){var e=n.state.switchingParamIntervalId;null!=e&&clearInterval(e),n.reset(!1),n.setState({completed:!0})},n.handleCurrBetter=function(){var e=n.state,t=e.Now,a=e.numIteration,r=n.calculateNew(t),o=n.getParam(t);n.transmitParams(o),"h"===r[1][1]?n.setState({New:r[0],diff:r[2],high:r[1][0],numIteration:a+1}):n.setState({New:r[0],diff:r[2],low:r[1][0],numIteration:a+1})},n}return Object(m.a)(a,[{key:"handleChangeMin",value:function(e){this.state.low;this.setState({low:e.target.value})}},{key:"handleChangeMax",value:function(e){this.state.high;this.setState({high:e.target.value})}},{key:"handleChangeInputMode",value:function(e){this.state.inputMode;this.setState({inputMode:e.target.value})}},{key:"handleChangeControlMode",value:function(e){this.state.controlMode;this.setState({controlMode:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.completed,o=a.Now,l=a.New,s=a.numIteration,i=a.playCurrent,c=a.isSetup;return r.a.createElement(K.a,{className:t.paper},c?[r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12,className:t.grid},"Please click the one you think is better:"),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(Et.a,{size:"large",color:"primary","aria-label":"large outlined primary button group"},r.a.createElement(C.a,{className:t.buttonGroup,variant:i?"contained":"outlined",startIcon:r.a.createElement(xt.a,null),onClick:function(){return e.handlePlay(!0)}},"Current"),r.a.createElement(C.a,{className:t.buttonGroup,variant:i?"outlined":"contained",startIcon:r.a.createElement(xt.a,null),onClick:function(){return e.handlePlay(!1)}},"New"))),n?[r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},r.a.createElement("div",null,r.a.createElement("p",null,"Congrats!! You've finished the user assessment!\"",r.a.createElement("br",null),"The overall gain is:   ",o,r.a.createElement("br",null),"The difference between two stimulus:  ",Math.abs(l-o),".",r.a.createElement("br",null),"The number of iterations is:  ",s,".")),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.reset(!0)}},"exit"))]:[r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center",key:"options"},r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleNewBetter()}},"New is Better than Current"),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleEqual()}},"New is the Same as Current"),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleCurrBetter()}},"New is Worse than Current"))])]:[r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("h1",{class:"display-5"},"Search Example")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("p",{class:"text-secondary",id:"description"},"Choose between two set of changing parameters to find your optimal setting.")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ne.a,{className:Object(zt.a)(t.margin,t.withoutLabel,t.textField)},r.a.createElement(Se.a,{id:"minVolume",value:this.state.low,onChange:this.handleChangeMin.bind(this),endAdornment:r.a.createElement(Qt.a,{position:"end"},"dB"),inputProps:{"aria-label":"Min"}}),r.a.createElement(it.a,{id:"minVolume"},"Min"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ne.a,{className:Object(zt.a)(t.margin,t.withoutLabel,t.textField)},r.a.createElement(Se.a,{id:"maxVolume",value:this.state.high,onChange:this.handleChangeMax.bind(this),endAdornment:r.a.createElement(Qt.a,{position:"end"},"dB"),inputProps:{"aria-label":"Max"}}),r.a.createElement(it.a,{id:"maxVolume"},"Max"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("input",{type:"radio",value:"0",name:"inputType",onChange:this.handleChangeControlMode.bind(this)}),"Auto"),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("input",{type:"radio",value:"1",name:"inputType",onChange:this.handleChangeControlMode.bind(this)}),"Manual"),r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center",key:"options"},r.a.createElement(C.a,{className:t.button,variant:"contained",color:"primary",onClick:this.playFile},"start"),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.reset(!1)},component:B.b,to:"/listenermanagement/"},"exit")))])}}]),a}(n.Component),Yt=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},cardRoot:{minWidth:100},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},pos:{marginBottom:12},paper:{minHeight:"90vh"},title:{fontSize:14},button:{minWidth:250,height:50,margin:10},grid:{marginLeft:10,fontSize:16},margin:{margin:10},extendedIcon:{marginRight:8},buttonGroup:{width:"40vw",height:100,marginTop:30,marginBottom:30}}})))(Kt),$t=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filename,a=e.handlePlay,n=e.handleVolumeUp,o=e.handleVolumeDown;return r.a.createElement(Oe.a,{hover:!0},r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t)),r.a.createElement(ke.a,null,r.a.createElement(w.a,{variant:"contained",onClick:function(){return a(t)}},r.a.createElement(xt.a,null)),r.a.createElement(w.a,{"aria-label":"add",onClick:function(){return n(t)}},r.a.createElement(Wt.a,null)),r.a.createElement(w.a,{"aria-label":"remove",onClick:function(){return o(t)}},r.a.createElement(Mt.a,null))))}}]),a}(n.Component),Xt=(Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))($t),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={min:0,max:0},e.decreaseSound=function(){e.setState({currentNode:e.state.currentNode>1?e.state.currentNode-1:1},e.handleApply)},e.increaseSound=function(){e.setState({currentNode:e.state.currentNode<5?e.state.currentNode+1:5},e.handleApply)},e.playFile=function(){},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(K.a,{className:e.paper},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("h1",{class:"display-5"},"Search Example")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("p",{class:"text-secondary",id:"description"},"Choose between two set of changing parameters to find your optimal setting.")),r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center",key:"options"},r.a.createElement(C.a,{className:e.button,variant:"contained",color:"primary",onClick:this.playFile,component:B.b,to:"/qualityAssessmentDemo/"},"start"),r.a.createElement(C.a,{className:e.button,variant:"outlined",color:"primary",component:B.b,to:"/qualityAssessmentDemo/"},"exit")))}}]),a}(n.Component)),Zt=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{slider:{width:"60vw",marginLeft:30,marginRight:30},icon:{maxWidth:"10vw",marginBottom:20},title:{margin:10},img:{height:"auto",width:"60vw"},button:{margin:10},iconButton:{height:50,width:50},iconButtonMarginLeft:{},iconButtonMarginRight:{},buttonGroup:{width:180,height:180}}})))(Xt),ea=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={completed:!1,currentWord:"",audioConfig:[],audioPath:"",currentAudioFile:"",currentOptions:["","","",""],currentCount:0,logs:[]},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.props.context,n=a.user,"researcher"===a.loginMode){t.next=7;break}return t.next=5,J.get("/api/listener/getParameters/".concat(n));case 5:r=t.sent,e.apply(r.data);case 7:return t.next=9,J.get("/api/researcher/4AFCConfig");case 9:return o=t.sent,l=o.data.words,t.next=13,J.get("/api/researcher/audioPath");case 13:return s=t.sent,c=s.data,t.next=17,e.setState({audioConfig:l,audioPath:c});case 17:e.fetchWord(),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0),alert(t.t0.response.data);case 24:case"end":return t.stop()}}),t,null,[[0,20]])}))),e.apply=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,J.post("/api/param/setparam",{method:"set",data:t});case 5:a=e.sent,n=a.data,console.log(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),e.handlePlay=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.audioPath,r=a.currentAudioFile,o={left:{audio_filename:n.concat(r),audio_reset:1,audio_repeat:0,audio_play:1,alpha:1},right:{audio_filename:n.concat(r),audio_reset:1,audio_repeat:0,audio_play:1,alpha:1}},t.prev=2,t.next=5,J.post("/api/param/setparam",{method:"set",data:o});case 5:l=t.sent,s=l.data,console.log(s),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),alert(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.fetchWord=function(){var t=e.state.audioConfig;console.log(t);var a=Math.floor(Math.random()*t.length),n=t[a];t.splice(a,1),e.setState({audioConfig:t,currentWord:n.answer,currentOptions:[n.option_A,n.option_B,n.option_C,n.option_D],currentCount:e.state.currentCount+1,currentAudioFile:n.filename})},e.handleContinue=function(t){var a=e.state,n=a.currentCount,r=a.currentOptions,o=a.currentWord,l=a.logs;console.log(l),l.push({currentOptions:r,currentWord:o,option:t}),e.setState({logs:l}),n>=5?e.setState({completed:!0}):e.fetchWord()},e.handleSubmit=Object(c.a)(i.a.mark((function t(){var a,n,r,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.context,n=a.updateUser,r=a.user,o=a.loginMode,l=e.state.logs,"researcher"!==o){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,console.log(l),t.next=8,J.post("/api/listener/addLog",{listenerID:r,newLog:{AFC:{logOn:(new Date).toLocaleString(),log:l}},flag:"AFCDone",flagValue:!0});case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),alert(t.t0.message),console.log(t.t0);case 14:sessionStorage.setItem("AFCDone",!0),n();case 16:case"end":return t.stop()}}),t,null,[[4,10]])}))),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.completed,o=a.currentOptions;return r.a.createElement(K.a,{className:t.paper},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12,className:t.grid},"Please click the word you heard:",r.a.createElement(ze.a,{title:"In this section, hit the play button, then choose the word that matches best to the audio"},r.a.createElement(w.a,{"aria-label":"help"},r.a.createElement(Ke.a,null)))),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(w.a,{variant:"contained",onClick:function(){return e.handlePlay()}},r.a.createElement(xt.a,{className:t.buttonGroup}))),n?r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},"You are finished.",r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSubmit,component:B.b,to:"/researcherpage"},"Back to main menu")):r.a.createElement(Y.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("A")}},o[0]),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("B")}},o[1]),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("C")}},o[2]),r.a.createElement(C.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("D")}},o[3]))))}}]),a}(n.Component),ta=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},paper:{height:"90vh"},button:{width:"80vw",height:50,margin:10},grid:{marginLeft:10,fontSize:16},margin:{margin:10},extendedIcon:{marginRight:8},buttonGroup:{width:100,height:100}}})))(ea),aa=a(163),na=a.n(aa),ra=a(226),oa=a.n(ra),la=a(227),sa=a.n(la),ia=a(228),ca=a.n(ia),ua=a(229),ma=a.n(ua),pa=a(230),da=a.n(pa),ha=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={nodes:{},options:{},currentNode:1},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isMounted=!0,a=e.state.options,0!==Object.keys(a).length){t.next=5;break}return t.next=5,e.constructGraph();case 5:case"end":return t.stop()}}),t)}))),e.constructGraph=Object(c.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n={},t.next=4,wt.a(Gt.a,(function(e){n[e.NodeNo]=e.HearingLoss}));case 4:return t.next=6,wt.a(_t.a,(function(e){a[e.NodeNo]=St(e)}));case 6:e._isMounted&&e.setState({options:n,nodes:a});case 7:case"end":return t.stop()}}),t)}))),e.getMarks=function(){var t=[],a=e.state.options;return Object.keys(a).forEach((function(e){t.push({value:25*(e-1),label:a[e]})})),t},e.getImage=function(){switch(e.state.currentNode){case 1:return oa.a;case 2:return sa.a;case 3:return ca.a;case 4:return ma.a;case 5:return da.a;default:return}},e.handleApply=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.nodes,t.prev=1,t.next=4,J.post("/api/param/setparam",{method:"set",data:n[a]});case 4:r=t.sent,o=r.data,console.log(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSliderChange=function(){var t=Object(c.a)(i.a.mark((function t(a,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n/25+1,e.setState({currentNode:r}),sessionStorage.setItem("rootNode",parseInt(r)),t.next=5,e.handleApply(r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.currentNode,n=t.options;return r.a.createElement(K.a,{className:e.paper},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12,className:e.title},"Please adjust the hearing loss:"),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(na.a,{className:e.icon}),n?r.a.createElement(Ge.a,{value:25*(a-1),"aria-labelledby":"discrete-slider-always",step:25,onChangeCommitted:this.handleSliderChange,marks:this.getMarks(),track:!1,className:e.slider}):null,r.a.createElement(Bt.a,{className:e.icon})),r.a.createElement(Y.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement("img",{src:this.getImage(),alt:"Demo_".concat(a),className:e.img}))))}}]),a}(n.Component),fa=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{slider:{width:"60vw",marginLeft:30,marginRight:30},icon:{maxWidth:"10vw",marginBottom:20},title:{margin:10},img:{height:"auto",width:"60vw"},button:{margin:10}}})))(ha),ga=a(416),va=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={listenerID:"",password:"",isLoading:!1},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({isLoading:!0}),n=e.props.handleClose,r=e.props.context.user,t.prev=4,t.next=7,J.post("http://localhost:5000/api/listener/signup",{listenerID:e.state.listenerID,researcher:r,password:e.state.password});case 7:o=t.sent,null!=n&&n(),console.log(o),window.location.reload(),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),e.setState({isLoading:!1}),alert(t.t0.message),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.handleClose,o=this.state,l=o.listenerID,s=o.password,i=o.isLoading,c=""===l||""===s||i;return r.a.createElement("div",null,r.a.createElement(De.a,{open:a,onClose:n},r.a.createElement(Le.a,{id:"form-dialog-title"},"Create Listener"),r.a.createElement(Pe.a,null,r.a.createElement(we.a,{variant:"outlined",required:!0,label:"listener ID",id:"listenerID",onChange:this.handleInputChange,className:t.textField}),r.a.createElement(we.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:t.textField}),i&&r.a.createElement(ga.a,null)),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{onClick:n,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:this.handleSubmit,color:"primary",disabled:c},"Create"))))}}]),a}(n.Component),ba=Object(W.a)(U,Object(v.a)({formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20}}))(va),Ea=a(233),ya=a.n(Ea),xa=a(232),wa=a.n(xa),Ca=a(231),ka=a.n(Ca),Oa={occur:"When did it occur:",happen:"How did it happen:",resolve:"When did it resolve:"},_a={relation:"Relation(s):",occur:"When did it occur:",happen:"How did it happen:",resolve:"When did it resolve:"},Sa={currentOptions:"Current options are:",currentWord:"The currect answer is:",option:"The user selected:"},Na={left:"Left Ear",right:"Right Ear"};function ja(e){var t=e.children,a=e.value,n=e.index,o=Object(he.a)(e,["children","value","index"]);return r.a.createElement(y.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(Ue.a,{p:3},t))}function Ia(e){var t=e.title,a=e.content;Object(he.a)(e,["title","content"]);return r.a.createElement(y.a,{component:"div",variant:"body1",color:"textSecondary"},t,r.a.createElement(y.a,{component:"span",variant:"body1",color:"textPrimary",style:{marginLeft:5}},a))}var Pa=["Patient History","4AFC","PTA","Assessment"],Da=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={currTabIdx:0,listenerLog:e.props.log},e.handleTabChange=function(t,a){e.setState({currTabIdx:a})},e.renderMedicalHistory=function(e){return r.a.createElement(I.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Medical History")),disableTypography:!0,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ia,{title:"Left ear Condition:",content:e.medicalHistory.leftEar}),r.a.createElement(Ia,{title:"Right ear Condition:",content:e.medicalHistory.rightEar}),r.a.createElement(y.a,{component:"h6",variant:"body1",color:"textSecondary"},"Illnesses had before:"),Object.keys(e.illnesses).map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h6",variant:"body1",color:"textPrimary"},t),Object.keys(Oa).map((function(n,o){return r.a.createElement(Ia,{key:"illness".concat(a,"_question").concat(o),title:Oa[n],content:e.illnesses[t][n]})})))})))})},e.renderEducationHistory=function(e){return r.a.createElement(I.a,{disableTypography:!0,primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Family History")),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h6",variant:"body1",color:"textSecondary"},"Illnesses had before:",Object.keys(e.illnessesFam).map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"div",variant:"body1",color:"textPrimary"},t),Object.keys(_a).map((function(n,o){return r.a.createElement(Ia,{key:"illness".concat(a,"_question").concat(o),title:_a[n],content:e.illnessesFam[t][n]})})))}))))})},e.render4AFC=function(){var t=e.state.listenerLog.AFC;return t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"4AFC Log on:  "+t.logOn)})),t.log.map((function(e,t){return r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{disableTypography:!0,primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Step ".concat(t+1)),secondary:r.a.createElement(r.a.Fragment,null,Object.keys(Sa).map((function(a,n){return r.a.createElement(Ia,{key:"step".concat(t,"_question").concat(n),title:Sa[a],content:"currentOptions"===a?e[a].join(" "):e[a]})})))}))})))},e.renderPTA=function(){var t=e.state.listenerLog.PTA;return t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"PTA Log on:  "+t.logOn)})),r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Audiologist ID:  "+t.audiologistID)})),Object.keys(Na).map((function(e,a){return r.a.createElement(j.a,{index:"channel".concat(a),divider:!0},r.a.createElement(I.a,{disableTypography:!0,primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},Na[e]),secondary:Object.keys(t[e]).map((function(n,o){return r.a.createElement(Ia,{index:"channel".concat(a,"_freq").concat(o),title:"".concat(n,":"),content:""===t[e][n]?"N/A":t[e][n]})}))}))})))},e.renderAssessment=function(){var t=e.state.listenerLog.assessment;return t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"User Assessment Log on:  "+t.logOn)})),r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{secondary:r.a.createElement(r.a.Fragment,null,t.log.map((function(e,t){return r.a.createElement(Ia,{key:t,title:"Step ".concat(t+1,":"),content:e})})))})))},e.renderPatientHistory=function(){var t=e.state.listenerLog.history;return r.a.createElement(S.a,null,r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Patient History Log on:  "+t.logOn)})),r.a.createElement(j.a,{divider:!0},e.renderMedicalHistory(t)),r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Development History")),secondary:r.a.createElement(Ia,{title:"Age started to speak:",content:t.ageSpeak})})),r.a.createElement(j.a,{divider:!0},r.a.createElement(I.a,{disableTypography:!0,primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6",color:"textPrimary"},"Education History")),secondary:r.a.createElement(Ia,{title:"The highest education obtained:",content:t.highestEdu})})),r.a.createElement(j.a,null,e.renderEducationHistory(t)))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.currTabIdx;return console.log(this.props.open),r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,null,r.a.createElement(de.a,{value:e,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",centered:!0},Pa.map((function(e,t){return r.a.createElement(pe.a,{label:e,key:t})})))),r.a.createElement(Pe.a,null,r.a.createElement(ja,{value:e,index:0,style:{whiteSpace:"pre-line"}},this.renderPatientHistory()),r.a.createElement(ja,{value:e,index:1},this.render4AFC()),r.a.createElement(ja,{value:e,index:2},this.renderPTA()),r.a.createElement(ja,{value:e,index:3},this.renderAssessment())))}}]),a}(n.Component),La=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(Da),Fa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={listener:e.props.listener,showLogOpen:!1,deleteDialogOpen:!1,editPasswordOpen:!1,newPassword:"",currTabIdx:0,listenerLog:JSON.parse(e.props.listener.userLog)},e.handleTabChange=function(t,a){e.setState({currTabIdx:a})},e.handleOpen=function(){e.setState({deleteDialogOpen:!0})},e.handleClose=function(){e.setState({deleteDialogOpen:!1})},e.handleShowLogOpen=function(){e.setState({showLogOpen:!0})},e.handleShowLogClose=function(){e.setState({showLogOpen:!1})},e.handleEditPasswordOpen=function(){e.setState({editPasswordOpen:!0})},e.handleEditPasswordClose=function(){e.setState({editPasswordOpen:!1})},e.handlePasswordChange=function(t){e.setState({newPassword:t.target.value})},e.handleDeleteListener=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/listener/delete",{listenerID:e.state.listener.listenerID});case 3:a=t.sent,console.log(a.data),window.location.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.handleEditPassword=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/listener/password",{listenerID:e.state.listener.listenerID,newPassword:e.state.newPassword});case 3:a=t.sent,console.log(a.data),window.location.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.listener,a=e.deleteDialogOpen,n=e.editPasswordOpen,o=e.newPassword,l=e.listenerLog,s=e.showLogOpen,i=""===o||o===t.password;return r.a.createElement(Oe.a,{hover:!0},r.a.createElement(ke.a,{padding:"checkbox"},r.a.createElement(pt.a,{checked:this.props.selected,onChange:this.props.onClick})),r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t.listenerID)),r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textPrimary"},t.createdAt)),r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textPrimary"},t.updatedAt)),r.a.createElement(ke.a,null,r.a.createElement(w.a,{color:"primary",onClick:this.handleShowLogOpen},r.a.createElement(ka.a,null)),r.a.createElement(w.a,{color:"primary",onClick:this.handleEditPasswordOpen},r.a.createElement(wa.a,null)),r.a.createElement(w.a,{color:"secondary",onClick:this.handleOpen},r.a.createElement(ya.a,null))),r.a.createElement(De.a,{open:s,fullWidth:!0,maxWidth:"lg",onClose:this.handleShowLogClose},r.a.createElement(La,{log:l,open:s}),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{color:"primary",onClick:this.handleShowLogClose},"OK"))),r.a.createElement(De.a,{open:n,onClose:this.handleEditPasswordClose},r.a.createElement(Le.a,null,"Edit Password"),r.a.createElement(Pe.a,null,r.a.createElement(we.a,{variant:"outlined",label:"Current Password",disabled:!0,value:t.password,style:{width:"90%",maxWidth:400,marginBottom:20}}),r.a.createElement(we.a,{variant:"outlined",label:"New Password",style:{width:"90%",maxWidth:400,marginBottom:20},onChange:this.handlePasswordChange})),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{onClick:this.handleEditPasswordClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{color:"primary",disabled:i,onClick:this.handleEditPassword},"Confirm"))),r.a.createElement(De.a,{open:a,onClose:this.handleClose},r.a.createElement(Le.a,null,"Delete Listener"),r.a.createElement(Pe.a,null,r.a.createElement(je.a,null,"Warning! This action is NOT reversable.")),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{color:"primary",onClick:this.handleDeleteListener},"Delete"))))}}]),a}(n.Component),Aa=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(Fa),Ba=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={signupDialogOpen:!1,listenerList:[],selected:[]},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.context.updateUser,t.next=4,a();case 4:return n=e.props.context.user,t.next=7,J.get("/api/listener/".concat(n));case 7:r=t.sent,console.log(r.data),e.setState({listenerList:r.data,selected:new Array(r.data.length).fill(!1)}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),alert(t.t0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.handleSignupDialogOpen=function(){e.setState({signupDialogOpen:!0})},e.handleSignupDialogClose=function(){e.setState({signupDialogOpen:!1})},e.handleSelectAllClick=function(t){e.setState({selected:new Array(e.state.selected.length).fill(t.target.checked)})},e.handleSelectClick=function(t,a){var n=e.state.selected;n[t]=a.target.checked,e.setState({selected:n})},e.handleExport=function(){var t=e.state,a=t.selected,n=t.listenerList,r={patient_history:"",PTA:"",use_assessment:"","4AFC":""};a.forEach((function(t,a){if(t){var o=JSON.parse(n[a].userLog),l="ListenerId,".concat(n[a].listenerID,"\n");r.patient_history=r.patient_history.concat(l,e.handlePatientHistory(o.history),"\n"),r["4AFC"]=r["4AFC"].concat(l,e.handleAFCExport(o.AFC),"\n"),r.PTA=r.PTA.concat(l,e.handlePTAExport(o.PTA),"\n"),r.use_assessment=r.use_assessment.concat(l,e.handleAssessmentExport(o.assessment),"\n")}})),["patient_history","4AFC","PTA","use_assessment"].forEach((function(e){var t=document.createElement("a"),a=new Blob([r[e]],{type:"text/csv;encoding:utf-8"});t.href=URL.createObjectURL(a),t.download="".concat(e,"_log.csv"),document.body.appendChild(t),t.click()}))},e.handlePatientHistory=function(e){return e?"".concat("Patient History Log on, ",e.logOn,"\n","Medical History\n","Left ear Condition,",e.medicalHistory.leftEar,"\n","Right ear Condition,",e.medicalHistory.rightEar,"\n","Illnesses had before\n",0!==e.illnesses.length?","+Object.keys(e.illnesses).join(",")+"\nWhen did it occur,"+Object.keys(e.illnesses).map((function(t){return"".concat(e.illnesses[t].occur,",")}))+"\nHow did it happen,"+Object.keys(e.illnesses).map((function(t){return"".concat(e.illnesses[t].happen,",")}))+"\nWhen did it resolve,"+Object.keys(e.illnesses).map((function(t){return"".concat(e.illnesses[t].resolve,",")}))+"\n":"None\n","Development History\n","Age started to speak, ".concat(e.ageSpeak,"\n\n"),"Education History\n","The highest education obtained, ".concat(e.highestEdu," \n"),"Family History\n","Illnesses family members had before \n",0!==e.illnessesFam.length?","+Object.keys(e.illnessesFam).join(",")+"\nRelation(s),"+Object.keys(e.illnessesFam).map((function(t){return"".concat(e.illnessesFam[t].relation,",")}))+"\nWhen did it occur,"+Object.keys(e.illnessesFam).map((function(t){return"".concat(e.illnessesFam[t].occur,",")}))+"\nHow did it happen,"+Object.keys(e.illnessesFam).map((function(t){return"".concat(e.illnessesFam[t].happen,",")}))+"\nWhen did it resolve,"+Object.keys(e.illnessesFam).map((function(t){return"".concat(e.illnessesFam[t].resolve,",")}))+"\n":"None\n"):"N/A\n"},e.handleAFCExport=function(e){if(!e)return"N/A\n";var t="";return e.log.forEach((function(e,a){t=t.concat("Question ".concat(a,"\n"),"Current options,",e.currentOptions.join(","),"\n","Correct answer,",e.currentWord,"\n","Selected,",e.option,"\n")})),"".concat("4AFC Log on,".concat(e.logOn,"\n"),t)},e.handlePTAExport=function(e){if(!e)return"N/A\n";var t="";return Object.keys(e.left).forEach((function(a,n){t=t.concat("".concat(a,","),""===e.left[a]?"N/A,":"".concat(e.left[a],","),""===e.right[a]?"N/A\n":"".concat(e.right[a],"\n"))})),"".concat("PTA Log on,".concat(e.logOn,"\n"),"AudiologistID, ".concat(e.audiologistID,"\n"),"Frequency(Hz),Left Ear(dBspl), Right Ear(dBspl)\n",t)},e.handleAssessmentExport=function(e){return e?"".concat("User Assessment Log on,".concat(e.logOn,"\n"),e.log.join("\n")):"N/A\n"},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.listenerList,o=a.selected;return console.log(o),r.a.createElement("div",{className:t.content},r.a.createElement(K.a,{className:t.listenerSection},r.a.createElement(E.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"My Listeners"),r.a.createElement(C.a,{color:"primary",variant:"contained",className:t.topBarButton,onClick:this.handleSignupDialogOpen},"Create New Listener"),r.a.createElement(C.a,{color:"primary",variant:"contained",className:t.exportButton,onClick:this.handleExport},"Export")),r.a.createElement(ba,{open:this.state.signupDialogOpen,handleClose:this.handleSignupDialogClose}),r.a.createElement("div",{className:t.listenerSectionContent},r.a.createElement(Ce.a,null,r.a.createElement(_e.a,null,r.a.createElement(Oe.a,null,r.a.createElement(ke.a,{padding:"checkbox"},r.a.createElement(pt.a,{onChange:this.handleSelectAllClick,inputProps:{"aria-label":"select all desserts"}})),["Listener ID","Created At","Updated At","Action"].map((function(e){return r.a.createElement(ke.a,{key:e},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},e))})))),r.a.createElement(Ee.a,null,n.map((function(t,a){return r.a.createElement(Aa,{key:"listener_".concat(a,"_").concat(o[a]),listener:t,selected:o[a],onClick:function(t){return e.handleSelectClick(a,t)}})})))))))}}]),a}(n.Component),Ta=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},exportButton:{marginLeft:"auto"}}})))(Ba),Wa=a(238),Ra=a(426),Ma=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filename,a=e.handleDelete;return r.a.createElement(Oe.a,{hover:!0},r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t)),r.a.createElement(ke.a,null,r.a.createElement(C.a,{onClick:function(){return a(t)},color:"secondary"},"Delete")))}}]),a}(n.Component),Ha=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(Ma),Ga=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fileList:[],fileOrder:"asc",uploadDialogOpen:!1,selectedFiles:[]},e.componentDidMount=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getFileNames();case 1:case"end":return t.stop()}}),t)}))),e.getFileNames=Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.get("/api/researcher/fileNames");case 3:a=t.sent,e.setState({fileList:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0.response.data);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleSortChange=function(){var t="asc"===e.state.fileOrder?"desc":"asc";e.setState({fileOrder:t})},e.handleUploadDialogOpen=function(){e.setState({uploadDialogOpen:!0})},e.handleUploadDialogClose=function(){e.setState({uploadDialogOpen:!1})},e.handleDelete=function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.post("/api/researcher/delete",{filename:a});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),t.t0;case 8:e.getFileNames();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadFiles=Object(c.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log(e.state.selectedFiles),a=new FormData,n=0;n<e.state.selectedFiles.length;n++)a.append("file",e.state.selectedFiles[n]);return t.prev=3,t.next=6,J.post("/api/researcher/upload",a,{});case 6:r=t.sent,console.log(r.data),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),alert(t.t0);case 13:e.getFileNames(),e.handleUploadDialogClose();case 15:case"end":return t.stop()}}),t,null,[[3,10]])}))),e.onChangeHandler=function(t){e.setState({selectedFiles:t.target.files})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.fileOrder,o=a.fileList,l=a.uploadDialogOpen;console.log(o);var s=Object(Wa.a)(o).sort((function(e,t){return"4AFCConfig.json"===e||"UserAssessmentConfig.json"===e?-1:"4AFCConfig.json"===t||"UserAssessmentConfig.json"===t?1:"asc"===n?e>t?1:-1:e<t?1:-1}));return r.a.createElement("div",{className:t.content},r.a.createElement(K.a,{className:t.listenerSection},r.a.createElement(E.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"My Files"),r.a.createElement(C.a,{color:"primary",variant:"contained",className:t.topBarButton,onClick:this.handleUploadDialogOpen},"Upload Files")),r.a.createElement("div",{className:t.listenerSectionContent},r.a.createElement(Ce.a,null,r.a.createElement(_e.a,null,r.a.createElement(Oe.a,null,r.a.createElement(ke.a,null,r.a.createElement(Ra.a,{active:!0,direction:n,onClick:this.handleSortChange},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"File Name"))),r.a.createElement(ke.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"Actions")))),r.a.createElement(Ee.a,null,s.map((function(t,a){return r.a.createElement(Ha,{key:"file_".concat(a),filename:t,handleDelete:e.handleDelete})}))))),r.a.createElement(De.a,{open:l,onClose:this.handleUploadDialogClose},r.a.createElement(Le.a,null,"Upload File"),r.a.createElement(Pe.a,null,r.a.createElement("input",{type:"file",multiple:!0,onChange:this.onChangeHandler})),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{color:"primary",onClick:this.uploadFiles},"Submit")))))}}]),a}(n.Component),Ua=Object(W.a)(U,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(Ga),qa=[{path:"/listenermanagement",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Listener Management")},main:function(){return r.a.createElement(Ta,null)}},{path:"/filemanagement",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"File Management")},main:function(){return r.a.createElement(Ua,null)}},{path:"/stimulus",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Stimulus")},main:function(){return r.a.createElement(me,null)}},{path:"/researcherpage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Researcher Page")},main:function(){return r.a.createElement(at,null)}},{path:"/surveypage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Patient History")},main:function(){return r.a.createElement(ht,null)}},{path:"/PTApage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Pure Tone Audiogram",r.a.createElement("div",null,"(Researcher Only)"))},main:function(){return r.a.createElement(bt,null)}},{path:"/assessmentpageSetup/:time",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(Jt,null)}},{path:"/assessmentpage/:currentIsLeft",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(Ft,{showNodeNumber:!1})}},{path:"/qualityAssessmentSetup/:time",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Quality Assessment Demo")},main:function(){return r.a.createElement(Zt,null)}},{path:"/qualityAssessmentDemo/",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Quality Assessment Demo")},main:function(){return r.a.createElement(Yt,{showNodeNumber:!1})}},{path:"/4AFCpage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(ta,null)}},{path:"/hearingLossDemo",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Hearing Loss Demo")},main:function(){return r.a.createElement(fa,null)}}],Va=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={drawerOpen:!1},e.componentDidMount=Object(c.a)(i.a.mark((function t(){var a,n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.context.updateUser,t.next=3,a();case 3:n=e.props.context,r=n.user,o=n.loginMode,console.log(r,o),r&&o?"researcher"===o?e.props.history.push("/listenermanagement"):e.props.history.push("/researcherpage"):e.props.history.push("/login");case 6:case"end":return t.stop()}}),t)}))),e.handleDrawerToggle=function(){e.setState((function(e){return{drawerOpen:!e.drawerOpen}}))},e.handleLogOut=function(){sessionStorage.clear(),window.location.reload()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.props.context,a=t.loginMode,n=t.assessmentDone;return r.a.createElement("div",{className:e.root},r.a.createElement(b.a,{position:"fixed",className:e.appBar},r.a.createElement(E.a,null,r.a.createElement(w.a,{color:"inherit",edge:"start",className:e.menuButton,onClick:this.handleDrawerToggle},r.a.createElement(_.a,null)),r.a.createElement(T.c,null,qa.map((function(e,t){return r.a.createElement(T.a,{key:t,path:e.path,component:e.appBarTitle})}))),r.a.createElement(C.a,{variant:"outlined",color:"inherit",styles:{margin:20},onClick:this.handleLogOut},"Log Out"))),r.a.createElement("nav",{className:e.drawer},r.a.createElement(x.a,{mdUp:!0,implementation:"css"},r.a.createElement(k.a,{classes:{paper:e.drawerPaper},anchor:"left",variant:"temporary",open:this.state.drawerOpen,onClose:this.handleDrawerToggle},r.a.createElement(V,{loginMode:a,assessmentDone:n}))),r.a.createElement(x.a,{smDown:!0,implementation:"css"},r.a.createElement(k.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},r.a.createElement(V,{loginMode:a,assessmentDone:n})))),r.a.createElement("main",{className:e.content},r.a.createElement(T.c,null,qa.map((function(e,t){return r.a.createElement(T.a,{key:t,path:e.path,component:e.main})})))))}}]),a}(n.Component);Va.protoTypes={classes:g.a.object.isRequired};var Ja=Object(W.a)(U,T.f,Object(v.a)((function(e){return{root:{display:"flex"},appBar:Object(h.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(270,"px)"),marginLeft:270}),menuButton:Object(h.a)({marginRight:20},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawer:Object(h.a)({},e.breakpoints.up("md"),{width:270,flexShrink:0}),drawerPaper:{width:270},content:{flexGrow:1,marginTop:70}}})))(Va),za=a(237),Qa=a(418),Ka=a(235),Ya=a.n(Ka),$a=a(236),Xa=a.n($a),Za=a(429),en=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={researcherID:"",password:"",isLoading:!1},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(c.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({isLoading:!0}),n=e.props.history,t.prev=3,t.next=6,J.post("/api/researcher/signup",{researcherID:e.state.researcherID,institution:e.state.institution,password:e.state.password});case 6:n.push("/login"),e.setState({isLoading:!1}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({isLoading:!1}),alert(t.t0.message),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.researcherID,n=t.password,o=t.isLoading,l=""===a||""===n||o;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(we.a,{variant:"outlined",required:!0,label:"Researcher ID",id:"researcherID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(we.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(C.a,{variant:"contained",className:e.button,color:"primary",disabled:l,onClick:this.handleSubmit},"Submit"),o&&r.a.createElement(ga.a,null))}}]),a}(n.Component),tn=Object(W.a)(T.f,Object(v.a)({formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10,marginBottom:10}}))(en),an=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleChangeSignupMode=function(t,a){e.setState({signupMode:a})},e.topBar=function(){var t=e.props.classes;return r.a.createElement("div",{className:t.topBar},r.a.createElement(x.a,{xsDown:!0},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary",className:t.topBarTitle},"Researcher Sign Up")),r.a.createElement(C.a,{variant:"outlined",color:"secondary",className:t.topBarButton,component:B.b,to:"/login"},"Log in"))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},this.topBar(),r.a.createElement("div",{className:e.content},r.a.createElement("div",{className:e.title},r.a.createElement(y.a,{variant:"h4",gutterBottom:!0},"Welcom to Open Speech Platform"),r.a.createElement(y.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement(K.a,{className:e.formPaper},r.a.createElement(tn,null))))}}]),a}(n.Component),nn=Object(v.a)((function(e){return{root:{padding:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},topBar:{display:"flex",justifyContent:"space-between",marginBottom:30},topBarTitle:{marginLeft:50},topBarButton:{marginRight:50,justifySelf:"flex-end"},title:{marginBottom:30,textAlign:"center"},formPaper:{width:"90%",maxWidth:500}}}))(an),rn={formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10,marginBottom:10}},on=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={listenerID:"",password:""},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.history,a.preventDefault(),e.setState({isLoading:!0}),t.prev=3,t.next=6,J.post("/api/listener/login",{listenerID:e.state.listenerID,password:e.state.password});case 6:return r=t.sent,o=r.data.listenerID,sessionStorage.setItem("user",o),sessionStorage.setItem("loginMode",1),sessionStorage.setItem("historyDone",r.data.historyDone),sessionStorage.setItem("PTADone",r.data.PTADone),sessionStorage.setItem("assessmentDone",r.data.assessmentDone),sessionStorage.setItem("AFCDone",r.data.AFCDone),sessionStorage.setItem("leftEarIsWorse",r.data.leftEarIsWorse),t.next=17,e.props.context.updateUser();case 17:n.push("/"),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(3),alert(t.t0),e.setState({isLoading:!1}),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.listenerID,n=t.password,o=t.isLoading,l=""===a||""===n||o;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(we.a,{variant:"outlined",required:!0,label:"Listener ID",id:"listenerID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(we.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(C.a,{variant:"contained",className:e.button,color:"primary",disabled:l,onClick:this.handleSubmit},"Submit"),o&&r.a.createElement(ga.a,null))}}]),a}(n.Component),ln=Object(W.a)(U,T.f,Object(v.a)(rn))(on),sn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={researcherID:"",password:""},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(c.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.history,a.preventDefault(),e.setState({isLoading:!0}),t.prev=3,t.next=6,J.post("/api/researcher/login",{researcherID:e.state.researcherID,password:e.state.password});case 6:return r=t.sent,o=r.data.researcherID,sessionStorage.setItem("user",o),sessionStorage.setItem("loginMode","researcher"),sessionStorage.setItem("historyDone",!1),sessionStorage.setItem("PTADone",!1),sessionStorage.setItem("assessmentDone",!1),sessionStorage.setItem("AFCDone",!1),sessionStorage.setItem("leftEarIsWorse",!1),t.next=17,e.props.context.updateUser();case 17:n.push("/"),t.next=26;break;case 20:t.prev=20,t.t0=t.catch(3),alert(t.t0),e.setState({isLoading:!1}),alert(t.t0),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.listenerID,n=t.password,o=t.isLoading,l=""===a||""===n||o;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(we.a,{variant:"outlined",required:!0,label:"Researcher ID",id:"researcherID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(we.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(C.a,{variant:"contained",className:e.button,color:"primary",disabled:l,onClick:this.handleSubmit},"Submit"),o&&r.a.createElement(ga.a,null))}}]),a}(n.Component),cn=Object(W.a)(U,T.f,Object(v.a)(rn))(sn),un=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={loginMode:0,listenerID:"",password:"",isLoading:!1},e.handleInputChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleTabChange=function(t,a){e.setState({loginMode:a})},e.topBar=function(){var t=e.props.classes;return r.a.createElement("div",{className:t.topBar},r.a.createElement(x.a,{xsDown:!0},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary",className:t.topBarTitle},"Researcher and Listener Login")),r.a.createElement(C.a,{variant:"outlined",color:"secondary",className:t.topBarButton,component:B.b,to:"/signup"},"Sign up"))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.loginMode;return r.a.createElement("div",{className:e.root},this.topBar(),r.a.createElement("div",{className:e.title},r.a.createElement(y.a,{variant:"h4",gutterBottom:!0},"Welcom to Open Speech Platform"),r.a.createElement(y.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement("div",{className:e.content},r.a.createElement(K.a,{className:e.formPaper},r.a.createElement(de.a,{value:t,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",id:"loginMode"},r.a.createElement(pe.a,{label:"Researcher Login",value:0}),r.a.createElement(pe.a,{label:"Listener Login",value:1})),0===t&&r.a.createElement(cn,null),1===t&&r.a.createElement(ln,null))))}}]),a}(n.Component),mn=Object(W.a)(U,T.f,Object(v.a)((function(e){return{root:{padding:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},topBar:{display:"flex",justifyContent:"space-between",marginBottom:30},topBarTitle:{marginLeft:50},topBarButton:{marginRight:50,justifySelf:"flex-end"},title:{marginBottom:30,textAlign:"center"},formPaper:{width:"90%",maxWidth:500},formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10}}})))(un),pn=(a(331),Object(za.a)({palette:{primary:{main:Ya.a.A400},secondary:Xa.a},typography:{fontFamily:'"Lato", sans-serif'}}));var dn=function(){return r.a.createElement(G,null,r.a.createElement(B.a,null,r.a.createElement(Qa.a,{theme:pn},r.a.createElement(Za.a,null),r.a.createElement(T.c,null,r.a.createElement(T.a,{exact:!0,path:"/login"},r.a.createElement(mn,null)),r.a.createElement(T.a,{path:"/signup"},r.a.createElement(nn,null)),r.a.createElement(T.a,{path:"/"},r.a.createElement(Ja,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(dn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){e.exports=a.p+"static/media/treeNodes.0be0de6c.csv"},98:function(e,t,a){e.exports=a.p+"static/media/rootNodes.f0851fd7.csv"}},[[260,1,2]]]);
//# sourceMappingURL=main.96fd2d2d.chunk.js.map