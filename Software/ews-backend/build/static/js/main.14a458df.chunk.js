(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/rootNodes.f0851fd7.csv"},203:function(e,t,a){e.exports=a.p+"static/media/4afcBlock.9e545bc2.png"},205:function(e,t,a){e.exports=a.p+"static/media/treeGraph.978248e8.csv"},208:function(e,t,a){e.exports=a.p+"static/media/demo1.c4e9169b.png"},209:function(e,t,a){e.exports=a.p+"static/media/demo2.8fe4c290.png"},210:function(e,t,a){e.exports=a.p+"static/media/demo3.0c18e092.png"},211:function(e,t,a){e.exports=a.p+"static/media/demo4.94b910f2.png"},212:function(e,t,a){e.exports=a.p+"static/media/demo5.70b4d777.png"},245:function(e,t,a){e.exports=a(316)},250:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),s=(a(250),a(7)),i=a.n(s),c=a(10),u=a(11),m=a(13),p=a(12),d=a(14),h=a(22),g=a(5),f=a.n(g),E=a(8),b=a(398),v=a(385),y=a(74),w=a(403),C=a(390),x=a(321),_=a(410),S=a(216),k=a.n(S),N=a(370),O=a(369),I=a(319),L=a(371),D=a(95),j=a.n(D),A=a(96),F=a.n(A),B=a(320),P=a(17),T=a(62),R=a(20),W=r.a.createContext(),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,loginMode:null,historyDone:null,PTAdone:null,assessmentDone:null,AFCDone:null,leftEarIsWorse:null},a.updateUser=function(){var e=sessionStorage.getItem("user"),t=sessionStorage.getItem("loginMode"),n=JSON.parse(sessionStorage.getItem("historyDone")),r=JSON.parse(sessionStorage.getItem("PTAdone")),o=JSON.parse(sessionStorage.getItem("assessmentDone")),l=JSON.parse(sessionStorage.getItem("AFCDone")),s=JSON.parse(sessionStorage.getItem("leftEarIsWorse"));a.setState({user:e,loginMode:t,historyDone:n,PTAdone:r,assessmentDone:o,AFCDone:l,leftEarIsWorse:s})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(W.Provider,{value:{user:this.state.user,loginMode:this.state.loginMode,historyDone:this.state.historyDone,PTAdone:this.state.PTAdone,assessmentDone:this.state.assessmentDone,AFCDone:this.state.AFCDone,leftEarIsWorse:this.state.leftEarIsWorse,updateUser:this.updateUser}},this.props.children)}}]),t}(n.Component),G=W.Consumer,U=M;function H(e){return function(t){return r.a.createElement(G,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}}var V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={fittingAppsOpen:!1,demosOpen:!1,adminOpen:!0,ABOpen:!1},a.handleAdminOpen=function(){a.setState((function(e){return{adminOpen:!e.adminOpen}}))},a.handleDemos=function(){a.setState((function(e){return{demosOpen:!e.demosOpen}}))},a.handleFittingApps=function(){a.setState((function(e){return{fittingAppsOpen:!e.fittingAppsOpen}}))},a.handleABOpen=function(){a.setState((function(e){return{ABOpen:!e.ABOpen}}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.context,a=t.loginMode,n=t.assessmentDone,o=t.historyDone,l=t.AFCDone,s=t.PTAdone;return r.a.createElement("div",null,r.a.createElement("div",{className:e.header},r.a.createElement(y.a,{variant:"h5"},"Open Speech Platform"),r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement(O.a,null),r.a.createElement(N.a,null,"researcher"===a&&[r.a.createElement(I.a,{button:!0,key:"Admin",onClick:this.handleAdminOpen},r.a.createElement(L.a,{primary:"Admin"}),this.state.adminOpen?r.a.createElement(j.a,null):r.a.createElement(F.a,null)),r.a.createElement(B.a,{key:"AdminTab",in:this.state.adminOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(N.a,{component:"div",disablePadding:!0},r.a.createElement(I.a,{className:e.nested,button:!0,key:"ListenerManagement",component:P.b,to:"/listenermanagement"},r.a.createElement(L.a,{primary:"Listener Management"})),r.a.createElement(I.a,{className:e.nested,button:!0,key:"FileManagement",component:P.b,to:"/filemanagement"},r.a.createElement(L.a,{primary:"File Management"}))))],r.a.createElement(I.a,{button:!0,key:"Researcher Page",component:P.b,to:"/researcherpage"},r.a.createElement(L.a,{primary:"Researcher Page"})),!0!==o&&r.a.createElement(I.a,{button:!0,key:"Survey Page",component:P.b,to:"/surveypage"},r.a.createElement(L.a,{primary:"Patient History"})),!0!==s&&r.a.createElement(I.a,{button:!0,key:"Pure Tone Audiogram",component:P.b,to:"/PTApage"},r.a.createElement(L.a,{primary:"Pure Tone Audiogram"})),r.a.createElement(I.a,{button:!0,key:"Demos",onClick:this.handleDemos},r.a.createElement(L.a,{primary:"Demos"}),this.state.demosOpen?r.a.createElement(j.a,null):r.a.createElement(F.a,null)),r.a.createElement(B.a,{in:this.state.demosOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(N.a,{component:"div",disablePadding:!0},r.a.createElement(I.a,{className:e.nested,button:!0,key:"Hearing Loss Demo",component:P.b,to:"/hearingLossDemo"},r.a.createElement(L.a,{primary:"Hearing Loss Demo"})),r.a.createElement(I.a,{className:e.nested,button:!0,key:"User Assessment Demo",component:P.b,to:"/assessmentpageDemo"},r.a.createElement(L.a,{primary:"User Assessment Demo"})))),r.a.createElement(I.a,{button:!0,key:"BST Apps",onClick:this.handleFittingApps},r.a.createElement(L.a,{primary:"BST Apps"}),this.state.fittingAppsOpen?r.a.createElement(j.a,null):r.a.createElement(F.a,null)),r.a.createElement(B.a,{in:this.state.fittingAppsOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(N.a,{component:"div",disablePadding:!0},!0!==n&&r.a.createElement(I.a,{className:e.nested,button:!0,key:"User Assessment Page",component:P.b,to:"/assessmentpageSetup/first"},r.a.createElement(L.a,{primary:"User Assessment"})),!0!==l&&r.a.createElement(I.a,{className:e.nested,button:!0,key:"4AFC Page",component:P.b,to:"/4AFCpage"},r.a.createElement(L.a,{primary:"4AFC page"})),r.a.createElement(I.a,{className:e.nested,button:!0,key:"AB Tasks",onClick:this.handleABOpen},r.a.createElement(L.a,{primary:"AB Tasks"}),this.state.ABOpen?r.a.createElement(j.a,null):r.a.createElement(F.a,null)),r.a.createElement(B.a,{in:this.state.ABOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(N.a,{component:"div",disablePadding:!0},["AB","SearchEx"].map((function(t,a){return r.a.createElement(I.a,{className:e.doublyNested,button:!0,key:t},r.a.createElement(L.a,{primary:t}))}))))))))}}]),t}(n.Component),q=Object(R.a)(H,T.f,Object(E.a)((function(e){return{list:{width:300},fullList:{width:"auto"},drawerPaper:{width:300},nested:{paddingLeft:e.spacing(4)},doublyNested:{paddingLeft:e.spacing(8)},header:{paddingTop:20,paddingLeft:20,paddingBottom:10}}})))(V),z=a(391),J=a(402),Q=a(317),Y="==============================================================================\n",K="------------------------------------------------------------------------------\n",X=a(258),$=function(e){return 6===e?["250","500","1000","2000","4000","8000","All"]:10===e?["250","500","750","1000","1500","2000","3000","4000","6000","8000","All"]:void 0},Z=a(222),ee=a(384),te=a(372),ae=a(381),ne=a(388),re=a(224),oe=a(39),le=a(379),se=a(386),ie=a(383),ce=a(382),ue=a(387),me=a(323),pe=a(325),de=a(119),he=a(195),ge=a(378),fe=a(377),Ee=a(376),be=a(373),ve=a(375),ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loadDialogOpen:!1,saveDialogOpen:!1,profileName:"",profileOptions:[],selectedProfile:""},a.componentDidMount=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.awrap(X.get("/api/param/amplification"));case 3:e=r.sent,t=e.data,n=[],t.forEach((function(e){n.push({value:e.parameters,label:e.profileName})})),a.setState({profileOptions:n}),console.log(n),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),alert("Error loading profiles");case 14:case"end":return r.stop()}}),null,null,[[0,11]])},a.handleLoadDialogOpen=function(){a.setState({loadDialogOpen:!0})},a.handleLoadDialogClose=function(){a.setState({loadDialogOpen:!1})},a.handleSaveDialogOpen=function(){a.setState({saveDialogOpen:!0})},a.handleSaveDialogClose=function(){a.setState({saveDialogOpen:!1})},a.handleChangeProfileName=function(e){a.setState({profileName:e.target.value})},a.handleSaveParams=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.props.save,t=a.state.profileName,null==e){n.next=12;break}return n.prev=3,n.next=6,i.a.awrap(e(t));case 6:a.setState({saveDialogOpen:!1}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[3,9]])},a.handleLoadProfile=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.props.load,t=a.state.selectedProfile,console.log(t),null==e){n.next=15;break}return n.prev=4,n.next=7,i.a.awrap(e(t));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.log(n.t0);case 12:a.setState({loadDialogOpen:!1}),n.next=16;break;case 15:a.setState({loadDialogOpen:!1});case 16:case"end":return n.stop()}}),null,null,[[4,9]])},a.handleProfileChange=function(e){a.setState({selectedProfile:e.value})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loadDialogOpen,a=e.saveDialogOpen;return r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{style:{maxWidth:500}},r.a.createElement(N.a,{subheader:r.a.createElement(te.a,null,"Parameter Settings")},r.a.createElement(I.a,null,r.a.createElement(x.a,{color:"primary",variant:"contained",fullWidth:!0,onClick:this.handleLoadDialogOpen},"Load Profile")),r.a.createElement(I.a,null,r.a.createElement(x.a,{color:"primary",variant:"contained",fullWidth:!0,onClick:this.handleSaveDialogOpen},"Save Profile")))),r.a.createElement(be.a,{open:t,scroll:"body",onClose:this.handleLoadDialogClose,fullWidth:!0,maxWidth:"xs"},r.a.createElement(ve.a,null,"Load Parameter Profile"),r.a.createElement(Ee.a,null,r.a.createElement(de.a,{onChange:this.handleProfileChange,options:this.state.profileOptions,styles:{menuPortal:function(e){return Object(he.a)({},e,{zIndex:9999})}},menuPortalTarget:document.body})),r.a.createElement(fe.a,null,r.a.createElement(x.a,{onClick:this.handleLoadDialogClose,color:"secondary"},"Cancel"),r.a.createElement(x.a,{color:"primary",onClick:this.handleLoadProfile},"Load"))),r.a.createElement(be.a,{open:a,onClose:this.handleSaveDialogClose,fullWidth:!0,maxWidth:"xs"},r.a.createElement(ve.a,null,"Save Parameters"),r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,"Please enter your profile name"),r.a.createElement(le.a,{variant:"outlined",label:"Profile Name",fullWidth:!0,onChange:this.handleChangeProfileName})),r.a.createElement(fe.a,null,r.a.createElement(x.a,{onClick:this.handleSaveDialogClose,color:"secondary"},"Cancel"),r.a.createElement(x.a,{color:"primary",onClick:this.handleSaveParams},"Save"))))}}]),t}(n.Component),we=[{value:["cr","g65"],label:"CR/G65"},{value:["g50","g80"],label:"G50/G80"},{value:["kneeLow","mpo"],label:"Kneelow/Mpo"},{value:["attack","release"],label:"Attack/Release"},{value:["frepingAlpha"],label:"FrepingAlpha"}],Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={type:we[0],control_via:1,afc:1,freping:0,global_mpo:120,channel:"Both",cr_L:[1,1,1,1,1,1],cr_R:[1,1,1,1,1,1],g50_L:[0,0,0,0,0,0],g50_R:[0,0,0,0,0,0],g65_L:[0,0,0,0,0,0],g65_R:[0,0,0,0,0,0],g80_L:[0,0,0,0,0,0],g80_R:[0,0,0,0,0,0],kneeLow_L:[45,45,45,45,45,45],kneeLow_R:[45,45,45,45,45,45],mpo_L:[120,120,120,120,120,120],mpo_R:[120,120,120,120,120,120],attack_L:[5,5,5,5,5,5],attack_R:[5,5,5,5,5,5],release_L:[20,20,20,20,20,20],release_R:[20,20,20,20,20,20],frepingAlpha_L:[0,0,0,0,0,0],frepingAlpha_R:[0,0,0,0,0,0],bandNumber:6},a.componentDidMount=function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(a.loadParameter());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])},a.updateParamTable=function(e){for(var t=e.left,n=e.right,r=t.g50,o=t.g80,l=n.g50,s=n.g80,i=t.g50,c=n.g50,u=r.length,m=0;m<u;m++){var p=(o[m]-r[m])/30,d=(s[m]-s[m])/30,h=Number(r[m])+Number(15*p),g=Number(l[m])+Number(15*d);i[m]=h,c[m]=g}a.setState({cr_L:Array(u).fill(1),cr_R:Array(u).fill(1),g50_L:t.g50,g50_R:n.g50,g65_L:i,g65_R:c,g80_L:t.g80,g80_R:n.g80,kneeLow_L:t.knee_low,kneeLow_R:n.knee_low,mpo_L:t.mpo_band,mpo_R:n.mpo_band,attack_L:t.attack,attack_R:n.attack,release_L:t.release,release_R:n.release,frepingAlpha_L:t.freping_alpha?t.freping_alpha:Array(u).fill(0),frepingAlpha_R:n.freping_alpha?n.freping_alpha:Array(u).fill(0),bandNumber:u})},a.updateParamTableFromDB=function(e){var t=e.left,n=e.right;a.setState({cr_L:t.cr,cr_R:n.cr,g50_L:t.g50,g50_R:n.g50,g65_L:t.g65,g65_R:n.g65,g80_L:t.g80,g80_R:n.g80,kneeLow_L:t.knee_low,kneeLow_R:n.knee_low,mpo_L:t.mpo_band,mpo_R:n.mpo_band,attack_L:t.attack,attack_R:n.attack,release_L:t.release,release_R:n.release,frepingAlpha_L:t.freping_alpha,frepingAlpha_R:n.freping_alpha,bandNumber:t.cr.length})},a.loadParameter=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(X.post("/api/param/getparam"));case 3:e=n.sent,t=e.data,a.updateParamTable(t),n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(0),n.t0;case 11:case"end":return n.stop()}}),null,null,[[0,8]])},a.handleControlViaChange=function(e){a.setState({control_via:e.target.value})},a.handleAfcChange=function(e){a.setState({afc:e.target.value})},a.handleFrepingChange=function(e){a.setState({freping:e.target.value})},a.handleChannelChange=function(e){a.setState({channel:e.target.value})},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleTypeChange=function(e){a.setState({type:e})},a.handleSubBandInputChange=function(e){var t=a.state.channel,n=e.target.id.split("_"),r=n[1],o=n[0],l=o+"_L",s=o+"_R";if("Right"===t){var i=a.state[s];i[r]=Number(e.target.value),a.setState(Object(h.a)({},s,i))}else if("Left"===t){var c=a.state[l];c[r]=Number(e.target.value),a.setState(Object(h.a)({},l,c))}else{var u,m=a.state[l],p=a.state[s];m[r]=Number(e.target.value),p[r]=Number(e.target.value),a.setState((u={},Object(h.a)(u,l,m),Object(h.a)(u,s,p),u))}"cr"!==o&&"g50"!==o&&"g80"!==o&&"g65"!==o||a.updateParameter(r)},a.handleAllInputChange=function(e){var t=a.state,n=t.channel,r=t.bandNumber,o=e.target.id.split("_")[0],l=o+"_L",s=o+"_R";if("Right"===n){for(var i=a.state[s],c=0;c<r;c++)i[c]=Number(e.target.value);a.setState(Object(h.a)({},s,i))}else if("Left"===n){for(var u=a.state[l],m=0;m<r;m++)u[m]=Number(e.target.value);a.setState(Object(h.a)({},l,u))}else{for(var p,d=a.state[l],g=a.state[s],f=0;f<r;f++)d[f]=Number(e.target.value),g[f]=Number(e.target.value);a.setState((p={},Object(h.a)(p,l,d),Object(h.a)(p,s,g),p))}"cr"!==o&&"g50"!==o&&"g80"!==o&&"g65"!==o||a.updateAllParameters()},a.updateParameter=function(e){var t=a.state,n=t.control_via,r=t.channel,o=t.cr_L,l=t.cr_R,s=t.g65_L,i=t.g65_R,c=t.g50_L,u=t.g50_R,m=t.g80_L,p=t.g80_R,d=c.slice(),h=u.slice(),g=m.slice(),f=p.slice(),E=s.slice(),b=i.slice(),v=o.slice(),y=l.slice();if(1===n)if("Both"===r){var w=v[e];if(0!==w){var C=(1-w)/w,x=E[e],_=Number(x)+Number(15*C),S=Number(x)-Number(15*C);d[e]=S,h[e]=S,g[e]=_,f[e]=_,a.setState({g50_L:d,g80_L:g,g50_R:h,g80_R:f})}}else if("Left"===r){var k=v[e];if(0!==k){var N=(1-k)/k,O=E[e],I=Number(O)+Number(15*N),L=Number(O)-Number(15*N);d[e]=L,g[e]=I,a.setState({g50_L:d,g80_L:g})}}else{var D=y[e];if(0!==D){var j=(1-D)/D,A=b[e],F=Number(A)+Number(15*j),B=Number(A)-Number(15*j);h[e]=B,f[e]=F,a.setState({g50_R:h,g80_R:f})}}},a.updateAllParameters=function(){var e=a.state,t=e.control_via,n=e.channel,r=e.cr_L,o=e.cr_R,l=e.g65_L,s=e.g65_R,i=e.g50_L,c=e.g50_R,u=e.g80_L,m=e.g80_R,p=e.bandNumber,d=i.slice(),h=c.slice(),g=u.slice(),f=m.slice(),E=l.slice(),b=s.slice(),v=r.slice(),y=o.slice();if(1===t)if("Both"===n){for(var w=0;w<p;w++){var C=v[w];if(0!==C){var x=(1-C)/C,_=E[w],S=Number(_)+Number(15*x),k=Number(_)-Number(15*x);d[w]=k,h[w]=k,g[w]=S,f[w]=S}}a.setState({g50_L:d,g80_L:g,g50_R:h,g80_R:f})}else if("Left"===n){for(var N=0;N<p;N++){var O=v[N];if(0!==O){var I=(1-O)/O,L=E[N],D=Number(L)+Number(15*I),j=Number(L)-Number(15*I);d[N]=j,g[N]=D}}a.setState({g50_L:d,g80_L:g})}else{for(var A=0;A<p;A++){var F=y[A];if(0!==F){var B=(1-F)/F,P=b[A],T=Number(P)+Number(15*B),R=Number(P)-Number(15*B);h[A]=R,f[A]=T}}a.setState({g50_R:h,g80_R:f})}},a.generateParams=function(){var e=a.state,t=e.afc,n=e.global_mpo,r=e.g50_L,o=e.g50_R,l=e.g80_L,s=e.g80_R,i=e.kneeLow_L,c=e.kneeLow_R,u=e.mpo_L,m=e.mpo_R,p=e.attack_L,d=e.attack_R,h=e.release_L,g=e.release_R,f=e.frepingAlpha_L,E=e.frepingAlpha_R,b=e.freping;return{left:{en_ha:1,afc:t,freping:b,rear_mics:0,g50:r,g80:l,knee_low:i,mpo_band:u,attack:p,release:h,global_mpo:n,freping_alpha:f},right:{en_ha:1,afc:t,freping:b,rear_mics:0,g50:o,g80:s,knee_low:c,mpo_band:m,attack:d,release:g,global_mpo:n,freping_alpha:E}}},a.generateParamsProfile=function(){var e=a.state,t=e.afc,n=e.global_mpo,r=e.cr_L,o=e.cr_R,l=e.g50_L,s=e.g50_R,i=e.g80_L,c=e.g80_R,u=e.g65_L,m=e.g65_R,p=e.kneeLow_L,d=e.kneeLow_R,h=e.mpo_L,g=e.mpo_R,f=e.attack_L,E=e.attack_R,b=e.release_L,v=e.release_R,y=e.frepingAlpha_L,w=e.frepingAlpha_R,C=e.freping;return{left:{afc:t,freping:C,cr:r,g50:l,g65:u,g80:i,knee_low:p,mpo_band:h,attack:f,release:b,global_mpo:n,freping_alpha:y},right:{afc:t,freping:C,cr:o,g50:s,g65:m,g80:c,knee_low:d,mpo_band:g,attack:E,release:v,global_mpo:n,freping_alpha:w}}},a.handleSaveParamsToDB=function(e){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=JSON.stringify(a.generateParamsProfile()),r.prev=1,r.next=4,i.a.awrap(X.post("/api/param/amplification",{profileName:e,parameters:t}));case 4:n=r.sent,console.log(n.data),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),alert("This profile name has already existed");case 11:case"end":return r.stop()}}),null,null,[[1,8]])},a.handleLoadParamsFromDB=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(JSON.parse(e));case 3:t=n.sent,a.updateParamTableFromDB(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert("Error parsing JSON");case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a.onTransmitParams=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.generateParams(),r.prev=1,r.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:e}));case 4:t=r.sent,n=t.data,console.log(n),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),alert(r.t0.response.data);case 12:case"end":return r.stop()}}),null,null,[[1,9]])},a.paramTableRowMobile=function(e,t){var n=a.props.classes,o=a.state,l=o.channel,s=o.type,i=o.bandNumber;return t!==i?r.a.createElement(I.a,{key:"subBand_".concat(e,"_index_").concat(t)},r.a.createElement(L.a,{primary:e}),r.a.createElement(ae.a,null,s.value.map((function(e){var o=e;return o+="Right"===l?"_R":"_L",r.a.createElement(le.a,{className:2===s.value.length?n.mobileDoubleText:null,key:e+"_"+t,id:e+"_"+t,type:"number",margin:"dense",variant:"outlined",value:a.state[o][t],onChange:a.handleSubBandInputChange})})))):r.a.createElement(I.a,{key:"subBand_".concat(e,"_index_").concat(t)},r.a.createElement(L.a,{primary:e}),r.a.createElement(ae.a,null,s.value.map((function(e){return r.a.createElement(le.a,{className:2===s.value.length?n.mobileDoubleText:null,key:e+"_all",id:e+"_all",type:"number",margin:"dense",variant:"outlined",onChange:a.handleAllInputChange})}))))},a.paramTableRow=function(e){var t=a.state.channel,n=e;return n+="Right"===t?"_R":"_L",r.a.createElement(ce.a,{hover:!0,key:e},r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textPrimary"},e)),a.state[n].map((function(t,n){return r.a.createElement(ie.a,{key:"row_index_".concat(n),children:r.a.createElement(pe.a,null,r.a.createElement(re.a,{id:e+"_"+n,fullWidth:!0,type:"number",value:t,onChange:a.handleSubBandInputChange}))})})),r.a.createElement(ie.a,{children:r.a.createElement(pe.a,null,r.a.createElement(me.a,{id:e+"_all",fullWidth:!0,type:"number",onChange:a.handleAllInputChange}))}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.type,o=a.bandNumber;return r.a.createElement("div",{className:t.content},r.a.createElement(ee.a,{container:!0,spacing:3},r.a.createElement(ee.a,{item:!0,md:6,xs:12},r.a.createElement(Z.a,{style:{maxWidth:500}},r.a.createElement(N.a,{subheader:r.a.createElement(te.a,null,"Controls")},r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"Control Via"}),r.a.createElement(ae.a,null,r.a.createElement(oe.a.Group,{value:this.state.control_via,buttonStyle:"solid",onChange:this.handleControlViaChange},r.a.createElement(oe.a.Button,{value:0},"G50/G80"),r.a.createElement(oe.a.Button,{value:1},"CR/G65")))),r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"AFC"}),r.a.createElement(ae.a,null,r.a.createElement(oe.a.Group,{value:this.state.afc,buttonStyle:"solid",onChange:this.handleAfcChange},r.a.createElement(oe.a.Button,{value:1},"On"),r.a.createElement(oe.a.Button,{value:0},"Off")))),r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"Freping"}),r.a.createElement(ae.a,null,r.a.createElement(oe.a.Group,{value:this.state.freping,buttonStyle:"solid",onChange:this.handleFrepingChange},r.a.createElement(oe.a.Button,{value:1},"On"),r.a.createElement(oe.a.Button,{value:0},"Off")))),r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"Global MPO"}),r.a.createElement(ae.a,null,r.a.createElement(le.a,{id:"global_mpo",type:"number",margin:"dense",variant:"outlined",value:this.state.global_mpo,onChange:this.handleInputChange}))),r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"Channel"}),r.a.createElement(ae.a,null,r.a.createElement(oe.a.Group,{value:this.state.channel,buttonStyle:"solid",onChange:this.handleChannelChange},r.a.createElement(oe.a.Button,{value:"Both"},"Both"),r.a.createElement(oe.a.Button,{value:"Left"},"Left"),r.a.createElement(oe.a.Button,{value:"Right"},"Right"))))))),r.a.createElement(ee.a,{item:!0,md:6,xs:12},r.a.createElement(ye,{save:this.handleSaveParamsToDB,load:this.handleLoadParamsFromDB}))),r.a.createElement(Z.a,{className:t.paramSection},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"Parameter Settings")),r.a.createElement(w.a,{mdUp:!0},r.a.createElement("div",{className:t.paramSectionContent},r.a.createElement(de.a,{defaultValue:we[0],value:n,onChange:this.handleTypeChange,options:we}),r.a.createElement(N.a,null,$(o).map((function(t,a){return e.paramTableRowMobile(t,a)}))),r.a.createElement(ee.a,{container:!0,spacing:2,className:t.paramControlButtons},r.a.createElement(ee.a,{item:!0,xs:12,sm:6},r.a.createElement(x.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.loadParameter},"Pull")),r.a.createElement(ee.a,{item:!0,xs:12,sm:6},r.a.createElement(x.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.onTransmitParams},"Transmit"))))),r.a.createElement(w.a,{smDown:!0},r.a.createElement("div",{className:t.paramSectionContent},r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(ce.a,null,[""].concat($(o)).map((function(e){return r.a.createElement(ie.a,{key:e},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},e))})))),r.a.createElement(ne.a,null,["cr","g50","g65","g80","kneeLow","mpo","attack","release","frepingAlpha"].map((function(t){return e.paramTableRow(t)})))),r.a.createElement(ee.a,{container:!0,spacing:2,className:t.paramControlButtons},r.a.createElement(ee.a,{item:!0,xs:12,sm:6},r.a.createElement(x.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.loadParameter},"Pull")),r.a.createElement(ee.a,{item:!0,xs:12,sm:6},r.a.createElement(x.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:this.onTransmitParams},"Transmit")))))))}}]),t}(n.Component),xe=Object(Q.a)((function(e){var t;return{content:{padding:e.spacing(3)},paramSection:{marginTop:30,maxWidth:1e3},paramSectionContent:(t={display:"flex",flexDirection:"column",width:"90%",paddingLeft:e.spacing(2)},Object(h.a)(t,e.breakpoints.down("md"),{}),Object(h.a)(t,e.breakpoints.up("md"),{alignItems:"center"}),t),paramControlButtons:{width:"80%",maxWidth:600,marginTop:30,marginBottom:30},formControl:{margin:e.spacing(1),minWidth:120},mobileDoubleText:{width:"20vw",margin:"3vw"}}}))(Ce),_e=a(406),Se=a(389),ke=a(401),Ne=["None","Arslan power averaging procedure","Hirsch and Ehrlicher weighted noise averaging procedure","Cohen and Berdugo MCRA Procedure"],Oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={currentNoiseOption:0,noiseSubtraction:0,speechEnhancementEnabled:!1,normConstraint:0,adaptionModeControl:0,beamformingEnabled:!1},a.componentDidMount=function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(a.loadParameter());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])},a.loadParameter=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(X.post("/api/param/getparam"));case 3:e=n.sent,t=e.data,a.setState({currentNoiseOption:parseInt(t.left.noise_estimation_type),noiseSubtraction:parseInt(t.left.spectral_subtraction),normConstraint:parseInt(t.left.nc_thr),adaptionModeControl:parseInt(t.left.amc_thr),beamformingEnabled:1===t.left.bf}),n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(0),n.t0;case 11:case"end":return n.stop()}}),null,null,[[0,8]])},a.handleToggleNoiseOption=function(e){a.setState({currentNoiseOption:e})},a.handleNoiseSubtractionSliderChange=function(e,t){a.setNoiseSubtraction(t)},a.handleNormConstraintSliderChange=function(e,t){a.setNormConstraint(t)},a.handleAdaptionSliderChange=function(e,t){a.setAdaption(t)},a.handleNoiseSubtractionInputChange=function(e){a.setNoiseSubtraction(""===e.target.value?0:Number(e.target.value))},a.handleNormConstraintInputChange=function(e){a.setNormConstraint(""===e.target.value?0:Number(e.target.value))},a.handleAdaptionInputChange=function(e){a.setAdaption(""===e.target.value?0:Number(e.target.value))},a.handleBlurNoiseSubtraction=function(){var e=a.state.noiseSubtraction;e<0?a.setNoiseSubtraction(0):e>1&&a.setNoiseSubtraction(1)},a.handleBlurNormConstraint=function(){var e=a.state.normConstraint;e<0?a.setNormConstraint(0):e>10&&a.setNormConstraint(10)},a.handleBlurAdaption=function(){var e=a.state.adaptionModeControl;e<0?a.setAdaption(0):e>1&&a.setAdaption(1)},a.setNoiseSubtraction=function(e){a.setState({noiseSubtraction:e})},a.setNormConstraint=function(e){a.setState({normConstraint:e})},a.setAdaption=function(e){a.setState({adaptionModeControl:e})},a.handleSpeechEnhancementChange=function(){var e,t,n,r,o,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state,t=e.speechEnhancementEnabled,n=e.currentNoiseOption,r=e.noiseSubtraction,s.prev=1,s.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:!0===t?{left:{noise_estimation_type:0,spectral_type:0,spectral_subtraction:0},right:{noise_estimation_type:0,spectral_type:0,spectral_subtraction:0}}:{left:{noise_estimation_type:n,spectral_type:0,spectral_subtraction:r},right:{noise_estimation_type:n,spectral_type:0,spectral_subtraction:r}}}));case 4:o=s.sent,l=o.data,console.log(l),a.setState({currentNoiseOption:!0===t?0:n,noiseSubtraction:!0===t?0:r,speechEnhancementEnabled:!t}),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),alert(s.t0.response.data);case 13:case"end":return s.stop()}}),null,null,[[1,10]])},a.handleBeamformingChange=function(){var e,t,n,r,o,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state,t=e.beamformingEnabled,n=e.normConstraint,r=e.adaptionModeControl,s.prev=1,s.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:!0===t?{left:{bf:0,nc_thr:0,amc_thr:0},right:{bf:0,nc_thr:0,amc_thr:0}}:{left:{bf:1,nc_thr:n,amc_thr:r},right:{bf:1,nc_thr:n,amc_thr:r}}}));case 4:o=s.sent,l=o.data,console.log(l),a.setState({normConstraint:!0===t?0:n,adaptionModeControl:!0===t?0:r,beamformingEnabled:!t}),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),alert(s.t0.response.data);case 13:case"end":return s.stop()}}),null,null,[[1,10]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.currentNoiseOption,o=a.noiseSubtraction,l=a.speechEnhancementEnabled,s=a.normConstraint,i=a.adaptionModeControl,c=a.beamformingEnabled;return r.a.createElement("div",{className:t.content},r.a.createElement(ee.a,{container:!0,direction:"column"},r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2},"Noise Estimation Options:")),r.a.createElement(ee.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},Ne.map((function(a,o){return r.a.createElement(Se.a,{color:"primary",className:t.groupButton,key:"noise_".concat(o),value:o,selected:o===n,onClick:function(){return e.handleToggleNoiseOption(o)}},a)}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2},"Noise Subtraction Parameter:")),r.a.createElement(ee.a,{container:!0,spacing:3,alignItems:"center"},r.a.createElement(ee.a,{item:!0},"None"),r.a.createElement(ee.a,{item:!0,xs:!0},r.a.createElement(_e.a,{value:o,onChange:this.handleNoiseSubtractionSliderChange,step:.001,min:0,max:1})),r.a.createElement(ee.a,{item:!0},"Aggressive"),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:o,margin:"dense",onChange:this.handleNoiseSubtractionInputChange,onBlur:this.handleBlurNoiseSubtraction,inputProps:{step:.001,min:0,max:1,type:"number"}}))),r.a.createElement(ee.a,{container:!0,alignItems:"center"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.handleSpeechEnhancementChange,className:t.button},l?"Disable Speech Enhancement":"Enable Speech Enhancement")),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2,fontSize:24},"Beamforming")),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2},"Norm Constraint:")),r.a.createElement(ee.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},r.a.createElement(ee.a,{container:!0,item:!0,xs:8},r.a.createElement(_e.a,{value:s,onChange:this.handleNormConstraintSliderChange,step:1,min:0,max:10})),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:s,margin:"dense",onChange:this.handleNormConstraintInputChange,onBlur:this.handleBlurNormConstraint,inputProps:{step:1,min:0,max:10,type:"number"}}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2},"Adaptation mode control:")),r.a.createElement(ee.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},r.a.createElement(ee.a,{container:!0,item:!0,xs:8},r.a.createElement(_e.a,{value:i,onChange:this.handleAdaptionSliderChange,step:1,min:0,max:10})),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:i,margin:"dense",onChange:this.handleAdaptionInputChange,onBlur:this.handleBlurAdaption,inputProps:{step:1,min:0,max:10,type:"number"}}))),r.a.createElement(ee.a,{container:!0,alignItems:"center"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.handleBeamformingChange,className:t.button},c?"Disable Beamforming":"Enable Beamforming"))))}}]),t}(n.Component),Ie=Object(Q.a)((function(e){return{content:{padding:e.spacing(3),maxWidth:500,minWidth:200,margin:"auto"},button:{width:320,margin:"auto",marginTop:8},groupButton:{width:320,color:"gray"},input:{width:60}}}))(Oe),Le=a(407),De=a(158),je=a.n(De),Ae=a(203),Fe=a.n(Ae),Be=["No Adaptation","FxLMS","IPNLMS","SLMS"],Pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={afc_delay:0,afc_mu:0,afc_rho:0,afc_type:0},a.componentDidMount=function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(a.loadParameter());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])},a.loadParameter=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(X.post("/api/param/getparam"));case 3:e=n.sent,t=e.data,console.log(t),a.setState({afc_delay:parseInt(1e5*t.left.afc_delay)/1e5,afc_mu:parseInt(1e5*t.left.afc_mu)/1e5,afc_rho:parseInt(1e5*t.left.afc_rho)/1e5,afc_type:parseInt(t.left.afc_type)}),n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,9]])},a.handleToggleAfcOption=function(e){a.setState({afc_type:e})},a.handleRhoSliderChange=function(e,t){a.setRho(t)},a.handleDelayInputChange=function(e){a.setDelay(""===e.target.value?0:Number(e.target.value))},a.handleMuInputChange=function(e){a.setMu(""===e.target.value?0:Number(e.target.value))},a.handleRhoInputChange=function(e){a.setRho(""===e.target.value?0:Number(e.target.value))},a.handleBlurDelay=function(){var e=a.state.afc_delay;e<0?a.setDelay(0):e>8&&a.setDelay(8)},a.handleBlurMu=function(){var e=a.state.afc_mu;e<0?a.setMu(0):e>1&&a.setMu(1)},a.handleBlurRho=function(){var e=a.state.afc_rho;e<0?a.setRho(0):e>1&&a.setRho(1)},a.setDelay=function(e){a.setState({afc_delay:e})},a.setMu=function(e){a.setState({afc_mu:e})},a.setRho=function(e){a.setState({afc_rho:e})},a.handleReset=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state,t=e.afc_mu,n=e.afc_rho,r=e.afc_type,o=e.afc_delay,l.prev=1,l.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:{left:{afc_mu:t,afc_rho:n,afc_type:r,afc_delay:o,afc_reset:1},right:{afc_mu:t,afc_rho:n,afc_type:r,afc_delay:o,afc_reset:1}}}));case 4:return l.sent,l.next=7,i.a.awrap(a.loadParameter());case 7:l.next=12;break;case 9:l.prev=9,l.t0=l.catch(1),alert(l.t0.response.data);case 12:case"end":return l.stop()}}),null,null,[[1,9]])},a.handleTransmit=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state,t=e.afc_mu,n=e.afc_rho,r=e.afc_type,o=e.afc_delay,l.prev=1,l.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:{left:{afc_mu:t,afc_rho:n,afc_type:r,afc_delay:o,afc_reset:0},right:{afc_mu:t,afc_rho:n,afc_type:r,afc_delay:o,afc_reset:0}}}));case 4:return l.sent,l.next=7,i.a.awrap(a.loadParameter());case 7:l.next=12;break;case 9:l.prev=9,l.t0=l.catch(1),alert(l.t0.response.data);case 12:case"end":return l.stop()}}),null,null,[[1,9]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.afc_type,o=a.afc_delay,l=a.afc_mu,s=a.afc_rho;return r.a.createElement("div",{className:t.content},r.a.createElement(ee.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ee.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},Be.map((function(a,o){return r.a.createElement(Se.a,{color:"primary",className:t.groupButton,key:"noise_".concat(o),value:o,selected:o===n,onClick:function(){return e.handleToggleAfcOption(o)}},a)}))),r.a.createElement(ee.a,{container:!0,spacing:3,justify:"space-between",alignItems:"center"},r.a.createElement(ee.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{lineHeight:2},"Delay (ms):"))),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:o,margin:"dense",onChange:this.handleDelayInputChange,onBlur:this.handleBlurDelay,inputProps:{step:1e-5,min:0,max:8,type:"number"}}))),r.a.createElement(ee.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},r.a.createElement(ee.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,null,"Mu",r.a.createElement(Le.a,{disableFocusListener:!0,title:"The step size parameter, which has to be set to ".concat("a positive value. It controls the adaptation rate of the AFC filter,"," in the sense that a larger mu is more suitable for a highlty changin ","environment. Note, however, a larger mu also leads to a higher possibility ","of instability and more artifacts.")},r.a.createElement(C.a,{size:"small",className:t.helperIcon},r.a.createElement(je.a,null))),":"))),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:l,margin:"dense",onChange:this.handleMuInputChange,onBlur:this.handleBlurMu,inputProps:{step:1e-5,min:0,max:1,type:"number"}}))),r.a.createElement(ee.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},r.a.createElement(ee.a,{item:!0},r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,null,"Rho",r.a.createElement(Le.a,{disableFocusListener:!0,title:"A forgetting factor for controlling the update of the signal power estimate".concat(". It ranges from 0-1. For speech signals, typical values of rho are around 0.9. ","If it is too large, the update of the power estimate would fail to catch up with ","speech variatios. If it is set too small, the variance of the estimate will be high, ","leading to more artifacts.")},r.a.createElement(C.a,{size:"small",className:t.helperIcon},r.a.createElement(je.a,null))),":"))),r.a.createElement(ee.a,{container:!0,item:!0,xs:6},r.a.createElement(_e.a,{value:s,onChange:this.handleRhoSliderChange,step:1e-5,min:0,max:1})),r.a.createElement(ee.a,{item:!0},r.a.createElement(me.a,{className:t.input,value:s,margin:"dense",onChange:this.handleRhoInputChange,onBlur:this.handleBlurRho,inputProps:{step:1e-5,min:0,max:1,type:"number"}}))),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,{fontSize:24},"Troubleshooting 4AFC")),r.a.createElement(y.a,{component:"div"},r.a.createElement(ke.a,null,"When instability is detected by the user, he/she should press ".concat('the "Undo\u201d button below. This will (i) initialize AFC filter to its'," initial coefficients, obtained from average of multiple feedback path"," measurements; and (ii) reduce amplification gain in all bands by x dB. ","(Arthur to experiment and suggest value of x. Initially, x=10)."))),r.a.createElement(ee.a,{container:!0,justify:"flex-end"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.handleReset,className:t.button},"Reset"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.handleTransmit,className:t.button},"Transmit")),r.a.createElement("img",{src:Fe.a,alt:"4AFC Block",className:t.img})))}}]),t}(n.Component),Te=Object(Q.a)((function(e){return{content:{padding:e.spacing(3),maxWidth:480,minWidth:200,margin:"auto"},button:{width:100,margin:10},groupButton:{width:320,color:"gray"},input:{width:72},helperIcon:{display:"inline-flex",verticalAlign:"middle"},img:{width:440,height:"auto"}}}))(Pe),Re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleTabChange=function(e,t){a.setState({value:t})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Z.a,{className:e.root},r.a.createElement(w.a,{smDown:!0,implementation:"css"},r.a.createElement(J.a,{value:this.state.value,centered:!0,onChange:this.handleTabChange},r.a.createElement(z.a,{label:"Amplification"}),r.a.createElement(z.a,{label:"Noise"}),r.a.createElement(z.a,{label:"Feedback"}),r.a.createElement(z.a,{label:"Stimulus"}))),r.a.createElement(w.a,{mdUp:!0,implementation:"css"},r.a.createElement(J.a,{value:this.state.value,onChange:this.handleTabChange,variant:"scrollable",scrollButtons:"on",className:e.mobileTabs},r.a.createElement(z.a,{label:"Amplification"}),r.a.createElement(z.a,{label:"Noise"}),r.a.createElement(z.a,{label:"Feedback"}),r.a.createElement(z.a,{label:"Stimulus"}))),0===this.state.value&&r.a.createElement(xe,null),1===this.state.value&&r.a.createElement(Ie,null),2===this.state.value&&r.a.createElement(Te,null)))}}]),t}(n.Component),We=Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},mobileTabs:{width:"100vw"}}}))(Re),Me=a(408),Ge=a(394),Ue=a(405),He=a(395),Ve=a(331),qe=a(326),ze=a(328),Je=a(392),Qe=a(393),Ye=a(404),Ke=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={activeStep:0,leftEar:"",rightEar:"",development:"",education:"",personalIllnesses:[],siblingIllnesses:[],personalIllnessesInfo:{},siblingIllnessesInfo:{}},a.handleNext=function(){a.setState({activeStep:a.state.activeStep+1})},a.handleBack=function(){a.setState({activeStep:a.state.activeStep-1})},a.handleChangeEarInfo=function(e){return function(t){a.setState(Object(h.a)({},e,t.target.value?parseInt(t.target.value):""))}},a.handleChangeUserInfo=function(e){return function(t){a.setState(Object(h.a)({},e,t.target.value?t.target.value:""))}},a.handleChangeIllness=function(e,t){return function(n){if(!1===t){var r=a.state,o=r.personalIllnesses,l=r.personalIllnessesInfo;n.target.checked?(o.push(e),o.sort(),l[e]=["","",""],a.setState({personalIllnesses:o,personalIllnessesInfo:l})):(delete l[e],a.setState({personalIllnesses:o.filter((function(t){return e!==t})),personalIllnessesInfo:l}))}else{var s=a.state,i=s.siblingIllnesses,c=s.siblingIllnessesInfo;n.target.checked?(i.push(e),i.sort(),c[e]=[[],"","",""],a.setState({siblingIllnesses:i,siblingIllnessesInfo:c})):(delete c[e],a.setState({siblingIllnesses:i.filter((function(t){return e!==t})),siblingIllnessesInfo:c}))}}},a.handleChangeIllnessInfo=function(e,t,n){return function(r){if(!1===t){var o=a.state.personalIllnessesInfo;o[e][n]=r.target.value,a.setState({personalIllnessesInfo:o})}else{var l=a.state.siblingIllnessesInfo;0===n?l[e][0].includes(r.target.value)?l[e][0]=l[e][0].filter((function(e){return r.target.value!==e})):l[e][0].push(r.target.value):l[e][n]=r.target.value,a.setState({siblingIllnessesInfo:l})}}},a.parseLog=function(){var e=a.state,t=e.leftEar,n=e.rightEar,r=e.personalIllnesses,o=e.personalIllnessesInfo,l=e.development,s=e.education,i=e.siblingIllnesses,c=e.siblingIllnessesInfo,u={},m={},p=!0,d=!1,h=void 0;try{for(var g,f=r[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var E=g.value;u[E]={occur:o[E][0],happen:o[E][1],resolve:o[E][2]}}}catch(_){d=!0,h=_}finally{try{p||null==f.return||f.return()}finally{if(d)throw h}}var b=!0,v=!1,y=void 0;try{for(var w,C=i[Symbol.iterator]();!(b=(w=C.next()).done);b=!0){var x=w.value;m[x]={relation:c[x][0],occur:c[x][1],happen:c[x][2],resolve:c[x][3]}}}catch(_){v=!0,y=_}finally{try{b||null==C.return||C.return()}finally{if(v)throw y}}return{history:{logOn:(new Date).toLocaleString(),medicalHistory:{leftEar:["No Hearing","Limited Hearing","Normal Hearing"][t-1],rightEar:["No Hearing","Limited Hearing","Normal Hearing"][n-1]},illnesses:u,ageSpeak:l,highestEdu:s,illnessesFam:m}}},a.handleSubmit=function(){var e,t,n,r,o,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.props.context,t=e.updateUser,n=e.user,r=a.state,o=r.leftEar,l=r.rightEar,s.prev=2,s.next=5,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:a.parseLog(),flag:"leftEarIsWorse",flagValue:o<=l}));case 5:return s.next=7,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:"",flag:"historyDone",flagValue:!0}));case 7:s.next=13;break;case 9:s.prev=9,s.t0=s.catch(2),alert(s.t0.message),console.log(s.t0);case 13:sessionStorage.setItem("leftEarIsWorse",o<=l),sessionStorage.setItem("historyDone",!0),t();case 16:case"end":return s.stop()}}),null,null,[[2,9]])},a.getStepContent=function(e){var t=a.props.classes,n=a.state,o=n.leftEar,l=n.rightEar,s=n.development,i=n.education,c=n.personalIllnesses,u=n.siblingIllnesses,m=n.personalIllnessesInfo,p=n.siblingIllnessesInfo;switch(e){case 0:return r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12},"How well are you hearing?"),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(pe.a,{required:!0,className:t.formControl},r.a.createElement(Ve.a,null,"Left Ear"),r.a.createElement(ze.a,{native:!0,value:o,onChange:a.handleChangeEarInfo("leftEar")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:1},"No Hearing"),r.a.createElement("option",{value:2},"Limited Hearing"),r.a.createElement("option",{value:3},"Normal Hearing")),r.a.createElement(qe.a,null,"Required"))),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(pe.a,{required:!0,className:t.formControl},r.a.createElement(Ve.a,null,"Right Ear"),r.a.createElement(ze.a,{native:!0,value:l,onChange:a.handleChangeEarInfo("rightEar")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:1},"No Hearing"),r.a.createElement("option",{value:2},"Limited Hearing"),r.a.createElement("option",{value:3},"Normal Hearing")),r.a.createElement(qe.a,null,"Required"))),r.a.createElement(ee.a,{item:!0,xs:12},"Check the following illnesses you have had before:"),r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(Je.a,{row:!0},["A","B","C","D","E","F","G"].map((function(e){return r.a.createElement(Qe.a,{key:"".concat(e,"-checkbox"),control:r.a.createElement(Ye.a,{className:t.illnessCheckBox,checked:c.includes(e),onChange:a.handleChangeIllness(e,!1),value:e}),label:e})})))),r.a.createElement(ee.a,{item:!0,xs:12},c.map((function(e){return r.a.createElement("div",{key:"".concat(e,"-form")},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(le.a,{key:"".concat(e,"-text1"),label:"When did ".concat(e," occur?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!1,0),value:m[e][0]}),r.a.createElement(le.a,{key:"".concat(e,"-text2"),label:"How did ".concat(e," happen?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!1,1),value:m[e][1]}),r.a.createElement(le.a,{key:"".concat(e,"-text3"),label:"When did ".concat(e," resolve?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!1,2),value:m[e][2]})))}))));case 1:return r.a.createElement(ee.a,{container:!0,spacing:0},r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(pe.a,null,r.a.createElement(Ve.a,{className:t.inputLabel},"Age you started to speak?"),r.a.createElement(ze.a,{className:t.fullSelect,autoWidth:!0,native:!0,value:s,onChange:a.handleChangeUserInfo("development")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0 - 2 years old."},"0 - 2 years old."),r.a.createElement("option",{value:"After 2 years old."},"After 2 years old."),r.a.createElement("option",{value:"Unknown."},"Unknown.")))));case 2:return r.a.createElement(ee.a,{container:!0,spacing:0},r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(pe.a,null,r.a.createElement(Ve.a,{className:t.inputLabel},"The highest education level you obtained?"),r.a.createElement(ze.a,{className:t.fullSelect,autoWidth:!0,native:!0,value:i,onChange:a.handleChangeUserInfo("education")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Primary, Secondary and Higher Secondary education."},"Primary, Secondary and Higher Secondary education."),r.a.createElement("option",{value:"Under-Graduate/Bachelor\u2019s level education."},"Under-Graduate/Bachelor\u2019s level education."),r.a.createElement("option",{value:"Post-Graduate/Master\u2019s level education."},"Post-Graduate/Master\u2019s level education."),r.a.createElement("option",{value:"Doctoral studies/Ph.D level education."},"Doctoral studies/Ph.D level education."),r.a.createElement("option",{value:"Vocational Education & Training."},"Vocational Education & Training."),r.a.createElement("option",{value:"Certificate and Diploma programs."},"Certificate and Diploma programs."),r.a.createElement("option",{value:"Distance Education."},"Distance Education.")))));case 3:return r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12},"Have any of your family members had the following illnesses?"),r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(Je.a,{row:!0},["A","B","C","D","E","F","G"].map((function(e){return r.a.createElement(Qe.a,{key:"".concat(e,"-checkbox"),control:r.a.createElement(Ye.a,{className:t.illnessCheckBox,checked:u.includes(e),onChange:a.handleChangeIllness(e,!0),value:e}),label:e})})))),r.a.createElement(ee.a,{item:!0,xs:12},u.map((function(e){return r.a.createElement("div",{key:"".concat(e,"-form")},"".concat(e,": Relation(s) between you and the person(s)?"),r.a.createElement(pe.a,null,r.a.createElement(Je.a,{row:!0},["Parent","Child","Sibling","Grandparent","Grandchild","Other"].map((function(n){return r.a.createElement(Qe.a,{className:t.relationCheckBox,key:"".concat(n,"-checkbox"),control:r.a.createElement(Ye.a,{checked:p[e][0].includes(n),onChange:a.handleChangeIllnessInfo(e,!0,0),value:n}),label:n})})))),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(le.a,{key:"".concat(e,"-text4"),label:"When did ".concat(e," occur?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!0,1),value:p[e][1]}),r.a.createElement(le.a,{key:"".concat(e,"-text5"),label:"How did ".concat(e," happen?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!0,2),value:p[e][2]}),r.a.createElement(le.a,{key:"".concat(e,"-text6"),label:"When did ".concat(e," resolve?"),fullWidth:!0,margin:"dense",multiline:!0,onChange:a.handleChangeIllnessInfo(e,!0,3),value:p[e][3]})))}))));default:return"Unknown step"}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.activeStep,o=a.leftEar,l=a.rightEar,s=["Medical History","Devemopment History","Education History","Family History"];return r.a.createElement(Z.a,null,r.a.createElement(Me.a,{activeStep:n,orientation:"vertical"},s.map((function(a,i){return r.a.createElement(Ge.a,{key:a},r.a.createElement(Ue.a,null,a),r.a.createElement(He.a,null,r.a.createElement(y.a,{component:"span"},e.getStepContent(i)),r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(x.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Back"),n===s.length-1?r.a.createElement(x.a,{disabled:""===o||""===l,variant:"contained",color:"primary",onClick:e.handleSubmit,className:t.button,component:P.b,to:"/researcherpage"},"Submit"):r.a.createElement(x.a,{disabled:""===o||""===l,variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},"Next")))))}))))}}]),t}(n.Component),Xe=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{formControl:{margin:e.spacing(0),minWidth:120},illnessCheckBox:{height:10},relationCheckBox:{minWidth:150},inputLabel:{width:320},fullSelect:{minWidth:280,marginBottom:8}}})))(Ke),$e=[125,250,500,750,1e3,1500,2e3,3e3,4e3,6e3,8e3],Ze=[1,2,4,6,8],et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={audiologistID:"",firstEditable:!1,secondEditable:!1,thirdEditable:!1,worseEarList:["","","","","","","","","","",""],betterEarList:["","","","","","","","","","",""],currentEar:!1,currentLog:"Pure Tone Audiogram Log".concat(" on ",(new Date).toLocaleString(),"\n",Y)},a.componentDidMount=function(){a.getWorseEar()},a.handleIDChange=function(e){var t=a.state.firstEditable;a.setState({audiologistID:e.target.value}),(a.validateID(e.target.value)?!t:t)&&a.setState({firstEditable:!t})},a.handleTextChange=function(e,t){return function(n){if(e){var r=a.state.worseEarList;r[t]=n.target.value,0===Ze.filter((function(e){return""===r[e]})).length?a.setState({secondEditable:!0}):a.setState({secondEditable:!1}),a.setState({worseEarList:r})}else{var o=a.state.betterEarList;o[t]=n.target.value,0===Ze.filter((function(e){return""===o[e]})).length?a.setState({thirdEditable:!0}):a.setState({thirdEditable:!1}),a.setState({betterEarList:o})}}},a.validateID=function(e){return e.length>0},a.getWorseEar=function(){var e=a.props.context.leftEarIsWorse;a.setState({currentEar:e})},a.onSubmit=function(){var e,t,n,r,o,l,s,c,u,m;return i.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=a.props.context,t=e.updateUser,n=e.user,r=e.loginMode,o=a.state,l=o.currentLog,s=o.currentEar,c=o.audiologistID,u=o.worseEarList,m=o.betterEarList,"researcher"!==r){p.next=4;break}return p.abrupt("return");case 4:return p.prev=4,p.next=7,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:l.concat("Audiologist ID: ",c,"\n",K,!0===s?"LEFT EAR\n":"RIGHT EAR\n",K,$e.map((function(e,t){return e.toString().concat(": ",u[t],"\n")})).join(""),K,!0===s?"RIGHT EAR\n":"LEFT EAR\n",K,$e.map((function(e,t){return e.toString().concat(": ",m[t],"\n")})).join(""),Y),flag:"PTAdone",flagValue:!0}));case 7:sessionStorage.setItem("PTAdone",!0),t(),p.next=14;break;case 11:p.prev=11,p.t0=p.catch(4),alert(p.t0.message);case 14:case"end":return p.stop()}}),null,null,[[4,11]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.audiologistID,o=a.firstEditable,l=a.secondEditable,s=a.thirdEditable,i=a.worseEarList,c=a.betterEarList,u=a.currentEar;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:6,className:t.grid},r.a.createElement(le.a,{label:"Audiologist ID",onChange:this.handleIDChange,value:n,variant:"outlined"})),r.a.createElement(se.a,{size:"small",className:t.table},r.a.createElement(ue.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,"Frequency in Hertz(Hz)"),r.a.createElement(ie.a,{align:"right"},u?"Left Ear(dBspl)":"Right Ear(dBspl)"),r.a.createElement(ie.a,{align:"right"},u?"Right Ear(dBspl)":"Left Ear(dBspl)"))),r.a.createElement(ne.a,null,$e.map((function(t,a){return r.a.createElement(ce.a,{key:a},r.a.createElement(ie.a,{component:"th",scope:"row"},Ze.includes(a)?t+" *":t),r.a.createElement(ie.a,{align:"right"},r.a.createElement(le.a,{disabled:!o,onChange:e.handleTextChange(!0,a),value:i[a],type:"number",inputProps:{step:"5",style:{textAlign:"right"}}})),r.a.createElement(ie.a,{align:"right"},r.a.createElement(le.a,{disabled:!o||!l,onChange:e.handleTextChange(!1,a),value:c[a],type:"number",inputProps:{step:"5",style:{textAlign:"right"}}})))})))),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(x.a,{className:t.button,variant:"contained",color:"primary",onClick:this.onSubmit,component:P.b,to:"/researcherpage",disabled:!o||!l||!s},"Submit"))))}}]),t}(n.Component),tt=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},grid:{marginLeft:30,marginTop:10},button:{margin:10},table:{margin:10}}})))(et),at=a(396),nt=a(71),rt=a.n(nt),ot=a(50),lt=a(205),st=a.n(lt),it=a(83),ct=a.n(it);function ut(e){return{left:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]},right:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]}}}function mt(e,t){return t?{left:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]},right:{}}:{left:{},right:{g50:[parseFloat(e.g50_250),parseFloat(e.g50_500),parseFloat(e.g50_1000),parseFloat(e.g50_2000),parseFloat(e.g50_4000),parseFloat(e.g50_6000)],g80:[parseFloat(e.g80_250),parseFloat(e.g80_500),parseFloat(e.g80_1000),parseFloat(e.g80_2000),parseFloat(e.g80_4000),parseFloat(e.g80_6000)],knee_low:[parseFloat(e.kneelow_250),parseFloat(e.kneelow_500),parseFloat(e.kneelow_1000),parseFloat(e.kneelow_2000),parseFloat(e.kneelow_4000),parseFloat(e.kneelow_6000)],mpo_band:[parseFloat(e.mpoband_250),parseFloat(e.mpoband_500),parseFloat(e.mpoband_1000),parseFloat(e.mpoband_2000),parseFloat(e.mpoband_4000),parseFloat(e.mpoband_6000)]}}}var pt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={playCurrent:!0,currentNode:1,nextNode:2,currentQueue:[1],currentVisited:{},graph:{},nodes:{},firstTimeAccess:!0,completed:!1,currentEar:!0,audioConfig:{},currentAudioFile:"",audioPath:"",currentLog:"User Assessment Log".concat(" on ",(new Date).toLocaleString(),"\n",Y)},a.componentDidMount=function(){var e,t,n,r,o,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=a.state.graph,t=a.props.context.assessmentDone,0!==Object.keys(e).length||!0===t){s.next=23;break}return s.next=5,i.a.awrap(a.getWorseEar());case 5:return s.next=7,i.a.awrap(a.constructGraph());case 7:return s.prev=7,s.next=10,i.a.awrap(X.get("/api/researcher/userAssessmentConfig"));case 10:return n=s.sent,r=n.data,s.next=14,i.a.awrap(X.get("/api/researcher/audioPath"));case 14:o=s.sent,l=o.data,a.setState({audioConfig:r,audioPath:l},(function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(a.playFile());case 2:case"end":return e.stop()}}))})),s.next=22;break;case 19:s.prev=19,s.t0=s.catch(7),alert(s.t0.response.data);case 22:a.handlePlay(!0);case 23:case"end":return s.stop()}}),null,null,[[7,19]])},a.getFilePath=function(){var e=a.state,t=e.audioConfig,n=e.audioPath,r=e.currentEar;return n.concat(a.getRandom(t[r?"left":"right"]))},a.getRandom=function(e){return e[Math.floor(Math.random()*e.length)]},a.playFile=function(){var e,t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.getFilePath(),t={left:{audio_filename:e,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1},right:{audio_filename:e,audio_reset:1,audio_repeat:1,audio_play:1,alpha:1}},o.prev=2,o.next=5,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:t}));case 5:n=o.sent,r=n.data,console.log(r),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),alert(o.t0.response.data);case 13:case"end":return o.stop()}}),null,null,[[2,10]])},a.mute=function(){var e,t,a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={left:{alpha:0},right:{alpha:0}},n.prev=1,n.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:e}));case 4:t=n.sent,a=t.data,console.log(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert(n.t0.response.data);case 12:case"end":return n.stop()}}),null,null,[[1,9]])},a.getWorseEar=function(){var e=a.props.context.leftEarIsWorse;a.setState({currentEar:"true"===a.props.match.params.currentIsLeft,firstTimeAccess:e===("true"===a.props.match.params.currentIsLeft)}),console.log(e)},a.constructGraph=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e={},t={},n=[],l.next=5,i.a.awrap(ot.a(st.a,(function(e){n.push([e.ParentNodeNo,e.NodeNo])})));case 5:return n.forEach((function(t){e[t[0]]=e[t[0]]?e[t[0]]:[],e[t[0]].push(t[1])})),l.next=8,i.a.awrap(ot.a(ct.a,(function(e){t[e.NodeNo]=mt(e,a.state.currentEar)})));case 8:r=sessionStorage.getItem("rootNode"),o=r?parseInt(r):1,console.log(o),a.setState({graph:e,nodes:t,currentNode:o,nextNode:e[o][0],currentQueue:[o]});case 12:case"end":return l.stop()}}))},a.handlePlay=function(e){var t,n,r,o,l,s;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=a.state,n=t.nodes,r=t.currentNode,o=t.nextNode,c.prev=1,c.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:e?n[r]:n[o]}));case 4:l=c.sent,s=l.data,console.log(s),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),alert(c.t0.response.data);case 12:a.setState({playCurrent:e});case 13:case"end":return c.stop()}}),null,null,[[1,9]])},a.handleContinue=function(e){var t,n,r,o,l,s,c,u,m,p,d;return i.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:t=a.state,n=t.currentNode,r=t.nextNode,o=t.currentQueue,l=t.currentVisited,s=t.graph,c=t.currentEar,u=t.currentLog,l[n]=!0,l[r]=!0,m=n,p=r,0===e&&(d=o.indexOf(n),o.splice(d,1),m=r),2!==e&&o.push(r),h.t0=e,h.next=0===h.t0?10:1===h.t0?12:2===h.t0?14:16;break;case 10:return a.setState({currentLog:u.concat("User thinks NEW(",r,") is better than CURRENT(",n,") for the",c?"LEFT ear":"RIGHT ear","\n")}),h.abrupt("break",17);case 12:return a.setState({currentLog:u.concat("User thinks NEW(",r,") is the same as CURRENT(",n,") for the",c?"LEFT ear":"RIGHT ear","\n")}),h.abrupt("break",17);case 14:return a.setState({currentLog:u.concat("User thinks NEW(",r,") is worse than CURRENT(",n,") for the ",c?"LEFT ear":"RIGHT ear","\n")}),h.abrupt("break",17);case 16:return h.abrupt("break",17);case 17:if(0!==o.length){h.next=20;break}return a.setState({completed:!0}),h.abrupt("return");case 20:if(o.forEach((function(e){e in s&&s[e].forEach((function(e){p!==r||e in l||(p=e)}))})),p!==r){h.next=27;break}return a.setState({completed:!0}),h.next=25,i.a.awrap(a.mute());case 25:h.next=30;break;case 27:return h.next=29,i.a.awrap(a.playFile());case 29:a.setState({currentNode:m,nextNode:p,currentQueue:o,currentVisited:l},(function(){return a.handlePlay(!0)}));case 30:case"end":return h.stop()}}))},a.onSubmit=function(){var e,t,n,r,o,l,s,c,u,m,p;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=a.props.context,t=e.updateUser,n=e.user,r=e.loginMode,o=a.state,l=o.currentLog,s=o.currentQueue,c=o.nodes,u=o.currentEar,m=o.firstTimeAccess,"researcher"!==r){d.next=4;break}return d.abrupt("return");case 4:if(d.prev=4,m){d.next=15;break}return d.next=8,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:l.concat(Y),flag:"assessmentDone",flagValue:!0}));case 8:return sessionStorage.setItem("assessmentDone",!0),t(),p=sessionStorage.getItem("tmpParameters"),d.next=13,i.a.awrap(X.post("/api/listener/updateParameters",{listenerID:n,parameters:JSON.stringify({left:!0===u?c[s[0]].left:p,right:!1===u?c[s[0]].right:p})}));case 13:d.next=18;break;case 15:return d.next=17,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:l.concat(Y),flag:"assessmentDone",flagValue:!1}));case 17:sessionStorage.setItem("tmpParameters",!0===u?c[s[0]].left:c[s[0]].right);case 18:d.next=24;break;case 20:d.prev=20,d.t0=d.catch(4),alert(d.t0.message),console.log(d.t0);case 24:case"end":return d.stop()}}),null,null,[[4,20]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.showNodeNumber,o=this.state,l=o.playCurrent,s=o.firstTimeAccess,i=o.completed,c=o.currentEar,u=o.currentNode,m=o.nextNode;return r.a.createElement(Z.a,{className:a.paper},r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12,className:a.grid},"Use your  ",c?"LEFT":"RIGHT"," ear:"),r.a.createElement(ee.a,{item:!0,xs:12,className:a.grid},"Please click the one you think is better:"),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(at.a,{size:"large",color:"primary","aria-label":"large outlined primary button group"},r.a.createElement(x.a,{className:a.buttonGroup,variant:l?"contained":"outlined",startIcon:r.a.createElement(rt.a,null),onClick:function(){return e.handlePlay(!0)}},"Current"),r.a.createElement(x.a,{className:a.buttonGroup,variant:l?"outlined":"contained",startIcon:r.a.createElement(rt.a,null),onClick:function(){return e.handlePlay(!1)}},"Next"))),i?r.a.createElement(ee.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},s?"You've finished ".concat(c?"LEFT":"RIGHT"," ear."):"Congrats!! You've finished the user assessment!",s&&!n?r.a.createElement(x.a,{className:a.button,variant:"outlined",color:"primary",onClick:this.onSubmit,component:P.b,to:"/assessmentpageSetup/second"},"Proceed to the next ear"):r.a.createElement(x.a,{className:a.button,variant:"outlined",color:"primary",onClick:this.onSubmit,component:P.b,to:"/researcherpage"},"Back to main menu")):[r.a.createElement(ee.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center",key:"options"},r.a.createElement(x.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(0)}},"New is Better than Current"),r.a.createElement(x.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(1)}},"New is the Same as Current"),r.a.createElement(x.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue(2)}},"New is Worse than Current")),n?r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",key:"node_helpers"},r.a.createElement(le.a,{className:a.buttonGroup,variant:"outlined",value:"Node ".concat(u),inputProps:{style:{textAlign:"center"}},disabled:!0}),r.a.createElement(le.a,{className:a.buttonGroup,variant:"outlined",value:"Node ".concat(m),inputProps:{style:{textAlign:"center"}},disabled:!0})):null]))}}]),t}(n.Component),dt=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},paper:{minHeight:"90vh"},button:{minWidth:250,height:50,margin:10},grid:{marginLeft:10,fontSize:16},margin:{margin:10},extendedIcon:{marginRight:8},buttonGroup:{width:"40vw",height:100,marginTop:30,marginBottom:30}}})))(pt),ht=a(117),gt=a.n(ht),ft=a(118),Et=a.n(ft),bt=a(207),vt=a.n(bt),yt=a(206),wt=a.n(yt),Ct=a(116),xt=a.n(Ct),_t=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:{},options:{},currentNode:1,currentIsLeft:!0,time:"first"},a.componentDidMount=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a._isMounted=!0,e=a.state.options,t.next=4,i.a.awrap(a.getWorseEar(a.props.match.params.time));case 4:if(0!==Object.keys(e).length){t.next=9;break}return t.next=7,i.a.awrap(a.constructGraph());case 7:return t.next=9,i.a.awrap(a.handleApply());case 9:case"end":return t.stop()}}))},a.getWorseEar=function(e){var t=a.props.context.leftEarIsWorse;a.setState({currentIsLeft:"first"===e?t:!t,time:e})},a.constructGraph=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={},t={},n.next=4,i.a.awrap(ot.a(xt.a,(function(e){t[e.NodeNo]=e.HearingLoss})));case 4:return n.next=6,i.a.awrap(ot.a(ct.a,(function(t){e[t.NodeNo]=ut(t)})));case 6:a._isMounted&&a.setState({options:t,nodes:e});case 7:case"end":return n.stop()}}))},a.decreaseSound=function(){a.setState({currentNode:a.state.currentNode>1?a.state.currentNode-1:1},a.handleApply)},a.increaseSound=function(){a.setState({currentNode:a.state.currentNode<5?a.state.currentNode+1:5},a.handleApply)},a.getMarks=function(){var e=[],t=a.state.options;return Object.keys(t).forEach((function(t){e.push({value:25*(t-1),label:t})})),e},a.handleApply=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state,t=e.currentNode,n=e.nodes,l.prev=1,l.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:n[t]}));case 4:r=l.sent,o=r.data,console.log(o),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(1),alert(l.t0.response.data);case 12:case"end":return l.stop()}}),null,null,[[1,9]])},a.handleSliderChange=function(e,t){a.setState({currentNode:t/25+1})},a.earDone=function(){var e=a.state.currentNode;sessionStorage.setItem("rootNode",parseInt(e))},a.handlePlay=function(){var e,t,a,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e="",o.prev=1,o.next=4,i.a.awrap(X.get("/api/researcher/audioPath"));case 4:t=o.sent,e=e.concat(t.data),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),alert(o.t0.response.data);case 11:return e=e.concat("test.wav"),console.log(e),a={left:{audio_filename:e,audio_reset:1,audio_repeat:0,audio_play:1,alpha:1},right:{audio_filename:e,audio_reset:1,audio_repeat:0,audio_play:1,alpha:1}},o.prev=14,o.next=17,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:a}));case 17:n=o.sent,r=n.data,console.log(r),o.next=25;break;case 22:o.prev=22,o.t1=o.catch(14),alert(o.t1.response.data);case 25:case"end":return o.stop()}}),null,null,[[1,8],[14,22]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.currentNode,o=a.options,l=a.currentIsLeft;return r.a.createElement(Z.a,{className:t.paper},r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12,className:t.title},"Please adjust the volume for your ".concat(l?"LEFT":"RIGHT"," ear")),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(gt.a,{className:t.icon}),o?r.a.createElement(_e.a,{value:25*(n-1),"aria-labelledby":"discrete-slider-always",step:25,marks:this.getMarks(),track:!1,className:t.slider}):null,r.a.createElement(Et.a,{className:t.icon})),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(C.a,{"aria-label":"remove",onClick:this.decreaseSound,className:t.iconButtonMarginLeft,disabled:1===n},r.a.createElement(wt.a,{className:t.iconButton})),r.a.createElement(C.a,{"aria-label":"add",onClick:this.increaseSound,className:t.iconButtonMarginRight,disabled:5===n},r.a.createElement(vt.a,{className:t.iconButton}))),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(C.a,{variant:"contained",onClick:function(){return e.handlePlay()}},r.a.createElement(rt.a,{className:t.buttonGroup}))),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.earDone,component:P.b,to:"/assessmentPage/".concat(l)},"Continue"),"}")))}}]),t}(n.Component),St=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{slider:{width:"60vw",marginLeft:30,marginRight:30},icon:{maxWidth:"10vw",marginBottom:20},title:{margin:10},img:{height:"auto",width:"60vw"},button:{margin:10},iconButton:{height:50,width:50},iconButtonMarginLeft:{},iconButtonMarginRight:{},buttonGroup:{width:200,height:200}}})))(_t),kt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={completed:!1,currentWord:"",audioConfig:[],audioPath:"",currentAudioFile:"",currentOptions:["","","",""],currentCount:0,currentLog:"4AFC Log".concat(" on ",(new Date).toLocaleString(),"\n",Y)},a.componentDidMount=function(){var e,t,n,r,o,l,s;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,e=a.props.context,t=e.user,"researcher"===e.loginMode){c.next=7;break}return c.next=5,i.a.awrap(X.get("/api/listener/getParameters/".concat(t)));case 5:n=c.sent,a.apply(n.data);case 7:return c.next=9,i.a.awrap(X.get("/api/researcher/4AFCConfig"));case 9:return r=c.sent,o=r.data.words,c.next=13,i.a.awrap(X.get("/api/researcher/audioPath"));case 13:return l=c.sent,s=l.data,c.next=17,i.a.awrap(a.setState({audioConfig:o,audioPath:s}));case 17:a.fetchWord(),c.next=24;break;case 20:c.prev=20,c.t0=c.catch(0),console.log(c.t0),alert(c.t0.response.data);case 24:case"end":return c.stop()}}),null,null,[[0,20]])},a.apply=function(e){var t,a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:e}));case 5:t=n.sent,a=t.data,console.log(a),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),alert(n.t0.response.data);case 13:case"end":return n.stop()}}),null,null,[[2,10]])},a.handlePlay=function(){var e,t,n,r,o,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state,t=e.audioPath,n=e.currentAudioFile,r={left:{audio_filename:t.concat(n),audio_reset:1,audio_repeat:0,audio_play:1,alpha:1},right:{audio_filename:t.concat(n),audio_reset:1,audio_repeat:0,audio_play:1,alpha:1}},s.prev=2,s.next=5,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:r}));case 5:o=s.sent,l=o.data,console.log(l),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(2),alert(s.t0.response.data);case 13:case"end":return s.stop()}}),null,null,[[2,10]])},a.fetchWord=function(){var e=a.state.audioConfig,t=Math.floor(Math.random()*e.length),n=e[t];e.splice(t,1),a.setState({audioConfig:e,currentWord:n.answer,currentOptions:[n.option_A,n.option_B,n.option_C,n.option_D],currentCount:a.state.currentCount+1,currentAudioFile:n.filename})},a.handleContinue=function(e){var t=a.state,n=t.currentCount,r=t.currentOptions,o=t.currentWord,l=t.currentLog;a.setState({currentLog:l.concat("Current options are ",r.map((function(e){return' "'.concat(e,'"')})),"\nThe correct answer is: ",o,"\nThe user selected: ",e,"\n",K)}),n>=5?a.setState({completed:!0}):a.fetchWord()},a.handleSubmit=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=a.props.context,t=e.updateUser,n=e.user,r=e.loginMode,o=a.state.currentLog,"researcher"!==r){l.next=4;break}return l.abrupt("return");case 4:return l.prev=4,l.next=7,i.a.awrap(X.post("/api/listener/addLog",{listenerID:n,newLog:o.concat(Y),flag:"AFCDone",flagValue:!0}));case 7:l.next=13;break;case 9:l.prev=9,l.t0=l.catch(4),alert(l.t0.message),console.log(l.t0);case 13:sessionStorage.setItem("AFCDone",!0),t();case 15:case"end":return l.stop()}}),null,null,[[4,9]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.completed,o=a.currentOptions;return r.a.createElement(Z.a,{className:t.paper},r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12,className:t.grid},"Please click the word you heard:"),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(C.a,{variant:"contained",onClick:function(){return e.handlePlay()}},r.a.createElement(rt.a,{className:t.buttonGroup}))),n?r.a.createElement(ee.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},"You are finished.",r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSubmit,component:P.b,to:"/researcherpage"},"Back to main menu")):r.a.createElement(ee.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"center"},r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("A")}},o[0]),r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("B")}},o[1]),r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("C")}},o[2]),r.a.createElement(x.a,{className:t.button,variant:"outlined",color:"primary",onClick:function(){return e.handleContinue("D")}},o[3]))))}}]),t}(n.Component),Nt=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},paper:{height:"90vh"},button:{width:"80vw",height:50,margin:10},grid:{marginLeft:10,fontSize:16},margin:{margin:10},extendedIcon:{marginRight:8},buttonGroup:{width:100,height:100}}})))(kt),Ot=a(208),It=a.n(Ot),Lt=a(209),Dt=a.n(Lt),jt=a(210),At=a.n(jt),Ft=a(211),Bt=a.n(Ft),Pt=a(212),Tt=a.n(Pt),Rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:{},options:{},currentNode:1},a.componentDidMount=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a._isMounted=!0,e=a.state.options,0!==Object.keys(e).length){t.next=5;break}return t.next=5,i.a.awrap(a.constructGraph());case 5:case"end":return t.stop()}}))},a.constructGraph=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={},t={},n.next=4,i.a.awrap(ot.a(xt.a,(function(e){t[e.NodeNo]=e.HearingLoss})));case 4:return n.next=6,i.a.awrap(ot.a(ct.a,(function(t){e[t.NodeNo]=ut(t)})));case 6:a._isMounted&&a.setState({options:t,nodes:e});case 7:case"end":return n.stop()}}))},a.getMarks=function(){var e=[],t=a.state.options;return Object.keys(t).forEach((function(a){e.push({value:25*(a-1),label:t[a]})})),e},a.getImage=function(){switch(a.state.currentNode){case 1:return It.a;case 2:return Dt.a;case 3:return At.a;case 4:return Bt.a;case 5:return Tt.a;default:return}},a.handleApply=function(){var e,t,n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state,t=e.currentNode,n=e.nodes,l.prev=1,l.next=4,i.a.awrap(X.post("/api/param/setparam",{method:"set",data:n[t]}));case 4:r=l.sent,o=r.data,console.log(o),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(1),alert(l.t0.response.data);case 12:case"end":return l.stop()}}),null,null,[[1,9]])},a.handleSliderChange=function(e,t){a.setState({currentNode:t/25+1}),sessionStorage.setItem("rootNode",parseInt(t/25+1))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.currentNode,n=t.options;return r.a.createElement(Z.a,{className:e.paper},r.a.createElement(ee.a,{container:!0,spacing:1},r.a.createElement(ee.a,{item:!0,xs:12,className:e.title},"Please adjust the hearing loss:"),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(gt.a,{className:e.icon}),n?r.a.createElement(_e.a,{value:25*(a-1),"aria-labelledby":"discrete-slider-always",step:25,onChangeCommitted:this.handleSliderChange,marks:this.getMarks(),track:!1,className:e.slider}):null,r.a.createElement(Et.a,{className:e.icon})),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement("img",{src:this.getImage(),alt:"Demo_".concat(a),className:e.img})),r.a.createElement(ee.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(x.a,{className:e.button,variant:"outlined",color:"primary",onClick:this.handleApply},"Transmit"),r.a.createElement(x.a,{className:e.button,variant:"outlined",color:"primary",onClick:null,component:P.b,to:"/researcherpage"},"Continue"))))}}]),t}(n.Component),Wt=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{slider:{width:"60vw",marginLeft:30,marginRight:30},icon:{maxWidth:"10vw",marginBottom:20},title:{margin:10},img:{height:"auto",width:"60vw"},button:{margin:10}}})))(Rt),Mt=a(397),Gt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={listenerID:"",password:"",isLoading:!1},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){var t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),a.setState({isLoading:!0}),t=a.props.handleClose,n=a.props.context.user,o.prev=4,o.next=7,i.a.awrap(X.post("http://localhost:5000/api/listener/signup",{listenerID:a.state.listenerID,researcher:n,password:a.state.password}));case 7:r=o.sent,null!=t&&t(),console.log(r),window.location.reload(),o.next=18;break;case 13:o.prev=13,o.t0=o.catch(4),a.setState({isLoading:!1}),alert(o.t0.message),console.log(o.t0);case 18:case"end":return o.stop()}}),null,null,[[4,13]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.handleClose,o=this.state,l=o.listenerID,s=o.password,i=o.isLoading,c=""===l||""===s||i;return r.a.createElement("div",null,r.a.createElement(be.a,{open:a,onClose:n},r.a.createElement(ve.a,{id:"form-dialog-title"},"Create Listener"),r.a.createElement(Ee.a,null,r.a.createElement(le.a,{variant:"outlined",required:!0,label:"listener ID",id:"listenerID",onChange:this.handleInputChange,className:t.textField}),r.a.createElement(le.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:t.textField}),i&&r.a.createElement(Mt.a,null)),r.a.createElement(fe.a,null,r.a.createElement(x.a,{onClick:n,color:"secondary"},"Cancel"),r.a.createElement(x.a,{onClick:this.handleSubmit,color:"primary",disabled:c},"Create"))))}}]),t}(n.Component),Ut=Object(R.a)(H,Object(E.a)({formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20}}))(Gt),Ht=a(221),Vt=a(215),qt=a.n(Vt),zt=a(214),Jt=a.n(zt),Qt=a(213),Yt=a.n(Qt);function Kt(e){var t=e.children,a=e.value,n=e.index,o=Object(Ht.a)(e,["children","value","index"]);return r.a.createElement(y.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(ke.a,{p:3},t))}Y.split("\n")[0],K.split("\n")[0];var Xt=["Patient History","4AFC","PTA","Assessment"],$t=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={listener:a.props.listener,showLogOpen:!1,deleteDialogOpen:!1,editPasswordOpen:!1,newPassword:"",currTabIdx:0,listenerLog:a.props.listener.userLog},a.handleTabChange=function(e,t){a.setState({currTabIdx:t})},a.handleOpen=function(){a.setState({deleteDialogOpen:!0})},a.handleClose=function(){a.setState({deleteDialogOpen:!1})},a.handleShowLogOpen=function(){a.setState({showLogOpen:!0})},a.handleShowLogClose=function(){a.setState({showLogOpen:!1})},a.handleEditPasswordOpen=function(){a.setState({editPasswordOpen:!0})},a.handleEditPasswordClose=function(){a.setState({editPasswordOpen:!1})},a.handlePasswordChange=function(e){a.setState({newPassword:e.target.value})},a.handleDeleteListener=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(X.post("/api/listener/delete",{listenerID:a.state.listener.listenerID}));case 3:e=t.sent,console.log(e.data),window.location.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,8]])},a.handleEditPassword=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(X.post("/api/listener/password",{listenerID:a.state.listener.listenerID,newPassword:a.state.newPassword}));case 3:e=t.sent,console.log(e.data),window.location.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,8]])},a.exportTXT=function(){var e=a.state.listener,t=document.createElement("a"),n=new Blob([e.userLog],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="listener_".concat(e.listenerID,"_log.txt"),document.body.appendChild(t),t.click()},a.renderLog=function(){var e=a.state,t=e.listener,n=e.showLogOpen,o=e.currTabIdx,l=e.listenerLog;console.log(t.userLog);var s=l.history,i=l.AFC,c=l.PTA,u=l.assessment;return r.a.createElement(be.a,{open:n,fullWidth:!0,maxWidth:"lg",onClose:a.handleShowLogClose},r.a.createElement(ve.a,null,r.a.createElement(J.a,{value:o,onChange:a.handleTabChange,indicatorColor:"primary",textColor:"primary",centered:!0},Xt.map((function(e,t){return r.a.createElement(z.a,{label:e,key:t})})))),r.a.createElement(Ee.a,null,r.a.createElement(Kt,{value:o,index:0,style:{whiteSpace:"pre-line"}},r.a.createElement(N.a,null,r.a.createElement(I.a,{divider:!0}),r.a.createElement(I.a,{divider:!0},r.a.createElement(L.a,{primary:"Drafts"})),r.a.createElement(I.a,{divider:!0},r.a.createElement(L.a,{primary:"Trash"})),r.a.createElement(I.a,null,r.a.createElement(L.a,{primary:"Spam"}))),s),r.a.createElement(Kt,{value:o,index:1},i),r.a.createElement(Kt,{value:o,index:2},c),r.a.createElement(Kt,{value:o,index:3},u)),r.a.createElement(fe.a,null,r.a.createElement(x.a,{color:"primary",onClick:a.exportTXT},"Export"),r.a.createElement(x.a,{color:"primary",onClick:a.handleShowLogClose},"OK")))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.listener,a=e.deleteDialogOpen,n=e.editPasswordOpen,o=e.newPassword,l=""===o||o===t.password;return r.a.createElement(ce.a,{hover:!0},r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t.listenerID)),r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textPrimary"},t.createdAt)),r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textPrimary"},t.updatedAt)),r.a.createElement(ie.a,null,r.a.createElement(C.a,{color:"primary",onClick:this.handleShowLogOpen},r.a.createElement(Yt.a,null)),r.a.createElement(C.a,{color:"primary",onClick:this.handleEditPasswordOpen},r.a.createElement(Jt.a,null)),r.a.createElement(C.a,{color:"secondary",onClick:this.handleOpen},r.a.createElement(qt.a,null))),this.renderLog(),r.a.createElement(be.a,{open:n,onClose:this.handleEditPasswordClose},r.a.createElement(ve.a,null,"Edit Password"),r.a.createElement(Ee.a,null,r.a.createElement(le.a,{variant:"outlined",label:"Current Password",disabled:!0,value:t.password,style:{width:"90%",maxWidth:400,marginBottom:20}}),r.a.createElement(le.a,{variant:"outlined",label:"New Password",style:{width:"90%",maxWidth:400,marginBottom:20},onChange:this.handlePasswordChange})),r.a.createElement(fe.a,null,r.a.createElement(x.a,{onClick:this.handleEditPasswordClose,color:"secondary"},"Cancel"),r.a.createElement(x.a,{color:"primary",disabled:l,onClick:this.handleEditPassword},"Confirm"))),r.a.createElement(be.a,{open:a,onClose:this.handleClose},r.a.createElement(ve.a,null,"Delete Listener"),r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,"Warning! This action is NOT reversable.")),r.a.createElement(fe.a,null,r.a.createElement(x.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),r.a.createElement(x.a,{color:"primary",onClick:this.handleDeleteListener},"Delete"))))}}]),t}(n.Component),Zt=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))($t),ea=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={signupDialogOpen:!1,listenerList:[]},a.componentDidMount=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=a.props.context.updateUser,r.next=4,i.a.awrap(e());case 4:return t=a.props.context.user,r.next=7,i.a.awrap(X.get("/api/listener/".concat(t)));case 7:n=r.sent,console.log(n.data),a.setState({listenerList:n.data}),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),alert(r.t0),console.log(r.t0);case 16:case"end":return r.stop()}}),null,null,[[0,12]])},a.handleSignupDialogOpen=function(){a.setState({signupDialogOpen:!0})},a.handleSignupDialogClose=function(){a.setState({signupDialogOpen:!1})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.listenerList;return r.a.createElement("div",{className:e.content},r.a.createElement(Z.a,{className:e.listenerSection},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"My Listeners"),r.a.createElement(x.a,{color:"primary",variant:"contained",className:e.topBarButton,onClick:this.handleSignupDialogOpen},"Create New Listener")),r.a.createElement(Ut,{open:this.state.signupDialogOpen,handleClose:this.handleSignupDialogClose}),r.a.createElement("div",{className:e.listenerSectionContent},r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(ce.a,null,["Listener ID","Created At","Updated At","Action"].map((function(e){return r.a.createElement(ie.a,{key:e},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},e))})))),r.a.createElement(ne.a,null,t.map((function(e,t){return r.a.createElement(Zt,{key:"listener_".concat(t),listener:e})})))))))}}]),t}(n.Component),ta=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30}}})))(ea),aa=a(220),na=a(409),ra=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filename,a=e.handleDelete;return r.a.createElement(ce.a,{hover:!0},r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t)),r.a.createElement(ie.a,null,r.a.createElement(x.a,{onClick:function(){return a(t)},color:"secondary"},"Delete")))}}]),t}(n.Component),oa=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(ra),la=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={fileList:[],fileOrder:"asc",uploadDialogOpen:!1,selectedFiles:[]},a.componentDidMount=function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.getFileNames();case 1:case"end":return e.stop()}}))},a.getFileNames=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(X.get("/api/researcher/fileNames"));case 3:e=t.sent,a.setState({fileList:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0.response.data);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},a.handleSortChange=function(){var e="asc"===a.state.fileOrder?"desc":"asc";a.setState({fileOrder:e})},a.handleUploadDialogOpen=function(){a.setState({uploadDialogOpen:!0})},a.handleUploadDialogClose=function(){a.setState({uploadDialogOpen:!1})},a.handleDelete=function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(X.post("/api/researcher/delete",{filename:e}));case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),t.t0;case 8:a.getFileNames();case 9:case"end":return t.stop()}}),null,null,[[0,5]])},a.uploadFiles=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:for(console.log(a.state.selectedFiles),e=new FormData,t=0;t<a.state.selectedFiles.length;t++)e.append("file",a.state.selectedFiles[t]);return r.prev=3,r.next=6,i.a.awrap(X.post("/api/researcher/upload",e,{}));case 6:n=r.sent,console.log(n.data),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),alert(r.t0);case 13:a.getFileNames(),a.handleUploadDialogClose();case 15:case"end":return r.stop()}}),null,null,[[3,10]])},a.onChangeHandler=function(e){a.setState({selectedFiles:e.target.files})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.fileOrder,o=a.fileList,l=a.uploadDialogOpen,s=Object(aa.a)(o).sort((function(e,t){return"4AFCConfig.json"===e||"UserAssessmentConfig.json"===e?-1:"4AFCConfig.json"===t||"UserAssessmentConfig.json"===t?1:"asc"===n?e>t?1:-1:e<t?1:-1}));return r.a.createElement("div",{className:t.content},r.a.createElement(Z.a,{className:t.listenerSection},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"My Files"),r.a.createElement(x.a,{color:"primary",variant:"contained",className:t.topBarButton,onClick:this.handleUploadDialogOpen},"Upload Files")),r.a.createElement("div",{className:t.listenerSectionContent},r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(na.a,{active:!0,direction:n,onClick:this.handleSortChange},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"File Name"))),r.a.createElement(ie.a,null,r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},"Actions")))),r.a.createElement(ne.a,null,s.map((function(t,a){return r.a.createElement(oa,{key:"file_".concat(a),filename:t,handleDelete:e.handleDelete})}))))),r.a.createElement(be.a,{open:l,onClose:this.handleUploadDialogClose},r.a.createElement(ve.a,null,"Upload File"),r.a.createElement(Ee.a,null,r.a.createElement("input",{type:"file",multiple:!0,onChange:this.onChangeHandler})),r.a.createElement(fe.a,null,r.a.createElement(x.a,{color:"primary",onClick:this.uploadFiles},"Submit")))))}}]),t}(n.Component),sa=Object(R.a)(H,T.f,Object(Q.a)((function(e){return{root:{flexGrow:1},content:{padding:e.spacing(3)},listenerSection:{marginTop:30,width:"90%",maxWidth:1e3},listenerSectionContent:{display:"flex",flexDirection:"column",alignItems:"center"},topBarButton:{marginLeft:30},textField:{width:"90%",maxWidth:400,marginBottom:20}}})))(la),ia=[{path:"/listenermanagement",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Listener Management")},main:function(){return r.a.createElement(ta,null)}},{path:"/filemanagement",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"File Management")},main:function(){return r.a.createElement(sa,null)}},{path:"/researcherpage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Researcher Page")},main:function(){return r.a.createElement(We,null)}},{path:"/surveypage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Patient History")},main:function(){return r.a.createElement(Xe,null)}},{path:"/PTApage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Pure Tone Audiogram",r.a.createElement("div",null,"(Researcher Only)"))},main:function(){return r.a.createElement(tt,null)}},{path:"/assessmentpageSetup/:time",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(St,null)}},{path:"/assessmentpageDemo",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment Demo")},main:function(){return r.a.createElement(dt,{showNodeNumber:!0})}},{path:"/assessmentpage/:currentIsLeft",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(dt,{showNodeNumber:!1})}},{path:"/4AFCpage",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"User Assessment")},main:function(){return r.a.createElement(Nt,null)}},{path:"/hearingLossDemo",appBarTitle:function(){return r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Hearing Loss Demo")},main:function(){return r.a.createElement(Wt,null)}}],ca=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={drawerOpen:!1},a.componentDidMount=function(){var e,t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.props.context.updateUser,o.next=3,i.a.awrap(e());case 3:t=a.props.context,n=t.user,r=t.loginMode,console.log(n,r),n&&r?"researcher"===r?a.props.history.push("/listenermanagement"):a.props.history.push("/researcherpage"):a.props.history.push("/login");case 6:case"end":return o.stop()}}))},a.handleDrawerToggle=function(){a.setState((function(e){return{drawerOpen:!e.drawerOpen}}))},a.handleLogOut=function(){sessionStorage.clear(),window.location.reload()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.context,a=t.loginMode,n=t.assessmentDone;return r.a.createElement("div",{className:e.root},r.a.createElement(b.a,{position:"fixed",className:e.appBar},r.a.createElement(v.a,null,r.a.createElement(C.a,{color:"inherit",edge:"start",className:e.menuButton,onClick:this.handleDrawerToggle},r.a.createElement(k.a,null)),r.a.createElement(T.c,null,ia.map((function(e,t){return r.a.createElement(T.a,{key:t,path:e.path,component:e.appBarTitle})}))),r.a.createElement(x.a,{variant:"outlined",color:"inherit",styles:{margin:20},onClick:this.handleLogOut},"Log Out"))),r.a.createElement("nav",{className:e.drawer},r.a.createElement(w.a,{mdUp:!0,implementation:"css"},r.a.createElement(_.a,{classes:{paper:e.drawerPaper},anchor:"left",variant:"temporary",open:this.state.drawerOpen,onClose:this.handleDrawerToggle},r.a.createElement(q,{loginMode:a,assessmentDone:n}))),r.a.createElement(w.a,{smDown:!0,implementation:"css"},r.a.createElement(_.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},r.a.createElement(q,{loginMode:a,assessmentDone:n})))),r.a.createElement("main",{className:e.content},r.a.createElement(T.c,null,ia.map((function(e,t){return r.a.createElement(T.a,{key:t,path:e.path,component:e.main})})))))}}]),t}(n.Component);ca.protoTypes={classes:f.a.object.isRequired};var ua=Object(R.a)(H,T.f,Object(E.a)((function(e){return{root:{display:"flex"},appBar:Object(h.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(270,"px)"),marginLeft:270}),menuButton:Object(h.a)({marginRight:20},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawer:Object(h.a)({},e.breakpoints.up("md"),{width:270,flexShrink:0}),drawerPaper:{width:270},content:{flexGrow:1,marginTop:70}}})))(ca),ma=a(219),pa=a(400),da=a(217),ha=a.n(da),ga=a(218),fa=a.n(ga),Ea=a(411),ba=a(399),va=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={researcherID:"",institution:"",password:"",isLoading:!1},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSelectChange=function(e){a.setState({institution:e.target.value})},a.handleSubmit=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),a.setState({isLoading:!0}),t=a.props.history,n.prev=3,n.next=6,i.a.awrap(X.post("/api/researcher/signup",{researcherID:a.state.researcherID,institution:a.state.institution,password:a.state.password}));case 6:t.push("/login"),a.setState({isLoading:!1}),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(3),a.setState({isLoading:!1}),alert(n.t0.message),console.log(n.t0);case 15:case"end":return n.stop()}}),null,null,[[3,10]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.researcherID,n=t.institution,o=t.password,l=t.isLoading,s=""===a||""===n||""===o||l;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(le.a,{variant:"outlined",required:!0,label:"Researcher ID",id:"researcherID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(pe.a,{variant:"outlined",required:!0,className:e.textField},r.a.createElement(Ve.a,null,"Insititution"),r.a.createElement(ze.a,{id:"institution",onChange:this.handleSelectChange},r.a.createElement(ba.a,{value:"UCSD"},"University of California, San Diego"),r.a.createElement(ba.a,{value:"SDSU"},"San Diego State University"))),r.a.createElement(le.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(x.a,{variant:"contained",className:e.button,color:"primary",disabled:s,onClick:this.handleSubmit},"Submit"),l&&r.a.createElement(Mt.a,null))}}]),t}(n.Component),ya=Object(R.a)(T.f,Object(E.a)({formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10,marginBottom:10}}))(va),wa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleChangeSignupMode=function(e,t){a.setState({signupMode:t})},a.topBar=function(){var e=a.props.classes;return r.a.createElement("div",{className:e.topBar},r.a.createElement(w.a,{xsDown:!0},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary",className:e.topBarTitle},"Researcher Sign Up")),r.a.createElement(x.a,{variant:"outlined",color:"secondary",className:e.topBarButton,component:P.b,to:"/login"},"Log in"))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},this.topBar(),r.a.createElement("div",{className:e.content},r.a.createElement("div",{className:e.title},r.a.createElement(y.a,{variant:"h4",gutterBottom:!0},"Welcom to Open Speech Platform"),r.a.createElement(y.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement(Z.a,{className:e.formPaper},r.a.createElement(ya,null))))}}]),t}(n.Component),Ca=Object(E.a)((function(e){return{root:{padding:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},topBar:{display:"flex",justifyContent:"space-between",marginBottom:30},topBarTitle:{marginLeft:50},topBarButton:{marginRight:50,justifySelf:"flex-end"},title:{marginBottom:30,textAlign:"center"},formPaper:{width:"90%",maxWidth:500}}}))(wa),xa={formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10,marginBottom:10}},_a=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={listenerID:"",password:""},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){var t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.props.history,e.preventDefault(),a.setState({isLoading:!0}),o.prev=3,o.next=6,i.a.awrap(X.post("/api/listener/login",{listenerID:a.state.listenerID,password:a.state.password}));case 6:return n=o.sent,r=n.data.listenerID,sessionStorage.setItem("user",r),sessionStorage.setItem("loginMode",1),sessionStorage.setItem("historyDone",n.data.historyDone),sessionStorage.setItem("PTADone",n.data.PTADone),sessionStorage.setItem("assessmentDone",n.data.assessmentDone),sessionStorage.setItem("AFCDone",n.data.AFCDone),sessionStorage.setItem("leftEarIsWorse",n.data.leftEarIsWorse),o.next=17,i.a.awrap(a.props.context.updateUser());case 17:t.push("/"),o.next=25;break;case 20:o.prev=20,o.t0=o.catch(3),alert(o.t0),a.setState({isLoading:!1}),console.log(o.t0);case 25:case"end":return o.stop()}}),null,null,[[3,20]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.listenerID,n=t.password,o=t.isLoading,l=""===a||""===n||o;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(le.a,{variant:"outlined",required:!0,label:"Listener ID",id:"listenerID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(le.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(x.a,{variant:"contained",className:e.button,color:"primary",disabled:l,onClick:this.handleSubmit},"Submit"),o&&r.a.createElement(Mt.a,null))}}]),t}(n.Component),Sa=Object(R.a)(H,T.f,Object(E.a)(xa))(_a),ka=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={researcherID:"",password:""},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){var t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.props.history,e.preventDefault(),a.setState({isLoading:!0}),o.prev=3,o.next=6,i.a.awrap(X.post("/api/researcher/login",{researcherID:a.state.researcherID,password:a.state.password}));case 6:return n=o.sent,r=n.data.researcherID,sessionStorage.setItem("user",r),sessionStorage.setItem("loginMode","researcher"),sessionStorage.setItem("historyDone",!1),sessionStorage.setItem("PTADone",!1),sessionStorage.setItem("assessmentDone",!1),sessionStorage.setItem("AFCDone",!1),sessionStorage.setItem("leftEarIsWorse",!1),o.next=17,i.a.awrap(a.props.context.updateUser());case 17:t.push("/"),o.next=26;break;case 20:o.prev=20,o.t0=o.catch(3),alert(o.t0),a.setState({isLoading:!1}),alert(o.t0),console.log(o.t0);case 26:case"end":return o.stop()}}),null,null,[[3,20]])},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.listenerID,n=t.password,o=t.isLoading,l=""===a||""===n||o;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:e.formContent},r.a.createElement(le.a,{variant:"outlined",required:!0,label:"Researcher ID",id:"researcherID",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(le.a,{variant:"outlined",required:!0,type:"password",label:"Password",id:"password",onChange:this.handleInputChange,className:e.textField}),r.a.createElement(x.a,{variant:"contained",className:e.button,color:"primary",disabled:l,onClick:this.handleSubmit},"Submit"),o&&r.a.createElement(Mt.a,null))}}]),t}(n.Component),Na=Object(R.a)(H,T.f,Object(E.a)(xa))(ka),Oa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={loginMode:0,listenerID:"",password:"",isLoading:!1},a.handleInputChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleTabChange=function(e,t){a.setState({loginMode:t})},a.topBar=function(){var e=a.props.classes;return r.a.createElement("div",{className:e.topBar},r.a.createElement(w.a,{xsDown:!0},r.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary",className:e.topBarTitle},"Researcher and Listener Login")),r.a.createElement(x.a,{variant:"outlined",color:"secondary",className:e.topBarButton,component:P.b,to:"/signup"},"Sign up"))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.loginMode;return r.a.createElement("div",{className:e.root},this.topBar(),r.a.createElement("div",{className:e.title},r.a.createElement(y.a,{variant:"h4",gutterBottom:!0},"Welcom to Open Speech Platform"),r.a.createElement(y.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},"WebApps for hearing-aid research")),r.a.createElement("div",{className:e.content},r.a.createElement(Z.a,{className:e.formPaper},r.a.createElement(J.a,{value:t,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",id:"loginMode"},r.a.createElement(z.a,{label:"Researcher Login",value:0}),r.a.createElement(z.a,{label:"Listener Login",value:1})),0===t&&r.a.createElement(Na,null),1===t&&r.a.createElement(Sa,null))))}}]),t}(n.Component),Ia=Object(R.a)(H,T.f,Object(E.a)((function(e){return{root:{padding:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},topBar:{display:"flex",justifyContent:"space-between",marginBottom:30},topBarTitle:{marginLeft:50},topBarButton:{marginRight:50,justifySelf:"flex-end"},title:{marginBottom:30,textAlign:"center"},formPaper:{width:"90%",maxWidth:500},formContent:{paddingTop:30,paddingBottom:20,display:"flex",flexDirection:"column",alignItems:"center"},textField:{width:"90%",maxWidth:400,marginBottom:20},button:{width:"90%",maxWidth:300,marginTop:10}}})))(Oa),La=(a(315),Object(ma.a)({palette:{primary:{main:ha.a.A400},secondary:fa.a},typography:{fontFamily:'"Lato", sans-serif'}}));var Da=function(){return r.a.createElement(U,null,r.a.createElement(P.a,null,r.a.createElement(pa.a,{theme:La},r.a.createElement(Ea.a,null),r.a.createElement(T.c,null,r.a.createElement(T.a,{exact:!0,path:"/login"},r.a.createElement(Ia,null)),r.a.createElement(T.a,{path:"/signup"},r.a.createElement(Ca,null)),r.a.createElement(T.a,{path:"/"},r.a.createElement(ua,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Da,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},83:function(e,t,a){e.exports=a.p+"static/media/treeNodes.551fbd3c.csv"}},[[245,1,2]]]);
//# sourceMappingURL=main.14a458df.chunk.js.map